"use strict";var Zj=Object.defineProperty,Yj=Object.defineProperties,Qj=Object.getOwnPropertyDescriptors,bO=Object.getOwnPropertySymbols,Jj=Object.prototype.hasOwnProperty,Xj=Object.prototype.propertyIsEnumerable,CO=(Je,we,O)=>we in Je?Zj(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[we]=O,TO=(Je,we)=>{for(var O in we||(we={}))Jj.call(we,O)&&CO(Je,O,we[O]);if(bO)for(var O of bO(we))Xj.call(we,O)&&CO(Je,O,we[O]);return Je},DO=(Je,we)=>Yj(Je,Qj(we));(self.webpackChunkProyectoFinal=self.webpackChunkProyectoFinal||[]).push([[179],{2011:(Je,we,O)=>{O.d(we,{hO:()=>We,xv:()=>fe,Dh:()=>ue,GT:()=>ge,cc:()=>Re,on:()=>G,pX:()=>ie});var _=O(5e3),ee=O(127),F=O(5813);Je=O.hmd(Je);const ce=["ngOnDestroy"],ie=(Te,qe,Ye,Se={})=>new Proxy(Te,{get:(Ie,be)=>Ye.runOutsideAngular(()=>{var je;if(Te[be])return(null===(je=null==Se?void 0:Se.spy)||void 0===je?void 0:je.get)&&Se.spy.get(be,Te[be]),Te[be];if(ce.indexOf(be)>-1)return()=>{};const $e=qe.toPromise().then($=>{const Ee=$&&$[be];return"function"==typeof Ee?Ee.bind($):Ee&&Ee.then?Ee.then(Y=>Ye.run(()=>Y)):Ye.run(()=>Ee)});return new Proxy(()=>{},{get:($,Ee)=>$e[Ee],apply:($,Ee,Y)=>$e.then(se=>{var te;const ye=se&&se(...Y);return(null===(te=null==Se?void 0:Se.spy)||void 0===te?void 0:te.apply)&&Se.spy.apply(be,Y,ye),ye})})})}),ge=(Te,qe)=>{qe.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Se=>{Object.defineProperty(Te.prototype,Se,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Se))})})};class de{constructor(qe){return qe}}const ue=new _.OlP("angularfire2.app.options"),fe=new _.OlP("angularfire2.app.name");function G(Te,qe,Ye){const Ie="object"==typeof Ye&&Ye||{};Ie.name=Ie.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const je=ee.Z.apps.filter($e=>$e&&$e.name===Ie.name)[0]||qe.runOutsideAngular(()=>ee.Z.initializeApp(Te,Ie));try{JSON.stringify(Te)!==JSON.stringify(je.options)&&H("error",`${je.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new de(je)}const H=(Te,...qe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Te](...qe)},ne={provide:de,useFactory:G,deps:[ue,_.R0b,[new _.FiY,fe]]};let We=(()=>{class Te{constructor(Ye){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",_.q4F.full,Ye.toString())}static initializeApp(Ye,Se){return{ngModule:Te,providers:[{provide:ue,useValue:Ye},{provide:fe,useValue:Se}]}}}return Te.\u0275fac=function(Ye){return new(Ye||Te)(_.LFG(_.Lbi))},Te.\u0275mod=_.oAB({type:Te}),Te.\u0275inj=_.cJS({providers:[ne]}),Te})();function Re(Te,qe,Ye,Se,Ie){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Te)||[];if(be)return function Pe(Te,qe){try{return Te.toString()===qe.toString()}catch(Ye){return Te===qe}}(Ie,je)||(pe("error",`${qe} was already initialized on the ${Ye} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ie,was:je})),be;{const $e=Se();return globalThis.\u0275AngularfireInstanceCache.push([Te,$e,Ie]),$e}}const Be=!!Je.hot,pe=(Te,...qe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Te](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,O)=>{O.d(we,{q4:()=>ia,iC:()=>ua,fc:()=>Ys,HU:()=>hu,vb:()=>Ud,JM:()=>Og});var _=O(5e3),ee=O(5867),F=O(5861),ce=O(9681),ie=O(2090),ge=O(4859),de=O(1877),ue=O(8766);const fe="@firebase/installations",G="0.5.10",ne=`w:${G}`,We="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(C){return C instanceof ie.ZR&&C.code.includes("request-failed")}function Se({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:se(C.expiresIn),creationTime:Date.now()}}function be(C,D){return je.apply(this,arguments)}function je(){return(je=(0,F.Z)(function*(C,D){const V=(yield D.json()).error;return qe.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function $e({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function $(C,{refreshToken:D}){const k=$e(C);return k.append("Authorization",function te(C){return`${We} ${C}`}(D)),k}function Ee(C){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function se(C){return Number(C.replace("s","000"))}function ye(C,D){return le.apply(this,arguments)}function le(){return(le=(0,F.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:k}){const V=Se(C),Q=$e(C),re=D.getImmediate({optional:!0});if(re){const Rt=yield re.getHeartbeatsHeader();Rt&&Q.append("x-firebase-client",Rt)}const Ve={method:"POST",headers:Q,body:JSON.stringify({fid:k,authVersion:We,appId:C.appId,sdkVersion:ne})},vt=yield Ee(()=>fetch(V,Ve));if(vt.ok){const Rt=yield vt.json();return{fid:Rt.fid||k,registrationStatus:2,refreshToken:Rt.refreshToken,authToken:Ie(Rt.authToken)}}throw yield be("Create Installation",vt)})).apply(this,arguments)}function Fe(C){return new Promise(D=>{setTimeout(D,C)})}const jt=/^[cdef][\w-]{21}$/;function Qe(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const k=function sn(C){return function lt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return jt.test(k)?k:""}catch(C){return""}}function kn(C){return`${C.appName}!${C.appId}`}const an=new Map;function Jt(C,D){const k=kn(C);Lt(k,D),function ji(C,D){const k=function _r(){return!di&&"BroadcastChannel"in self&&(di=new BroadcastChannel("[Firebase] FID Change"),di.onmessage=C=>{Lt(C.data.key,C.data.fid)}),di}();k&&k.postMessage({key:C,fid:D}),function Or(){0===an.size&&di&&(di.close(),di=null)}()}(k,D)}function Lt(C,D){const k=an.get(C);if(k)for(const V of k)V(D)}let di=null;const Qr="firebase-installations-store";let Di=null;function _t(){return Di||(Di=(0,ue.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Qr)}})),Di}function hi(C,D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,F.Z)(function*(C,D){const k=kn(C),Q=(yield _t()).transaction(Qr,"readwrite"),re=Q.objectStore(Qr),ke=yield re.get(k);return yield re.put(D,k),yield Q.done,(!ke||ke.fid!==D.fid)&&Jt(C,D.fid),D})).apply(this,arguments)}function Mn(C){return Os.apply(this,arguments)}function Os(){return(Os=(0,F.Z)(function*(C){const D=kn(C),V=(yield _t()).transaction(Qr,"readwrite");yield V.objectStore(Qr).delete(D),yield V.done})).apply(this,arguments)}function Jr(C,D){return rr.apply(this,arguments)}function rr(){return(rr=(0,F.Z)(function*(C,D){const k=kn(C),Q=(yield _t()).transaction(Qr,"readwrite"),re=Q.objectStore(Qr),ke=yield re.get(k),Ve=D(ke);return void 0===Ve?yield re.delete(k):yield re.put(Ve,k),yield Q.done,Ve&&(!ke||ke.fid!==Ve.fid)&&Jt(C,Ve.fid),Ve})).apply(this,arguments)}function Nn(C){return fi.apply(this,arguments)}function fi(){return(fi=(0,F.Z)(function*(C){let D;const k=yield Jr(C.appConfig,V=>{const Q=lo(V),re=$t(C,Q);return D=re.registrationPromise,re.installationEntry});return""===k.fid?{installationEntry:yield D}:{installationEntry:k,registrationPromise:D}})).apply(this,arguments)}function lo(C){return co(C||{fid:Qe(),registrationStatus:0})}function $t(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(qe.create("app-offline"))};const k={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function rt(C,D){return Et.apply(this,arguments)}(C,k);return{installationEntry:k,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:yr(C)}:{installationEntry:D}}function Et(){return(Et=(0,F.Z)(function*(C,D){try{const k=yield ye(C,D);return hi(C.appConfig,k)}catch(k){throw Ye(k)&&409===k.customData.serverCode?yield Mn(C.appConfig):yield hi(C.appConfig,{fid:D.fid,registrationStatus:0}),k}})).apply(this,arguments)}function yr(C){return pi.apply(this,arguments)}function pi(){return(pi=(0,F.Z)(function*(C){let D=yield Ut(C.appConfig);for(;1===D.registrationStatus;)yield Fe(100),D=yield Ut(C.appConfig);if(0===D.registrationStatus){const{installationEntry:k,registrationPromise:V}=yield Nn(C);return V||k}return D})).apply(this,arguments)}function Ut(C){return Jr(C,D=>{if(!D)throw qe.create("installation-not-found");return co(D)})}function co(C){return function vr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function wr(C,D){return B.apply(this,arguments)}function B(){return(B=(0,F.Z)(function*({appConfig:C,heartbeatServiceProvider:D},k){const V=z(C,k),Q=$(C,k),re=D.getImmediate({optional:!0});if(re){const Rt=yield re.getHeartbeatsHeader();Rt&&Q.append("x-firebase-client",Rt)}const Ve={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:ne,appId:C.appId}})},vt=yield Ee(()=>fetch(V,Ve));if(vt.ok)return Ie(yield vt.json());throw yield be("Generate Auth Token",vt)})).apply(this,arguments)}function z(C,{fid:D}){return`${Se(C)}/${D}/authTokens:generate`}function K(C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,F.Z)(function*(C,D=!1){let k;const V=yield Jr(C.appConfig,re=>{if(!It(re))throw qe.create("not-registered");const ke=re.authToken;if(!D&&pn(ke))return re;if(1===ke.requestStatus)return k=W(C,D),re;{if(!navigator.onLine)throw qe.create("app-offline");const Ve=zn(re);return k=Xe(C,Ve),Ve}});return k?yield k:V.authToken})).apply(this,arguments)}function W(C,D){return X.apply(this,arguments)}function X(){return(X=(0,F.Z)(function*(C,D){let k=yield Me(C.appConfig);for(;1===k.authToken.requestStatus;)yield Fe(100),k=yield Me(C.appConfig);const V=k.authToken;return 0===V.requestStatus?K(C,D):V})).apply(this,arguments)}function Me(C){return Jr(C,D=>{if(!It(D))throw qe.create("not-registered");return function Fr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Xe(C,D){return ct.apply(this,arguments)}function ct(){return(ct=(0,F.Z)(function*(C,D){try{const k=yield wr(C,D),V=Object.assign(Object.assign({},D),{authToken:k});return yield hi(C.appConfig,V),k}catch(k){if(!Ye(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield hi(C.appConfig,V)}else yield Mn(C.appConfig);throw k}})).apply(this,arguments)}function It(C){return void 0!==C&&2===C.registrationStatus}function pn(C){return 2===C.requestStatus&&!function bt(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function zn(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function Va(){return(Va=(0,F.Z)(function*(C){const D=C,{installationEntry:k,registrationPromise:V}=yield Nn(D);return V?V.catch(console.error):K(D).catch(console.error),k.fid})).apply(this,arguments)}function Ba(){return(Ba=(0,F.Z)(function*(C,D=!1){const k=C;return yield Kn(k),(yield K(k,D)).token})).apply(this,arguments)}function Kn(C){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,F.Z)(function*(C){const{registrationPromise:D}=yield Nn(C);D&&(yield D)})).apply(this,arguments)}function Ho(C){return qe.create("missing-app-config-values",{valueName:C})}const ei="installations",at=C=>{const D=C.getProvider("app").getImmediate(),k=function dr(C){if(!C||!C.options)throw Ho("App Configuration");if(!C.name)throw Ho("App Name");const D=["projectId","apiKey","appId"];for(const k of D)if(!C.options[k])throw Ho(k);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:k,heartbeatServiceProvider:(0,ce._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},un=C=>{const D=C.getProvider("app").getImmediate(),k=(0,ce._getProvider)(D,ei).getImmediate();return{getId:()=>function $u(C){return Va.apply(this,arguments)}(k),getToken:Q=>function Hu(C){return Ba.apply(this,arguments)}(k,Q)}};(function ti(){(0,ce._registerComponent)(new ge.wA(ei,at,"PUBLIC")),(0,ce._registerComponent)(new ge.wA("installations-internal",un,"PRIVATE"))})(),(0,ce.registerVersion)(fe,G),(0,ce.registerVersion)(fe,G,"esm2017");const Hi="@firebase/remote-config",Pn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bg{constructor(D,k,V,Q){this.client=D,this.storage=k,this.storageCache=V,this.logger=Q}isCachedDataFresh(D,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-k,Q=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Q}.`),Q}fetch(D){var k=this;return(0,F.Z)(function*(){const[V,Q]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(Q&&k.isCachedDataFresh(D.cacheMaxAgeMillis,V))return Q;D.eTag=Q&&Q.eTag;const re=yield k.client.fetch(D),ke=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&ke.push(k.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(ke),re})()}}function pd(C=navigator){return C.languages&&C.languages[0]||C.language}class Ir{constructor(D,k,V,Q,re,ke){this.firebaseInstallations=D,this.sdkVersion=k,this.namespace=V,this.projectId=Q,this.apiKey=re,this.appId=ke}fetch(D){var k=this;return(0,F.Z)(function*(){var V,Q,re;const[ke,Ve]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},dt={sdk_version:k.sdkVersion,app_instance_id:ke,app_instance_id_token:Ve,app_id:k.appId,language_code:pd()},Tr={method:"POST",headers:Bt,body:JSON.stringify(dt)},si=fetch(Rt,Tr),la=new Promise((ys,is)=>{D.signal.addEventListener(()=>{const vs=new Error("The operation was aborted.");vs.name="AbortError",is(vs)})});let $r;try{yield Promise.race([si,la]),$r=yield si}catch(ys){let is="fetch-client-network";throw"AbortError"===(null===(V=ys)||void 0===V?void 0:V.name)&&(is="fetch-timeout"),Pn.create(is,{originalErrorMessage:null===(Q=ys)||void 0===Q?void 0:Q.message})}let Hr=$r.status;const pu=$r.headers.get("ETag")||void 0;let ki,ca;if(200===$r.status){let ys;try{ys=yield $r.json()}catch(is){throw Pn.create("fetch-client-parse",{originalErrorMessage:null===(re=is)||void 0===re?void 0:re.message})}ki=ys.entries,ca=ys.state}if("INSTANCE_STATE_UNSPECIFIED"===ca?Hr=500:"NO_CHANGE"===ca?Hr=304:("NO_TEMPLATE"===ca||"EMPTY_CONFIG"===ca)&&(ki={}),304!==Hr&&200!==Hr)throw Pn.create("fetch-status",{httpStatus:Hr});return{status:Hr,eTag:pu,config:ki}})()}}class Cg{constructor(D,k){this.client=D,this.storage=k}fetch(D){var k=this;return(0,F.Z)(function*(){const V=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:k,backoffCount:V}){var Q=this;return(0,F.Z)(function*(){yield function Bs(C,D){return new Promise((k,V)=>{const Q=Math.max(D-Date.now(),0),re=setTimeout(k,Q);C.addEventListener(()=>{clearTimeout(re),V(Pn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,k);try{const re=yield Q.client.fetch(D);return yield Q.storage.deleteThrottleMetadata(),re}catch(re){if(!function gd(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(re))throw re;const ke={throttleEndTimeMillis:Date.now()+(0,ie.$s)(V),backoffCount:V+1};return yield Q.storage.setThrottleMetadata(ke),Q.attemptFetch(D,ke)}})()}}class md{constructor(D,k,V,Q,re){this.app=D,this._client=k,this._storageCache=V,this._storage=Q,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ql(C,D){var k;const V=C.target.error||void 0;return Pn.create(D,{originalErrorMessage:V&&(null===(k=V)||void 0===k?void 0:k.message)})}const js="app_namespace_store";class Ag{constructor(D,k,V,Q=function Sg(){return new Promise((C,D)=>{var k;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Q=>{D(ql(Q,"storage-open"))},V.onsuccess=Q=>{C(Q.target.result)},V.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(js,{keyPath:"compositeKey"})}}catch(V){D(Pn.create("storage-open",{originalErrorMessage:null===(k=V)||void 0===k?void 0:k.message}))}})}()){this.appId=D,this.appName=k,this.namespace=V,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var k=this;return(0,F.Z)(function*(){const V=yield k.openDbPromise;return new Promise((Q,re)=>{var ke;const vt=V.transaction([js],"readonly").objectStore(js),Rt=k.createCompositeKey(D);try{const Bt=vt.get(Rt);Bt.onerror=dt=>{re(ql(dt,"storage-get"))},Bt.onsuccess=dt=>{const Tr=dt.target.result;Q(Tr?Tr.value:void 0)}}catch(Bt){re(Pn.create("storage-get",{originalErrorMessage:null===(ke=Bt)||void 0===ke?void 0:ke.message}))}})})()}set(D,k){var V=this;return(0,F.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((re,ke)=>{var Ve;const Rt=Q.transaction([js],"readwrite").objectStore(js),Bt=V.createCompositeKey(D);try{const dt=Rt.put({compositeKey:Bt,value:k});dt.onerror=Tr=>{ke(ql(Tr,"storage-set"))},dt.onsuccess=()=>{re()}}catch(dt){ke(Pn.create("storage-set",{originalErrorMessage:null===(Ve=dt)||void 0===Ve?void 0:Ve.message}))}})})()}delete(D){var k=this;return(0,F.Z)(function*(){const V=yield k.openDbPromise;return new Promise((Q,re)=>{var ke;const vt=V.transaction([js],"readwrite").objectStore(js),Rt=k.createCompositeKey(D);try{const Bt=vt.delete(Rt);Bt.onerror=dt=>{re(ql(dt,"storage-delete"))},Bt.onsuccess=()=>{Q()}}catch(Bt){re(Pn.create("storage-delete",{originalErrorMessage:null===(ke=Bt)||void 0===ke?void 0:ke.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class yd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const k=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),Q=D.storage.getActiveConfig(),re=yield k;re&&(D.lastFetchStatus=re);const ke=yield V;ke&&(D.lastSuccessfulFetchTimestampMillis=ke);const Ve=yield Q;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function zu(){return vd.apply(this,arguments)}function vd(){return(vd=(0,F.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Go(){(0,ce._registerComponent)(new ge.wA("remote-config",function C(D,{instanceIdentifier:k}){const V=D.getProvider("app").getImmediate(),Q=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,ie.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:re,apiKey:ke,appId:Ve}=V.options;if(!re)throw Pn.create("registration-project-id");if(!ke)throw Pn.create("registration-api-key");if(!Ve)throw Pn.create("registration-app-id");const vt=new Ag(Ve,V.name,k=k||"firebase"),Rt=new yd(vt),Bt=new de.Yd(Hi);Bt.logLevel=de.in.ERROR;const dt=new Ir(Q,ce.SDK_VERSION,k,re,ke,Ve),Tr=new Cg(dt,vt),si=new bg(Tr,vt,Rt,Bt),la=new md(V,si,Rt,vt,Bt);return function ln(C){const D=(0,ie.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Hi,"0.3.9"),(0,ce.registerVersion)(Hi,"0.3.9","esm2017")}();const wd="/firebase-messaging-sw.js",br="/firebase-cloud-messaging-push-scope",po="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wo="google.c.a.c_id",Ed="google.c.a.c_l",ff="google.c.a.ts",Id="google.c.a.e";var qo=(()=>{return(C=qo||(qo={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",qo;var C})();function Ur(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bd(C){const k=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(k),Q=new Uint8Array(V.length);for(let re=0;re<V.length;++re)Q[re]=V.charCodeAt(re);return Q}const Vr="fcm_token_details_db",gi="fcm_token_object_Store";function zl(C){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,F.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Vr))return null;let D=null;return(yield(0,ue.X3)(Vr,5,{upgrade:(V=(0,F.Z)(function*(Q,re,ke,Ve){var vt;if(re<2||!Q.objectStoreNames.contains(gi))return;const Rt=Ve.objectStore(gi),Bt=yield Rt.index("fcmSenderId").get(C);if(yield Rt.clear(),Bt)if(2===re){const dt=Bt;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;D={token:dt.fcmToken,createTime:null!==(vt=dt.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:Ur(dt.vapidKey)}}}else if(3===re){const dt=Bt;D={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Ur(dt.auth),p256dh:Ur(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Ur(dt.vapidKey)}}}else if(4===re){const dt=Bt;D={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Ur(dt.auth),p256dh:Ur(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Ur(dt.vapidKey)}}}}),function(re,ke,Ve,vt){return V.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Vr),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Kl(D)?D:null;var V}),Cd.apply(this,arguments)}function Kl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Zi="firebase-messaging-store";let pf=null;function cn(){return pf||(pf=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Zi)}})),pf}function Wa(C){return mo.apply(this,arguments)}function mo(){return(mo=(0,F.Z)(function*(C){const D=hr(C),V=yield(yield cn()).transaction(Zi).objectStore(Zi).get(D);if(V)return V;{const Q=yield zl(C.appConfig.senderId);if(Q)return yield tn(C,Q),Q}})).apply(this,arguments)}function tn(C,D){return qa.apply(this,arguments)}function qa(){return(qa=(0,F.Z)(function*(C,D){const k=hr(C),Q=(yield cn()).transaction(Zi,"readwrite");return yield Q.objectStore(Zi).put(D,k),yield Q.done,D})).apply(this,arguments)}function Ku(C){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(C){const D=hr(C),V=(yield cn()).transaction(Zi,"readwrite");yield V.objectStore(Zi).delete(D),yield V.done})).apply(this,arguments)}function hr({appConfig:C}){return C.appId}const wn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yi(C,D){return fr.apply(this,arguments)}function fr(){return(fr=(0,F.Z)(function*(C,D){const k=yield Zo(C),V=Yo(D),Q={method:"POST",headers:k,body:JSON.stringify(V)};let re;try{re=yield(yield fetch(Qi(C.appConfig),Q)).json()}catch(ke){throw wn.create("token-subscribe-failed",{errorInfo:ke})}if(re.error)throw wn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw wn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function _o(C,D){return ds.apply(this,arguments)}function ds(){return(ds=(0,F.Z)(function*(C,D){const k=yield Zo(C),V=Yo(D.subscriptionOptions),Q={method:"PATCH",headers:k,body:JSON.stringify(V)};let re;try{re=yield(yield fetch(`${Qi(C.appConfig)}/${D.token}`,Q)).json()}catch(ke){throw wn.create("token-update-failed",{errorInfo:ke})}if(re.error)throw wn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw wn.create("token-update-no-token");return re.token})).apply(this,arguments)}function za(C,D){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,F.Z)(function*(C,D){const V={method:"DELETE",headers:yield Zo(C)};try{const re=yield(yield fetch(`${Qi(C.appConfig)}/${D}`,V)).json();if(re.error)throw wn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Q){throw wn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function Qi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Zo(C){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*({appConfig:C,installations:D}){const k=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Yo({p256dh:C,auth:D,endpoint:k,vapidKey:V}){const Q={web:{endpoint:k,auth:D,p256dh:C}};return V!==po&&(Q.web.applicationPubKey=V),Q}const Zu=6048e5;function Ka(C){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,F.Z)(function*(C){const D=yield yn(C.swRegistration,C.vapidKey),k={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:Ur(D.getKey("auth")),p256dh:Ur(D.getKey("p256dh"))},V=yield Wa(C.firebaseDependencies);if(V){if(yo(V.subscriptionOptions,k))return Date.now()>=V.createTime+Zu?Xl(C,{token:V.token,createTime:Date.now(),subscriptionOptions:k}):V.token;try{yield za(C.firebaseDependencies,V.token)}catch(Q){console.warn(Q)}return Nt(C.firebaseDependencies,k)}return Nt(C.firebaseDependencies,k)})).apply(this,arguments)}function Za(C){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,F.Z)(function*(C){const D=yield Wa(C.firebaseDependencies);D&&(yield za(C.firebaseDependencies,D.token),yield Ku(C.firebaseDependencies));const k=yield C.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Xl(C,D){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(C,D){try{const k=yield _o(C.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:k,createTime:Date.now()});return yield tn(C.firebaseDependencies,V),k}catch(k){throw yield Za(C),k}})).apply(this,arguments)}function Nt(C,D){return ec.apply(this,arguments)}function ec(){return(ec=(0,F.Z)(function*(C,D){const V={token:yield Yi(C,D),createTime:Date.now(),subscriptionOptions:D};return yield tn(C,V),V.token})).apply(this,arguments)}function yn(C,D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bd(D)})})).apply(this,arguments)}function yo(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function mi(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Ya(C,D){if(!D.notification)return;C.notification={};const k=D.notification.title;k&&(C.notification.title=k);const V=D.notification.body;V&&(C.notification.body=V);const Q=D.notification.image;Q&&(C.notification.image=Q)}(D,C),function tc(C,D){!D.data||(C.data=D.data)}(D,C),function xg(C,D){var k,V,Q,re,ke;if(!D.fcmOptions&&!(null===(k=D.notification)||void 0===k?void 0:k.click_action))return;C.fcmOptions={};const Ve=null!==(Q=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Q?Q:null===(re=D.notification)||void 0===re?void 0:re.click_action;Ve&&(C.fcmOptions.link=Ve);const vt=null===(ke=D.fcmOptions)||void 0===ke?void 0:ke.analytics_label;vt&&(C.fcmOptions.analyticsLabel=vt)}(D,C),D}function Yu(C){return"object"==typeof C&&!!C&&Wo in C}function Qa(C,D){const k=[];for(let V=0;V<C.length;V++)k.push(C.charAt(V)),V<D.length&&k.push(D.charAt(V));return k.join("")}function On(C){return wn.create("missing-app-config-values",{valueName:C})}Qa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hs{constructor(D,k,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Qu(C){if(!C||!C.options)throw On("App Configuration Object");if(!C.name)throw On("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:k}=C;for(const V of D)if(!k[V])throw On(V);return{appName:C.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Q,installations:k,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ja(C){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,F.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(wd,{scope:br}),C.swRegistration.update().catch(()=>{})}catch(k){throw wn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=k)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function xi(C,D){return nc.apply(this,arguments)}function nc(){return(nc=(0,F.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield Ja(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Ju(C,D){return rc.apply(this,arguments)}function rc(){return(rc=(0,F.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=po)})).apply(this,arguments)}function Xa(){return(Xa=(0,F.Z)(function*(C,D){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wn.create("permission-blocked");return yield Ju(C,null==D?void 0:D.vapidKey),yield xi(C,null==D?void 0:D.serviceWorkerRegistration),Ka(C)})).apply(this,arguments)}function eu(C,D,k){return ic.apply(this,arguments)}function ic(){return(ic=(0,F.Z)(function*(C,D,k){const V=tu(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:k[Wo],message_name:k[Ed],message_time:k[ff],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tu(C){switch(C){case qo.NOTIFICATION_CLICKED:return"notification_open";case qo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sc(){return(sc=(0,F.Z)(function*(C,D){const k=D.data;if(!k.isFirebaseMessaging)return;C.onMessageHandler&&k.messageType===qo.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(mi(k)):C.onMessageHandler.next(mi(k)));const V=k.data;Yu(V)&&"1"===V[Id]&&(yield eu(C,k.messageType,V))})).apply(this,arguments)}const Jo="@firebase/messaging",Td=C=>{const D=new hs(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Rg(C,D){return sc.apply(this,arguments)}(D,k)),D},Xo=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:V=>function Xu(C,D){return Xa.apply(this,arguments)}(D,V)}};function ea(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,F.Z)(function*(){try{yield(0,ie.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Dd(){(0,ce._registerComponent)(new ge.wA("messaging",Td,"PUBLIC")),(0,ce._registerComponent)(new ge.wA("messaging-internal",Xo,"PRIVATE")),(0,ce.registerVersion)(Jo,"0.9.14"),(0,ce.registerVersion)(Jo,"0.9.14","esm2017")}();const Sd="analytics",kg="firebase_id",fs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ta="https://www.googletagmanager.com/gtag/js",or=new de.Yd("@firebase/analytics");function _f(C){return Promise.all(C.map(D=>D.catch(k=>k)))}function vo(C,D){const k=document.createElement("script");k.src=`${ta}?l=${C}&id=${D}`,k.async=!0,document.head.appendChild(k)}function xd(C,D,k,V,Q,re){return tl.apply(this,arguments)}function tl(){return(tl=(0,F.Z)(function*(C,D,k,V,Q,re){const ke=V[Q];try{if(ke)yield D[ke];else{const vt=(yield _f(k)).find(Rt=>Rt.measurementId===Q);vt&&(yield D[vt.appId])}}catch(Ve){or.error(Ve)}C("config",Q,re)})).apply(this,arguments)}function nl(C,D,k,V,Q){return wo.apply(this,arguments)}function wo(){return(wo=(0,F.Z)(function*(C,D,k,V,Q){try{let re=[];if(Q&&Q.send_to){let ke=Q.send_to;Array.isArray(ke)||(ke=[ke]);const Ve=yield _f(k);for(const vt of ke){const Rt=Ve.find(dt=>dt.measurementId===vt),Bt=Rt&&D[Rt.appId];if(!Bt){re=[];break}re.push(Bt)}}0===re.length&&(re=Object.values(D)),yield Promise.all(re),C("event",V,Q||{})}catch(re){or.error(re)}})).apply(this,arguments)}function Yn(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(ta))return D;return null}const Fn=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),iu=new class Ln{constructor(D={},k=1e3){this.throttleMetadata=D,this.intervalMillis=k}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,k){this.throttleMetadata[D]=k}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function su(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function ri(C){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,F.Z)(function*(C){var D;const{appId:k,apiKey:V}=C,Q={method:"GET",headers:su(V)},re=fs.replace("{app-id}",k),ke=yield fetch(re,Q);if(200!==ke.status&&304!==ke.status){let Ve="";try{const vt=yield ke.json();(null===(D=vt.error)||void 0===D?void 0:D.message)&&(Ve=vt.error.message)}catch(vt){}throw Fn.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Ve})}return ke.json()})).apply(this,arguments)}function xt(C){return En.apply(this,arguments)}function En(){return(En=(0,F.Z)(function*(C,D=iu,k){const{appId:V,apiKey:Q,measurementId:re}=C.options;if(!V)throw Fn.create("no-app-id");if(!Q){if(re)return{measurementId:re,appId:V};throw Fn.create("no-api-key")}const ke=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Md;return setTimeout((0,F.Z)(function*(){Ve.abort()}),void 0!==k?k:6e4),yt({appId:V,apiKey:Q,measurementId:re},ke,Ve,D)})).apply(this,arguments)}function yt(C,D,k){return kd.apply(this,arguments)}function kd(){return(kd=(0,F.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:k},V,Q=iu){const{appId:re,measurementId:ke}=C;try{yield rl(V,D)}catch(Ve){if(ke)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:re,measurementId:ke};throw Ve}try{const Ve=yield ri(C);return Q.deleteThrottleMetadata(re),Ve}catch(Ve){if(!oc(Ve)){if(Q.deleteThrottleMetadata(re),ke)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ke} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:re,measurementId:ke};throw Ve}const vt=503===Number(Ve.customData.httpStatus)?(0,ie.$s)(k,Q.intervalMillis,30):(0,ie.$s)(k,Q.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+vt,backoffCount:k+1};return Q.setThrottleMetadata(re,Rt),or.debug(`Calling attemptFetch again in ${vt} millis`),yt(C,Rt,V,Q)}})).apply(this,arguments)}function rl(C,D){return new Promise((k,V)=>{const Q=Math.max(D-Date.now(),0),re=setTimeout(k,Q);C.addEventListener(()=>{clearTimeout(re),V(Fn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function oc(C){if(!(C instanceof ie.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Md{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Nd(){return es.apply(this,arguments)}function es(){return(es=(0,F.Z)(function*(){if(!(0,ie.hl)())return or.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return or.warn(Fn.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Gs(){return(Gs=(0,F.Z)(function*(C,D,k,V,Q,re,ke){var Ve;const vt=xt(C);vt.then(si=>{k[si.measurementId]=si.appId,C.options.measurementId&&si.measurementId!==C.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(si=>or.error(si)),D.push(vt);const Rt=Nd().then(si=>{if(si)return V.getId()}),[Bt,dt]=yield Promise.all([vt,Rt]);Yn()||vo(re,Bt.measurementId),Q("js",new Date);const Tr=null!==(Ve=null==ke?void 0:ke.config)&&void 0!==Ve?Ve:{};return Tr.origin="firebase",Tr.update=!0,null!=dt&&(Tr[kg]=dt),Q("config",Bt.measurementId,Tr),Bt.measurementId})).apply(this,arguments)}class ps{constructor(D){this.app=D}_delete(){return delete pr[this.app.options.appId],Promise.resolve()}}let pr={},Pd=[];const ts={};let il,gs,_i="dataLayer",Vt=!1;function Ng(C,D,k){!function Ws(){const C=[];if((0,ie.ru)()&&C.push("This is a browser extension environment."),(0,ie.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((V,Q)=>`(${Q+1}) ${V}`).join(" "),k=Fn.create("invalid-analytics-context",{errorInfo:D});or.warn(k.message)}}();const V=C.options.appId;if(!V)throw Fn.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Fn.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pr[V])throw Fn.create("already-exists",{id:V});if(!Vt){!function el(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(_i);const{wrappedGtag:re,gtagCore:ke}=function Mg(C,D,k,V,Q){let re=function(...ke){window[V].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(re=window[Q]),window[Q]=function Rd(C,D,k,V){function re(){return(re=(0,F.Z)(function*(ke,Ve,vt){try{"event"===ke?yield nl(C,D,k,Ve,vt):"config"===ke?yield xd(C,D,k,V,Ve,vt):C("set",Ve)}catch(Rt){or.error(Rt)}})).apply(this,arguments)}return function Q(ke,Ve,vt){return re.apply(this,arguments)}}(re,C,D,k),{gtagCore:re,wrappedGtag:window[Q]}}(pr,Pd,ts,_i,"gtag");gs=re,il=ke,Vt=!0}return pr[V]=function Br(C,D,k,V,Q,re,ke){return Gs.apply(this,arguments)}(C,Pd,ts,D,il,_i,k),new ps(C)}function ol(){return(ol=(0,F.Z)(function*(C,D,k,V,Q){if(Q&&Q.global)C("event",k,V);else{const re=yield D;C("event",k,Object.assign(Object.assign({},V),{send_to:re}))}})).apply(this,arguments)}function ty(){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,F.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(C){return!1}})).apply(this,arguments)}const Ri="@firebase/analytics";!function Pg(){(0,ce._registerComponent)(new ge.wA(Sd,(D,{options:k})=>Ng(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ce._registerComponent)(new ge.wA("analytics-internal",function C(D){try{const k=D.getProvider(Sd).getImmediate();return{logEvent:(V,Q,re)=>function P(C,D,k,V){C=(0,ie.m9)(C),function na(C,D,k,V,Q){return ol.apply(this,arguments)}(gs,pr[C.app.options.appId],D,k,V).catch(Q=>or.error(Q))}(k,V,Q,re)}}catch(k){throw Fn.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ce.registerVersion)(Ri,"0.7.10"),(0,ce.registerVersion)(Ri,"0.7.10","esm2017")}();var lu=O(4408),Yt=O(7565);const _s=new class ra extends Yt.v{}(class ar extends lu.o{constructor(D,k){super(D,k),this.scheduler=D,this.work=k}schedule(D,k=0){return k>0?super.schedule(D,k):(this.delay=k,this.state=D,this.scheduler.flush(this),this)}execute(D,k){return k>0||this.closed?super.execute(D,k):this._execute(D,k)}requestAsyncId(D,k,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,k,V):D.flush(this)}});var lc=O(4986),yi=O(8505),jr=O(5363),cu=O(9468);const ia=new _.GfV("7.4.1"),Co="__angularfire_symbol__analyticsIsSupportedValue",sa="__angularfire_symbol__analyticsIsSupported",Sn="__angularfire_symbol__remoteConfigIsSupportedValue",vi="__angularfire_symbol__remoteConfigIsSupported",du="__angularfire_symbol__messagingIsSupportedValue",Ld="__angularfire_symbol__messagingIsSupported";function Og(C,D,k){if(D){if(1===D.length)return D[0];const re=D.filter(ke=>ke.app===k);if(1===re.length)return re[0]}return k.container.getProvider(C).getImmediate({optional:!0})}globalThis[sa]||(globalThis[sa]=ty().then(C=>globalThis[Co]=C).catch(()=>globalThis[Co]=!1)),globalThis[Ld]||(globalThis[Ld]=ea().then(C=>globalThis[du]=C).catch(()=>globalThis[du]=!1)),globalThis[vi]||(globalThis[vi]=zu().then(C=>globalThis[Sn]=C).catch(()=>globalThis[Sn]=!1));const Ud=(C,D)=>{const k=D?[D]:(0,ee.C6)(),V=[];return k.forEach(Q=>{Q.container.getProvider(C).instances.forEach(ke=>{V.includes(ke)||V.push(ke)})}),V};function Zs(){}class Vd{constructor(D,k=_s){this.zone=D,this.delegate=k}now(){return this.delegate.now()}schedule(D,k,V){const Q=this.zone;return this.delegate.schedule(function(ke){Q.runGuarded(()=>{D.apply(this,[ke])})},k,V)}}class cc{constructor(D){this.zone=D,this.task=null}call(D,k){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs)),k.pipe((0,yi.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hu=(()=>{class C{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Vd(Zone.current)),this.insideAngular=k.run(()=>new Vd(Zone.current,lc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(k){return new(k||C)(_.LFG(_.R0b))},C.\u0275prov=_.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ns(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Ys(C){return C.pipe((0,jr.Q)(ns().outsideAngular))}function ua(C){return ns(),function fu(C){return function(k){return(k=k.lift(new cc(C.ngZone))).pipe((0,cu.R)(C.outsideAngular),(0,jr.Q)(C.insideAngular))}}(ns())(C)}},2090:(Je,we,O)=>{O.d(we,{BH:()=>We,LL:()=>le,ZR:()=>ye,gQ:()=>Qr,zI:()=>Y,hu:()=>ee,g5:()=>F,US:()=>ge,tV:()=>fe,h$:()=>de,L:()=>ue,$s:()=>Ut,r3:()=>Pr,Sg:()=>Re,ne:()=>Di,p$:()=>G,vZ:()=>di,ZB:()=>H,gK:()=>Jr,pd:()=>Ps,m9:()=>wr,z$:()=>Pe,GJ:()=>Jt,jU:()=>Te,ru:()=>qe,d:()=>Se,xb:()=>Lt,w1:()=>Ie,hl:()=>$,uI:()=>Be,UG:()=>pe,Yr:()=>je,b$:()=>Ye,G6:()=>$e,Mn:()=>be,w9:()=>an,cI:()=>jt,UI:()=>ji,xO:()=>Or,zd:()=>$i,DV:()=>qt,ug:()=>$t,dS:()=>lo,Pz:()=>Ft,Dv:()=>Os,Wj:()=>Nn,lb:()=>fi,eu:()=>Ee});const ee=function(B,z){if(!B)throw F(z)},F=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},ce=function(B){const z=[];let K=0;for(let Ce=0;Ce<B.length;Ce++){let W=B.charCodeAt(Ce);W<128?z[K++]=W:W<2048?(z[K++]=W>>6|192,z[K++]=63&W|128):55296==(64512&W)&&Ce+1<B.length&&56320==(64512&B.charCodeAt(Ce+1))?(W=65536+((1023&W)<<10)+(1023&B.charCodeAt(++Ce)),z[K++]=W>>18|240,z[K++]=W>>12&63|128,z[K++]=W>>6&63|128,z[K++]=63&W|128):(z[K++]=W>>12|224,z[K++]=W>>6&63|128,z[K++]=63&W|128)}return z},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,z){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let W=0;W<B.length;W+=3){const X=B[W],Me=W+1<B.length,Xe=Me?B[W+1]:0,ct=W+2<B.length,It=ct?B[W+2]:0;let zn=(15&Xe)<<2|It>>6,Fr=63&It;ct||(Fr=64,Me||(zn=64)),Ce.push(K[X>>2],K[(3&X)<<4|Xe>>4],K[zn],K[Fr])}return Ce.join("")},encodeString(B,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(B):this.encodeByteArray(ce(B),z)},decodeString(B,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(B):function(B){const z=[];let K=0,Ce=0;for(;K<B.length;){const W=B[K++];if(W<128)z[Ce++]=String.fromCharCode(W);else if(W>191&&W<224){const X=B[K++];z[Ce++]=String.fromCharCode((31&W)<<6|63&X)}else if(W>239&&W<365){const ct=((7&W)<<18|(63&B[K++])<<12|(63&B[K++])<<6|63&B[K++])-65536;z[Ce++]=String.fromCharCode(55296+(ct>>10)),z[Ce++]=String.fromCharCode(56320+(1023&ct))}else{const X=B[K++],Me=B[K++];z[Ce++]=String.fromCharCode((15&W)<<12|(63&X)<<6|63&Me)}}return z.join("")}(this.decodeStringToByteArray(B,z))},decodeStringToByteArray(B,z){this.init_();const K=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let W=0;W<B.length;){const X=K[B.charAt(W++)],Xe=W<B.length?K[B.charAt(W)]:0;++W;const It=W<B.length?K[B.charAt(W)]:64;++W;const bt=W<B.length?K[B.charAt(W)]:64;if(++W,null==X||null==Xe||null==It||null==bt)throw Error();Ce.push(X<<2|Xe>>4),64!==It&&(Ce.push(Xe<<4&240|It>>2),64!==bt&&Ce.push(It<<6&192|bt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},de=function(B){const z=ce(B);return ge.encodeByteArray(z,!0)},ue=function(B){return de(B).replace(/\./g,"")},fe=function(B){try{return ge.decodeString(B,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function G(B){return H(void 0,B)}function H(B,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return z}for(const K in z)!z.hasOwnProperty(K)||!ne(K)||(B[K]=H(B[K],z[K]));return B}function ne(B){return"__proto__"!==B}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,K)=>{this.resolve=z,this.reject=K})}wrapCallback(z){return(K,Ce)=>{K?this.reject(K):this.resolve(Ce),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(K):z(K,Ce))}}}function Re(B,z){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=z||"demo-project",W=B.iat||0,X=B.sub||B.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:W,exp:W+3600,auth_time:W,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Me)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Te(){return"object"==typeof self&&self.self===self}function qe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return Pe().indexOf("Electron/")>=0}function Ie(){const B=Pe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function be(){return Pe().indexOf("MSAppHost/")>=0}function je(){return!1}function $e(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function Ee(){return new Promise((B,z)=>{try{let K=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(Ce);W.onsuccess=()=>{W.result.close(),K||self.indexedDB.deleteDatabase(Ce),B(!0)},W.onupgradeneeded=()=>{K=!1},W.onerror=()=>{var X;z((null===(X=W.error)||void 0===X?void 0:X.message)||"")}}catch(K){z(K)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(z,K,Ce){super(K),this.code=z,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(z,K,Ce){this.service=z,this.serviceName=K,this.errors=Ce}create(z,...K){const Ce=K[0]||{},W=`${this.service}/${z}`,X=this.errors[z],Me=X?function Fe(B,z){return B.replace(lt,(K,Ce)=>{const W=z[Ce];return null!=W?String(W):`<${Ce}?>`})}(X,Ce):"Error";return new ye(W,`${this.serviceName}: ${Me} (${W}).`,Ce)}}const lt=/\{\$([^}]+)}/g;function jt(B){return JSON.parse(B)}function Ft(B){return JSON.stringify(B)}const Qe=function(B){let z={},K={},Ce={},W="";try{const X=B.split(".");z=jt(fe(X[0])||""),K=jt(fe(X[1])||""),W=X[2],Ce=K.d||{},delete K.d}catch(X){}return{header:z,claims:K,data:Ce,signature:W}},an=function(B){const K=Qe(B).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Jt=function(B){const z=Qe(B).claims;return"object"==typeof z&&!0===z.admin};function Pr(B,z){return Object.prototype.hasOwnProperty.call(B,z)}function qt(B,z){if(Object.prototype.hasOwnProperty.call(B,z))return B[z]}function Lt(B){for(const z in B)if(Object.prototype.hasOwnProperty.call(B,z))return!1;return!0}function ji(B,z,K){const Ce={};for(const W in B)Object.prototype.hasOwnProperty.call(B,W)&&(Ce[W]=z.call(K,B[W],W,B));return Ce}function di(B,z){if(B===z)return!0;const K=Object.keys(B),Ce=Object.keys(z);for(const W of K){if(!Ce.includes(W))return!1;const X=B[W],Me=z[W];if(_r(X)&&_r(Me)){if(!di(X,Me))return!1}else if(X!==Me)return!1}for(const W of Ce)if(!K.includes(W))return!1;return!0}function _r(B){return null!==B&&"object"==typeof B}function Or(B){const z=[];for(const[K,Ce]of Object.entries(B))Array.isArray(Ce)?Ce.forEach(W=>{z.push(encodeURIComponent(K)+"="+encodeURIComponent(W))}):z.push(encodeURIComponent(K)+"="+encodeURIComponent(Ce));return z.length?"&"+z.join("&"):""}function $i(B){const z={};return B.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[W,X]=Ce.split("=");z[decodeURIComponent(W)]=decodeURIComponent(X)}}),z}function Ps(B){const z=B.indexOf("?");if(!z)return"";const K=B.indexOf("#",z);return B.substring(z,K>0?K:void 0)}class Qr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,K){K||(K=0);const Ce=this.W_;if("string"==typeof z)for(let bt=0;bt<16;bt++)Ce[bt]=z.charCodeAt(K)<<24|z.charCodeAt(K+1)<<16|z.charCodeAt(K+2)<<8|z.charCodeAt(K+3),K+=4;else for(let bt=0;bt<16;bt++)Ce[bt]=z[K]<<24|z[K+1]<<16|z[K+2]<<8|z[K+3],K+=4;for(let bt=16;bt<80;bt++){const zn=Ce[bt-3]^Ce[bt-8]^Ce[bt-14]^Ce[bt-16];Ce[bt]=4294967295&(zn<<1|zn>>>31)}let It,pn,W=this.chain_[0],X=this.chain_[1],Me=this.chain_[2],Xe=this.chain_[3],ct=this.chain_[4];for(let bt=0;bt<80;bt++){bt<40?bt<20?(It=Xe^X&(Me^Xe),pn=1518500249):(It=X^Me^Xe,pn=1859775393):bt<60?(It=X&Me|Xe&(X|Me),pn=2400959708):(It=X^Me^Xe,pn=3395469782);const zn=(W<<5|W>>>27)+It+ct+pn+Ce[bt]&4294967295;ct=Xe,Xe=Me,Me=4294967295&(X<<30|X>>>2),X=W,W=zn}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+X&4294967295,this.chain_[2]=this.chain_[2]+Me&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+ct&4294967295}update(z,K){if(null==z)return;void 0===K&&(K=z.length);const Ce=K-this.blockSize;let W=0;const X=this.buf_;let Me=this.inbuf_;for(;W<K;){if(0===Me)for(;W<=Ce;)this.compress_(z,W),W+=this.blockSize;if("string"==typeof z){for(;W<K;)if(X[Me]=z.charCodeAt(W),++Me,++W,Me===this.blockSize){this.compress_(X),Me=0;break}}else for(;W<K;)if(X[Me]=z[W],++Me,++W,Me===this.blockSize){this.compress_(X),Me=0;break}}this.inbuf_=Me,this.total_+=K}digest(){const z=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&K,K/=256;this.compress_(this.buf_);let Ce=0;for(let W=0;W<5;W++)for(let X=24;X>=0;X-=8)z[Ce]=this.chain_[W]>>X&255,++Ce;return z}}function Di(B,z){const K=new _t(B,z);return K.subscribe.bind(K)}class _t{constructor(z,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{z(this)}).catch(Ce=>{this.error(Ce)})}next(z){this.forEachObserver(K=>{K.next(z)})}error(z){this.forEachObserver(K=>{K.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,K,Ce){let W;if(void 0===z&&void 0===K&&void 0===Ce)throw new Error("Missing Observer.");W=function Cn(B,z){if("object"!=typeof B||null===B)return!1;for(const K of z)if(K in B&&"function"==typeof B[K])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:K,complete:Ce},void 0===W.next&&(W.next=Mn),void 0===W.error&&(W.error=Mn),void 0===W.complete&&(W.complete=Mn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(Me){}}),this.observers.push(W),X}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,z)}sendOne(z,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{K(this.observers[z])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}const Os=function(B,z,K,Ce){let W;if(Ce<z?W="at least "+z:Ce>K&&(W=0===K?"none":"no more than "+K),W)throw new Error(B+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+W+".")};function Jr(B,z){return`${B} failed: ${z} argument `}function Nn(B,z,K,Ce){if((!Ce||K)&&"function"!=typeof K)throw new Error(Jr(B,z)+"must be a valid function.")}function fi(B,z,K,Ce){if((!Ce||K)&&("object"!=typeof K||null===K))throw new Error(Jr(B,z)+"must be a valid context object.")}const lo=function(B){const z=[];let K=0;for(let Ce=0;Ce<B.length;Ce++){let W=B.charCodeAt(Ce);if(W>=55296&&W<=56319){const X=W-55296;Ce++,ee(Ce<B.length,"Surrogate pair missing trail surrogate."),W=65536+(X<<10)+(B.charCodeAt(Ce)-56320)}W<128?z[K++]=W:W<2048?(z[K++]=W>>6|192,z[K++]=63&W|128):W<65536?(z[K++]=W>>12|224,z[K++]=W>>6&63|128,z[K++]=63&W|128):(z[K++]=W>>18|240,z[K++]=W>>12&63|128,z[K++]=W>>6&63|128,z[K++]=63&W|128)}return z},$t=function(B){let z=0;for(let K=0;K<B.length;K++){const Ce=B.charCodeAt(K);Ce<128?z++:Ce<2048?z+=2:Ce>=55296&&Ce<=56319?(z+=4,K++):z+=3}return z};function Ut(B,z=1e3,K=2){const Ce=z*Math.pow(K,B),W=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+W)}function wr(B){return B&&B._delegate?B._delegate:B}},5036:(Je,we,O)=>{var _=O(5e3);let ee=null;function F(){return ee}const de=new _.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function fe(){return(0,_.LFG)(H)}()},providedIn:"platform"}),n})();const G=new _.OlP("Location Initialized");let H=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(de))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function We(){return new H((0,_.LFG)(de))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:function(){return function Te(n){const e=(0,_.LFG)(de).location;return new Ye((0,_.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new _.OlP("appBaseHref");let Ye=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Be(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Be(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(qe,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Be(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Be(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ue),_.LFG(qe,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n{constructor(t,r){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe($e(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Re,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(_.LFG(pe),_.LFG(ue))},n.\u0275prov=_.Yz7({token:n,factory:function(){return function be(){return new Ie((0,_.LFG)(pe),(0,_.LFG)(ue))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}class Us{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ir=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Us(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),fo(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{fo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},n.\u0275dir=_.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function fo(n,e){n.context.$implicit=e.item}let Id=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function zo(n){return"server"===n}let Kl=(()=>{class n{}return n.\u0275prov=(0,_.Yz7)({token:n,providedIn:"root",factory:()=>new Ko((0,_.LFG)(de),window)}),n})();class Ko{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Zi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Zl(this.window.history)||Zl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Zl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mo extends class Wa extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){ee||(ee=n)}(new mo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qa(){return tn=tn||document.querySelector("base"),tn?tn.getAttribute("href"):null}();return null==t?null:function $s(n){Ku=Ku||document.createElement("a"),Ku.setAttribute("href",n);const e=Ku.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){tn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function $a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ku,tn=null;const hr=new _.OlP("TRANSITION_ID"),wn=[{provide:_.ip1,useFactory:function Yl(n,e,t){return()=>{t.get(_.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[hr,de,_.zs3],multi:!0}];class Yi{static init(){(0,_.VLi)(new Yi)}addToWindow(e){_.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(r=>{const i=_.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const _o=new _.OlP("EventManagerPlugins");let ds=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_o),_.LFG(_.R0b))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ai=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),Qi=(()=>{class n extends Ai{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zo))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(de))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function Zo(n){F().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yo=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ae(n,i,t):(i=i.replace(Yo,n),t.push(i))}return t}function Nt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let yn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case _.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ya(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case _.ifc.ShadowDom:return new tc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(ds),_.LFG(Qi),_.LFG(_.AFp))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();class Qo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=gt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_.JOm.DashCase|_.JOm.Important)?e.style.setProperty(t,r,i&_.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nt(r)):this.eventManager.addEventListener(e,t,Nt(r))}}class Ya extends Qo{constructor(e,t,r,i){super(e),this.component=r;const a=Ae(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Jl(n){return"_ngcontent-%COMP%".replace(Yo,n)}(i+"-"+r.id),this.hostAttr=function Xl(n){return"_nghost-%COMP%".replace(Yo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class tc extends Qo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ae(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xg=(()=>{class n extends za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(de))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=["alt","control","meta","shift"],Qu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},On={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ja=(()=>{class n extends za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Yu.forEach(m=>{const w=r.indexOf(m);w>-1&&(r.splice(w,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Hs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&On.hasOwnProperty(e)&&(e=On[e]))}return Qu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Yu.forEach(a=>{a!=i&&hs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(de))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Xu=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function xi(){mo.makeCurrent(),Yi.init()},multi:!0},{provide:de,useFactory:function Ju(){return(0,_.RDi)(document),document},deps:[]}]),Xa=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function nc(){return new _.qLn},deps:[]},{provide:_o,useClass:xg,multi:!0,deps:[de,_.R0b,_.Lbi]},{provide:_o,useClass:Ja,multi:!0,deps:[de]},{provide:yn,useClass:yn,deps:[ds,Qi,_.AFp]},{provide:_.FYo,useExisting:yn},{provide:Ai,useExisting:Qi},{provide:Qi,useClass:Qi,deps:[de]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:ds,useClass:ds,deps:[_o,_.R0b]},{provide:class cn{},useClass:fr,deps:[]}];let eu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:_.AFp,useValue:t.appId},{provide:hr,useExisting:_.AFp},wn]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(n,12))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:Xa,imports:[Id,_.hGG]}),n})();"undefined"!=typeof window&&window;var Yn=O(2011),Eo=O(7579),Fn=O(7669),nn=O(8996);function mt(...n){const e=(0,Fn.yG)(n);return(0,nn.D)(n,e)}var Ln=O(8306),iu=O(6451),su=O(5363),ri=O(8421),Qn=O(4482),xt=O(5403);function En(n,e){return(0,Qn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,xt.x)(r,m=>{null==i||i.unsubscribe();let w=0;const T=a++;(0,ri.Xf)(n(m,T)).subscribe(i=(0,xt.x)(r,S=>r.next(e?e(m,S,T,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var yt=O(4004),kd=O(6063);class rl extends Eo.x{constructor(e=1/0,t=1/0,r=kd.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var oc=O(3099);function Md(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,oc.B)({connector:()=>new rl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const es=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Br(n,e){return(0,Qn.e)((t,r)=>{let i=0;t.subscribe((0,xt.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Gs=O(5698);function ps(n){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe((0,xt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pr(n=Pd){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe((0,xt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Pd(){return new es}var ts=O(4671);function _i(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,a)=>n(i,a,r)):ts.y,(0,Gs.q)(1),t?ps(e):pr(()=>new es))}var Io=O(576);function il(n,e){return(0,Io.m)(e)?En(()=>n,e):En(()=>n)}var gs=O(9468),Vt=O(5813);O(5867);var me=O(5861),ii=O(9681),ms=O(4859),P=O(2090),Ri=O(1877);const uc=new Map,Pg={activated:!1,tokenObservers:[]},lu={initialized:!1,enabled:!1};function ar(n){return uc.get(n)||Pg}function Yt(n,e){uc.set(n,e)}function ra(){return lu}class ia{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Co(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Sn=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function du(n){if(!ar(n).activated)throw Sn.create("use-before-activation",{appName:n.name})}function aa(n,e){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,me.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const U=yield l.getHeartbeatsHeader();U&&(a["X-Firebase-Client"]=U)}const h={method:"POST",body:JSON.stringify(e),headers:a};let m,w;try{m=yield fetch(n,h)}catch(U){throw Sn.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==m.status)throw Sn.create("fetch-status-error",{httpStatus:m.status});try{w=yield m.json()}catch(U){throw Sn.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const T=w.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw Sn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const S=1e3*Number(T[1]),N=Date.now();return{token:w.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}})).apply(this,arguments)}function Zs(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const hu="firebase-app-check-store";let To=null;function rs(){return To||(To=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Sn.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(hu,{keyPath:"compositeKey"})}}catch(r){e(Sn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),To)}function ll(){return(ll=(0,me.Z)(function*(n,e){const r=(yield rs()).transaction(hu,"readwrite"),a=r.objectStore(hu).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var w;h(Sn.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const V=new Ri.Yd("@firebase/app-check");function ke(n,e){return(0,P.hl)()?function ry(n,e){return function Do(n,e){return ll.apply(this,arguments)}(function k(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{V.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Rt(){return ra().enabled}function Bt(){return dt.apply(this,arguments)}function dt(){return(dt=(0,me.Z)(function*(){const n=ra();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const si={error:"UNKNOWN_ERROR"};function la(n){return P.US.encodeString(JSON.stringify(n),!1)}function $r(n){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,me.Z)(function*(n,e=!1){const t=n.app;du(t);const r=ar(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&vs(m)&&(i=m)}if(!e&&i&&vs(i))return{token:i.token};let h,l=!1;if(Rt()){r.exchangeTokenPromise||(r.exchangeTokenPromise=aa(Zs(t,yield Bt()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const m=yield r.exchangeTokenPromise;return yield ke(t,m),Yt(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?V.warn(m.message):V.error(m),a=m}return i?(h={token:i.token},Yt(t,Object.assign(Object.assign({},r),{token:i})),yield ke(t,i)):h=Fg(a),l&&is(t,h),h})).apply(this,arguments)}function ki(n,e){const t=ar(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Yt(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ca(n){const{app:e}=n,t=ar(e);let r=t.tokenRefresher;r||(r=function ys(n){const{app:e}=n;return new ia((0,me.Z)(function*(){let r;if(r=ar(e).token?yield $r(n,!0):yield $r(n),r.error)throw r.error}),()=>!0,()=>{const t=ar(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Yt(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function is(n,e){const t=ar(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function vs(n){return n.expireTimeMillis-Date.now()>0}function Fg(n){return{token:la(si),error:n}}class Lg{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ar(this.app);for(const t of e)ki(this.app,t.next);return Promise.resolve()}}const Hg="app-check-internal";!function da(){(0,ii._registerComponent)(new ms.wA("app-check",n=>function yf(n,e){return new Lg(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Hg).initialize()})),(0,ii._registerComponent)(new ms.wA(Hg,n=>function cl(n){return{getToken:e=>$r(n,e),addTokenListener:e=>function pu(n,e,t,r){const{app:i}=n,a=ar(i),l={next:t,error:r,type:e};if(Yt(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&vs(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),ca(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ca(n))}(n,"INTERNAL",e),removeTokenListener:e=>ki(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ii.registerVersion)("@firebase/app-check","0.5.9")}();class pl{constructor(){return(0,Vt.vb)("app-check")}}"undefined"!=typeof window&&window;var ml=O(127);const Hd=new _.OlP("angularfire2.auth.use-emulator"),zg=new _.OlP("angularfire2.auth.settings"),Gd=new _.OlP("angularfire2.auth.tenant-id"),Kg=new _.OlP("angularfire2.auth.langugage-code"),pc=new _.OlP("angularfire2.auth.use-device-language"),gu=new _.OlP("angularfire.auth.persistence"),gc=(n,e,t,r,i,a,l,h)=>(0,Yn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[w,T]of Object.entries(l))m.settings[w]=T;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let bf=(()=>{class n{constructor(t,r,i,a,l,h,m,w,T,S,N,U){const q=new Eo.x,_e=mt(void 0).pipe((0,su.Q)(l.outsideAngular),En(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,9916)))),(0,yt.U)(()=>(0,Yn.on)(t,a,r)),(0,yt.U)(De=>gc(De,a,h,w,T,S,m,N)),Md({bufferSize:1,refCount:!1}));if(zo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{_e.pipe(_i()).subscribe();const st=_e.pipe(En(it=>it.getRedirectResult().then(Mt=>Mt,()=>null)),Vt.iC,Md({bufferSize:1,refCount:!1})),ot=_e.pipe(En(it=>new Ln.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>it.onAuthStateChanged(Zt=>Mt.next(Zt),Zt=>Mt.error(Zt),()=>Mt.complete()))})))),ut=_e.pipe(En(it=>new Ln.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>it.onIdTokenChanged(Zt=>Mt.next(Zt),Zt=>Mt.error(Zt),()=>Mt.complete()))}))));this.authState=st.pipe(il(ot),(0,gs.R)(l.outsideAngular),(0,su.Q)(l.insideAngular)),this.user=st.pipe(il(ut),(0,gs.R)(l.outsideAngular),(0,su.Q)(l.insideAngular)),this.idToken=this.user.pipe(En(it=>it?(0,nn.D)(it.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(En(it=>it?(0,nn.D)(it.getIdTokenResult()):mt(null))),this.credential=(0,iu.T)(st,q,this.authState.pipe(Br(it=>!it))).pipe((0,yt.U)(it=>(null==it?void 0:it.user)?it:null),(0,gs.R)(l.outsideAngular),(0,su.Q)(l.insideAngular))}return(0,Yn.pX)(this,_e,a,{spy:{apply:(De,st,ot)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&ot.then(ut=>q.next(ut))}}})}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Yn.Dh),_.LFG(Yn.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Vt.HU),_.LFG(Hd,8),_.LFG(zg,8),_.LFG(Gd,8),_.LFG(Kg,8),_.LFG(pc,8),_.LFG(gu,8),_.LFG(pl,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),SE=(()=>{class n{constructor(){ml.Z.registerVersion("angularfire",Vt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[bf]}),n})();var Wd=O(4986),qd=O(3942);const zd="firebasestorage.googleapis.com",Zg="storageBucket";class In extends P.ZR{constructor(e,t){super(mc(e),`Firebase Storage: ${t} (${mc(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,In.prototype)}_codeEquals(e){return mc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function mc(n){return"storage/"+n}function Cf(){return new In("unknown","An unknown error occurred, please check the error payload for server response.")}function Qg(){return new In("canceled","User canceled the upload/download.")}function wy(){return new In("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Jn(n){return new In("invalid-argument",n)}function Kd(){return new In("app-deleted","The Firebase app was deleted.")}function Sf(n){return new In("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mu(n,e){return new In("invalid-format","String does not match format '"+n+"': "+e)}function Un(n){throw new In("internal-error","Internal error: "+n)}class Vn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Vn.makeFromUrl(e,t)}catch(i){return new Vn(e,"")}if(""===r.path)return r;throw function vy(n){return new In("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(it){it.path_=decodeURIComponent(it.path)}const S=t.replace(/[.]/g,"\\."),ut=[{regex:h,indices:{bucket:1,path:3},postModify:function a(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===zd?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let it=0;it<ut.length;it++){const Mt=ut[it],Zt=Mt.regex.exec(e);if(Zt){let ju=Zt[Mt.indices.path];ju||(ju=""),r=new Vn(Zt[Mt.indices.bucket],ju),Mt.postModify(r);break}}if(null==r)throw function yy(n){return new In("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Zd{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vc(n){return"string"==typeof n||n instanceof String}function xf(n){return wc()&&n instanceof Blob}function wc(){return"undefined"!=typeof Blob}function Ec(n,e,t,r){if(r<e)throw Jn(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Jn(`Invalid value for '${n}'. Expected ${t} or less.`)}function ws(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Rf(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var fa=(()=>{return(n=fa||(fa={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",fa;var n})();class Qs{constructor(e,t,r,i,a,l,h,m,w,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=w,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function Jg(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=Cf();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?Kd():Qg():function _y(){return new In("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Ic(!1,null,!0)):this.backoffId_=function Iy(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let w=!1;function T(...De){w||(w=!0,e.apply(null,De))}function S(De){i=setTimeout(()=>{i=null,n(U,m())},De)}function N(){a&&clearTimeout(a)}function U(De,...st){if(w)return void N();if(De)return N(),void T.call(null,De,...st);if(m()||l)return N(),void T.call(null,De,...st);let ut;r<64&&(r*=2),1===h?(h=2,ut=0):ut=1e3*(r+Math.random()),S(ut)}let q=!1;function _e(De){q||(q=!0,N(),!w&&(null!==i?(De||(h=2),clearTimeout(i),S(0)):De||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,_e(!0)},t),_e}((r,i)=>{if(i)return void r(!1,new Ic(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===fa.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const T=a.getErrorCode()===fa.ABORT;return void r(!1,new Ic(!1,null,T))}const w=-1!==this.successCodes_.indexOf(m);r(!0,new Ic(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Af(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Ic{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Mf(...n){const e=function kf(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(wc())return new Blob(n);throw new In("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qd{constructor(e,t){this.data=e,this.contentType=t||null}}function Jd(n,e){switch(n){case Dr.RAW:return new Qd(tm(e));case Dr.BASE64:case Dr.BASE64URL:return new Qd(nm(n,e));case Dr.DATA_URL:return new Qd(function vl(n){const e=new rm(n);return e.base64?nm(Dr.BASE64,e.rest):function Nf(n){let e;try{e=decodeURIComponent(n)}catch(t){throw mu(Dr.DATA_URL,"Malformed data URL.")}return tm(e)}(e.rest)}(e),function Js(n){return new rm(n).contentType}(e))}throw Cf()}function tm(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function nm(n,e){switch(n){case Dr.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw mu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Dr.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw mu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function xo(n){return atob(n)}(e)}catch(i){throw mu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class rm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw mu(Dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function y(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class f{constructor(e,t){let r=0,i="";xf(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(xf(this.data_)){const i=function em(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new f(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new f(r,!0)}}static getBlob(...e){if(wc()){const t=e.map(r=>r instanceof f?r.data_:r);return new f(Mf.apply(null,t))}{const t=e.map(l=>vc(l)?Jd(Dr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new f(i,!0)}}uploadData(){return this.data_}}function g(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function yl(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function M(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Z(n,e){return e}class oe{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Z}}let Le=null;function ht(){if(Le)return Le;const n=[];n.push(new oe("bucket")),n.push(new oe("generation")),n.push(new oe("metageneration")),n.push(new oe("name","fullPath",!0));const t=new oe("name");t.xform=function e(a,l){return function Ke(n){return!vc(n)||n.length<2?n:M(n)}(l)},n.push(t);const i=new oe("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new oe("timeCreated")),n.push(new oe("updated")),n.push(new oe("md5Hash",null,!0)),n.push(new oe("cacheControl",null,!0)),n.push(new oe("contentDisposition",null,!0)),n.push(new oe("contentEncoding",null,!0)),n.push(new oe("contentLanguage",null,!0)),n.push(new oe("contentType",null,!0)),n.push(new oe("metadata","customMetadata",!0)),Le=n,Le}function Ei(n,e,t){const r=g(e);return null===r?null:function Gn(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function ft(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Vn(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Pf(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Ro="prefixes";class Ni{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Es(n){if(!n)throw Cf()}function wl(n,e){return function t(r,i){const a=Ei(n,i,e);return Es(null!==a),a}}function pa(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Tf(){return new In("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function my(){return new In("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function gy(n){return new In("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Df(n){return new In("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function Tc(n){const e=pa(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function An(n){return new In("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Dy(n,e,t){const i=ws(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Ni(i,"GET",wl(n,t),l);return h.errorHandler=Tc(e),h}function Sy(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ws(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,T=new Ni(h,"GET",function im(n,e){return function t(r,i){const a=function Ff(n,e,t){const r=g(t);return null===r?null:function Of(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Ro])for(const i of t[Ro]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Vn(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Vn(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Es(null!==a),a}}(n,e.bucket),w);return T.urlParams=a,T.errorHandler=pa(e),T}function Ry(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function AE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Lf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Es(!1)}return Es(!!t&&-1!==(e||["active"]).indexOf(t)),t}const kE={STATE_CHANGED:"state_changed"},Ii={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Uf(n){switch(n){case"running":case"pausing":case"canceling":return Ii.RUNNING;case"paused":return Ii.PAUSED;case"success":return Ii.SUCCESS;case"canceled":return Ii.CANCELED;default:return Ii.ERROR}}class ME{constructor(e,t,r){if(function Mi(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function _u(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ky extends class NE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Un("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Un("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Un("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Un("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Un("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xs(){return new ky}class OE{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ht(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function nD(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Ry(e,r,i),h={name:l.fullPath},m=ws(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Pf(l,t),q=new Ni(m,"POST",function U(_e){let De;sm(_e);try{De=_e.getResponseHeader("X-Goog-Upload-URL")}catch(st){Es(!1)}return Es(vc(De)),De},n.maxUploadRetryTime);return q.urlParams=h,q.headers=T,q.body=S,q.errorHandler=pa(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function om(n,e,t,r){const m=new Ni(t,"POST",function a(w){const T=sm(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){Es(!1)}S||Es(!1);const N=Number(S);return Es(!isNaN(N)),new Lf(N,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=pa(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Xs,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Lf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function RE(n,e,t,r,i,a,l,h){const m=new Lf(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function Ey(){return new In("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=m.total-m.current;let T=w;i>0&&(T=Math.min(T,i));const S=m.current,q={"X-Goog-Upload-Command":T===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},_e=r.slice(S,S+T);if(null===_e)throw wy();const ut=new Ni(t,"POST",function De(it,Mt){const Zt=sm(it,["active","final"]),Yr=m.current+T,ju=r.size();let uR;return uR="final"===Zt?wl(e,a)(it,Mt):null,new Lf(Yr,ju,"final"===Zt,uR)},e.maxUploadRetryTime);return ut.headers=q,ut.body=_e.uploadData(),ut.progressCallback=h||null,ut.errorHandler=pa(n),ut}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Xs,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Dy(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function El(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let ut="";for(let it=0;it<2;it++)ut+=Math.random().toString().slice(2);return ut}();l["Content-Type"]="multipart/related; boundary="+m;const w=Ry(e,r,i),T=Pf(w,t),U=f.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===U)throw wy();const q={name:w.fullPath},_e=ws(a,n.host,n._protocol),st=n.maxUploadRetryTime,ot=new Ni(_e,"POST",wl(n,t),st);return ot.urlParams=q,ot.headers=l,ot.body=U.uploadData(),ot.errorHandler=pa(e),ot}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Qg(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Uf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new ME(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Uf(this._state)){case Ii.SUCCESS:_u(this._resolve.bind(null,this.snapshot))();break;case Ii.CANCELED:case Ii.ERROR:_u(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Uf(this._state)){case Ii.RUNNING:case Ii.PAUSED:e.next&&_u(e.next.bind(e,this.snapshot))();break;case Ii.SUCCESS:e.complete&&_u(e.complete.bind(e))();break;default:e.error&&_u(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Dc{constructor(e,t){this._service=e,this._location=t instanceof Vn?t:Vn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Dc(e,t)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return M(this._location.path)}get storage(){return this._service}get parent(){const e=function E(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Vn(this._location.bucket,e);return new Dc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Sf(e)}}function Oy(n,e,t){return Fy.apply(this,arguments)}function Fy(){return(Fy=(0,me.Z)(function*(n,e,t){const i=yield UE(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Oy(n,e,i.nextPageToken))})).apply(this,arguments)}function UE(n,e){null!=e&&"number"==typeof e.maxResults&&Ec("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Sy(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xs)}function VE(n){n._throwIfRoot("getDownloadURL");const e=function xy(n,e,t){const i=ws(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Ni(i,"GET",function Ty(n,e){return function t(r,i){const a=Ei(n,i,e);return Es(null!==a),function bc(n,e,t,r){const i=g(e);if(null===i||!vc(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return ws("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+Rf({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=Tc(e),h}(n.storage,n._location,ht());return n.storage.makeRequestWithTokens(e,Xs).then(t=>{if(null===t)throw function yc(){return new In("no-download-url","The given file does not have any download URLs.")}();return t})}function BE(n,e){const t=function A(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Vn(n._location.bucket,t);return new Dc(n.storage,r)}function Ly(n,e){if(n instanceof St){const t=n;if(null==t._bucket)throw function _c(){return new In("no-default-bucket","No default bucket found. Did you set the '"+Zg+"' property when initializing the app?")}();const r=new Dc(t,t._bucket);return null!=e?Ly(r,e):r}return void 0!==e?BE(n,e):n}function lD(n,e){if(e&&function aD(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof St)return function uD(n,e){return new Dc(n,e)}(n,e);throw Jn("To use ref(service, url), the first argument must be a Storage instance.")}return Ly(n,e)}function jE(n,e){const t=null==e?void 0:e[Zg];return null==t?null:Vn.makeFromBucketSpec(t,n)}class St{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=zd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Vn.makeFromBucketSpec(i,this._host):jE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Vn.makeFromBucketSpec(this._url,e):jE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ec("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ec("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dc(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Zd(Kd());{const a=function wi(n,e,t,r,i,a){const l=Rf(n.urlParams),h=n.url+l,m=Object.assign({},n.headers);return function Cy(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function by(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function Yd(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function Xg(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new Qs(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Uy="@firebase/storage";function Wy(n,e){return lD(n=(0,P.m9)(n),e)}function zy(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new St(t,r,i,e,ii.SDK_VERSION)}!function hR(){(0,ii._registerComponent)(new ms.wA("storage",zy,"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(Uy,"0.9.7",""),(0,ii.registerVersion)(Uy,"0.9.7","esm2017")}();class um{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class WE{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new um(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new um(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new um(l,this,this._ref)):{next:t.next?l=>t.next(new um(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class qE{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new vu(e,this._service))}get items(){return this._delegate.items.map(e=>new vu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dR(n,e){return BE(n,e)}(this._delegate,e);return new vu(t,this.storage)}get root(){return new vu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new vu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new WE(function hD(n,e,t){return function lR(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new OE(n,new f(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Dr.RAW,r){this._throwIfRoot("putString");const i=Jd(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new WE(new OE(this._delegate,new f(i.data,!0),a),this)}listAll(){return function $E(n){return function iD(n){const e={prefixes:[],items:[]};return Oy(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new qE(e,this.storage))}list(e){return function Hy(n,e){return UE(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new qE(t,this.storage))}getMetadata(){return function $y(n){return function ko(n){n._throwIfRoot("getMetadata");const e=Dy(n.storage,n._location,ht());return n.storage.makeRequestWithTokens(e,Xs)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function yu(n,e){return function sD(n,e){n._throwIfRoot("updateMetadata");const t=function eD(n,e,t,r){const a=ws(e.fullServerUrl(),n.host,n._protocol),h=Pf(t,r),w=n.maxOperationRetryTime,T=new Ni(a,"PATCH",wl(n,r),w);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=h,T.errorHandler=Tc(e),T}(n.storage,n._location,e,ht());return n.storage.makeRequestWithTokens(t,Xs)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Gy(n){return VE(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function cR(n){return function oD(n){n._throwIfRoot("deleteObject");const e=function tD(n,e){const r=ws(e.fullServerUrl(),n.host,n._protocol),h=new Ni(r,"DELETE",function l(m,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Tc(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xs)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Sf(e)}}class Ky{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(fD(e))throw Jn("ref() expected a child path but got a URL, use refFromURL instead.");return new vu(Wy(this._delegate,e),this)}refFromURL(e){if(!fD(e))throw Jn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vn.makeFromUrl(e,this._delegate.host)}catch(t){throw Jn("refFromUrl() expected a valid full URL but got an invalid one.")}return new vu(Wy(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function am(n,e,t,r={}){!function cD(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function fD(n){return/^[A-Za-z]+:\/\//.test(n)}function KE(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Ky(t,r)}function mD(n){const e=function Zy(n){return new Ln.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function py(n,e=Wd.z){return(0,Qn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function m(){const w=l+n,T=e.now();if(T<w)return i=this.schedule(void 0,w-T),void r.add(i);h()}t.subscribe((0,xt.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Yy(n){return{getDownloadURL:()=>mt(void 0).pipe(Vt.fc,En(()=>n.getDownloadURL()),Vt.iC),getMetadata:()=>mt(void 0).pipe(Vt.fc,En(()=>n.getMetadata()),Vt.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>Yy(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>mD(n.put(e,t)),putString:(e,t,r)=>mD(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function gD(n){const e={TaskState:Ii,TaskEvent:kE,StringFormat:Dr,Storage:Ky,Reference:vu};n.INTERNAL.registerComponent(new ms.wA("storage-compat",KE,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.15")}(qd.Z);const pR=new _.OlP("angularfire2.storageBucket"),gR=new _.OlP("angularfire2.storage.maxUploadRetryTime"),mR=new _.OlP("angularfire2.storage.maxOperationRetryTime"),_R=new _.OlP("angularfire2.storage.use-emulator");let yR=(()=>{class n{constructor(t,r,i,a,l,h,m,w,T,S){const N=(0,Yn.on)(t,l,r);this.storage=(0,Yn.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const U=l.runOutsideAngular(()=>N.storage(i||void 0)),q=T;return q&&U.useEmulator(...q),m&&U.setMaxUploadRetryTime(m),w&&U.setMaxOperationRetryTime(w),U},[m,w])}ref(t){return Yy(this.storage.ref(t))}refFromURL(t){return Yy(this.storage.refFromURL(t))}upload(t,r,i){return Yy(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Yn.Dh),_.LFG(Yn.xv,8),_.LFG(pR,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Vt.HU),_.LFG(gR,8),_.LFG(mR,8),_.LFG(_R,8),_.LFG(pl,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})(),wR=(()=>{class n{constructor(){ml.Z.registerVersion("angularfire",Vt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[yR],imports:[vR]}),n})();var Mo=O(8189);function Jy(...n){return function Qy(){return(0,Mo.J)(1)}()((0,nn.D)(n,(0,Fn.yG)(n)))}function jf(...n){const e=(0,Fn.yG)(n);return(0,Qn.e)((t,r)=>{(e?Jy(n,t,e):Jy(n,t)).subscribe(r)})}function $f(){return(0,Qn.e)((n,e)=>{let t,r=!1;n.subscribe((0,xt.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function ZE(n,e,t,r,i){return(a,l)=>{let h=t,m=e,w=0;a.subscribe((0,xt.x)(l,T=>{const S=w++;m=h?n(m,T,S):(h=!0,T),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function wu(n,e){return(0,Qn.e)(ZE(n,e,arguments.length>=2,!0))}function YE(n,e=ts.y){return n=null!=n?n:Il,(0,Qn.e)((t,r)=>{let i,a=!0;t.subscribe((0,xt.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function Il(n,e){return n===e}O(9916);var et,yD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},No={},lm=lm||{},At=yD||self;function cm(){}function Sc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ma(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bl="closure_uid_"+(1e9*Math.random()>>>0),Hf=0;function Xd(n,e,t){return n.call.apply(n.bind,arguments)}function vD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Gr(n,e,t){return(Gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xd:vD).apply(null,arguments)}function Gf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Sr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function _a(){this.s=this.s,this.o=this.o}var dm={};_a.prototype.s=!1,_a.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Xy(n){return Object.prototype.hasOwnProperty.call(n,bl)&&n[bl]||(n[bl]=++Hf)}(this);delete dm[n]}},_a.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ev=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function tv(n){return Array.prototype.concat.apply([],arguments)}function hm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fm(n){return/^[\s\xa0]*$/.test(n)}var vn,nv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Pi(n,e){return-1!=n.indexOf(e)}function rv(n,e){return n<e?-1:n>e?1:0}e:{var XE=At.navigator;if(XE){var eI=XE.userAgent;if(eI){vn=eI;break e}}vn=""}function tI(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function wD(n){const e={};for(const t in n)e[t]=n[t];return e}var iv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ED(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<iv.length;a++)t=iv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sv(n){return sv[" "](n),n}sv[" "]=cm;var pm,n,nI=Pi(vn,"Opera"),eh=Pi(vn,"Trident")||Pi(vn,"MSIE"),rI=Pi(vn,"Edge"),av=rI||eh,uv=Pi(vn,"Gecko")&&!(Pi(vn.toLowerCase(),"webkit")&&!Pi(vn,"Edge"))&&!(Pi(vn,"Trident")||Pi(vn,"MSIE"))&&!Pi(vn,"Edge"),ID=Pi(vn.toLowerCase(),"webkit")&&!Pi(vn,"Edge");function lv(){var n=At.document;return n?n.documentMode:void 0}e:{var cv="",gm=(n=vn,uv?/rv:([^\);]+)(\)|;)/.exec(n):rI?/Edge\/([\d\.]+)/.exec(n):eh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ID?/WebKit\/(\S+)/.exec(n):nI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gm&&(cv=gm?gm[1]:""),eh){var mm=lv();if(null!=mm&&mm>parseFloat(cv)){pm=String(mm);break e}}pm=cv}var bD={};var CD=At.document&&eh&&(lv()||parseInt(pm,10))||void 0,IR=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",cm,e),At.removeEventListener("test",cm,e)}catch(t){}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qf(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uv){e:{try{sv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:TD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qf.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},Sr(qf,oi);var TD={2:"touch",3:"pen",4:"mouse"};qf.prototype.h=function(){qf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zf="closure_listenable_"+(1e6*Math.random()|0),dv=0;function DD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++dv,this.ca=this.fa=!1}function _m(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ac(n){this.src=n,this.g={},this.h=0}function Kf(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=JE(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(_m(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Ac.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=hv(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new DD(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Zf="closure_lm_"+(1e6*Math.random()|0),Yf={};function fv(n,e,t,r,i){if(r&&r.once)return ym(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)fv(n,e[a],t,r,i);return null}return t=Em(t),n&&n[zf]?n.N(e,t,ma(r)?!!r.capture:!!r,i):sI(n,e,t,!1,r,i)}function sI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=ma(i)?!!i.capture:!!i,h=vm(n);if(h||(n[Zf]=h=new Ac(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function SD(){var e=oI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)IR||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(gv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ym(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)ym(n,e[a],t,r,i);return null}return t=Em(t),n&&n[zf]?n.O(e,t,ma(r)?!!r.capture:!!r,i):sI(n,e,t,!0,r,i)}function AD(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)AD(n,e[a],t,r,i);else r=ma(r)?!!r.capture:!!r,t=Em(t),n&&n[zf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hv(a=n.g[e],t,r,i))&&(_m(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=vm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hv(e,t,r,i)),(t=-1<n?e[n]:null)&&pv(t))}function pv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[zf])Kf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=vm(e))?(Kf(t,n),0==t.h&&(t.src=null,e[Zf]=null)):_m(n)}}}function gv(n){return n in Yf?Yf[n]:Yf[n]="on"+n}function oI(n,e){if(n.ca)n=!0;else{e=new qf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pv(n),n=t.call(r,e)}return n}function vm(n){return(n=n[Zf])instanceof Ac?n:null}var wm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Em(n){return"function"==typeof n?n:(n[wm]||(n[wm]=function(e){return n.handleEvent(e)}),n[wm])}function bn(){_a.call(this),this.i=new Ac(this),this.P=this,this.I=null}function gr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var i=e;ED(e=new oi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Im(l,r,!0,e)&&i}if(i=Im(l=e.g=n,r,!0,e)&&i,i=Im(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Im(l=e.g=t[a],r,!1,e)&&i}function Im(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,m=l.ia||l.src;l.fa&&Kf(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Sr(bn,_a),bn.prototype[zf]=!0,bn.prototype.removeEventListener=function(n,e,t,r){AD(this,n,e,t,r)},bn.prototype.M=function(){if(bn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_m(t[r]);delete n.g[e],n.h--}}this.I=null},bn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},bn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mv=At.JSON.stringify;function bR(){var n=Ev;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jf,yv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new vv,n=>n.reset());class vv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qf(n){At.setTimeout(()=>{throw n},0)}function wv(n,e){Jf||function aI(){var n=At.Promise.resolve(void 0);Jf=function(){n.then(xD)}}(),bm||(Jf(),bm=!0),Ev.add(n,e)}var bm=!1,Ev=new class _v{constructor(){this.h=this.g=null}add(e,t){const r=yv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function xD(){for(var n;n=bR();){try{n.h.call(n.g)}catch(t){Qf(t)}var e=yv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}bm=!1}function th(n,e){bn.call(this),this.h=n||1,this.g=e||At,this.j=Gr(this.kb,this),this.l=Date.now()}function Iv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function bv(n,e,t){if("function"==typeof n)t&&(n=Gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function Cv(n){n.g=bv(()=>{n.g=null,n.i&&(n.i=!1,Cv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Sr(th,bn),(et=th.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gr(this,"tick"),this.da&&(Iv(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){th.Z.M.call(this),Iv(this),delete this.g};class nh extends _a{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Cv(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rh(n){_a.call(this),this.h=n,this.g={}}Sr(rh,_a);var uI=[];function lI(n,e,t,r){Array.isArray(t)||(t&&(uI[0]=t.toString()),t=uI);for(var i=0;i<t.length;i++){var a=fv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function xc(n){tI(n.g,function(e,t){this.g.hasOwnProperty(t)&&pv(e)},n),n.g={}}function Cm(){this.g=!0}function ih(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Tv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return mv(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}rh.prototype.M=function(){rh.Z.M.call(this),xc(this)},rh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cm.prototype.Aa=function(){this.g=!1},Cm.prototype.info=function(){};var Cl={},Dv=null;function Xf(){return Dv=Dv||new bn}function Sv(n){oi.call(this,Cl.Ma,n)}function ep(n){const e=Xf();gr(e,new Sv(e,n))}function cI(n,e){oi.call(this,Cl.STAT_EVENT,n),this.stat=e}function Oi(n){const e=Xf();gr(e,new cI(e,n))}function dI(n,e){oi.call(this,Cl.Na,n),this.size=e}function sh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}Cl.Ma="serverreachability",Sr(Sv,oi),Cl.STAT_EVENT="statevent",Sr(cI,oi),Cl.Na="timingevent",Sr(dI,oi);var Av={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Rv(){}function MD(){}Rv.prototype.h=null;var Dm,Tm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tp(){oi.call(this,"d")}function kv(){oi.call(this,"c")}function np(){}function Sm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new rh(this),this.P=CR,this.W=new th(n=av?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new eo}function eo(){this.i=null,this.g="",this.h=!1}Sr(tp,oi),Sr(kv,oi),Sr(np,Rv),np.prototype.g=function(){return new XMLHttpRequest},np.prototype.i=function(){return{}},Dm=new np;var CR=45e3,fI={},rp={};function Am(n,e,t){n.K=1,n.v=Mc(Eu(e)),n.s=t,n.U=!0,Mv(n,null)}function Mv(n,e){n.F=Date.now(),oh(n),n.A=Eu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Uv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new eo,n.g=VD(n.l,t?e:null,!n.s),0<n.O&&(n.L=new nh(Gr(n.Ia,n,n.g),n.O)),lI(n.V,n.g,"readystatechange",n.gb),e=n.H?wD(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ep(1),function RD(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var w=h[m].split("=");if(1<w.length){var T=w[0];w=w[1];var S=T.split("_");l=2<=S.length&&"type"==S[1]?l+(T+"=")+w+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function pI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ND(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=gI(n,t),i==rp){4==e&&(n.o=4,Oi(14),r=!1),ih(n.j,n.m,null,"[Incomplete Response]");break}if(i==fI){n.o=4,Oi(15),ih(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ih(n.j,n.m,i,null),Nv(n,i)}pI(n)&&i!=rp&&i!=fI&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lc(e),e.L=!0,Oi(11))):(ih(n.j,n.m,t,"[Invalid Chunked Response]"),Rc(n),ip(n))}function gI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?rp:(t=Number(e.substring(t,r)),isNaN(t)?fI:(r+=1)+t>e.length?rp:(e=e.substr(r,t),n.C=r+t,e))}function oh(n){n.Y=Date.now()+n.P,mI(n,n.P)}function mI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=sh(Gr(n.eb,n),e)}function ah(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function ip(n){0==n.l.G||n.I||Fm(n.l,n)}function Rc(n){ah(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Iv(n.W),xc(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Nv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||jv(t.i,n)))if(t.I=n.N,!n.J&&jv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=sh(Gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;mh(t),Mm(t)}MI(t),Oi(18)}if(1>=Bv(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Ia(t,11)}else if((n.J||t.g==n)&&mh(t),!fm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const T=w[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=w[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;!a.g&&(Pi(q,"spdy")||Pi(q,"quic")||Pi(q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&($v(a,a.h),a.h=null))}if(r.D){const _e=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;_e&&(r.sa=_e,dn(r.F,r.D,_e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=Lm(r,r.H?r.la:null,r.W),l.J){Hv(r.i,l);var h=l,m=r.K;m&&h.setTimeout(m),h.B&&(ah(h),oh(h)),r.g=l}else kI(r);0<t.l.length&&lp(t)}else"stop"!=w[0]&&"close"!=w[0]||Ia(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ia(t,7):Yv(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}ep(4)}catch(w){}}function Pv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sc(n)||"string"==typeof n)ev(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Sc(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function PD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Sc(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function uh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof uh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function lh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];to(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)to(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function to(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=Sm.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==ro(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const T=ro(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||av||this.g&&(this.h.h||this.g.ga()||SI(this.g)))){this.I||4!=T||7==e||ep(8==e||0>=S?3:2),ah(this);var t=this.g.ba();this.N=t;t:if(pI(this)){var r=SI(this.g);n="";var i=r.length,a=4==ro(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Rc(this),ip(this);var l="";break t}this.h.i=new At.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function kD(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fm(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Oi(12),Rc(this),ip(this);break e}ih(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nv(this,t)}this.U?(ND(this,T,l),av&&this.i&&3==T&&(lI(this.V,this.W,"tick",this.fb),this.W.start())):(ih(this.j,this.m,l,null),Nv(this,l)),4==T&&Rc(this),this.i&&!this.I&&(4==T?Fm(this.l,this):(this.i=!1,oh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),Rc(this),ip(this)}}}catch(T){}},et.fb=function(){if(this.g){var n=ro(this.g),e=this.g.ga();this.C<e.length&&(ah(this),ND(this,n,e),this.i&&4!=n&&oh(this))}},et.cancel=function(){this.I=!0,Rc(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Po(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ep(3),Oi(17)),Rc(this),this.o=2,ip(this)):mI(this,this.Y-n)},(et=uh.prototype).R=function(){lh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return lh(this),this.g.concat()},et.get=function(n,e){return to(this.h,n)?this.h[n]:e},et.set=function(n,e){to(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var _I=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof kc){this.g=void 0!==e?e:n.g,ch(this,n.j),this.s=n.s,Is(this,n.i),Tl(this,n.m),this.l=n.l,e=n.h;var t=new Ea;t.i=e.i,e.g&&(t.g=new uh(e.g),t.h=e.h),ai(this,t),this.o=n.o}else n&&(t=String(n).match(_I))?(this.g=!!e,ch(this,t[1]||"",!0),this.s=va(t[2]||""),Is(this,t[3]||"",!0),Tl(this,t[4]),this.l=va(t[5]||"",!0),ai(this,t[6]||"",!0),this.o=va(t[7]||"")):(this.g=!!e,this.h=new Ea(null,this.g))}function Eu(n){return new kc(n)}function ch(n,e,t){n.j=t?va(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Is(n,e,t){n.i=t?va(e,!0):e}function Tl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ai(n,e,t){e instanceof Ea?(n.h=e,function yI(n,e){e&&!n.j&&(Iu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Fv(this,r),Uv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=wa(e,ph)),n.h=new Ea(e,n.g))}function dn(n,e,t){n.h.set(e,t)}function Mc(n){return dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function va(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wa(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,dh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function dh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}kc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(wa(e,Nc,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(wa(e,Nc,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(wa(t,"/"==t.charAt(0)?fh:hh,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",wa(t,gh)),n.join("")};var Nc=/[#\/\?@]/g,hh=/[#\?:]/g,fh=/[#\?]/g,ph=/[#\?@]/g,gh=/#/g;function Ea(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Iu(n){n.g||(n.g=new uh,n.h=0,n.i&&function sp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fv(n,e){Iu(n),e=Pc(n,e),to(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,to((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&lh(n)))}function Lv(n,e){return Iu(n),e=Pc(n,e),to(n.g.h,e)}function Uv(n,e,t){Fv(n,e),0<t.length&&(n.i=null,n.g.set(Pc(n,e),hm(t)),n.h+=t.length)}function Pc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Vv(n){this.l=n||wI,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ea&&At.g.Ea()&&At.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Ea.prototype).add=function(n,e){Iu(this),this.i=null,n=Pc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Iu(this),this.g.forEach(function(t,r){ev(t,function(i){n.call(e,i,r,this)},this)},this)},et.T=function(){Iu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},et.R=function(n){Iu(this);var e=[];if("string"==typeof n)Lv(this,n)&&(e=tv(e,this.g.get(Pc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=tv(e,n[t])}return e},et.set=function(n,e){return Iu(this),this.i=null,Lv(this,n=Pc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var wI=10;function EI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Bv(n){return n.h?1:n.g?n.g.size:0}function jv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $v(n,e){n.g?n.g.add(e):n.h=e}function Hv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function II(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return hm(n.i)}function Gv(){}function bI(){this.g=new Gv}function OD(n,e,t){const r=t||"";try{Pv(n,function(i,a){let l=i;ma(i)&&(l=mv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function op(n){this.l=n.$b||null,this.j=n.ib||!1}function Wv(n,e){bn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=qv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vv.prototype.cancel=function(){if(this.i=II(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Gv.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},Gv.prototype.parse=function(n){return At.JSON.parse(n,void 0)},Sr(op,Rv),op.prototype.g=function(){return new Wv(this.l,this.j)},op.prototype.i=function(n){return function(){return n}}({}),Sr(Wv,bn);var qv=0;function Rm(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Oc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Wv.prototype).open=function(n,e){if(this.readyState!=qv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oc(this)),this.readyState=qv},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==At.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rm(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Oc(this):ap(this),3==this.readyState&&Rm(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Oc(this))},et.Ta=function(n){this.g&&(this.response=n,Oc(this))},et.ha=function(){this.g&&Oc(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Wv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TR=At.JSON.parse;function Ar(n){bn.call(this),this.headers=new uh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FD,this.K=this.L=!1}Sr(Ar,bn);var FD="",LD=/^https?$/i,TI=["POST","PUT"];function UD(n){return"content-type"==n.toLowerCase()}function Fc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,DI(n),km(n)}function DI(n){n.D||(n.D=!0,gr(n,"complete"),gr(n,"error"))}function zv(n){if(n.h&&void 0!==lm&&(!n.C[1]||4!=ro(n)||2!=n.ba()))if(n.v&&4==ro(n))bv(n.Fa,0,n);else if(gr(n,"readystatechange"),4==ro(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(_I)[1]||null;if(!i&&At.self&&At.self.location){var a=At.self.location.protocol;i=a.substr(0,a.length-1)}r=!LD.test(i?i.toLowerCase():"")}t=r}if(t)gr(n,"complete"),gr(n,"success");else{n.m=6;try{var l=2<ro(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.ba()+"]",DI(n)}}finally{km(n)}}}function km(n,e){if(n.g){Kv(n);const t=n.g,r=n.C[0]?cm:null;n.g=null,n.C=null,e||gr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Kv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function ro(n){return n.g?n.g.readyState:0}function SI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case FD:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Zv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function AI(n){let e="";return tI(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dn(n,e,t))}function up(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xI(n){this.za=0,this.l=[],this.h=new Cm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=up("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=up("baseRetryDelayMs",5e3,n),this.$a=up("retryDelaySeedMs",1e4,n),this.Ya=up("forwardChannelMaxRetries",2,n),this.ra=up("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Vv(n&&n.concurrentRequestLimit),this.Ca=new bI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Yv(n){if(Qv(n),3==n.G){var e=n.V++,t=Eu(n.F);dn(t,"SID",n.J),dn(t,"RID",e),dn(t,"TYPE","terminate"),Pm(n,t),(e=new Sm(n,n.h,e,void 0)).K=2,e.v=Mc(Eu(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=VD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),oh(e)}cp(n)}function Mm(n){n.g&&(Lc(n),n.g.cancel(),n.g=null)}function Qv(n){Mm(n),n.u&&(At.clearTimeout(n.u),n.u=null),mh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function Jv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&lp(n)}function lp(n){EI(n.i)||n.m||(n.m=!0,wv(n.Ha,n),n.C=0)}function Nm(n,e){var t;t=e?e.m:n.V++;const r=Eu(n.F);dn(r,"SID",n.J),dn(r,"RID",t),dn(r,"AID",n.U),Pm(n,r),n.o&&n.s&&Zv(r,n.o,n.s),t=new Sm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Om(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),$v(n.i,t),Am(t,r,e)}function Pm(n,e){n.j&&Pv({},function(t,r){dn(e,r,t)})}function Om(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Gr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let w=i[m].h;const T=i[m].g;if(w-=a,0>w)a=Math.max(0,i[m].h-100),h=!1;else try{OD(T,l,"req"+w+"_")}catch(S){r&&r(T)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function kI(n){n.g||n.u||(n.Y=1,wv(n.Ga,n),n.A=0)}function MI(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=sh(Gr(n.Ga,n),NI(n,n.A)),n.A++,0))}function Lc(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function Xv(n){n.g=new Sm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Eu(n.oa);dn(e,"RID","rpc"),dn(e,"SID",n.J),dn(e,"CI",n.N?"0":"1"),dn(e,"AID",n.U),Pm(n,e),dn(e,"TYPE","xmlhttp"),n.o&&n.s&&Zv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Mc(Eu(e)),t.s=null,t.U=!0,Mv(t,n)}function mh(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function Fm(n,e){var t=null;if(n.g==e){mh(n),Lc(n),n.g=null;var r=2}else{if(!jv(n.i,e))return;t=e.D,Hv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;gr(r=Xf(),new dI(r,t,e,i)),lp(n)}else kI(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function RI(n,e){return!(Bv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=sh(Gr(n.Ha,n,e),NI(n,n.C)),n.C++,0)))}(n,e)||2==r&&MI(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ia(n,5);break;case 4:Ia(n,10);break;case 3:Ia(n,6);break;default:Ia(n,2)}}function NI(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ia(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Gr(n.jb,n);t||(t=new kc("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||ch(t,"https"),Mc(t)),function CI(n,e){const t=new Cm;if(At.Image){const r=new Image;r.onload=Gf(xm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Gf(xm,t,r,"TestLoadImage: error",!1,e),r.onabort=Gf(xm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gf(xm,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.j&&n.j.va(e),cp(n),Qv(n)}function cp(n){n.G=0,n.I=-1,n.j&&((0!=II(n.i).length||0!=n.l.length)&&(n.i.i.length=0,hm(n.l),n.l.length=0),n.j.ua())}function Lm(n,e,t){let r=function no(n){return n instanceof kc?Eu(n):new kc(n,void 0)}(t);if(""!=r.i)e&&Is(r,e+"."+r.i),Tl(r,r.m);else{const i=At.location;r=function Ov(n,e,t,r){var i=new kc(null,void 0);return n&&ch(i,n),e&&Is(i,e),t&&Tl(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&tI(n.aa,function(i,a){dn(r,a,i)}),t=n.sa,(e=n.D)&&t&&dn(r,e,t),dn(r,"VER",n.ma),Pm(n,r),r}function VD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&n.Ba&&!n.qa?new op({ib:!0}):n.qa)).L=n.H,e}function PI(){}function _h(){if(eh&&!(10<=Number(CD)))throw Error("Environmental error: no available transport.")}function Fi(n,e){bn.call(this),this.g=new xI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!fm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dl(this)}function ew(n){tp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function OI(){kv.call(this),this.status=1}function Dl(n){this.g=n}(et=Ar.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dm.g(),this.C=function hI(n){return n.h||(n.h=n.i())}(this.u?this.u:Dm),this.g.onreadystatechange=Gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Fc(this,a)}n=t||"";const i=new uh(this.headers);r&&Pv(r,function(a,l){i.set(l,a)}),r=function ER(n){e:{var e=UD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=At.FormData&&n instanceof At.FormData,!(0<=JE(TI,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kv(this),0<this.B&&((this.K=function DR(n){return eh&&function ya(){return function ov(n){var e=bD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=nv(String(pm)).split("."),t=nv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=rv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||rv(0==i[2].length,0==a[2].length)||rv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gr(this.pa,this)):this.A=bv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Fc(this,a)}},et.pa=function(){void 0!==lm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,gr(this,"complete"),gr(this,"abort"),km(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),km(this,!0)),Ar.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?zv(this):this.cb())},et.cb=function(){zv(this)},et.ba=function(){try{return 2<ro(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),TR(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=xI.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Sm(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=wD(a),ED(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Om(this,i,e),dn(t=Eu(this.F),"RID",n),dn(t,"CVER",22),this.D&&dn(t,"X-HTTP-Session-Id",this.D),Pm(this,t),this.o&&a&&Zv(t,this.o,a),$v(this.i,i),this.Ra&&dn(t,"TYPE","init"),this.ja?(dn(t,"$req",e),dn(t,"SID","null"),i.$=!0,Am(i,t,null)):Am(i,t,e),this.G=2}}else 3==this.G&&(n?Nm(this,n):0==this.l.length||EI(this.i)||Nm(this))},et.Ga=function(){if(this.u=null,Xv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=sh(Gr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Oi(10),Mm(this),Xv(this))},et.ab=function(){null!=this.v&&(this.v=null,Mm(this),MI(this),Oi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Oi(2)):(this.h.info("Failed to ping google.com"),Oi(1))},(et=PI.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},_h.prototype.g=function(n,e){return new Fi(n,e)},Sr(Fi,bn),Fi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wv(Gr(n.hb,n,e))),Oi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Lm(n,null,n.W),lp(n)},Fi.prototype.close=function(){Yv(this.g)},Fi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Jv(this.g,e)}else this.v?((e={}).__data__=mv(n),Jv(this.g,e)):Jv(this.g,n)},Fi.prototype.M=function(){this.g.j=null,delete this.j,Yv(this.g),delete this.g,Fi.Z.M.call(this)},Sr(ew,tp),Sr(OI,kv),Sr(Dl,PI),Dl.prototype.xa=function(){gr(this.g,"a")},Dl.prototype.wa=function(n){gr(this.g,new ew(n))},Dl.prototype.va=function(n){gr(this.g,new OI(n))},Dl.prototype.ua=function(){gr(this.g,"b")},_h.prototype.createWebChannel=_h.prototype.g,Fi.prototype.send=Fi.prototype.u,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,Av.NO_ERROR=0,Av.TIMEOUT=8,Av.HTTP_ERROR=6,xv.COMPLETE="complete",MD.EventType=Tm,Tm.OPEN="a",Tm.CLOSE="b",Tm.ERROR="c",Tm.MESSAGE="d",bn.prototype.listen=bn.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.La,Ar.prototype.getLastErrorCode=Ar.prototype.Da,Ar.prototype.getStatus=Ar.prototype.ba,Ar.prototype.getResponseJson=Ar.prototype.Qa,Ar.prototype.getResponseText=Ar.prototype.ga,Ar.prototype.send=Ar.prototype.ea;var FI=No.createWebChannelTransport=function(){return new _h},LI=No.getStatEventTarget=function(){return Xf()},dp=No.ErrorCode=Av,UI=No.EventType=xv,BD=No.Event=Cl,tw=No.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},VI=No.FetchXmlHttpFactory=op,yh=No.WebChannel=MD,jD=No.XhrIo=Ar;const BI="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let vh="9.8.3";const ba=new Ri.Yd("@firebase/firestore");function hp(){return ba.logLevel}function Oe(n,...e){if(ba.logLevel<=Ri.in.DEBUG){const t=e.map(Um);ba.debug(`Firestore (${vh}): ${n}`,...t)}}function ur(n,...e){if(ba.logLevel<=Ri.in.ERROR){const t=e.map(Um);ba.error(`Firestore (${vh}): ${n}`,...t)}}function wh(n,...e){if(ba.logLevel<=Ri.in.WARN){const t=e.map(Um);ba.warn(`Firestore (${vh}): ${n}`,...t)}}function Um(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${vh}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function Ct(n,e){n||tt()}function Ze(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class GI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $D{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,me.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},m=w=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new HI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Wr(e)}}class HD{constructor(e,t,r){this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class WI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new HD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new qI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Eh(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class KI{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Eh(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function Uc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ZI(n){return n+"\0"}class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new xn(0,0))}static max(){return new Tt(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ih{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ih?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Ih{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Ca=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Ih{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return Ca.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ne(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ne(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Qt.fromString(e))}static fromName(e){return new Ge(Qt.fromString(e).popFirst(5))}static empty(){return new Ge(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Qt(e.slice()))}}class bs{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Cs(n){return n.fields.find(e=>2===e.kind)}function ui(n){return n.fields.filter(e=>2!==e.kind)}bs.UNKNOWN_ID=-1;class fp{constructor(e,t){this.fieldPath=e,this.kind=t}}class bh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bh(0,Ts.min())}}function YI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Tt.fromTimestamp(1e9===r?new xn(t+1,0):new xn(t,r));return new Ts(i,Ge.empty(),e)}function QI(n){return new Ts(n.readTime,n.key,-1)}class Ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ts(Tt.min(),Ge.empty(),-1)}static max(){return new Ts(Tt.max(),Ge.empty(),-1)}}function nw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const Vm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ch{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Sl(n){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,me.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Vm)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Bm.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let m=0;m<a;m++){const w=m;t(e[w]).next(T=>{l[w]=T,++h,h===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class pp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new xr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new gp(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Hm(r.target.error);this.T.reject(new gp(e,i))}}static open(e,t,r,i){try{return new pp(t,e.transaction(i,r))}catch(a){throw new gp(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JI(t)}}class io{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===io.v((0,P.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,P.hl)())return!1;if(io.S())return!0;const e=(0,P.z$)(),t=io.v(e),r=0<t&&t<10,i=io.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,me.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new gp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new gp(e,h))},a.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,me.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.k(e);const m=pp.open(a.db,e,l?"readonly":"readwrite",r),w=i(m).next(T=>(m.R(),T)).catch(T=>(m.abort(T),ae.reject(T))).toPromise();return w.catch(()=>{}),yield m.A,w}catch(m){const w="FirebaseError"!==m.name&&h<3;if(Oe("SimpleDb","Transaction failed with error:",m.message,"Retrying:",w),a.close(),!w)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jm{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Cu(this.$.delete())}}class gp extends Ne{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bu(n){return"IndexedDbTransactionError"===n.name}class JI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cu(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}W(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,l,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const l=Hm(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}G(e,t){const r=[];return new ae((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new jm(h),w=t(h.primaryKey,h.value,m);if(w instanceof ae){const T=w.catch(S=>(m.done(),ae.reject(S)));r.push(T)}m.isDone?i():null===m.U?h.continue():h.continue(m.U)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Hm(r.target.error);t(i)}})}let $m=!1;function Hm(n){const e=io.v((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $m||($m=!0,setTimeout(()=>{throw r},0)),r}}return n}class XI{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){bu(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Sl(r)}yield t.Z(1)}))}}class eb{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(i,a)).next(h=>(Oe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=QI(a);nw(l,r)>0&&(r=l)}),new Ts(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Li{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function rw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Li.ot=-1;class Wn{constructor(e,t){this.comparator=e,this.root=t||li.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gm(this.root,e,this.comparator,!0)}}class Gm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class li{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:li.RED,this.left=null!=i?i:li.EMPTY,this.right=null!=a?a:li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new li(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}li.EMPTY=null,li.RED=!0,li.BLACK=!1,li.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new li(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Th(n){return n.hasNext()?n.getNext():void 0}class Ds{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Ds([])}unionWith(e){let t=new mn(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new kr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const qD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xl(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=qD.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vc(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function sw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nb(n){const e=n.mapValue.fields.__previous_value__;return sw(e)?nb(e):e}function mp(n){const e=xl(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}class zD{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class Tu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tu&&e.projectId===this.projectId&&e.database===this.database}}function _p(n){return null==n}function Dh(n){return 0===n&&1/n==-1/0}function ow(n){return"number"==typeof n&&Number.isInteger(n)&&!Dh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yp={nullValue:"NULL_VALUE"};function Rl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sw(n)?4:lw(n)?9007199254740991:10:tt()}function Oo(n,e){if(n===e)return!0;const t=Rl(n);if(t!==Rl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mp(n).isEqual(mp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=xl(r.timestampValue),l=xl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Vc(n.bytesValue).isEqual(Vc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Xn(r.geoPointValue.latitude)===Xn(i.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xn(r.integerValue)===Xn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Xn(r.doubleValue),l=Xn(i.doubleValue);return a===l?Dh(a)===Dh(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Uc(n.arrayValue.values||[],e.arrayValue.values||[],Oo);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(rw(a)!==rw(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Oo(a[h],l[h])))return!1;return!0}(n,e);default:return tt()}var i}function Sh(n,e){return void 0!==(n.values||[]).find(t=>Oo(t,e))}function Su(n,e){if(n===e)return 0;const t=Rl(n),r=Rl(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Xn(i.integerValue||i.doubleValue),h=Xn(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return aw(n.timestampValue,e.timestampValue);case 4:return aw(mp(n),mp(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Vc(i),h=Vc(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const w=Pt(l[m],h[m]);if(0!==w)return w}return Pt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Pt(Xn(i.latitude),Xn(a.latitude));return 0!==l?l:Pt(Xn(i.longitude),Xn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const w=Su(l[m],h[m]);if(w)return w}return Pt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Du.mapValue&&a===Du.mapValue)return 0;if(i===Du.mapValue)return 1;if(a===Du.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},w=Object.keys(m);h.sort(),w.sort();for(let T=0;T<h.length&&T<w.length;++T){const S=Pt(h[T],w[T]);if(0!==S)return S;const N=Su(l[h[T]],m[w[T]]);if(0!==N)return N}return Pt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw tt()}}function aw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=xl(n),r=xl(e),i=Pt(t.seconds,r.seconds);return 0!==i?i:Pt(t.nanos,r.nanos)}function Bc(n){return Wm(n)}function Wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=xl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Wm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Wm(r.fields[h])}`;return a+"}"}(n.mapValue):tt();var e}function Ss(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uw(n){return!!n&&"integerValue"in n}function vp(n){return!!n&&"arrayValue"in n}function jc(n){return!!n&&"nullValue"in n}function KD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ah(n){return!!n&&"mapValue"in n}function qm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Al(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function rb(n){return"nullValue"in n?yp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ss(Tu.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function SR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ss(Tu.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Du:tt()}function wt(n,e){const t=Su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ib(n,e){const t=Su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qm(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=qm(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ah(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Al(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ci(qm(this.value))}}function sb(n){const e=[];return Al(n.fields,(t,r)=>{const i=new lr([t]);if(Ah(r)){const a=sb(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ds(e)}class fn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new fn(e,0,Tt.min(),Tt.min(),ci.empty(),0)}static newFoundDocument(e,t,r){return new fn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new fn(e,2,t,Tt.min(),ci.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,Tt.min(),ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ZD{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ut=null}}function wp(n,e=null,t=[],r=[],i=null,a=null,l=null){return new ZD(n,e,t,r,i,a,l)}function Ta(n){const e=Ze(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Bc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),_p(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bc(r)).join(",")),e.ut=t}return e.ut}function zm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cb(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Oo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hw(n.startAt,e.startAt)&&hw(n.endAt,e.endAt)}function Ep(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Km(n,e){return n.filters.filter(t=>t instanceof qr&&t.field.isEqual(e))}function ob(n,e,t){let r=yp,i=!0;for(const a of Km(n,e)){let l=yp,h=!0;switch(a.op){case"<":case"<=":l=rb(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=yp}wt({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];wt({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function cw(n,e,t){let r=Du,i=!0;for(const a of Km(n,e)){let l=Du,h=!0;switch(a.op){case">=":case">":l=SR(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Du}ib({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];ib({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class qr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new ab(e,t,r):"array-contains"===t?new QD(e,r):"in"===t?new Ip(e,r):"not-in"===t?new JD(e,r):"array-contains-any"===t?new XD(e,r):new qr(e,t,r)}static ct(e,t,r){return"in"===t?new ub(e,r):new YD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Su(t,this.value)):null!==t&&Rl(this.value)===Rl(t)&&this.at(Su(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ab extends qr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.at(t)}}class ub extends qr{constructor(e,t){super(e,"in",t),this.keys=lb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YD extends qr{constructor(e,t){super(e,"not-in",t),this.keys=lb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class QD extends qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vp(t)&&Sh(t.arrayValue,this.value)}}class Ip extends qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sh(this.value.arrayValue,t)}}class JD extends qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sh(this.value.arrayValue,t)}}class XD extends qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sh(this.value.arrayValue,r))}}class kl{constructor(e,t){this.position=e,this.inclusive=t}}class Au{constructor(e,t="asc"){this.field=e,this.dir=t}}function cb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function dw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):Su(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function hw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oo(n.position[t],e.position[t]))return!1;return!0}class xu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.lt=null,this.ft=null}}function xh(n,e,t,r,i,a,l,h){return new xu(n,e,t,r,i,a,l,h)}function Da(n){return new xu(n)}function fw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pw(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Zm(n){return null!==n.collectionGroup}function $c(n){const e=Ze(n);if(null===e.lt){e.lt=[];const t=pw(e),r=fw(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Au(t)),e.lt.push(new Au(lr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Au(lr.keyField(),a))}}}return e.lt}function As(n){const e=Ze(n);if(!e.ft)if("F"===e.limitType)e.ft=wp(e.path,e.collectionGroup,$c(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of $c(e))t.push(new Au(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new kl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new kl(e.startAt.position,e.startAt.inclusive):null;e.ft=wp(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function db(n,e,t){return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rh(n,e){return zm(As(n),As(e))&&n.limitType===e.limitType}function hb(n){return`${Ta(As(n))}|lt:${n.limitType}`}function gw(n){return`Query(target=${function er(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bc(r.value)}`;var r}).join(", ")}]`),_p(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bc(t)).join(",")),`Target(${e})`}(As(n))}; limitType=${n.limitType})`}function fb(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=dw(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,$c(t),r)||t.endAt&&!function(i,a,l){const h=dw(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,$c(t),r)));var t,r}function tS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nS(n){return(e,t)=>{let r=!1;for(const i of $c(n)){const a=AR(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function AR(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?Su(h,m):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function mw(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function bp(n){return{integerValue:""+n}}function pb(n,e){return ow(e)?bp(e):mw(n,e)}class Ym{constructor(){this._=void 0}}function gb(n,e,t){return n instanceof kh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Hc?_b(n,e):n instanceof Gc?_w(n,e):function(r,i){const a=mb(r,i),l=yb(a)+yb(r._t);return uw(a)&&uw(r._t)?bp(l):mw(r.wt,l)}(n,e)}function Cp(n,e,t){return n instanceof Hc?_b(n,e):n instanceof Gc?_w(n,e):t}function mb(n,e){return n instanceof Mh?uw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class kh extends Ym{}class Hc extends Ym{constructor(e){super(),this.elements=e}}function _b(n,e){const t=Wc(e);for(const r of n.elements)t.some(i=>Oo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Gc extends Ym{constructor(e){super(),this.elements=e}}function _w(n,e){let t=Wc(e);for(const r of n.elements)t=t.filter(i=>!Oo(i,r));return{arrayValue:{values:t}}}class Mh extends Ym{constructor(e,t){super(),this.wt=e,this._t=t}}function yb(n){return Xn(n.integerValue||n.doubleValue)}function Wc(n){return vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tp{constructor(e,t){this.field=e,this.transform=t}}class rS{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Dp{}function wb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new qc(n.key,Bn.none()):new Nh(n.key,n.data,Bn.none());{const t=n.data,r=ci.empty();let i=new mn(lr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Ru(n.key,r,new Ds(i.toArray()),Bn.none())}}function yw(n,e,t){n instanceof Nh?function(r,i,a){const l=r.value.clone(),h=Jm(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ru?function(r,i,a){if(!Qm(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Jm(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Ib(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sp(n,e,t,r){return n instanceof Nh?function(i,a,l,h){if(!Qm(i.precondition,a))return l;const m=i.value.clone(),w=bb(i.fieldTransforms,h,a);return m.setAll(w),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ru?function(i,a,l,h){if(!Qm(i.precondition,a))return l;const m=bb(i.fieldTransforms,h,a),w=a.data;return w.setAll(Ib(i)),w.setAll(m),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,Qm(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Eb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=mb(r.transform,i||null);null!=a&&(null===t&&(t=ci.empty()),t.set(r.field,a))}return t||null}function vw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Uc(t,r,(i,a)=>function vb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hc&&r instanceof Hc||t instanceof Gc&&r instanceof Gc?Uc(t.elements,r.elements,Oo):t instanceof Mh&&r instanceof Mh?Oo(t._t,r._t):t instanceof kh&&r instanceof kh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Nh extends Dp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ru extends Dp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ib(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Jm(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,Cp(l,h,t[i]))}return r}function bb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,gb(a,l,e))}return r}class qc extends Dp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ww extends Dp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iS{constructor(e){this.count=e}}var mr,Xt;function Cb(n){switch(n){default:return tt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function Tb(n){if(void 0===n)return ur("GRPC error has no .code"),he.UNKNOWN;switch(n){case mr.OK:return he.OK;case mr.CANCELLED:return he.CANCELLED;case mr.UNKNOWN:return he.UNKNOWN;case mr.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case mr.INTERNAL:return he.INTERNAL;case mr.UNAVAILABLE:return he.UNAVAILABLE;case mr.UNAUTHENTICATED:return he.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case mr.NOT_FOUND:return he.NOT_FOUND;case mr.ALREADY_EXISTS:return he.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return he.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case mr.ABORTED:return he.ABORTED;case mr.OUT_OF_RANGE:return he.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return he.UNIMPLEMENTED;case mr.DATA_LOSS:return he.DATA_LOSS;default:return tt()}}(Xt=mr||(mr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Al(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return iw(this.inner)}size(){return this.innerSize}}const sS=new Wn(Ge.comparator);function Ui(){return sS}const Ew=new Wn(Ge.comparator);function Ap(...n){let e=Ew;for(const t of n)e=e.insert(t.key,t);return e}function Db(n){let e=Ew;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fo(){return xp()}function Sb(){return xp()}function xp(){return new Ml(n=>n.toString(),(n,e)=>n.isEqual(e))}const oS=new Wn(Ge.comparator),Iw=new mn(Ge.comparator);function kt(...n){let e=Iw;for(const t of n)e=e.add(t);return e}const Ab=new mn(Pt);function Ph(){return Ab}class Rp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,kp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Rp(Tt.min(),r,Ph(),Ui(),kt())}}class kp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new kp(kr.EMPTY_BYTE_STRING,t,kt(),kt(),kt())}}class Oh{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class xb{constructor(e,t){this.targetId=e,this.It=t}}class Rb{constructor(e,t,r=kr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kb{constructor(){this.Tt=0,this.Et=bw(),this.At=kr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=kt(),t=kt(),r=kt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tt()}}),new kp(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=bw()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class Mb{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ui(),this.Bt=Nb(),this.Lt=new mn(Pt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(Ep(a))if(0===r){const l=new Ge(a.path);this.Kt(t,l,fn.newNoDocument(l,Tt.min()))}else Ct(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,l)=>{const h=this.Ht(l);if(h){if(a.current&&Ep(h.target)){const m=new Ge(h.target.path);null!==this.$t.get(m)||this.Xt(l,m)||this.Kt(l,m,fn.newNoDocument(m,e))}a.vt&&(t.set(l,a.St()),a.Dt())}});let r=kt();this.Bt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const w=this.Ht(m);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.$t.forEach((a,l)=>l.setReadTime(e));const i=new Rp(e,t,this.Lt,this.$t,r);return this.$t=Ui(),this.Bt=Nb(),this.Lt=new mn(Pt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new kb,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new mn(Pt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new kb),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Nb(){return new Wn(Ge.comparator)}function bw(){return new Wn(Ge.comparator)}const xR={asc:"ASCENDING",desc:"DESCENDING"},aS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Xm{constructor(e,t){this.databaseId=e,this.dt=t}}function Mp(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zc(n,e){return n.dt?e.toBase64():e.toUint8Array()}function Np(n,e){return Mp(n,e.toTimestamp())}function zr(n){return Ct(!!n),Tt.fromTimestamp(function(e){const t=xl(e);return new xn(t.seconds,t.nanos)}(n))}function Pb(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cw(n){const e=Qt.fromString(n);return Ct(hS(e)),e}function Pp(n,e){return Pb(n.databaseId,e.path)}function Sa(n,e){const t=Cw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Dw(t))}function Tw(n,e){return Pb(n.databaseId,e)}function Ob(n){const e=Cw(n);return 4===e.length?Qt.emptyPath():Dw(e)}function Fh(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dw(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function e_(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function Op(n,e,t){const r=Sa(n,e.name),i=zr(e.updateTime),a=new ci({mapValue:{fields:e.fields}}),l=fn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Lh(n,e){let t;if(e instanceof Nh)t={update:e_(n,e.key,e.value)};else if(e instanceof qc)t={delete:Pp(n,e.key)};else if(e instanceof Ru)t={update:e_(n,e.key,e.data),updateMask:dS(e.fieldMask)};else{if(!(e instanceof ww))return tt();t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof kh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mh)return{fieldPath:a.field.canonicalString(),increment:l._t};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Np(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:tt()),t;var i}function t_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Bn.updateTime(zr(i.updateTime)):void 0!==i.exists?Bn.exists(i.exists):Bn.none():Bn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),h=new kh):"appendMissingElements"in l?h=new Hc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Gc(l.removeAllFromArray.values||[]):"increment"in l?h=new Mh(a,l.increment):tt();const m=lr.fromServerFormat(l.fieldPath);return new Tp(m,h)}(n,i)):[];var i;if(e.update){const i=Sa(n,e.update.name),a=new ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ds((e.updateMask.fieldPaths||[]).map(w=>lr.fromServerFormat(w)));return new Ru(i,a,l,t,r)}return new Nh(i,a,t,r)}if(e.delete){const i=Sa(n,e.delete);return new qc(i,t)}if(e.verify){const i=Sa(n,e.verify);return new ww(i,t)}return tt()}function Fb(n,e){return{documents:[Tw(n,e.path)]}}function n_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Tw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Tw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const w=m.map(T=>function(S){if("=="===S.op){if(KD(S.value))return{unaryFilter:{field:Kc(S.field),op:"IS_NAN"}};if(jc(S.value))return{unaryFilter:{field:Kc(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(KD(S.value))return{unaryFilter:{field:Kc(S.field),op:"IS_NOT_NAN"}};if(jc(S.value))return{unaryFilter:{field:Kc(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(S.field),op:Uh(S.op),value:S.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(w=>{return{field:Kc((T=w).field),direction:cS(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.dt||_p(w)?w:{value:w});var w,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Lb(n){let e=Ob(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=Ub(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new Au(Lo((S=T).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(T){let S;return S="object"==typeof T?T.value:T,_p(S)?null:S}(t.limit));let m=null;var T;t.startAt&&(m=new kl((T=t.startAt).values||[],!!T.before));let w=null;return t.endAt&&(w=function(T){return new kl(T.values||[],!T.before)}(t.endAt)),xh(e,i,l,a,h,"F",m,w)}function Ub(n){return n?void 0!==n.unaryFilter?[Vb(n)]:void 0!==n.fieldFilter?[kR(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ub(e)).reduce((e,t)=>e.concat(t)):tt():[]}function cS(n){return xR[n]}function Uh(n){return aS[n]}function Kc(n){return{fieldPath:n.canonicalString()}}function Lo(n){return lr.fromServerFormat(n.fieldPath)}function kR(n){return qr.create(Lo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Vb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Lo(n.unaryFilter.field);return qr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Lo(n.unaryFilter.field);return qr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lo(n.unaryFilter.field);return qr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Lo(n.unaryFilter.field);return qr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function dS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sw(e)),e=MR(n.get(t),e);return Sw(e)}function MR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Sw(n){return n+"\x01\x01"}function so(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&tt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:tt()}a=l+2}return new Qt(r)}const Aw=["userId","batchId"];function r_(n,e){return[n,bi(e)]}function Bb(n,e,t){return[n,bi(e),t]}const fS={},pS=["prefixPath","collectionGroup","readTime","documentId"],gS=["prefixPath","collectionGroup","documentId"],mS=["collectionGroup","readTime","prefixPath","documentId"],_S=["canonicalId","targetId"],yS=["targetId","path"],vS=["path","targetId"],Lp=["collectionId","parent"],jb=["indexId","uid"],$b=["uid","sequenceNumber"],Hb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gb=["indexId","uid","orderedDocumentKey"],Wb=["userId","collectionPath","documentId"],wS=["userId","collectionPath","largestBatchId"],ES=["userId","collectionGroup","largestBatchId"],qb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IS=[...qb,"documentOverlays"],zb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kb=zb,bS=[...Kb,"indexConfiguration","indexState","indexEntries"];class Zc extends Ch{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Kr(n,e){const t=Ze(n);return io.N(t.ee,e)}class Up{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&yw(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Sb();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const m=wb(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&Uc(this.mutations,e.mutations,(t,r)=>vw(t,r))&&Uc(this.baseMutations,e.baseMutations,(t,r)=>vw(t,r))}}class oo{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=oS;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new oo(e,t,r,i)}}class xw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Aa{constructor(e,t,r,i,a=Tt.min(),l=Tt.min(),h=kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vh{constructor(e){this.ne=e}}function Zb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:i_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pp(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Mp(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xa(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:xa(e.version)}}var i,a;return r}function i_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ra(n){const e=new xn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Yc(n,e){const t=(e.baseMutations||[]).map(a=>t_(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>t_(n.ne,a)),i=xn.fromMillis(e.localWriteTimeMs);return new Up(e.batchId,i,t,r)}function Vp(n){const e=Ra(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ra(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=As(Da(Ob(i.documents[0])))):r=As(Lb(n.query)),new Aa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken))}function Rw(n,e){const t=xa(e.snapshotVersion),r=xa(e.lastLimboFreeSnapshotVersion);let i;i=Ep(e.target)?Fb(n.ne,e.target):n_(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ta(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function s_(n){const e=Lb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?db(e,e.limit,"L"):e}function Bp(n,e){return new xw(e.largestBatchId,t_(n.ne,e.overlayMutation))}function kw(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}function Yb(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xa(r.readTime),documentKey:bi(r.documentKey.path),largestBatchId:r.largestBatchId}}class TS{getBundleMetadata(e,t){return DS(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ra(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return DS(e).put({bundleId:(r=t).id,createTime:xa(zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return o_(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:s_(i.bundledQuery),readTime:Ra(i.readTime)};var i})}saveNamedQuery(e,t){return o_(e).put({name:(r=t).name,readTime:xa(zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function DS(n){return Kr(n,"bundles")}function o_(n){return Kr(n,"namedQueries")}class Bh{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Bh(e,t.uid||"")}getOverlay(e,t){return jh(e).get(kw(this.userId,t)).next(r=>r?Bp(this.wt,r):null)}getOverlays(e,t){const r=Fo();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new xw(t,l);i.push(this.ie(e,h))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(bi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(jh(e).W("collectionPathOverlayIndex",h))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Fo(),a=bi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return jh(e).K("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const w=Bp(this.wt,m);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Fo();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jh(e).J({index:"collectionGroupOverlayIndex",range:h},(m,w,T)=>{const S=Bp(this.wt,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):T.done()}).next(()=>a)}ie(e,t){return jh(e).put(function(r,i,a){const[l,h,m]=kw(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Lh(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function jh(n){return Kr(n,"documentOverlays")}class ku{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Dh(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Vc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?lw(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):tt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Ge.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Mw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Qb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Mw(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}ku.ye=new ku;class SS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=Qb(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=Qb(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class AS{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class xS{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class $h{constructor(){this.Me=new SS,this.Fe=new AS(this.Me),this.$e=new xS(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Mu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mu(this.indexId,this.documentKey,this.arrayValue,r)}}function Nl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Jb(n.arrayValue,e.arrayValue),0!==t?t:(t=Jb(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function Jb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Xb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Cs(e);if(void 0!==t&&!this.Qe(t))return!1;const r=ui(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const l=r[i];if(!this.je(this.Ke,l)||!this.We(this.Ue[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class eC{constructor(){this.ze=new Nw}addToCollectionParentIndex(e,t){return this.ze.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Ts.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class Nw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(Qt.comparator)).toArray()}}const jp=new Uint8Array(0);class tC{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Nw,this.Je=new Ml(r=>Ta(r),(r,i)=>zm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:bi(i)};return nC(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ZI(t),""],!1,!0);return nC(e).K(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(so(l.parent))}return r})}addFieldIndex(e,t){const r=a_(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Mr(e);return a.next(h=>{l.put(Yb(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=a_(e),i=Mr(e),a=Hh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Hh(e);let i=!0;const a=new Map;return ae.forEach(this.Ye(t),l=>this.Xe(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=kt();const h=[];return ae.forEach(a,(m,w)=>{var T;Oe("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(ut=>`${ut.fieldPath}:${ut.kind}`).join(",")}`} to execute ${Ta(t)}`);const S=function(ut,it){const Mt=Cs(it);if(void 0===Mt)return null;for(const Zt of Km(ut,Mt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(w,m),N=function(ut,it){const Mt=new Map;for(const Zt of ui(it))for(const Yr of Km(ut,Zt.fieldPath))switch(Yr.op){case"==":case"in":Mt.set(Zt.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Mt.set(Zt.fieldPath.canonicalString(),Yr.value),Array.from(Mt.values())}return null}(w,m),U=function(ut,it){const Mt=[];let Zt=!0;for(const Yr of ui(it)){const ju=0===Yr.kind?ob(ut,Yr.fieldPath,ut.startAt):cw(ut,Yr.fieldPath,ut.startAt);Mt.push(ju.value),Zt&&(Zt=ju.inclusive)}return new kl(Mt,Zt)}(w,m),q=function(ut,it){const Mt=[];let Zt=!0;for(const Yr of ui(it)){const ju=0===Yr.kind?cw(ut,Yr.fieldPath,ut.endAt):ob(ut,Yr.fieldPath,ut.endAt);Mt.push(ju.value),Zt&&(Zt=ju.inclusive)}return new kl(Mt,Zt)}(w,m),_e=this.Ze(m,w,U),De=this.Ze(m,w,q),st=this.tn(m,w,N),ot=this.en(m.indexId,S,_e,U.inclusive,De,q.inclusive,st);return ae.forEach(ot,ut=>r.j(ut,t.limit).next(it=>{it.forEach(Mt=>{const Zt=Ge.fromSegments(Mt.documentKey);l.has(Zt)||(l=l.add(Zt),h.push(Zt))})}))}).next(()=>h)}return ae.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),w=m/(null!=t?t.length:1),T=[];for(let S=0;S<m;++S){const N=t?this.nn(t[S/w]):jp,U=this.sn(e,N,r[S%w],i),q=this.rn(e,N,a[S%w],l),_e=h.map(De=>this.sn(e,N,De,!0));T.push(...this.createRange(U,q,_e))}return T}sn(e,t,r,i){const a=new Mu(e,Ge.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new Mu(e,Ge.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new Xb(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.Ge(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return ae.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new mn(lr.comparator),m=!1;for(const w of l.filters){const T=w;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?m=!0:h=h.add(T.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new $h;for(const i of ui(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Be(i.kind);ku.ye.re(a,l)}return r.Oe()}nn(e){const t=new $h;return ku.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new $h;return ku.ye.re(Ss(this.databaseId,t),r.Be(function(i){const a=ui(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new $h);let a=0;for(const l of ui(e)){const h=r[a++];for(const m of i)if(this.cn(t,l.fieldPath)&&vp(h))i=this.an(i,l,h);else{const w=m.Be(l.kind);ku.ye.re(h,w)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new $h;m.seed(h.Oe()),ku.ye.re(l,m.Be(t.kind)),a.push(m)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof qr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=a_(e),i=Mr(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const l=[];return ae.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(w,T){const S=T?new bh(T.sequenceNumber,new Ts(Ra(T.readTime),new Ge(so(T.documentKey)),T.largestBatchId)):bh.empty(),N=w.fields.map(([U,q])=>new fp(lr.fromServerFormat(U),q));return new bs(w.indexId,w.collectionGroup,N,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Pt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=a_(e),a=Mr(e);return this.ln(e).next(l=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ae.forEach(h,m=>a.put(Yb(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ae.forEach(h,m=>this.fn(e,i,m).next(w=>{const T=this.dn(a,m);return w.isEqual(T)?ae.resolve():this._n(e,a,m,w,T)}))))})}wn(e,t,r,i){return Hh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return Hh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=Hh(e);let a=new mn(Nl);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,h)=>{a=a.add(new Mu(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}dn(e,t){let r=new mn(Nl);const i=this.on(t,e);if(null==i)return r;const a=Cs(t);if(null!=a){const l=e.data.field(a.fieldPath);if(vp(l))for(const h of l.arrayValue.values||[])r=r.add(new Mu(t.indexId,e.key,this.nn(h),i))}else r=r.add(new Mu(t.indexId,e.key,jp,i));return r}_n(e,t,r,i,a){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,w,T,S){const N=h.getIterator(),U=m.getIterator();let q=Th(N),_e=Th(U);for(;q||_e;){let De=!1,st=!1;if(q&&_e){const ot=w(q,_e);ot<0?st=!0:ot>0&&(De=!0)}else null!=q?st=!0:De=!0;De?(T(_e),_e=Th(U)):st?(S(q),q=Th(N)):(q=Th(N),_e=Th(U))}}(i,a,Nl,h=>{l.push(this.wn(e,t,r,h))},h=>{l.push(this.mn(e,t,r,h))}),ae.waitFor(l)}ln(e){let t=1;return Mr(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Nl(l,h)).filter((l,h,m)=>!h||0!==Nl(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=Nl(l,e),m=Nl(l,t);if(0===h)i[0]=e.Le();else if(h>0&&m<0)i.push(l),i.push(l.Le());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,jp,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,jp,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Qc)}getMinOffset(e,t){return ae.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||tt())).next(Qc)}}function nC(n){return Kr(n,"collectionParents")}function Hh(n){return Kr(n,"indexEntries")}function a_(n){return Kr(n,"indexConfiguration")}function Mr(n){return Kr(n,"indexState")}function Qc(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;nw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ts(e.readTime,e.documentKey,t)}const rC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function RS(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.J({range:l},(T,S,N)=>(h++,N.delete()));a.push(m.next(()=>{Ct(1===h)}));const w=[];for(const T of t.mutations){const S=Bb(e,T.key.path,t.batchId);a.push(i.delete(S)),w.push(T.key)}return ae.waitFor(a).next(()=>w)}function Pl(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(41943040,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);class u_{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new u_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).J({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Jc(e),l=Ol(e);return l.add({}).next(h=>{Ct("number"==typeof h);const m=new Up(h,t,r,i),w=function(N,U,q){const _e=q.baseMutations.map(st=>Lh(N.ne,st)),De=q.mutations.map(st=>Lh(N.ne,st));return{userId:U,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:_e,mutations:De}}(this.wt,this.userId,m),T=[];let S=new mn((N,U)=>Pt(N.canonicalString(),U.canonicalString()));for(const N of i){const U=Bb(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),T.push(l.put(w)),T.push(a.put(U,fS))}return S.forEach(N=>{T.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[h]=m.keys()}),ae.waitFor(T).next(()=>m)})}lookupMutationBatch(e,t){return Ol(e).get(t).next(r=>r?(Ct(r.userId===this.userId),Yc(this.wt,r)):null)}yn(e,t){return this.gn[t]?ae.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ol(e).J({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(Ct(h.batchId>=r),a=Yc(this.wt,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ol(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ol(e).K("userMutationsIndex",t).next(r=>r.map(i=>Yc(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=r_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Jc(e).J({range:i},(l,h,m)=>{const[w,T,S]=l,N=so(T);if(w===this.userId&&t.path.isEqual(N))return Ol(e).get(S).next(U=>{if(!U)throw tt();Ct(U.userId===this.userId),a.push(Yc(this.wt,U))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Pt);const i=[];return t.forEach(a=>{const l=r_(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=Jc(e).J({range:h},(w,T,S)=>{const[N,U,q]=w,_e=so(U);N===this.userId&&a.path.isEqual(_e)?r=r.add(q):S.done()});i.push(m)}),ae.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=r_(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new mn(Pt);return Jc(e).J({range:l},(m,w,T)=>{const[S,N,U]=m,q=so(N);S===this.userId&&r.isPrefixOf(q)?q.length===i&&(h=h.add(U)):T.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ol(e).get(a).next(l=>{if(null===l)throw tt();Ct(l.userId===this.userId),r.push(Yc(this.wt,l))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return RS(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Jc(e).J({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=so(a[1]);i.push(m)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return l_(e,this.userId,t)}Tn(e){return iC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function l_(n,e,t){const r=r_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Jc(n).J({range:a,H:!0},(h,m,w)=>{const[T,S,N]=h;T===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function Ol(n){return Kr(n,"mutations")}function Jc(n){return Kr(n,"documentMutations")}function iC(n){return Kr(n,"mutationQueues")}class Xc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Xc(0)}static Rn(){return new Xc(-1)}}class Pw{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Xc(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Tt.fromTimestamp(new xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ed(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ed(e).J((l,h)=>{const m=Vp(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ed(e).J((r,i)=>{const a=Vp(i);t(a)})}bn(e){return Ow(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Pn(e,t){return Ow(e).put("targetGlobalKey",t)}vn(e,t){return ed(e).put(Rw(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ta(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ed(e).J({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const w=Vp(h);zm(t,w.target)&&(a=w,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Uo(e);return t.forEach(l=>{const h=bi(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=Uo(e);return ae.forEach(t,a=>{const l=bi(a.path);return ae.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Uo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Uo(e);let a=kt();return i.J({range:r,H:!0},(l,h,m)=>{const w=so(l[1]),T=new Ge(w);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=bi(t.path),i=IDBKeyRange.bound([r],[ZI(r)],!1,!0);let a=0;return Uo(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,h],m,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}te(e,t){return ed(e).get(t).next(r=>r?Vp(r):null)}}function ed(n){return Kr(n,"targets")}function Ow(n){return Kr(n,"targetGlobal")}function Uo(n){return Kr(n,"targetDocuments")}function c_([n,e],[t,r]){const i=Pt(n,t);return 0===i?Pt(e,r):i}class NR{constructor(e){this.Sn=e,this.buffer=new mn(c_),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();c_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sC{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Sl(r)}yield t.kn(3e5)}))}}class kS{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Li.ot);const r=new NR(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(rC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rC):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,l,h,m,w;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),hp()<=Ri.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(w-m)+`ms\nTotal Duration: ${w-T}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class oC{constructor(e,t){this.db=e,this.garbageCollector=new kS(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return td(e,r)}removeReference(e,t,r){return td(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return td(e,t)}Un(e,t){return function(r,i){let a=!1;return iC(r).Y(l=>l_(r,l,i).next(h=>(h&&(a=!0),ae.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(l,h)=>{if(h<=t){const m=this.Un(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Tt.min()),Uo(e).delete([0,bi(l.path)])))});i.push(m)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return td(e,t)}Ln(e,t){const r=Uo(e);let i,a=Li.ot;return r.J({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:w})=>{0===l?(a!==Li.ot&&t(new Ge(so(i)),a),a=w,i=m):a=Li.ot}).next(()=>{a!==Li.ot&&t(new Ge(so(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function td(n,e){return Uo(n).put((r=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:r}));var r}class Fw{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MS{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return nd(e).put(r)}removeEntry(e,t,r){return nd(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],i_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=fn.newInvalidDocument(t);return nd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($p(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:fn.newInvalidDocument(t)};return nd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($p(t))},(i,a)=>{r={document:this.Kn(t,a),size:Pl(a)}}).next(()=>r)}getEntries(e,t){let r=Ui();return this.Qn(e,t,(i,a)=>{const l=this.Kn(i,a);r=r.insert(i,l)}).next(()=>r)}jn(e,t){let r=Ui(),i=new Wn(Ge.comparator);return this.Qn(e,t,(a,l)=>{const h=this.Kn(a,l);r=r.insert(a,h),i=i.insert(a,Pl(l))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ae.resolve();let i=new mn(Vw);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound($p(i.first()),$p(i.last())),l=i.getIterator();let h=l.getNext();return nd(e).J({index:"documentKeyIndex",range:a},(m,w,T)=>{const S=Ge.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&Vw(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?T.q($p(h)):T.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),i_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nd(e).K(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Ui();for(const m of l){const w=this.Kn(Ge.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Ui();const l=Uw(t,r),h=Uw(t,Ts.max());return nd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,w,T)=>{const S=this.Kn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new Lw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return NS(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}qn(e,t){return NS(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function CS(n,e){let t;if(e.document)t=Op(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Ra(e.noDocument.readTime);t=fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ge.fromSegments(e.unknownDocument.path),i=Ra(e.unknownDocument.version);t=fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new xn(r[0],r[1]);return Tt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return fn.newInvalidDocument(e)}}function d_(n){return new MS(n)}class Lw extends Fw{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Ml(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((a,l)=>Pt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=Zb(this.zn.wt,l);i=i.add(a.path.popLast()),r+=Pl(m)-h.size,t.push(this.zn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=Zb(this.zn.wt,l.convertToNoDocument(Tt.min()));t.push(this.zn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,l)=>{this.Hn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function NS(n){return Kr(n,"remoteDocumentGlobal")}function nd(n){return Kr(n,"remoteDocumentsV14")}function $p(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Uw(n,e){const t=e.documentKey.path.toArray();return[n,i_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Pt(t[a],r[a]),i)return i;return i=Pt(t.length,r.length),i||(i=Pt(t[t.length-2],r[r.length-2]),i||Pt(t[t.length-1],r[r.length-1]))}class PS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bw{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Sp(r.mutation,i,Ds.empty(),xn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const i=Fo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Ap();return a.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Fo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Ui();const l=xp(),h=xp();return t.forEach((m,w)=>{const T=r.get(w.key);i.has(w.key)&&(void 0===T||T.mutation instanceof Ru)?a=a.insert(w.key,w):void 0!==T&&(l.set(w.key,T.mutation.getFieldMask()),Sp(T.mutation,w,T.mutation.getFieldMask(),xn.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((w,T)=>l.set(w,T)),t.forEach((w,T)=>{var S;return h.set(w,new PS(T,null!==(S=l.get(w))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=xp();let i=new Wn((l,h)=>l-h),a=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const w=t.get(m);if(null===w)return;let T=r.get(m)||Ds.empty();T=h.applyToLocalView(w,T),r.set(m,T);const S=(i.get(h.batchId)||kt()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),w=m.key,T=m.value,S=Sb();T.forEach(N=>{if(!a.has(N)){const U=wb(t.get(N),r.get(N));null!==U&&S.set(N,U),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Zm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(Fo());let h=-1,m=a;return l.next(w=>ae.forEach(w,(T,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(T)?ae.resolve():this.getBaseDocument(e,T,S).next(N=>{m=m.insert(T,N)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,m,w,kt())).next(T=>({batchId:h,changes:Db(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=Ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ap();return this.indexManager.getCollectionParents(e,i).next(l=>ae.forEach(l,h=>{const m=(w=t,T=h.child(i),new xu(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(w=>{w.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,m)=>{const w=m.getKey();null===i.get(w)&&(i=i.insert(w,fn.newInvalidDocument(w)))});let l=Ap();return i.forEach((h,m)=>{const w=a.get(h);void 0!==w&&Sp(w.mutation,m,Ds.empty(),xn.now()),fb(t,m)&&(l=l.insert(h,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ae.resolve(fn.newInvalidDocument(t))}}class aC{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ae.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:zr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:s_(r.bundledQuery),readTime:zr(r.readTime)}),ae.resolve();var r}}class OS{constructor(){this.overlays=new Wn(Ge.comparator),this.Xn=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fo();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=Fo(),a=t.length+1,l=new Ge(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,w=m.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Wn((w,T)=>w-T);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let T=a.get(w.largestBatchId);null===T&&(T=Fo(),a=a.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const h=Fo(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,T)=>h.set(w,T)),!(h.size()>=i)););return ae.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new xw(t,r));let a=this.Xn.get(t);void 0===a&&(a=kt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class jw{constructor(){this.Zn=new mn(Nr.ts),this.es=new mn(Nr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Nr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Nr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ge(new Qt([])),r=new Nr(t,e),i=new Nr(t,e+1),a=[];return this.es.forEachInRange([r,i],l=>{this.rs(l),a.push(l.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ge(new Qt([])),r=new Nr(t,e),i=new Nr(t,e+1);let a=kt();return this.es.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Nr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Nr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ge.comparator(e.key,t.key)||Pt(e.ls,t.ls)}static ns(e,t){return Pt(e.ls,t.ls)||Ge.comparator(e.key,t.key)}}class FS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new mn(Nr.ts)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const l=new Up(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.ds=this.ds.add(new Nr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nr(t,0),i=new Nr(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],l=>{const h=this._s(l.ls);a.push(h)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Pt);return t.forEach(i=>{const a=new Nr(i,0),l=new Nr(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,l],h=>{r=r.add(h.ls)})}),ae.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const l=new Nr(new Ge(a),0);let h=new mn(Pt);return this.ds.forEachWhile(m=>{const w=m.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(m.ls)),!0)},l),ae.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ae.forEach(t.mutations,i=>{const a=new Nr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Nr(t,0),i=this.ds.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uC{constructor(e){this.ps=e,this.docs=new Wn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():fn.newInvalidDocument(i))}),ae.resolve(r)}getAllFromCollection(e,t,r){let i=Ui();const a=new Ge(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:m}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||nw(QI(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){tt()}Is(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lC(this)}getSize(e){return ae.resolve(this.size)}}class lC extends Fw{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class cC{constructor(e){this.persistence=e,this.Ts=new Ml(t=>Ta(t),zm),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Es=0,this.As=new jw,this.targetCount=0,this.Rs=Xc.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ae.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Xc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.vn(t),ae.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.As.containsKey(t))}}class $w{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Li(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new cC(this),this.indexManager=new eC,this.remoteDocumentCache=new uC(r=>this.referenceDelegate.Ss(r)),this.wt=new Vh(t),this.Ds=new aC(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new FS(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new LS(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return ae.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class LS extends Ch{constructor(e){super(),this.currentSequenceNumber=e}}class h_{constructor(e){this.persistence=e,this.ks=new jw,this.Os=null}static Ms(e){return new h_(e)}get Fs(){if(this.Os)return this.Os;throw tt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ae.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Fs,r=>{const i=Ge.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Tt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ae.or([()=>ae.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class PR{constructor(e){this.wt=e}O(e,t,r,i){const a=new pp("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Aw,{unique:!0}),h.createObjectStore("documentMutations"),Hw(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Hw(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").K().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Aw,{unique:!0});const T=m.store("mutations"),S=w.map(N=>T.put(N));return ae.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Bs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(l=l.next(()=>this.Us(a))),r<8&&i>=8&&(l=l.next(()=>this.qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ks(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:Wb});m.createIndex("collectionPathOverlayIndex",wS,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",ES,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:pS});m.createIndex("documentKeyIndex",gS),m.createIndex("collectionGroupIndex",mS)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Qs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:jb}).createIndex("sequenceNumberIndex",$b,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Hb}).createIndex("documentKeyIndex",Gb,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Pl(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ae.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(h=>ae.forEach(h,m=>{Ct(m.userId===a.userId);const w=Yc(this.wt,m);return RS(e,a.userId,w).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((l,h)=>{const m=new Qt(l),w=[0,bi(m)];a.push(t.get(w).next(T=>T?ae.resolve():t.put({targetId:0,path:bi(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Lp});const r=t.store("collectionParents"),i=new Nw,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:bi(m)})}};return t.store("remoteDocuments").J({H:!0},(l,h)=>{const m=new Qt(l);return a(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,h,m],w)=>{const T=so(h);return a(T.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=Vp(i),l=Rw(this.wt,a);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(w=l,w.document?new Ge(Qt.fromString(w.document.name).popFirst(5)):w.noDocument?Ge.fromSegments(w.noDocument.path):w.unknownDocument?Ge.fromSegments(w.unknownDocument.path):tt()).path.toArray();var w;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(T))}).next(()=>ae.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=d_(this.wt),a=new $w(h_.Ms,this.wt.ne);return r.K().next(l=>{const h=new Map;return l.forEach(m=>{var w;let T=null!==(w=h.get(m.userId))&&void 0!==w?w:kt();Yc(this.wt,m).keys().forEach(S=>T=T.add(S)),h.set(m.userId,T)}),ae.forEach(h,(m,w)=>{const T=new Wr(w),S=Bh.se(this.wt,T),N=a.getIndexManager(T),U=u_.se(T,this.wt,N,a.referenceDelegate);return new Bw(i,U,S,N).recalculateAndSaveOverlaysForDocumentKeys(new Zc(t,Li.ot),m).next()})})}}function Hw(n){n.createObjectStore("targetDocuments",{keyPath:yS}).createIndex("documentTargetsIndex",vS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_S,{unique:!0}),n.createObjectStore("targetGlobal")}const dC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hC{constructor(e,t,r,i,a,l,h,m,w,T,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=l,this.document=h,this.Ws=w,this.zs=T,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!hC.V())throw new Ne(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oC(this,i),this.ei=t+"main",this.wt=new Vh(m),this.ni=new io(this.ei,this.Hs,new PR(this.wt)),this.Vs=new Pw(this.referenceDelegate,this.wt),this.remoteDocumentCache=d_(this.wt),this.Ds=new TS,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===T&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,dC);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Li(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(bu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return f_(e).get("owner").next(t=>ae.resolve(this.di(t)))}_i(e){return Gw(e).delete(this.clientId)}wi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Kr(r,"clientMetadata");return i.K().next(a=>{const l=e.gi(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return ae.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ae.resolve(!0):f_(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,dC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gw(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Zc(t,Li.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Gw(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return u_.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tC(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Bh.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Hs)?bS:14===l?Kb:13===l?zb:12===l?IS:11===l?qb:void tt();var l;let h;return this.ni.runTransaction(e,i,a,m=>(h=new Zc(m,this.Ps?this.Ps.next():Li.ot),"readwrite-primary"===t?this.ai(h).next(w=>!!w||this.hi(h)).next(w=>{if(!w)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ne(he.FAILED_PRECONDITION,Vm);return r(h)}).next(w=>this.fi(h).next(()=>w)):this.bi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}bi(e){return f_(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(he.FAILED_PRECONDITION,dC)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return f_(e).put("owner",t)}static V(){return io.V()}li(e){const t=f_(e);return t.get("owner").next(r=>this.di(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function f_(n){return Kr(n,"owner")}function Gw(n){return Kr(n,"clientMetadata")}function fC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class pC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=kt(),i=kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new pC(e,t.fromCache,r,i)}}class US{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return ae.resolve(null)}xi(e,t,r,i){return function eS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Tt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const l=this.ki(t,a);return this.Oi(t,l,r,i)?this.Ni(e,t):(hp()<=Ri.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gw(t)),this.Mi(e,l,t,YI(i,-1)))})}ki(e,t){let r=new mn(nS(e));return t.forEach((i,a)=>{fb(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return hp()<=Ri.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",gw(t)),this.Di.getDocumentsMatchingQuery(e,t,Ts.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class OR{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Wn(Pt),this.Bi=new Ml(a=>Ta(a),zm),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Hp(n,e,t,r){return new OR(n,e,t,r)}function VS(n,e){return p_.apply(this,arguments)}function p_(){return p_=(0,me.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=kt();for(const w of i){l.push(w.batchId);for(const T of w.mutations)m=m.add(T.key)}for(const w of a){h.push(w.batchId);for(const T of w.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(r,m).next(w=>({Ki:w,removedBatchIds:l,addedBatchIds:h}))})})}),p_.apply(this,arguments)}function Ww(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,h,m,w){const T=m.batch,S=T.keys();let N=ae.resolve();return S.forEach(U=>{N=N.next(()=>w.getEntry(h,U)).next(q=>{const _e=m.docVersions.get(U);Ct(null!==_e),q.version.compareTo(_e)<0&&(T.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),w.addEntry(q)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=kt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qw(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function gC(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((T,S)=>{const N=i.get(S);if(!N)return;h.push(t.Vs.removeMatchingKeys(a,T.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,T.addedDocuments,S)));let U=N.withSequenceNumber(a.currentSequenceNumber);var q,_e,De;e.targetMismatches.has(S)?U=U.withResumeToken(kr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(S,U),_e=U,De=T,(0===(q=N).resumeToken.approximateByteSize()||_e.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(a,U))});let m=Ui(),w=kt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),h.push(BS(a,l,e.documentUpdates).next(T=>{m=T.Gi,w=T.Qi})),!r.isEqual(Tt.min())){const T=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(T)}return ae.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,w)).next(()=>m)}).then(a=>(t.$i=i,a))}function BS(n,e,t){let r=kt(),i=kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ui();return t.forEach((h,m)=>{const w=a.get(h);m.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Tt.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),{Gi:l,Qi:i}})}function zw(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rd(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Vs.allocateTargetId(r).next(l=>(i=new Aa(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function id(n,e,t){return g_.apply(this,arguments)}function g_(){return g_=(0,me.Z)(function*(n,e,t){const r=Ze(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!bu(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),g_.apply(this,arguments)}function Kw(n,e,t){const r=Ze(n);let i=Tt.min(),a=kt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,w){const T=Ze(h),S=T.Bi.get(w);return void 0!==S?ae.resolve(T.$i.get(S)):T.Vs.getTargetData(m,w)}(r,l,As(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?i:Tt.min(),t?a:kt())).next(h=>(m_(r,tS(e),h),{documents:h,ji:a})))}function Zw(n,e){const t=Ze(n),r=Ze(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(l=>l?l.target:null))}function mC(n,e){const t=Ze(n),r=t.Li.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,YI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(m_(t,e,i),i))}function m_(n,e,t){let r=Tt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function _C(){return _C=(0,me.Z)(function*(n,e,t,r){const i=Ze(n);let a=kt(),l=Ui();for(const w of t){const T=e.Wi(w.metadata.name);w.document&&(a=a.add(T));const S=e.zi(w);S.setReadTime(e.Hi(w.metadata.readTime)),l=l.insert(T,S)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),m=yield rd(i,(w=r,As(Da(Qt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>BS(w,h,l).next(T=>(h.apply(w),T)).next(T=>i.Vs.removeMatchingKeysForTargetId(w,m.targetId).next(()=>i.Vs.addMatchingKeys(w,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,T.Gi,T.Qi)).next(()=>T.Gi)))}),_C.apply(this,arguments)}function FR(n,e){return yC.apply(this,arguments)}function yC(){return yC=(0,me.Z)(function*(n,e,t=kt()){const r=yield rd(n,As(s_(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=zr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ds.saveNamedQuery(a,e);const h=r.withResumeToken(kr.EMPTY_BYTE_STRING,l);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(a,h).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),yC.apply(this,arguments)}function vC(n,e){return`firestore_clients_${n}_${e}`}function wC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Yw(n,e){return`firestore_targets_${n}_${e}`}class Qw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new Qw(e,t,i.state,a):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new Gp(e,r.state,i):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ph();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=ow(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Gh(e,a):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Jw{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Jw(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xs{constructor(){this.activeTargetIds=Ph()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xw{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Wn(Pt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=vC(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new xs),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(vC(e.persistenceKey,i));if(a){const l=Gh.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Yw(this.persistenceKey,e));if(r){const i=Gp.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yw(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=Li.ot;if(null!=a)try{const h=JSON.parse(a);Ct("number"==typeof h),l=h}catch(h){ur("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Li.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new Qw(this.currentUser,e,t,r),a=wC(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=wC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=Yw(this.persistenceKey,e),a=new Gp(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Gh.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return Qw.Ji(new Wr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Gp.Ji(i,t)}wr(e){return Jw.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Mr(l,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Ph();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class __{constructor(){this.Fr=new xs,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new xs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $S{Br(e){}shutdown(){}}class EC{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const e0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class IC{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class bC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);Oe("RestConnection","Sending: ",l,r);const h={};return this.uo(h,i,a),this.co(e,l,h,r).then(m=>(Oe("RestConnection","Received: ",m),m),m=>{throw wh("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}ao(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+vh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${e0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const h=new jD;h.listenOnce(UI.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case dp.NO_ERROR:const w=h.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case dp.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Ne(he.DEADLINE_EXCEEDED,"Request time out"));break;case dp.HTTP_ERROR:const T=h.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",h.getResponseText()),T>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(q)>=0?q:he.UNKNOWN}(S.status);l(new Ne(N,S.message))}else l(new Ne(he.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(he.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FI(),l=LI(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new VI({})),this.uo(h.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Oe("Connection","Creating WebChannel: "+m,h);const w=a.createWebChannel(m,h);let T=!1,S=!1;const N=new IC({jr:q=>{S?Oe("Connection","Not sending because WebChannel is closed:",q):(T||(Oe("Connection","Opening WebChannel transport."),w.open(),T=!0),Oe("Connection","WebChannel sending:",q),w.send(q))},Wr:()=>w.close()}),U=(q,_e,De)=>{q.listen(_e,st=>{try{De(st)}catch(ot){setTimeout(()=>{throw ot},0)}})};return U(w,yh.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),U(w,yh.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),N.eo())}),U(w,yh.EventType.ERROR,q=>{S||(S=!0,wh("Connection","WebChannel transport errored:",q),N.eo(new Ne(he.UNAVAILABLE,"The operation could not be completed")))}),U(w,yh.EventType.MESSAGE,q=>{var _e;if(!S){const De=q.data[0];Ct(!!De);const st=De,ot=st.error||(null===(_e=st[0])||void 0===_e?void 0:_e.error);if(ot){Oe("Connection","WebChannel received error:",ot);const ut=ot.status;let it=function(Zt){const Yr=mr[Zt];if(void 0!==Yr)return Tb(Yr)}(ut),Mt=ot.message;void 0===it&&(it=he.INTERNAL,Mt="Unknown error status: "+ut+" with message "+ot.message),S=!0,N.eo(new Ne(it,Mt)),w.close()}else Oe("Connection","WebChannel received:",De),N.no(De)}}),U(l,BD.STAT_EVENT,q=>{q.stat===tw.PROXY?Oe("Connection","Detected buffering proxy"):q.stat===tw.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function CC(){return"undefined"!=typeof window?window:null}function Wp(){return"undefined"!=typeof document?document:null}function Wh(n){return new Xm(n,!0)}class t0{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class TC{constructor(e,t,r,i,a,l,h,m){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new t0(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,me.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,me.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ne(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,me.Z)(function*(){e.state=0,e.start()}))}qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n0 extends TC{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function uS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:tt(),i=e.targetChange.targetIds||[],a=function(m,w){return m.dt?(Ct(void 0===w||"string"==typeof w),kr.fromBase64String(w||"")):(Ct(void 0===w||w instanceof Uint8Array),kr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const w=void 0===m.code?he.UNKNOWN:Tb(m.code);return new Ne(w,m.message||"")}(l);t=new Rb(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Sa(n,r.document.name),a=zr(r.document.updateTime),l=new ci({mapValue:{fields:r.document.fields}}),h=fn.newFoundDocument(i,a,l);t=new Oh(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Sa(n,r.document),a=r.readTime?zr(r.readTime):Tt.min(),l=fn.newNoDocument(i,a);t=new Oh([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Sa(n,r.document);t=new Oh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return tt();{const r=e.filter,a=new iS(r.count||0);t=new xb(r.targetId,a)}}var m;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Tt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Tt.min():a.readTime?zr(a.readTime):Tt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Fh(this.wt),t.addTarget=function(i,a){let l;const h=a.target;return l=Ep(h)?{documents:Fb(i,h)}:{query:n_(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=zc(i,a.resumeToken):a.snapshotVersion.compareTo(Tt.min())>0&&(l.readTime=Mp(i,a.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function RR(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Fh(this.wt),t.removeTarget=e,this.Mo(t)}}class Vo extends TC{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function lS(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=zr(r.updateTime?r.updateTime:i);return a.isEqual(Tt.min())&&(a=zr(i)),new rS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.Jo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Fh(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Lh(this.wt,r))};this.Mo(t)}}class HS extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(he.UNKNOWN,i.toString())})}ao(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(he.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class LR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ur(t),this.su=!1):Oe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class GS{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,me.Z)(function*(){var m;Nu(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,me.Z)(function*(w){const T=Ze(w);T.lu.add(4),yield zh(T),T._u.set("Unknown"),T.lu.delete(4),yield qh(T)}),function(w){return m.apply(this,arguments)})(l))}))}),this._u=new LR(r,i)}}function qh(n){return r0.apply(this,arguments)}function r0(){return r0=(0,me.Z)(function*(n){if(Nu(n))for(const e of n.fu)yield e(!0)}),r0.apply(this,arguments)}function zh(n){return y_.apply(this,arguments)}function y_(){return y_=(0,me.Z)(function*(n){for(const e of n.fu)yield e(!1)}),y_.apply(this,arguments)}function v_(n,e){const t=Ze(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),a0(t)?o0(t):Kh(t).Co()&&E_(t,e))}function w_(n,e){const t=Ze(n),r=Kh(t);t.hu.delete(e),r.Co()&&s0(t,e),0===t.hu.size&&(r.Co()?r.ko():Nu(t)&&t._u.set("Unknown"))}function E_(n,e){n.wu.Nt(e.targetId),Kh(n).Qo(e)}function s0(n,e){n.wu.Nt(e),Kh(n).jo(e)}function o0(n){n.wu=new Mb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Kh(n).start(),n._u.iu()}function a0(n){return Nu(n)&&!Kh(n).Do()&&n.hu.size>0}function Nu(n){return 0===Ze(n).lu.size}function I_(n){n.wu=void 0}function u0(n){return b_.apply(this,arguments)}function b_(){return b_=(0,me.Z)(function*(n){n.hu.forEach((e,t)=>{E_(n,e)})}),b_.apply(this,arguments)}function WS(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,me.Z)(function*(n,e){I_(n),a0(n)?(n._u.uu(e),o0(n)):n._u.set("Unknown")}),C_.apply(this,arguments)}function DC(n,e,t){return l0.apply(this,arguments)}function l0(){return l0=(0,me.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Rb&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield T_(n,r)}else if(e instanceof Oh?n.wu.Ut(e):e instanceof xb?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Tt.min()))try{const r=yield qw(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.Yt(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.hu.get(m);w&&i.hu.set(m,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i.hu.get(h);if(!m)return;i.hu.set(h,m.withResumeToken(kr.EMPTY_BYTE_STRING,m.snapshotVersion)),s0(i,h);const w=new Aa(m.target,h,1,m.sequenceNumber);E_(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield T_(n,r)}var r}),l0.apply(this,arguments)}function T_(n,e,t){return SC.apply(this,arguments)}function SC(){return SC=(0,me.Z)(function*(n,e,t){if(!bu(e))throw e;n.lu.add(1),yield zh(n),n._u.set("Offline"),t||(t=()=>qw(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield qh(n)}))}),SC.apply(this,arguments)}function qS(n,e){return e().catch(t=>T_(n,t,e))}function sd(n){return c0.apply(this,arguments)}function c0(){return c0=(0,me.Z)(function*(n){const e=Ze(n),t=ka(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;zS(e);)try{const i=yield zw(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,KS(e,i)}catch(i){yield T_(e,i)}ZS(e)&&YS(e)}),c0.apply(this,arguments)}function zS(n){return Nu(n)&&n.au.length<10}function KS(n,e){n.au.push(e);const t=ka(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function ZS(n){return Nu(n)&&!ka(n).Do()&&n.au.length>0}function YS(n){ka(n).start()}function UR(n){return AC.apply(this,arguments)}function AC(){return AC=(0,me.Z)(function*(n){ka(n).Xo()}),AC.apply(this,arguments)}function VR(n){return d0.apply(this,arguments)}function d0(){return d0=(0,me.Z)(function*(n){const e=ka(n);for(const t of n.au)e.Ho(t.mutations)}),d0.apply(this,arguments)}function D_(n,e,t){return h0.apply(this,arguments)}function h0(){return h0=(0,me.Z)(function*(n,e,t){const r=n.au.shift(),i=oo.from(r,e,t);yield qS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sd(n)}),h0.apply(this,arguments)}function QS(n,e){return S_.apply(this,arguments)}function S_(){return S_=(0,me.Z)(function*(n,e){var t;e&&ka(n).zo&&(yield(t=(0,me.Z)(function*(r,i){if(Cb(a=i.code)&&a!==he.ABORTED){const l=r.au.shift();ka(r).No(),yield qS(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield sd(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),ZS(n)&&YS(n)}),S_.apply(this,arguments)}function Fl(n,e){return A_.apply(this,arguments)}function A_(){return A_=(0,me.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Nu(t);t.lu.add(3),yield zh(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield qh(t)}),A_.apply(this,arguments)}function qp(n,e){return zp.apply(this,arguments)}function zp(){return zp=(0,me.Z)(function*(n,e){const t=Ze(n);e?(t.lu.delete(2),yield qh(t)):e||(t.lu.add(2),yield zh(t),t._u.set("Unknown"))}),zp.apply(this,arguments)}function Kh(n){return n.mu||(n.mu=function(e,t,r){const i=Ze(e);return i.tu(),new n0(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:u0.bind(null,n),Jr:WS.bind(null,n),Go:DC.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.mu.No(),a0(n)?o0(n):n._u.set("Unknown")):(yield n.mu.stop(),I_(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function ka(n){return n.gu||(n.gu=function(e,t,r){const i=Ze(e);return i.tu(),new Vo(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:UR.bind(null,n),Jr:QS.bind(null,n),Yo:VR.bind(null,n),Jo:D_.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.gu.No(),yield sd(n)):(yield n.gu.stop(),n.au.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Kp{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Kp(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pu(n,e){if(ur("AsyncQueue",`${e}: ${n}`),bu(n))return new Ne(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Zp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Ap(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new Zp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JS{constructor(){this.yu=new Wn(Ge.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yp{constructor(e,t,r,i,a,l,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new Yp(e,t,Zp.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class BR{constructor(){this.Iu=void 0,this.listeners=[]}}class xC{constructor(){this.queries=new Ml(e=>hb(e),Rh),this.onlineState="Unknown",this.Tu=new Set}}function f0(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,me.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new BR),i)try{a.Iu=yield t.onListen(r)}catch(l){const h=Pu(l,`Initialization of query '${gw(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&x_(t)}),p0.apply(this,arguments)}function g0(n,e){return m0.apply(this,arguments)}function m0(){return m0=(0,me.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),m0.apply(this,arguments)}function RC(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Au(i)&&(r=!0);l.Iu=i}}r&&x_(t)}function kC(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function x_(n){n.Tu.forEach(e=>{e.next()})}class _0{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Yp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class XS{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class y0{constructor(e){this.wt=e}Wi(e){return Sa(this.wt,e)}zi(e){return e.metadata.exists?Op(this.wt,e.document,!1):fn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return zr(e)}}class v0{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new y0(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||kt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function jS(n,e,t,r){return _C.apply(this,arguments)}(e.localStore,new y0(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield FR(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function eA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class w0{constructor(e){this.key=e}}class R_{constructor(e){this.key=e}}class MC{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=kt(),this.mutatedKeys=kt(),this.Lu=nS(e),this.Uu=new Zp(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new JS,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const N=i.get(T),U=fb(this.query,S)?S:null,q=!!N&&this.mutatedKeys.has(N.key),_e=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let De=!1;N&&U?N.data.isEqual(U.data)?q!==_e&&(r.track({type:3,doc:U}),De=!0):this.Qu(N,U)||(r.track({type:2,doc:U}),De=!0,(m&&this.Lu(U,m)>0||w&&this.Lu(U,w)<0)&&(h=!0)):!N&&U?(r.track({type:0,doc:U}),De=!0):N&&!U&&(r.track({type:1,doc:N}),De=!0,(m||w)&&(h=!0)),De&&(U?(l=l.add(U),a=_e?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Uu:l,Gu:r,Oi:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((w,T)=>function(S,N){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return U(S)-U(N)}(w.type,T.type)||this.Lu(w.doc,T.doc)),this.ju(r);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,m=h!==this.$u;return this.$u=h,0!==a.length||m?{snapshot:new Yp(this.query,e.Uu,i,a,e.mutatedKeys,0===h,m,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new JS,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=kt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new R_(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new w0(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=kt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Yp.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class tA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jR{constructor(e){this.key=e,this.Xu=!1}}class $R{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Ml(h=>hb(h),Rh),this.ec=new Map,this.nc=new Set,this.sc=new Wn(Ge.comparator),this.ic=new Map,this.rc=new jw,this.oc={},this.uc=new Map,this.cc=Xc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function HR(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,me.Z)(function*(n,e){const t=iA(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield rd(t.localStore,As(e));t.isPrimaryClient&&v_(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield I0(t,e,r,"current"===h)}return i}),E0.apply(this,arguments)}function I0(n,e,t,r){return NC.apply(this,arguments)}function NC(){return NC=(0,me.Z)(function*(n,e,t,r){n.hc=(T,S,N)=>{return(U=(0,me.Z)(function*(q,_e,De,st){let ot=_e.view.Ku(De);ot.Oi&&(ot=yield Kw(q.localStore,_e.query,!1).then(({documents:Mt})=>_e.view.Ku(Mt,ot)));const ut=st&&st.targetChanges.get(_e.targetId),it=_e.view.applyChanges(ot,q.isPrimaryClient,ut);return R(q,_e.targetId,it.zu),it.snapshot}),function(q,_e,De,st){return U.apply(this,arguments)})(n,T,S,N);var U};const i=yield Kw(n.localStore,e,!0),a=new MC(e,i.ji),l=a.Ku(i.documents),h=kp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,h);R(n,t,m.zu);const w=new tA(e,t,a);return n.tc.set(e,w),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),NC.apply(this,arguments)}function GR(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,me.Z)(function*(n,e){const t=Ze(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!Rh(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield id(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),w_(t.remoteStore,r.targetId),b(t,r.targetId)}).catch(Sl))):(b(t,r.targetId),yield id(t.localStore,r.targetId,!0))}),PC.apply(this,arguments)}function OC(){return OC=(0,me.Z)(function*(n,e,t){const r=sA(n);try{const i=yield function(a,l){const h=Ze(a),m=xn.now(),w=l.reduce((N,U)=>N.add(U.key),kt());let T,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let U=Ui(),q=kt();return h.Ui.getEntries(N,w).next(_e=>{U=_e,U.forEach((De,st)=>{st.isValidDocument()||(q=q.add(De))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,U)).next(_e=>{T=_e;const De=[];for(const st of l){const ot=Eb(st,T.get(st.key).overlayedDocument);null!=ot&&De.push(new Ru(st.key,ot,sb(ot.value.mapValue),Bn.exists(!0)))}return h.mutationQueue.addMutationBatch(N,m,De,l)}).next(_e=>{S=_e;const De=_e.applyToLocalDocumentSet(T,q);return h.documentOverlayCache.saveOverlays(N,_e.batchId,De)})}).then(()=>({batchId:S.batchId,changes:Db(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.oc[a.currentUser.toKey()];m||(m=new Wn(Pt)),m=m.insert(l,h),a.oc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield J(r,i.changes),yield sd(r.remoteStore)}catch(i){const a=Pu(i,"Failed to persist write");t.reject(a)}}),OC.apply(this,arguments)}function FC(n,e){return LC.apply(this,arguments)}function LC(){return LC=(0,me.Z)(function*(n,e){const t=Ze(n);try{const r=yield gC(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ic.get(a);l&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Ct(l.Xu):i.removedDocuments.size>0&&(Ct(l.Xu),l.Xu=!1))}),yield J(t,r,e)}catch(r){yield Sl(r)}}),LC.apply(this,arguments)}function nA(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,l)=>{const h=l.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ze(a);h.onlineState=l;let m=!1;h.queries.forEach((w,T)=>{for(const S of T.listeners)S.Eu(l)&&(m=!0)}),m&&x_(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qR(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,me.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let l=new Wn(Ge.comparator);l=l.insert(a,fn.newNoDocument(a,Tt.min()));const h=kt().add(a),m=new Rp(Tt.min(),new Map,new mn(Pt),l,h);yield FC(r,m),r.sc=r.sc.remove(a),r.ic.delete(e),j(r)}else yield id(r.localStore,e,!1).then(()=>b(r,e,t)).catch(Sl)}),UC.apply(this,arguments)}function s(n,e){return o.apply(this,arguments)}function o(){return o=(0,me.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield Ww(t.localStore,e);I(t,r,null),v(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield J(t,i)}catch(i){yield Sl(i)}}),o.apply(this,arguments)}function u(n,e,t){return c.apply(this,arguments)}function c(){return c=(0,me.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,l){const h=Ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return h.mutationQueue.lookupMutationBatch(m,l).next(T=>(Ct(null!==T),w=T.keys(),h.mutationQueue.removeMutationBatch(m,T))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>h.localDocuments.getDocuments(m,w))})}(r.localStore,e);I(r,e,t),v(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield J(r,i)}catch(i){yield Sl(i)}}),c.apply(this,arguments)}function p(){return p=(0,me.Z)(function*(n,e){const t=Ze(n);Nu(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Pu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),p.apply(this,arguments)}function v(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function I(n,e,t){const r=Ze(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function b(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||x(n,r)})}function x(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(w_(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),j(n))}function R(n,e,t){for(const r of t)r instanceof w0?(n.rc.addReference(r.key,e),L(n,r)):r instanceof R_?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||x(n,r.key)):tt()}function L(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.nc.add(r),j(n))}function j(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ge(Qt.fromString(e)),r=n.cc.next();n.ic.set(r,new jR(t)),n.sc=n.sc.insert(t,r),v_(n.remoteStore,new Aa(As(Da(t.path)),r,2,Li.ot))}}function J(n,e,t){return ve.apply(this,arguments)}function ve(){return ve=(0,me.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],l=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,m)=>{l.push(r.hc(m,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,w.fromCache?"not-current":"current"),i.push(w);const T=pC.Vi(m.targetId,w);a.push(T)}}))}),yield Promise.all(l),r.Zu.Go(i),yield(h=(0,me.Z)(function*(m,w){const T=Ze(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ae.forEach(w,N=>ae.forEach(N.Pi,U=>T.persistence.referenceDelegate.addReference(S,N.targetId,U)).next(()=>ae.forEach(N.vi,U=>T.persistence.referenceDelegate.removeReference(S,N.targetId,U)))))}catch(S){if(!bu(S))throw S;Oe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const N=S.targetId;if(!S.fromCache){const U=T.$i.get(N),_e=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.$i=T.$i.insert(N,_e)}}}),function(m,w){return h.apply(this,arguments)})(r.localStore,a))}),ve.apply(this,arguments)}function Ue(n,e){return He.apply(this,arguments)}function He(){return He=(0,me.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield VS(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(l=>{l.forEach(h=>{h.reject(new Ne(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield J(t,r.Ki)}var i}),He.apply(this,arguments)}function nt(n,e){const t=Ze(n),r=t.ic.get(e);if(r&&r.Xu)return kt().add(r.key);{let i=kt();const a=t.ec.get(e);if(!a)return i;for(const l of a){const h=t.tc.get(l);i=i.unionWith(h.view.qu)}return i}}function xe(n,e){return pt.apply(this,arguments)}function pt(){return pt=(0,me.Z)(function*(n,e){const t=Ze(n),r=yield Kw(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&R(t,e.targetId,i.zu),i}),pt.apply(this,arguments)}function Ht(n,e){return on.apply(this,arguments)}function on(){return on=(0,me.Z)(function*(n,e){const t=Ze(n);return mC(t.localStore,e).then(r=>J(t,r))}),on.apply(this,arguments)}function Rs(n,e,t,r){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,me.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(l,h){const m=Ze(l),w=Ze(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.yn(T,h).next(S=>S?m.localDocuments.getDocuments(T,S):ae.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield sd(i.remoteStore):"acknowledged"===t||"rejected"===t?(I(i,e,r||null),v(i,e),h=e,Ze(Ze(i.localStore).mutationQueue).In(h)):tt(),yield J(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ou.apply(this,arguments)}function Qp(){return Qp=(0,me.Z)(function*(n,e){const t=Ze(n);if(iA(t),sA(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield k_(t,r.toArray());t.ac=!0,yield qp(t.remoteStore,!0);for(const a of i)v_(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(b(t,l),id(t.localStore,l,!0))),w_(t.remoteStore,l)}),yield i,yield k_(t,r),function(a){const l=Ze(a);l.ic.forEach((h,m)=>{w_(l.remoteStore,m)}),l.rc.cs(),l.ic=new Map,l.sc=new Wn(Ge.comparator)}(t),t.ac=!1,yield qp(t.remoteStore,!1)}}),Qp.apply(this,arguments)}function k_(n,e,t){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,me.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const l of e){let h;const m=r.ec.get(l);if(m&&0!==m.length){h=yield rd(r.localStore,As(m[0]));for(const w of m){const T=r.tc.get(w),S=yield xe(r,T);S.snapshot&&a.push(S.snapshot)}}else{const w=yield Zw(r.localStore,l);h=yield rd(r.localStore,w),yield I0(r,M_(w),l,!1)}i.push(h)}return r.Zu.Go(a),i}),Jp.apply(this,arguments)}function M_(n){return xh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function C0(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Ri()}function T0(n,e,t,r){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,me.Z)(function*(n,e,t,r){const i=Ze(n);if(i.ac)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield mC(i.localStore,tS(a[0])),h=Rp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield J(i,l,h);break}case"rejected":yield id(i.localStore,e,!0),b(i,e,r);break;default:tt()}}),Xp.apply(this,arguments)}function D0(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,me.Z)(function*(n,e,t){const r=iA(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield Zw(r.localStore,i),l=yield rd(r.localStore,a);yield I0(r,M_(a),l.targetId,!1),v_(r.remoteStore,l)}for(const i of t)r.ec.has(i)&&(yield id(r.localStore,i,!1).then(()=>{w_(r.remoteStore,i),b(r,i)}).catch(Sl))}}),rA.apply(this,arguments)}function iA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qR.bind(null,e),e.Zu.Go=RC.bind(null,e.eventManager),e.Zu.lc=kC.bind(null,e.eventManager),e}function sA(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u.bind(null,e),e}class zR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.wt=Wh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Hp(this.persistence,new US,e.initialUser,this.wt)}_c(e){return new $w(h_.Ms,this.wt)}dc(e){return new __}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KR extends zR{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield sA(r.yc.syncEngine),yield sd(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Hp(this.persistence,new US,e.initialUser,this.wt)}mc(e,t){return new sC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new eb(t,this.persistence);return new XI(e.asyncQueue,r)}_c(e){const t=fC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new hC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CC(),Wp(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new __}}class xO extends KR{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof Xw&&(r.sharedClientState.syncEngine={kr:Rs.bind(null,i),Or:T0.bind(null,i),Mr:D0.bind(null,i),Ri:C0.bind(null,i),Nr:Ht.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,me.Z)(function*(l){yield function b0(n,e){return Qp.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}dc(e){const t=CC();if(!Xw.V(t))throw new Ne(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oA{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nA(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ue.bind(null,r.syncEngine),yield qp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xC}createDatastore(e){const t=Wh(e.databaseInfo.databaseId),r=new bC(e.databaseInfo);return new HS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>nA(this.syncEngine,h,0),l=EC.V()?new EC:new $S,new GS(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,w){const T=new $R(r,i,a,l,h,m);return w&&(T.ac=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ze(t);Oe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield zh(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ZR(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class VC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RO{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new xr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,me.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new XS(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,me.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class kO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(a,l){const h=Ze(a),m=Fh(h.wt)+"/documents",w={documents:l.map(U=>Pp(h.wt,U))},T=yield h.ao("BatchGetDocuments",m,w),S=new Map;T.forEach(U=>{const q=function Fp(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Sa(t,r.found.name),a=zr(r.found.updateTime),l=new ci({mapValue:{fields:r.found.fields}});return fn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Sa(t,r.missing),a=zr(r.readTime);return fn.newNoDocument(i,a)}(n,e):tt()}(h.wt,U);S.set(q.key.toString(),q)});const N=[];return l.forEach(U=>{const q=S.get(U.toString());Ct(!!q),N.push(q)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ge.fromPath(i);e.mutations.push(new ww(a,e.precondition(a)))}),yield(r=(0,me.Z)(function*(i,a){const l=Ze(i),h=Fh(l.wt)+"/documents",m={writes:a.map(w=>Lh(l.wt,w))};yield l.ro("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Ne(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class MO{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new t0(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,me.Z)(function*(){const t=new kO(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!_p(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Cb(t)}return!1}}class NO{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=KI.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(h){Oe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Pu(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function YR(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(a){r.isEqual(a)||(yield VS(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),aA.apply(this,arguments)}function QR(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield lA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Fl(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Fl(e.remoteStore,a)),n.onlineComponents=e}),uA.apply(this,arguments)}function lA(n){return cA.apply(this,arguments)}function cA(){return cA=(0,me.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield YR(n,new zR)),n.offlineComponents}),cA.apply(this,arguments)}function BC(n){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield QR(n,new oA)),n.onlineComponents}),dA.apply(this,arguments)}function JR(n){return lA(n).then(e=>e.persistence)}function hA(n){return lA(n).then(e=>e.localStore)}function XR(n){return BC(n).then(e=>e.remoteStore)}function fA(n){return BC(n).then(e=>e.syncEngine)}function N_(n){return pA.apply(this,arguments)}function pA(){return pA=(0,me.Z)(function*(n){const e=yield BC(n),t=e.eventManager;return t.onListen=HR.bind(null,e.syncEngine),t.onUnlisten=GR.bind(null,e.syncEngine),t}),pA.apply(this,arguments)}function ek(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,l,h,m){const w=new VC({next:S=>{a.enqueueAndForget(()=>g0(i,T));const N=S.docs.has(l);!N&&S.fromCache?m.reject(new Ne(he.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?m.reject(new Ne(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new _0(Da(l.path),w,{includeMetadataChanges:!0,Du:!0});return f0(i,T)}(yield N_(n),n.asyncQueue,e,t,r)})),r.promise}function tk(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,l,h,m){const w=new VC({next:S=>{a.enqueueAndForget(()=>g0(i,T)),S.fromCache&&"server"===h.source?m.reject(new Ne(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new _0(l,w,{includeMetadataChanges:!0,Du:!0});return f0(i,T)}(yield N_(n),n.asyncQueue,e,t,r)})),r.promise}const nk=new Map;function gA(n,e,t){if(!t)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rk(n,e,t,r){if(!0===e&&!0===r)throw new Ne(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ik(n){if(!Ge.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sk(n){if(Ge.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jC(n);throw new Ne(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ok(n,e){if(e<=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ak{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class S0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ak({}),this._settingsFrozen=!1,e instanceof Tu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ak(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Rr;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new WI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nk.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),nk.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Ll extends os{constructor(e,t,r){super(e,t,Da(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ge(e))}withConverter(e){return new Ll(this.firestore,e,this._path)}}function uk(n,e,...t){if(n=(0,P.m9)(n),gA("collection","path",e),n instanceof S0){const r=Qt.fromString(e,...t);return sk(r),new Ll(n,null,r)}{if(!(n instanceof qn||n instanceof Ll))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return sk(r),new Ll(n.firestore,null,r)}}function $C(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=KI.I()),gA("doc","path",e),n instanceof S0){const r=Qt.fromString(e,...t);return ik(r),new qn(n,null,new Ge(r))}{if(!(n instanceof qn||n instanceof Ll))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return ik(r),new qn(n.firestore,n instanceof Ll?n.converter:null,new Ge(r))}}function lk(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof qn||n instanceof Ll)&&(e instanceof qn||e instanceof Ll)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ck(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof os&&e instanceof os&&n.firestore===e.firestore&&Rh(n._query,e._query)&&n.converter===e.converter}class GO{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new t0(this,"async_queue_retry"),this.Kc=()=>{const t=Wp();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Wp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new xr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!bu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,ur("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=Kp.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&tt()}verifyOperationInProgress(){}zc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function mA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class WO{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends S0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new GO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dk(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||dk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zD(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new NO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function hk(n,e,t){const r=new xr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield YR(n,t),yield QR(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===he.FAILED_PRECONDITION||a.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function fk(n){if(n._initialized||n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class od{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ul(kr.fromBase64String(e))}catch(t){throw new Ne(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ul(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class eg{constructor(e){this._methodName=e}}class HC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const t1=/^__.*__$/;class n1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nh(e,this.data,t,this.fieldTransforms)}}class pk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class GC{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new GC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return zC(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(gk(this.Zc)&&t1.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class r1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Wh(e)}aa(e,t,r,i=!1){return new GC({Zc:e,methodName:t,ca:r,path:lr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function tg(n){const e=n._freezeSettings(),t=Wh(n._databaseId);return new r1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function WC(n,e,t,r,i,a={}){const l=n.aa(a.merge||a.mergeFields?2:0,e,t,i);wA("Data must be an object, but it was:",l,r);const h=yk(r,l);let m,w;if(a.merge)m=new Ds(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const N=EA(e,S,t);if(!l.contains(N))throw new Ne(he.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);wk(T,N)||T.push(N)}m=new Ds(T),w=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,w=l.fieldTransforms;return new n1(new ci(h),m,w)}class A0 extends eg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A0}}function mk(n,e,t){return new GC({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class _A extends eg{_toFieldTransform(e){return new Tp(e.path,new kh)}isEqual(e){return e instanceof _A}}class i1 extends eg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=mk(this,e,!0),r=this.ha.map(a=>ng(a,t)),i=new Hc(r);return new Tp(e.path,i)}isEqual(e){return this===e}}class s1 extends eg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=mk(this,e,!0),r=this.ha.map(a=>ng(a,t)),i=new Gc(r);return new Tp(e.path,i)}isEqual(e){return this===e}}class o1 extends eg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Mh(e.wt,pb(e.wt,this.la));return new Tp(e.path,t)}isEqual(e){return this===e}}function yA(n,e,t,r){const i=n.aa(1,e,t);wA("Data must be an object, but it was:",i,r);const a=[],l=ci.empty();Al(r,(m,w)=>{const T=qC(e,m,t);w=(0,P.m9)(w);const S=i.ia(T);if(w instanceof A0)a.push(T);else{const N=ng(w,S);null!=N&&(a.push(T),l.set(T,N))}});const h=new Ds(a);return new pk(l,h,i.fieldTransforms)}function vA(n,e,t,r,i,a){const l=n.aa(1,e,t),h=[EA(e,r,t)],m=[i];if(a.length%2!=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(EA(e,a[N])),m.push(a[N+1]);const w=[],T=ci.empty();for(let N=h.length-1;N>=0;--N)if(!wk(w,h[N])){const U=h[N];let q=m[N];q=(0,P.m9)(q);const _e=l.ia(U);if(q instanceof A0)w.push(U);else{const De=ng(q,_e);null!=De&&(w.push(U),T.set(U,De))}}const S=new Ds(w);return new pk(T,S,l.fieldTransforms)}function _k(n,e,t,r=!1){return ng(t,n.aa(r?4:3,e))}function ng(n,e){if(vk(n=(0,P.m9)(n)))return wA("Unsupported field value:",e,n),yk(n,e);if(n instanceof eg)return function(t,r){if(!gk(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=ng(l,r.ra(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pb(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=xn.fromDate(t);return{timestampValue:Mp(r.wt,i)}}if(t instanceof xn){const i=new xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mp(r.wt,i)}}if(t instanceof HC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ul)return{bytesValue:zc(r.wt,t._byteString)};if(t instanceof qn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${jC(t)}`)}(n,e)}function yk(n,e){const t={};return iw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Al(n,(r,i)=>{const a=ng(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function vk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof HC||n instanceof Ul||n instanceof qn||n instanceof eg)}function wA(n,e,t){if(!vk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jC(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function EA(n,e,t){if((e=(0,P.m9)(e))instanceof od)return e._internalPath;if("string"==typeof e)return qC(n,e);throw zC("Field path arguments must be of type string or ",n,!1,void 0,t)}const a1=new RegExp("[~\\*/\\[\\]]");function qC(n,e,t){if(e.search(a1)>=0)throw zC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new od(...e.split("."))._internalPath}catch(r){throw zC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zC(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ne(he.INVALID_ARGUMENT,h+n+m)}function wk(n,e){return n.some(t=>t.isEqual(e))}class x0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new u1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class u1 extends x0{data(){return super.data()}}function KC(n,e){return"string"==typeof e?qC(n,e):e instanceof od?e._internalPath:e._delegate._internalPath}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ad extends x0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new R0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(KC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class R0 extends ad{data(e={}){return super.data(e)}}class Zh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new R0(this._firestore,this._userDataWriter,r.key,r,new rg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new R0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new R0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,w=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:l1(l.type),doc:h,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function l1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function Ek(n,e){return n instanceof ad&&e instanceof ad?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zh&&e instanceof Zh&&n._firestore===e._firestore&&ck(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Ik(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k0{}function Yh(n,...e){for(const t of e)n=t._apply(n);return n}class c1 extends k0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=tg(e.firestore),r=function(i,a,l,h,m,w,T){let S;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Ak(T,w);const U=[];for(const q of T)U.push(Sk(h,i,q));S={arrayValue:{values:U}}}else S=Sk(h,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Ak(T,w),S=_k(l,"where",T,"in"===w||"not-in"===w);const N=qr.create(m,w,S);return function(U,q){if(q.ht()){const De=pw(U);if(null!==De&&!De.isEqual(q.field))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${q.field.toString()}'`);const st=fw(U);null!==st&&xk(0,q.field,st)}const _e=function(De,st){for(const ot of De.filters)if(st.indexOf(ot.op)>=0)return ot.op;return null}(U,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==_e)throw new Ne(he.INVALID_ARGUMENT,_e===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${_e.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new os(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new xu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class h1 extends k0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Au(i,a);return function(h,m){if(null===fw(h)){const w=pw(h);null!==w&&xk(0,w,m.field)}}(r,l),l}(e._query,this.fa,this.wa);return new os(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new xu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bk extends k0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new os(e.firestore,e.converter,db(e._query,this.ma,this.ga))}}class Ck extends k0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Dk(e,this.type,this.ya,this.pa);return new os(e.firestore,e.converter,(i=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Tk extends k0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=Dk(e,this.type,this.ya,this.pa);return new os(e.firestore,e.converter,(i=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Dk(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof x0)return function(i,a,l,h,m){if(!h)throw new Ne(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const T of $c(i))if(T.field.isKeyField())w.push(Ss(a,h.key));else{const S=h.data.field(T.field);if(sw(S))throw new Ne(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=T.field.canonicalString();throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}w.push(S)}return new kl(w,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=tg(n.firestore);return function(a,l,h,m,w,T){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ne(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let U=0;U<w.length;U++){const q=w[U];if(S[U].field.isKeyField()){if("string"!=typeof q)throw new Ne(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!Zm(a)&&-1!==q.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const _e=a.path.child(Qt.fromString(q));if(!Ge.isDocumentKey(_e))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${_e}' is not because it contains an odd number of segments.`);const De=new Ge(_e);N.push(Ss(l,De))}else{const _e=_k(h,m,q);N.push(_e)}}return new kl(N,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Sk(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zm(e)&&-1!==t.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!Ge.isDocumentKey(r))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ss(n,new Ge(r))}if(t instanceof qn)return Ss(n,t._key);throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jC(t)}.`)}function Ak(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xk(n,e,t){if(!t.isEqual(e))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const w1={maxAttempts:5};class IA{convertValue(e,t="none"){switch(Rl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Al(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new HC(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mp(e));default:return null}}convertTimestamp(e){const t=xl(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Ct(hS(r));const i=new Tu(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return i.isEqual(t)||ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function ZC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E1 extends IA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Rk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tg(e)}set(e,t,r){this._verifyNotCommitted();const i=Qh(e,this._firestore),a=ZC(i.converter,t,r),l=WC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Bn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Qh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof od?vA(this._dataReader,"WriteBatch.update",a._key,t,r,i):yA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qh(e,this._firestore);return this._mutations=this._mutations.concat(new qc(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Ne(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ig extends IA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function kk(n,e,t){n=rn(n,qn);const r=rn(n.firestore,tr),i=ZC(n.converter,e,t);return P_(r,[WC(tg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Bn.none())])}function Mk(n,e,t,...r){n=rn(n,qn);const i=rn(n.firestore,tr),a=tg(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof od?vA(a,"updateDoc",n._key,e,t,r):yA(a,"updateDoc",n._key,e),P_(i,[l.toMutation(n._key,Bn.exists(!0))])}function Nk(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||mA(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(mA(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,w,T;if(n instanceof qn)w=rn(n.firestore,tr),T=Da(n._key.path),m={next:S=>{e[l]&&e[l](bA(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=rn(n,os);w=rn(S.firestore,tr),T=S._query;const N=new ig(w);m={next:U=>{e[l]&&e[l](new Zh(w,N,S,U))},error:e[l+1],complete:e[l+2]},Ik(n._query)}return function(S,N,U,q){const _e=new VC(q),De=new _0(N,_e,U);return S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return f0(yield N_(S),De)})),()=>{_e.Tc(),S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return g0(yield N_(S),De)}))}}(Zr(w),T,h,m)}function P_(n,e){return function(t,r){const i=new xr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function WR(n,e,t){return OC.apply(this,arguments)}(yield fA(t),r,i)})),i.promise}(Zr(n),e)}function bA(n,e,t){const r=t.docs.get(e._key),i=new ig(n);return new ad(n,i,e._key,r,new rg(t.hasPendingWrites,t.fromCache),e.converter)}class k1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tg(e)}get(e){const t=Qh(e,this._firestore),r=new E1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return tt();const a=i[0];if(a.isFoundDocument())return new x0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new x0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const i=Qh(e,this._firestore),a=ZC(i.converter,t,r),l=WC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Qh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof od?vA(this._dataReader,"Transaction.update",a._key,t,r,i):yA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qh(e,this._firestore),r=new ig(this._firestore);return super.get(e).then(i=>new ad(this._firestore,r,t._key,i._document,new rg(!1,!1),t.converter))}}function CA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ok(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function Fk(){if(!function WD(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){vh=ii.SDK_VERSION,(0,ii._registerComponent)(new ms.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new tr(i,new $D(t.getProvider("auth-internal")),new zI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ii.registerVersion)(BI,"3.4.10",n),(0,ii.registerVersion)(BI,"3.4.10","esm2017")}();class M0{constructor(e){this._delegate=e}static fromBase64String(e){return Fk(),new M0(Ul.fromBase64String(e))}static fromUint8Array(e){return Ok(),new M0(Ul.fromUint8Array(e))}toBase64(){return Fk(),this._delegate.toBase64()}toUint8Array(){return Ok(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TA(n){return function B1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class j1{enableIndexedDbPersistence(e,t){return function zO(n,e){fk(n=rn(n,tr));const t=Zr(n),r=n._freezeSettings(),i=new oA;return hk(t,i,new KR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KO(n){fk(n=rn(n,tr));const e=Zr(n),t=n._freezeSettings(),r=new oA;return hk(e,r,new xO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZO(n){if(n._initialized&&!n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!io.V())return Promise.resolve();const i=r+"main";yield io.delete(i)}),function(r){return t.apply(this,arguments)})(fC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Lk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function $O(n,e,t,r={}){var i;const a=(n=rn(n,S0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&wh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Wr.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ne(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Wr(m)}n._authCredentials=new GI(new HI(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function QO(n){return function PO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield JR(n),t=yield XR(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.lu.delete(0),qh(i)}(t)}))}(Zr(n=rn(n,tr)))}(this._delegate)}disableNetwork(){return function JO(n){return function OO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield JR(n),t=yield XR(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const a=Ze(i);a.lu.add(0),yield zh(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Zr(n=rn(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YO(n){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function d(n,e){return p.apply(this,arguments)}(yield fA(e),t)})),t.promise}(Zr(n=rn(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function R1(n,e){return function UO(n,e){const t=new VC(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield N_(n),i=t,Ze(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield N_(n),i=t,void Ze(r).Tu.delete(i);var r,i}))}}(Zr(n=rn(n,tr)),mA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new O_(this,uk(this._delegate,e))}catch(t){throw ks(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ma(this,$C(this._delegate,e))}catch(t){throw ks(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function HO(n,e){if(n=rn(n,S0),gA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new os(n,null,(t=e,new xu(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ks(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function M1(n,e,t){n=rn(n,tr);const r=Object.assign(Object.assign({},w1),t);return function(i){if(i.maxAttempts<1)throw new Ne(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function VO(n,e,t){const r=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const i=yield(a=n,BC(a).then(l=>l.datastore));var a;new MO(n.asyncQueue,i,t,e,r).run()})),r.promise}(Zr(n),i=>e(new k1(n,i)),r)}(this._delegate,t=>e(new Uk(this,t)))}batch(){return Zr(this._delegate),new Vk(new Rk(this._delegate,e=>P_(this._delegate,e)))}loadBundle(e){return function XO(n,e){const t=Zr(n=rn(n,tr)),r=new WO;return function BO(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,w){if(m instanceof Uint8Array)return ZR(m,w);if(m instanceof ArrayBuffer)return ZR(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new RO(m,l);var m}(t,Wh(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function AO(n,e,t){const r=Ze(n);var i;(i=(0,me.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(N,U){const q=Ze(N),_e=zr(U.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",De=>q.Ds.getBundleMetadata(De,U.id)).then(De=>!!De&&De.createTime.compareTo(_e)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=m).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(eA(m));const w=new v0(m,a.localStore,l.wt);let T=yield l.fc();for(;T;){const N=yield w.Nu(T);N&&h._updateProgress(N),T=yield l.fc()}const S=yield w.complete();return yield J(a,S.Mu,void 0),yield function(N,U){const q=Ze(N);return q.persistence.runTransaction("Save bundle","readwrite",_e=>q.Ds.saveBundleMetadata(_e,U))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Ou)}catch(m){return wh("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield fA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function e1(n,e){return function jO(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield hA(n),e)}))}(Zr(n=rn(n,tr)),e).then(t=>t?new os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class YC extends IA{constructor(e){super(),this.firestore=e}convertBytes(e){return new M0(new Ul(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ma.forKey(t,this.firestore,null)}}class Uk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YC(e)}get(e){const t=og(e);return this._delegate.get(t).then(r=>new N0(this._firestore,new ad(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=og(e);return r?(CA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=og(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=og(e);return this._delegate.delete(t),this}}class Vk{constructor(e){this._delegate=e}set(e,t,r){const i=og(e);return r?(CA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=og(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=og(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new R0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new P0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new sg(e,new YC(e),t),i.set(t,a)),a}}sg.INSTANCES=new WeakMap;class Ma{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ma(t,new qn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Ma(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new O_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new O_(this.firestore,uk(this._delegate,e))}catch(t){throw ks(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof qn&&lk(this._delegate,e)}set(e,t){t=CA("DocumentReference.set",t);try{return t?kk(this._delegate,e,t):kk(this._delegate,e)}catch(r){throw ks(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Mk(this._delegate,e):Mk(this._delegate,e,t,...r)}catch(i){throw ks(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A1(n){return P_(rn(n.firestore,tr),[new qc(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=Bk(e),r=jk(e,i=>new N0(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Nk(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function b1(n){n=rn(n,qn);const e=rn(n.firestore,tr),t=Zr(e),r=new ig(e);return function FO(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,l){try{const h=yield function(m,w){const T=Ze(m);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Pu(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield hA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ad(e,r,n._key,i,new rg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function C1(n){n=rn(n,qn);const e=rn(n.firestore,tr);return ek(Zr(e),n._key,{source:"server"}).then(t=>bA(e,n,t))}(this._delegate):function I1(n){n=rn(n,qn);const e=rn(n.firestore,tr);return ek(Zr(e),n._key).then(t=>bA(e,n,t))}(this._delegate),t.then(r=>new N0(this.firestore,new ad(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ma(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}function ks(n,e,t){return n.message=n.message.replace(e,t),n}function Bk(n){for(const e of n)if("object"==typeof e&&!TA(e))return e;return{}}function jk(n,e){var t,r;let i;return i=TA(n[0])?n[0]:TA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class N0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ma(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ek(this._delegate,e._delegate)}}class P0 extends N0{data(e){const t=this._delegate.data(e);return function $I(n,e){n||tt()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YC(e)}where(e,t,r){try{return new Ms(this.firestore,Yh(this._delegate,function d1(n,e,t){const r=e,i=KC("where",n);return new c1(i,r,t)}(e,t,r)))}catch(i){throw ks(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,Yh(this._delegate,function f1(n,e="asc"){const t=e,r=KC("orderBy",n);return new h1(r,t)}(e,t)))}catch(r){throw ks(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,Yh(this._delegate,function p1(n){return ok("limit",n),new bk("limit",n,"F")}(e)))}catch(t){throw ks(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,Yh(this._delegate,function g1(n){return ok("limitToLast",n),new bk("limitToLast",n,"L")}(e)))}catch(t){throw ks(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,Yh(this._delegate,function m1(...n){return new Ck("startAt",n,!0)}(...e)))}catch(t){throw ks(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,Yh(this._delegate,function _1(...n){return new Ck("startAfter",n,!1)}(...e)))}catch(t){throw ks(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,Yh(this._delegate,function y1(...n){return new Tk("endBefore",n,!1)}(...e)))}catch(t){throw ks(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,Yh(this._delegate,function v1(...n){return new Tk("endAt",n,!0)}(...e)))}catch(t){throw ks(t,"endAt()","Query.endAt()")}}isEqual(e){return ck(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function D1(n){n=rn(n,os);const e=rn(n.firestore,tr),t=Zr(e),r=new ig(e);return function LO(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,l){try{const h=yield Kw(i,a,!0),m=new MC(a,h.ji),w=m.Ku(h.documents),T=m.applyChanges(w,!1);l.resolve(T.snapshot)}catch(h){const m=Pu(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield hA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function S1(n){n=rn(n,os);const e=rn(n.firestore,tr),t=Zr(e),r=new ig(e);return tk(t,n._query,{source:"server"}).then(i=>new Zh(e,r,n,i))}(this._delegate):function T1(n){n=rn(n,os);const e=rn(n.firestore,tr),t=Zr(e),r=new ig(e);return Ik(n._query),tk(t,n._query).then(i=>new Zh(e,r,n,i))}(this._delegate),t.then(r=>new DA(this.firestore,new Zh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Bk(e),r=jk(e,i=>new DA(this.firestore,new Zh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Nk(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}class H1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new P0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new P0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new H1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new P0(this._firestore,r))})}isEqual(e){return Ek(this._delegate,e._delegate)}}class O_ extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ma(this.firestore,e):null}doc(e){try{return new Ma(this.firestore,void 0===e?$C(this._delegate):$C(this._delegate,e))}catch(t){throw ks(t,"doc()","CollectionReference.doc()")}}add(e){return function x1(n,e){const t=rn(n.firestore,tr),r=$C(n),i=ZC(n.converter,e);return P_(t,[WC(tg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ma(this.firestore,t))}isEqual(e){return lk(this._delegate,e._delegate)}withConverter(e){return new O_(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}function og(n){return rn(n,qn)}class SA{constructor(...e){this._delegate=new od(...e)}static documentId(){return new SA(lr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof od&&this._delegate._internalPath.isEqual(e._internalPath)}}class ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function P1(){return new _A("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ag(e)}static delete(){const e=function N1(){return new A0("deleteField")}();return e._methodName="FieldValue.delete",new ag(e)}static arrayUnion(...e){const t=function O1(...n){return new i1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ag(t)}static arrayRemove(...e){const t=function F1(...n){return new s1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ag(t)}static increment(e){const t=function L1(n){return new o1("increment",n)}(e);return t._methodName="FieldValue.increment",new ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G1={Firestore:Lk,GeoPoint:HC,Timestamp:xn,Blob:M0,Transaction:Uk,WriteBatch:Vk,DocumentReference:Ma,DocumentSnapshot:N0,Query:Ms,QueryDocumentSnapshot:P0,QuerySnapshot:DA,CollectionReference:O_,FieldPath:SA,FieldValue:ag,setLogLevel:function $1(n){!function jI(n){ba.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function $k(n,e){return function z1(n,e=Wd.z){return new Ln.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function AA(n,e){return $k(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function QC(n,e){return AA(n,e).pipe(jf(void 0),$f(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(T=>T.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function Hk(n,e,t){return QC(n,t).pipe(wu((r,i)=>function Z1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Y1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),YE(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function xA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Gk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function q1(n){(function W1(n,e){n.INTERNAL.registerComponent(new ms.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},G1)))})(n,(e,t)=>new Lk(e,t,new j1)),n.registerVersion("@firebase/firestore-compat","0.1.19")}(qd.Z);class Wk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(jf(void 0),$f(),Br(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),Vt.iC)}auditTrail(e){return this.stateChanges(e).pipe(wu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gk(e);return Hk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}valueChanges(e={}){return AA(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Vt.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(Vt.iC)}add(e){return this.ref.add(e)}doc(e){return new qk(this.ref.doc(e),this.afs)}}class qk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Zk(r,t);return new Wk(i,a,this.afs)}snapshotChanges(){return function K1(n,e){return $k(n,e).pipe(jf(void 0),$f(),(0,yt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(Vt.iC)}}class Q1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QC(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Br(t=>t.length>0),Vt.iC):QC(this.query,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}auditTrail(e){return this.stateChanges(e).pipe(wu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Gk(e);return Hk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vt.iC)}valueChanges(e={}){return AA(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Vt.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(Vt.iC)}}const zk=new _.OlP("angularfire2.enableFirestorePersistence"),Kk=new _.OlP("angularfire2.firestore.persistenceSettings"),J1=new _.OlP("angularfire2.firestore.settings"),X1=new _.OlP("angularfire2.firestore.use-emulator");function Zk(n,e=(t=>t)){return{query:e(n),ref:n}}let Yk=(()=>{class n{constructor(t,r,i,a,l,h,m,w,T,S,N,U,q,_e,De,st,ot){this.schedulers=m;const ut=(0,Yn.on)(t,h,r),it=T;S&&gc(ut,h,N,q,_e,De,U,st),[this.firestore,this.persistenceEnabled$]=(0,Yn.cc)(`${ut.name}.firestore`,"AngularFirestore",ut.name,()=>{const Mt=h.runOutsideAngular(()=>ut.firestore());if(a&&Mt.settings(a),it&&Mt.useEmulator(...it),i&&!zo(l)){const Zt=()=>{try{return(0,nn.D)(Mt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Yr){return"undefined"!=typeof console&&console.warn(Yr),mt(!1)}};return[Mt,h.runOutsideAngular(Zt)]}return[Mt,mt(!1)]},[a,it,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=Zk(i,r),h=this.schedulers.ngZone.run(()=>a);return new Wk(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new Q1(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Yn.Dh),_.LFG(Yn.xv,8),_.LFG(zk,8),_.LFG(J1,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Vt.HU),_.LFG(Kk,8),_.LFG(X1,8),_.LFG(bf,8),_.LFG(Hd,8),_.LFG(zg,8),_.LFG(Gd,8),_.LFG(Kg,8),_.LFG(pc,8),_.LFG(gu,8),_.LFG(pl,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eF=(()=>{class n{constructor(){ml.Z.registerVersion("angularfire",Vt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zk,useValue:!0},{provide:Kk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[Yk]}),n})();var tF=O(5032);const Qk="@firebase/database";let RA="";function Xk(n){RA=n}class iF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const eM=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iF(e)}}catch(e){}return new sF},ug=eM("localStorage"),kA=eM("sessionStorage"),F_=new Ri.Yd("@firebase/database"),tM=function(){let n=1;return function(){return n++}}(),nM=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},O0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=O0.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let lg=null,rM=!0;const iM=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(F_.logLevel=Ri.in.VERBOSE,lg=F_.log.bind(F_),e&&kA.set("logging_enabled",!0)):"function"==typeof n?lg=n:(lg=null,kA.remove("logging_enabled"))},Ci=function(...n){if(!0===rM&&(rM=!1,null===lg&&!0===kA.get("logging_enabled")&&iM(!0)),lg){const e=O0.apply(null,n);lg(e)}},F0=function(n){return function(...e){Ci(n,...e)}},MA=function(...n){const e="FIREBASE INTERNAL ERROR: "+O0(...n);F_.error(e)},Vl=function(...n){const e=`FIREBASE FATAL ERROR: ${O0(...n)}`;throw F_.error(e),new Error(e)},as=function(...n){const e="FIREBASE WARNING: "+O0(...n);F_.warn(e)},JC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ud="[MIN_NAME]",Bl="[MAX_NAME]",cg=function(n,e){if(n===e)return 0;if(n===ud||e===Bl)return-1;if(e===ud||n===Bl)return 1;{const t=XC(n),r=XC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},uF=function(n,e){return n===e?0:n<e?-1:1},L0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},NA=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=NA(n[e[r]]);return t+="}",t},sM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const oM=function(n){(0,P.hu)(!JC(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(m=52;m;m-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const T=w.join("");let S="";for(m=0;m<64;m+=8){let N=parseInt(T.substr(m,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},hF=new RegExp("^-?(0*)\\d{1,10}$"),aM=-2147483648,PA=2147483647,XC=function(n){if(hF.test(n)){const e=Number(n);if(e>=aM&&e<=PA)return e}return null},L_=function(n){try{n()}catch(e){setTimeout(()=>{throw as("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},U0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class pF{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){as(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class gF{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ci("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',as(e)}}let V0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const hM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gM="websocket",mM="long_polling";class FA{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ug.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ug.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function _M(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===gM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==mM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function mF(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ti(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class _F{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const LA={},UA={};function VA(n){const e=n.toString();return LA[e]||(LA[e]=new _F),LA[e]}class vF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&L_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Jh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=F0(e),this.stats_=VA(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),_M(t,mM,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new BA((...a)=>{const[l,h,m,w,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&hM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jh.forceAllow_=!0}static forceDisallow(){Jh.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Jh.forceAllow_&&(Jh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=sM(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class BA{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=tM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=BA.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ci("frame writing exception"),h.stack&&Ci(h.stack),Ci(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ci("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ci("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let tT=null;"undefined"!=typeof MozWebSocket?tT=MozWebSocket:"undefined"!=typeof WebSocket&&(tT=WebSocket);let U_=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=F0(this.connId),this.stats_=VA(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&hM.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),_M(t,gM,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ug.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${RA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(l.proxy={origin:m})}this.mySock=new tT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==tT&&!n.forceDisallow_}static previouslyFailed(){return ug.isInMemoryStorage||!0===ug.get("previous_websocket_failure")}markConnectionHealthy(){ug.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=sM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),CM=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Jh,U_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=U_&&U_.isAvailable();let i=r&&!U_.previouslyFailed();if(t.webSocketOnly&&(r||as("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[U_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class kM{constructor(e,t,r,i,a,l,h,m,w,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=F0("c:"+this.id+":"),this.transportManager_=new CM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=U0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=L0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?MA("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):MA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&as("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),U0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ug.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class MM{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class NM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nT extends NM{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nT}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class _n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function hn(){return new _n("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Xh(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new _n(n.pieces_,e)}function $A(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function B0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function FM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new _n(e,0)}function nr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof _n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new _n(t,0)}function Wt(n){return n.pieceNum_>=n.pieces_.length}function Ns(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return Ns(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function jF(n,e){const t=B0(n,0),r=B0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=cg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function HA(n,e){if(Xh(n)!==Xh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Xh(n)>Xh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class $F{constructor(e,t){this.errorPrefix_=t,this.parts_=B0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);LM(this)}}function LM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dg(n))}function dg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class GA extends NM{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new GA}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const j0=1e3;let iT,hg=(()=>{class n extends MM{constructor(t,r,i,a,l,h,m,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=F0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=j0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Pz)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const w=m.d,T=m.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();as(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):MA("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=j0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,w=null;const T=function(){w?w.close():(m=!0,a())};t.realtime_={close:T,sendRequest:function(U){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);m?Ci("getToken() completed but was canceled"):(Ci("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,w=new kM(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,_e=>{as(_e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),m||(t.repoInfo_.nodeAdmin&&as(U),T())}}})()}interrupt(t){Ci("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ci("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>NA(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new _n(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ci("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ci("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+RA.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nT.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class rT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(ud,e),i=new zt(ud,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class BM extends rT{static get __EMPTY_NODE(){return iT}static set __EMPTY_NODE(e){iT=e}compare(e,t){return cg(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Bl,iT)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,iT)}toString(){return".key"}}const jl=new BM;class sT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let qA,Fu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ao.EMPTY_NODE,this.right=null!=l?l:ao.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ao.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ao.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ao{constructor(e,t=ao.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ao(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fu.BLACK,null,null))}remove(e){return new ao(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sT(this.root_,null,this.comparator_,!0,e)}}function QF(n,e){return cg(n.name,e.name)}function WA(n,e){return cg(n,e)}ao.EMPTY_NODE=new class YF{copy(e,t,r,i,a){return this}insert(e,t,r){return new Fu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const jM=function(n){return"number"==typeof n?"number:"+oM(n):"string:"+n},$M=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===qA||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===qA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let HM,GM,WM,V_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$M(this.priorityNode_)}static set __childrenNodeConstructor(t){HM=t}static get __childrenNodeConstructor(){return HM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Wt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Xh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jM(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?oM(this.value_):this.value_,this.lazyHash_=nM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const jn=new class tL extends rT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?cg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Bl,new V_("[PRIORITY-POST]",WM))}makePost(e,t){const r=GM(e);return new zt(t,new V_("[PRIORITY-POST]",r))}toString(){return".priority"}},nL=Math.log(2);class rL{constructor(e){this.count=parseInt(Math.log(e+1)/nL,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const oT=function(n,e,t,r){n.sort(e);const i=function(m,w){const T=w-m;let S,N;if(0===T)return null;if(1===T)return S=n[m],N=t?t(S):S,new Fu(N,S.node,Fu.BLACK,null,null);{const U=parseInt(T/2,10)+m,q=i(m,U),_e=i(U+1,w);return S=n[U],N=t?t(S):S,new Fu(N,S.node,Fu.BLACK,q,_e)}},h=function(m){let w=null,T=null,S=n.length;const N=function(q,_e){const De=S-q,st=S;S-=q;const ot=i(De+1,st),ut=n[De],it=t?t(ut):ut;U(new Fu(it,ut.node,_e,null,ot))},U=function(q){w?(w.left=q,w=q):(T=q,w=q)};for(let q=0;q<m.count;++q){const _e=m.nextBitIsOne(),De=Math.pow(2,m.count-(q+1));_e?N(De,Fu.BLACK):(N(De,Fu.BLACK),N(De,Fu.RED))}return T}(new rL(n.length));return new ao(r||e,h)};let zA;const B_={};class ld{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(B_&&jn,"ChildrenNode.ts has not been loaded"),zA=zA||new ld({".priority":B_},{".priority":jn}),zA}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ao?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==jl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?oT(r,e.getCompare()):B_;const m=e.toString(),w=Object.assign({},this.indexSet_);w[m]=e;const T=Object.assign({},this.indexes_);return T[m]=h,new ld(T,w)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===B_){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(zt.Wrap);let w=m.getNext();for(;w;)w.name!==e.name&&h.push(w),w=m.getNext();return h.push(e),oT(h,l.getCompare())}return B_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new zt(e.name,h))),m.insert(e,e.node)}});return new ld(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===B_)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new ld(r,this.indexSet_)}}let $0,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&$M(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $0||($0=new n(new ao(WA),null,ld.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$0:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?$0:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Gt(t)||1===Xh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(jn,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+jM(this.getPriority().val())+":"),this.forEachChild(jn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":nM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===H0?-1:0}withIndex(t){if(t===jl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===jl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(jn),a=r.getIterator(jn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===jl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const H0=new class iL extends Ot{constructor(){super(new ao(WA),Ot.EMPTY_NODE,ld.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};function cr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new V_(n,cr(e));if(n instanceof Array){let t=Ot.EMPTY_NODE;return Ti(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=cr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(cr(e))}{const t=[];let r=!1;if(Ti(n,(l,h)=>{if("."!==l.substring(0,1)){const m=cr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new zt(l,m)))}}),0===t.length)return Ot.EMPTY_NODE;const a=oT(t,QF,l=>l.name,WA);if(r){const l=oT(t,jn.getCompare());return new Ot(a,cr(e),new ld({".priority":l},{".priority":jn}))}return new Ot(a,cr(e),ld.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(ud,Ot.EMPTY_NODE)},MAX:{value:new zt(Bl,H0)}}),BM.__EMPTY_NODE=Ot.EMPTY_NODE,V_.__childrenNodeConstructor=Ot,function JF(n){qA=n}(H0),function eL(n){WM=n}(H0),function XF(n){GM=n}(cr);class KA extends rT{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Wt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?cg(e.name,t.name):a}makePost(e,t){const r=cr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,H0);return new zt(Bl,e)}toString(){return B0(this.indexPath_,0).join("/")}}const ZA=new class oL extends rT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?cg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=cr(e);return new zt(t,r)}toString(){return".value"}},j_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aL=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=j_.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=j_.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),KM=function(n){if(n===""+PA)return"-";const e=XC(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Bl;const a=j_.charAt(j_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},ZM=function(n){if(n===""+aM)return ud;const e=XC(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+PA:(delete t[t.length-1],t.join("")):(t[t.length-1]=j_.charAt(j_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function YM(n){return{type:"value",snapshotNode:n}}function $_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function G0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function W0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class QA{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(G0(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange($_(t,r)):l.trackChildChange(W0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(jn,(i,a)=>{t.hasChild(i)||r.trackChildChange(G0(i,a))}),t.isLeafNode()||t.forEachChild(jn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(W0(i,a,l))}else r.trackChildChange($_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ot.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class q0{constructor(e){this.indexedFilter_=new QA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=q0.getStartPost_(e),this.endPost_=q0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new zt(t,r))||(r=Ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ot.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ot.EMPTY_NODE);const a=this;return t.forEachChild(jn,(l,h)=>{a.matches(new zt(l,h))||(i=i.updateImmediateChild(l,Ot.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class lL{constructor(e){this.rangedFilter_=new q0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new zt(t,r))||(r=Ot.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ot.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ot.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Ot.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,U)=>S(U,N)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,T=!1;for(;m.hasNext();){const S=m.getNext();!T&&h(a,S)<=0&&(T=!0),T&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,Ot.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,U)=>S(U,N)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const m=new zt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const U=null==N?1:l(N,m);if(T&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(W0(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(G0(t,S));const _e=h.updateImmediateChild(t,Ot.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange($_(N.name,N.node)),_e.updateImmediateChild(N.name,N.node)):_e}}return r.isEmpty()?e:T&&l(w,m)>=0?(null!=a&&(a.trackChildChange(G0(w.name,w.node)),a.trackChildChange($_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Ot.EMPTY_NODE)):e}}class aT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ud}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jn}copy(){const e=new aT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function JA(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function XA(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function uT(n,e){const t=n.copy();return t.index_=e,t}function QM(n){const e={};if(n.isDefault())return e;let t;return n.index_===jn?t="$priority":n.index_===ZA?t="$value":n.index_===jl?t="$key":((0,P.hu)(n.index_ instanceof KA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function JM(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==jn&&(e.i=n.index_.toString()),e}class lT extends MM{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=F0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=lT.getListenId_(e,r),h={};this.listens_[l]=h;const m=QM(e._queryParams);this.restRequest_(a+".json",m,(w,T)=>{let S=T;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,l)===h){let N;N=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(N,null)}})}unlisten(e,t){const r=lT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=QM(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,P.cI)(h.responseText)}catch(w){as("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&as("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class gL{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cT(){return{value:null,children:new Map}}function H_(n,e,t){if(Wt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,cT()),H_(n.children.get(r),e=Rn(e),t)}}function ex(n,e){if(Wt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(jn,(r,i)=>{H_(n,new _n(r),i)}),ex(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Rn(e),n.children.has(t)&&ex(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tx(n,e,t){null!==n.value?t(e,n.value):function mL(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tx(i,new _n(e.toString()+"/"+r),t)})}class _L{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class wL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _L(e);const r=1e4+2e4*Math.random();U0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ti(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),U0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pa||(Pa={})),Pa))();function ix(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Wt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new _n(e));return new dT(hn(),t,this.revert)}}return(0,P.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new dT(Rn(this.path),this.affectedTree,this.revert)}}class z0{constructor(e,t){this.source=e,this.path=t,this.type=Pa.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new z0(this.source,hn()):new z0(this.source,Rn(this.path))}}class fg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pa.OVERWRITE}operationForChild(e){return Wt(this.path)?new fg(this.source,hn(),this.snap.getImmediateChild(e)):new fg(this.source,Rn(this.path),this.snap)}}class G_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pa.MERGE}operationForChild(e){if(Wt(this.path)){const t=this.children.subtree(new _n(e));return t.isEmpty()?null:t.value?new fg(this.source,hn(),t.value):new G_(this.source,hn(),t)}return(0,P.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new G_(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ef{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class EL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function K0(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function CL(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function bL(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(m,n.query_))})})}function hT(n,e){return{eventCache:n,serverCache:e}}function Z0(n,e,t,r){return hT(new ef(e,t,r),n.serverCache)}function eN(n,e,t,r){return hT(n.eventCache,new ef(e,t,r))}function fT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function pg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sx;class $n{constructor(e,t=(()=>(sx||(sx=new ao(uF)),sx))()){this.value=e,this.children=t}static fromObject(e){let t=new $n(null);return Ti(e,(r,i)=>{t=t.set(new _n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:hn(),value:this.value};if(Wt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=a?{path:nr(new _n(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new $n(null)}}set(e,t){if(Wt(e))return new $n(t,this.children);{const r=Gt(e),a=(this.children.get(r)||new $n(null)).set(Rn(e),t),l=this.children.insert(r,a);return new $n(this.value,l)}}remove(e){if(Wt(e))return this.children.isEmpty()?new $n(null):new $n(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new $n(null):new $n(this.value,a)}return this}}get(e){if(Wt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(Wt(e))return t;{const r=Gt(e),a=(this.children.get(r)||new $n(null)).setTree(Rn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new $n(this.value,l)}}fold(e){return this.fold_(hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(nr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Wt(e))return null;{const a=Gt(e),l=this.children.get(a);return l?l.findOnPath_(Rn(e),nr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,hn(),t)}foreachOnPath_(e,t,r){if(Wt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),a=this.children.get(i);return a?a.foreachOnPath_(Rn(e),nr(t,i),r):new $n(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(nr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Lu{constructor(e){this.writeTree_=e}static empty(){return new Lu(new $n(null))}}function Y0(n,e,t){if(Wt(e))return new Lu(new $n(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ns(i,e);return a=a.updateChild(l,t),new Lu(n.writeTree_.set(i,a))}{const i=new $n(t),a=n.writeTree_.setTree(e,i);return new Lu(a)}}}function ox(n,e,t){let r=n;return Ti(t,(i,a)=>{r=Y0(r,nr(e,i),a)}),r}function tN(n,e){if(Wt(e))return Lu.empty();{const t=n.writeTree_.setTree(e,new $n(null));return new Lu(t)}}function ax(n,e){return null!=gg(n,e)}function gg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ns(t.path,e)):null}function nN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(jn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function tf(n,e){if(Wt(e))return n;{const t=gg(n,e);return new Lu(null!=t?new $n(t):n.writeTree_.subtree(e))}}function ux(n){return n.writeTree_.isEmpty()}function W_(n,e){return rN(hn(),n.writeTree_,e)}function rN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=rN(nr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(nr(n,".priority"),r)),t}}function pT(n,e){return uN(e,n)}function RL(n,e){if(n.snap)return Na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Na(nr(n.path,t),e))return!0;return!1}function ML(n){return n.visible}function iN(n,e,t){let r=Lu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Na(t,l)?(h=Ns(t,l),r=Y0(r,h,a.snap)):Na(l,t)&&(h=Ns(l,t),r=Y0(r,hn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Na(t,l))h=Ns(t,l),r=ox(r,h,a.children);else if(Na(l,t))if(h=Ns(l,t),Wt(h))r=ox(r,hn(),a.children);else{const m=(0,P.DV)(a.children,Gt(h));if(m){const w=m.getChild(Rn(h));r=Y0(r,hn(),w)}}}}}return r}function sN(n,e,t,r,i){if(r||i){const a=tf(n.visibleWrites,e);return!i&&ux(a)?t:i||null!=t||ax(a,hn())?W_(iN(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Na(w.path,e)||Na(e,w.path))},e),t||Ot.EMPTY_NODE):null}{const a=gg(n.visibleWrites,e);if(null!=a)return a;{const l=tf(n.visibleWrites,e);return ux(l)?t:null!=t||ax(l,hn())?W_(l,t||Ot.EMPTY_NODE):null}}}function gT(n,e,t,r){return sN(n.writeTree,n.treePath,e,t,r)}function lx(n,e){return function NL(n,e,t){let r=Ot.EMPTY_NODE;const i=gg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(jn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=tf(n.visibleWrites,e);return t.forEachChild(jn,(l,h)=>{const m=W_(tf(a,new _n(l)),h);r=r.updateImmediateChild(l,m)}),nN(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return nN(tf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function oN(n,e,t,r){return function PL(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=nr(e,t);if(ax(n.visibleWrites,a))return null;{const l=tf(n.visibleWrites,a);return ux(l)?i.getChild(t):W_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function mT(n,e){return function FL(n,e){return gg(n.visibleWrites,e)}(n.writeTree,nr(n.treePath,e))}function cx(n,e,t){return function OL(n,e,t,r){const i=nr(e,t),a=gg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?W_(tf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function aN(n,e){return uN(nr(n.treePath,e),n.writeTree)}function uN(n,e){return{treePath:n,writeTree:e}}class BL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,W0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,G0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,$_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,W0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const lN=new class jL{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ef(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pg(this.viewCache_),a=function VL(n,e,t,r,i,a){return function LL(n,e,t,r,i,a,l){let h;const m=tf(n.visibleWrites,e),w=gg(m,hn());if(null!=w)h=w;else{if(null==t)return[];h=W_(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const T=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=N.getNext();for(;U&&T.length<i;)0!==S(U,r)&&T.push(U),U=N.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function cN(n,e,t,r,i,a){const l=e.eventCache;if(null!=mT(r,t))return e;{let h,m;if(Wt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=pg(e),S=lx(r,w instanceof Ot?w:Ot.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=gT(r,pg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Gt(t);if(".priority"===w){(0,P.hu)(1===Xh(t),"Can't have a priority with additional path components");const T=l.getNode();m=e.serverCache.getNode();const S=oN(r,t,T,m);h=null!=S?n.filter.updatePriority(T,S):l.getNode()}else{const T=Rn(t);let S;if(l.isCompleteForChild(w)){m=e.serverCache.getNode();const N=oN(r,t,l.getNode(),m);S=null!=N?l.getNode().getImmediateChild(w).updateChild(T,N):l.getNode().getImmediateChild(w)}else S=cx(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,T,i,a):l.getNode()}}return Z0(e,h,l.isFullyInitialized()||Wt(t),n.filter.filtersNodes())}}function _T(n,e,t,r,i,a,l,h){const m=e.serverCache;let w;const T=l?n.filter:n.filter.getIndexedFilter();if(Wt(t))w=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(t,r);w=T.updateFullNode(m.getNode(),U,null)}else{const U=Gt(t);if(!m.isCompleteForPath(t)&&Xh(t)>1)return e;const q=Rn(t),De=m.getNode().getImmediateChild(U).updateChild(q,r);w=".priority"===U?T.updatePriority(m.getNode(),De):T.updateChild(m.getNode(),U,De,q,lN,null)}const S=eN(e,w,m.isFullyInitialized()||Wt(t),T.filtersNodes());return cN(n,S,t,i,new dx(i,S,a),h)}function hx(n,e,t,r,i,a,l){const h=e.eventCache;let m,w;const T=new dx(i,e,a);if(Wt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Z0(e,w,!0,n.filter.filtersNodes());else{const S=Gt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),m=Z0(e,w,h.isFullyInitialized(),h.isFiltered());else{const N=Rn(t),U=h.getNode().getImmediateChild(S);let q;if(Wt(N))q=r;else{const _e=T.getCompleteChild(S);q=null!=_e?".priority"===$A(N)&&_e.getChild(FM(N)).isEmpty()?_e:_e.updateChild(N,r):Ot.EMPTY_NODE}m=U.equals(q)?e:Z0(e,n.filter.updateChild(h.getNode(),S,q,N,T,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function dN(n,e){return n.eventCache.isCompleteForChild(e)}function hN(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,m=e;w=Wt(t)?r:new $n(null).setTree(t,r);const T=e.serverCache.getNode();return w.children.inorderTraversal((S,N)=>{if(T.hasChild(S)){const q=hN(0,e.serverCache.getNode().getImmediateChild(S),N);m=_T(n,m,new _n(S),q,i,a,l,h)}}),w.children.inorderTraversal((S,N)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!T.hasChild(S)&&!U){const _e=hN(0,e.serverCache.getNode().getImmediateChild(S),N);m=_T(n,m,new _n(S),_e,i,a,l,h)}}),m}class YL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new QA(r.getIndex()),a=function cL(n){return n.loadsAllData()?new QA(n.getIndex()):n.hasLimit()?new lL(n):new q0(n)}(r);this.processor_=function $L(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Ot.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Ot.EMPTY_NODE,h.getNode(),null),T=new ef(m,l.isFullyInitialized(),i.filtersNodes()),S=new ef(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=hT(S,T),this.eventGenerator_=new EL(this.query_)}get query(){return this.query_}}function XL(n,e){const t=pg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Wt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function fN(n){return 0===n.eventRegistrations_.length}function pN(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function gN(n,e,t,r){e.type===Pa.MERGE&&null!==e.source.queryId&&((0,P.hu)(pg(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(fT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function GL(n,e,t,r,i){const a=new BL;let l,h;if(t.type===Pa.OVERWRITE){const w=t;w.source.fromUser?l=hx(n,e,w.path,w.snap,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Wt(w.path),l=_T(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Pa.MERGE){const w=t;w.source.fromUser?l=function qL(n,e,t,r,i,a,l){let h=e;return r.foreach((m,w)=>{const T=nr(t,m);dN(e,Gt(T))&&(h=hx(n,h,T,w,i,a,l))}),r.foreach((m,w)=>{const T=nr(t,m);dN(e,Gt(T))||(h=hx(n,h,T,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=fx(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Pa.ACK_USER_WRITE){const w=t;l=w.revert?function ZL(n,e,t,r,i,a){let l;if(null!=mT(r,t))return e;{const h=new dx(r,e,i),m=e.eventCache.getNode();let w;if(Wt(t)||".priority"===Gt(t)){let T;if(e.serverCache.isFullyInitialized())T=gT(r,pg(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Ot,"serverChildren would be complete if leaf node"),T=lx(r,S)}T=T,w=n.filter.updateFullNode(m,T,a)}else{const T=Gt(t);let S=cx(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=m.getImmediateChild(T)),w=null!=S?n.filter.updateChild(m,T,S,Rn(t),h,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,Ot.EMPTY_NODE,Rn(t),h,a):m,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=gT(r,pg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=mT(r,hn()),Z0(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function zL(n,e,t,r,i,a,l){if(null!=mT(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Wt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return _T(n,e,t,m.getNode().getChild(t),i,a,h,l);if(Wt(t)){let w=new $n(null);return m.getNode().forEachChild(jl,(T,S)=>{w=w.set(new _n(T),S)}),fx(n,e,t,w,i,a,h,l)}return e}{let w=new $n(null);return r.foreach((T,S)=>{const N=nr(t,T);m.isCompleteForPath(N)&&(w=w.set(T,m.getNode().getChild(N)))}),fx(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Pa.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function KL(n,e,t,r,i){const a=e.serverCache;return cN(n,eN(e,a.getNode(),a.isFullyInitialized()||Wt(t),a.isFiltered()),t,r,lN,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function WL(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=fT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(YM(fT(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function HL(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,mN(n,a.changes,a.viewCache.eventCache.getNode(),null)}function mN(n,e,t,r){return function IL(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function uL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),K0(n,i,"child_removed",e,r,t),K0(n,i,"child_added",e,r,t),K0(n,i,"child_moved",a,r,t),K0(n,i,"child_changed",e,r,t),K0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let yT,wT;class _N{constructor(){this.views=new Map}}function px(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),gN(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(gN(l,e,t,r));return a}}function yN(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=gT(t,i?r:null),m=!1;h?m=!0:r instanceof Ot?(h=lx(t,r),m=!1):(h=Ot.EMPTY_NODE,m=!1);const w=hT(new ef(h,m,!1),new ef(r,i,!1));return new YL(e,w)}return l}function vN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function nf(n,e){let t=null;for(const r of n.views.values())t=t||XL(r,e);return t}function wN(n,e){return e._queryParams.loadsAllData()?vT(n):n.views.get(e._queryIdentifier)}function EN(n,e){return null!=wN(n,e)}function rf(n){return null!=vT(n)}function vT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let lU=1;class IN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $n(null),this.pendingWriteTree_=function UL(){return{visibleWrites:Lu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gx(n,e,t,r,i){return function DL(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Y0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?q_(n,new fg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function sf(n,e,t=!1){const r=function AL(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function xL(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&RL(h,r.path)?i=!1:Na(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function kL(n){n.visibleWrites=iN(n.allWrites,ML,hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=tN(n.visibleWrites,r.path):Ti(r.children,m=>{n.visibleWrites=tN(n.visibleWrites,nr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new $n(null);return null!=r.snap?a=a.set(hn(),!0):Ti(r.children,l=>{a=a.set(new _n(l),!0)}),q_(n,new dT(r.path,a,t))}return[]}function Q0(n,e,t){return q_(n,new fg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mx(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||EN(a,e))){const h=function oU(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=rf(n);if("default"===i)for(const[m,w]of n.views.entries())l=l.concat(pN(w,t,r)),fN(w)&&(n.views.delete(m),w.query._queryParams.loadsAllData()||a.push(w.query));else{const m=n.views.get(i);m&&(l=l.concat(pN(m,t,r)),fN(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!rf(n)&&a.push(new(function rU(){return(0,P.hu)(yT,"Reference.ts has not been loaded"),yT}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function iU(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;l=h.events;const w=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(S,N)=>rf(N));if(w&&!T){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function _U(n){return n.fold((e,t,r)=>{if(t&&rf(t))return[vT(t)];{let i=[];return t&&(i=vN(t)),Ti(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let U=0;U<N.length;++U){const q=N[U],_e=q.query,De=DN(n,q);n.listenProvider_.startListening(J0(_e),IT(n,_e),De.hashFn,De.onComplete)}}}!T&&m.length>0&&!r&&(w?n.listenProvider_.stopListening(J0(e),null):m.forEach(S=>{const N=n.queryToTagMap.get(bT(S));n.listenProvider_.stopListening(J0(S),N)})),function yU(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return l}function bN(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const U=Ns(S,r);i=i||nf(N,U),a=a||rf(N)});let h,l=n.syncPointTree_.get(r);l?(a=a||rf(l),i=i||nf(l,hn())):(l=new _N,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Ot.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,U)=>{const q=nf(U,hn());q&&(i=i.updateImmediateChild(N,q))}));const m=EN(l,e);if(!m&&!e._queryParams.loadsAllData()){const S=bT(e);(0,P.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function vU(){return lU++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let T=function sU(n,e,t,r,i,a){const l=yN(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function eU(n,e){n.eventRegistrations_.push(e)}(l,t),function tU(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(jn,(a,l)=>{r.push($_(a,l))}),t.isFullyInitialized()&&r.push(YM(t.getNode())),mN(n,r,t.getNode(),e)}(l,t)}(l,e,t,pT(n.pendingWriteTree_,r),i,h);if(!m&&!a){const S=wN(l,e);T=T.concat(function wU(n,e,t){const r=e._path,i=IT(n,e),a=DN(n,t),l=n.listenProvider_.startListening(J0(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!rf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((w,T,S)=>{if(!Wt(w)&&T&&rf(T))return[vT(T).query];{let N=[];return T&&(N=N.concat(vN(T).map(U=>U.query))),Ti(S,(U,q)=>{N=N.concat(q)}),N}});for(let w=0;w<m.length;++w){const T=m[w];n.listenProvider_.stopListening(J0(T),IT(n,T))}}return l}(n,e,S))}return T}function ET(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=nf(h,Ns(l,e));if(w)return w});return sN(i,e,a,t,!0)}function q_(n,e){return CN(e,n.syncPointTree_,null,pT(n.pendingWriteTree_,hn()))}function CN(n,e,t,r){if(Wt(n.path))return TN(n,e,t,r);{const i=e.get(hn());null==t&&null!=i&&(t=nf(i,hn()));let a=[];const l=Gt(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const w=t?t.getImmediateChild(l):null,T=aN(r,l);a=a.concat(CN(h,m,w,T))}return i&&(a=a.concat(px(i,n,r,t))),a}}function TN(n,e,t,r){const i=e.get(hn());null==t&&null!=i&&(t=nf(i,hn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,w=aN(r,l),T=n.operationForChild(l);T&&(a=a.concat(TN(T,h,m,w)))}),i&&(a=a.concat(px(i,n,r,t))),a}function DN(n,e){const t=e.query,r=IT(n,t);return{hashFn:()=>(function QL(n){return n.viewCache_.serverCache.getNode()}(e)||Ot.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function fU(n,e,t){const r=_x(n,t);if(r){const i=yx(r),a=i.path,l=i.queryId,h=Ns(a,e);return vx(n,a,new z0(ix(l),h))}return[]}(n,t._path,r):function hU(n,e){return q_(n,new z0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function dF(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return mx(n,t,null,a)}}}}function IT(n,e){const t=bT(e);return n.queryToTagMap.get(t)}function bT(n){return n._path.toString()+"$"+n._queryIdentifier}function _x(n,e){return n.tagToQueryMap.get(e)}function yx(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new _n(n.substr(0,e))}}function vx(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),px(r,t,pT(n.pendingWriteTree_,e),null)}function J0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function uU(){return(0,P.hu)(wT,"Reference.ts has not been loaded"),wT}())(n._repo,n._path):n}class wx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new wx(t)}node(){return this.node_}}class Ex{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=nr(this.path_,e);return new Ex(this.syncTree_,t)}node(){return ET(this.syncTree_,this.path_)}}const SN=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?IU(n[".sv"],e,t):"object"==typeof n[".sv"]?bU(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},IU=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},bU=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},AN=function(n,e,t,r){return bx(e,new Ex(t,n),r)},Ix=function(n,e,t){return bx(n,new wx(e),t)};function bx(n,e,t){const r=n.getPriority().val(),i=SN(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=SN(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new V_(h,cr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new V_(i))),l.forEachChild(jn,(h,m)=>{const w=bx(m,e.getImmediateChild(h),t);w!==m&&(a=a.updateImmediateChild(h,w))}),a}}class Cx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function CT(n,e){let t=e instanceof _n?e:new _n(e),r=n,i=Gt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new Cx(i,r,a),t=Rn(t),i=Gt(t)}return r}function mg(n){return n.node.value}function Tx(n,e){n.node.value=e,Dx(n)}function xN(n){return n.node.childCount>0}function TT(n,e){Ti(n.node.children,(t,r)=>{e(new Cx(t,n,r))})}function RN(n,e,t,r){t&&!r&&e(n),TT(n,i=>{RN(i,e,!0,r)}),t&&r&&e(n)}function X0(n){return new _n(null===n.parent?n.name:X0(n.parent)+"/"+n.name)}function Dx(n){null!==n.parent&&function DU(n,e,t){const r=function CU(n){return void 0===mg(n)&&!xN(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Dx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Dx(n))}(n.parent,n.name,n)}const SU=/[\[\].#$\/\u0000-\u001F\u007F]/,AU=/[\[\].#$\u0000-\u001F\u007F]/,Sx=10485760,DT=function(n){return"string"==typeof n&&0!==n.length&&!SU.test(n)},kN=function(n){return"string"==typeof n&&0!==n.length&&!AU.test(n)},eE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!JC(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},$l=function(n,e,t,r){r&&void 0===e||tE((0,P.gK)(n,"value"),e,t)},tE=function(n,e,t){const r=t instanceof _n?new $F(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+dg(r));if("function"==typeof e)throw new Error(n+"contains a function "+dg(r)+" with contents = "+e.toString());if(JC(e))throw new Error(n+"contains "+e.toString()+" "+dg(r));if("string"==typeof e&&e.length>Sx/3&&(0,P.ug)(e)>Sx)throw new Error(n+"contains a string greater than "+Sx+" utf8 bytes "+dg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ti(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!DT(l)))throw new Error(n+" contains an invalid key ("+l+") "+dg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function HF(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),LM(n)})(r,l),tE(n,h,r),function GF(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+dg(r)+" in addition to actual children.")}},MN=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ti(e,(l,h)=>{const m=new _n(l);if(tE(i,h,nr(t,m)),".priority"===$A(m)&&!eE(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=B0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!DT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(jF);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Na(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Ax=function(n,e,t){if(!t||void 0!==e){if(JC(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!eE(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},nE=function(n,e,t,r){if(!(r&&void 0===t||DT(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},rE=function(n,e,t,r){if(!(r&&void 0===t||kN(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oa=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},NN=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!DT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kN(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class MU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ST(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!HA(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function xx(n,e,t){ST(n,t),PN(n,r=>HA(r,e))}function Fa(n,e,t){ST(n,t),PN(n,r=>Na(r,e)||Na(e,r))}function PN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(NU(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function NU(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();lg&&Ci("event: "+t.toString()),L_(r)}}}const ON="repo_interrupt";class OU{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cT(),this.transactionQueueTree_=new Cx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function FN(n){const t=n.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function iE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:FN(n)})}function LN(n,e,t,r,i){n.dataUpdateCount++;const a=new _n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,P.UI)(t,w=>cr(w));l=function gU(n,e,t,r){const i=_x(n,r);if(i){const a=yx(i),l=a.path,h=a.queryId,m=Ns(l,e),w=$n.fromObject(t);return vx(n,l,new G_(ix(h),m,w))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=cr(t);l=function pU(n,e,t,r){const i=_x(n,r);if(null!=i){const a=yx(i),l=a.path,h=a.queryId,m=Ns(l,e);return vx(n,l,new fg(ix(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,P.UI)(t,w=>cr(w));l=function dU(n,e,t){const r=$n.fromObject(t);return q_(n,new G_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=cr(t);l=Q0(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=K_(n,a)),Fa(n.eventQueue_,h,l)}function UN(n,e){Rx(n,"connected",e),!1===e&&function BU(n){z_(n,"onDisconnectEvents");const e=iE(n),t=cT();tx(n.onDisconnect_,hn(),(i,a)=>{const l=AN(i,a,n.serverSyncTree_,e);H_(t,i,l)});let r=[];tx(t,hn(),(i,a)=>{r=r.concat(Q0(n.serverSyncTree_,i,a));const l=Px(n,i);K_(n,l)}),n.onDisconnect_=cT(),Fa(n.eventQueue_,hn(),r)}(n)}function Rx(n,e,t){const r=new _n("/.info/"+e),i=cr(t);n.infoData_.updateSnapshot(r,i);const a=Q0(n.infoSyncTree_,r,i);Fa(n.eventQueue_,r,a)}function AT(n){return n.nextWriteId_++}function kx(n,e,t,r,i){z_(n,"set",{path:e.toString(),value:t,priority:r});const a=iE(n),l=cr(t,r),h=ET(n.serverSyncTree_,e),m=Ix(l,h,a),w=AT(n),T=gx(n.serverSyncTree_,e,m,w,!0);ST(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(N,U)=>{const q="ok"===N;q||as("set at "+e+" failed: "+N);const _e=sf(n.serverSyncTree_,w,!q);Fa(n.eventQueue_,e,_e),af(0,i,N,U)});const S=Px(n,e);K_(n,S),Fa(n.eventQueue_,S,[])}function jU(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&ex(n.onDisconnect_,e),af(0,t,r,i)})}function VN(n,e,t,r){const i=cr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&H_(n.onDisconnect_,e,i),af(0,r,a,l)})}function Mx(n,e,t){let r;r=".info"===Gt(e._path)?mx(n.infoSyncTree_,e,t):mx(n.serverSyncTree_,e,t),xx(n.eventQueue_,e._path,r)}function BN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ON)}function z_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ci(t,...e)}function af(n,e,t,r){e&&L_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function Nx(n,e,t){return ET(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function xT(n,e=n.transactionQueueTree_){if(e||RT(n,e),mg(e)){const t=$N(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function zU(n,e,t){const r=t.map(w=>w.currentWriteId),i=Nx(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const T=t[w];(0,P.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=Ns(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,w=>{z_(n,"transaction put response",{path:m.toString(),status:w});let T=[];if("ok"===w){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,T=T.concat(sf(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();RT(n,CT(n.transactionQueueTree_,e)),xT(n,n.transactionQueueTree_),Fa(n.eventQueue_,e,T);for(let N=0;N<S.length;N++)L_(S[N])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{as("transaction at "+m.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}K_(n,e)}},l)}(n,X0(e),t)}else xN(e)&&TT(e,t=>{xT(n,t)})}function K_(n,e){const t=jN(n,e),r=X0(t);return function KU(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],w=Ns(t,m.path);let S,T=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,S=m.abortReason,i=i.concat(sf(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,S="maxretry",i=i.concat(sf(n.serverSyncTree_,m.currentWriteId,!0));else{const N=Nx(n,m.path,l);m.currentInputSnapshot=N;const U=e[h].update(N.val());if(void 0!==U){tE("transaction failed: Data returned ",U,m.path);let q=cr(U);"object"==typeof U&&null!=U&&(0,P.r3)(U,".priority")||(q=q.updatePriority(N.getPriority()));const De=m.currentWriteId,st=iE(n),ot=Ix(q,N,st);m.currentOutputSnapshotRaw=q,m.currentOutputSnapshotResolved=ot,m.currentWriteId=AT(n),l.splice(l.indexOf(De),1),i=i.concat(gx(n.serverSyncTree_,m.path,ot,m.currentWriteId,m.applyLocally)),i=i.concat(sf(n.serverSyncTree_,De,!0))}else T=!0,S="nodata",i=i.concat(sf(n.serverSyncTree_,m.currentWriteId,!0))}Fa(n.eventQueue_,t,i),i=[],T&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}RT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)L_(r[h]);xT(n,n.transactionQueueTree_)}(n,$N(n,t),r),r}function jN(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===mg(r);)r=CT(r,t),t=Gt(e=Rn(e));return r}function $N(n,e){const t=[];return HN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function HN(n,e,t){const r=mg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);TT(e,i=>{HN(n,i,t)})}function RT(n,e){const t=mg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Tx(e,t.length>0?t:void 0)}TT(e,r=>{RT(n,r)})}function Px(n,e){const t=X0(jN(n,e)),r=CT(n.transactionQueueTree_,e);return function TU(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Ox(n,i)}),Ox(n,r),RN(r,i=>{Ox(n,i)}),t}function Ox(n,e){const t=mg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(sf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Tx(e,void 0):t.length=a+1,Fa(n.eventQueue_,X0(e),i);for(let l=0;l<r.length;l++)L_(r[l])}}const Fx=function(n,e){const t=QU(n),r=t.namespace;return"firebase.com"===t.domain&&Vl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Vl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&as("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new FA(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new _n(t.pathString)}},QU=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function ZU(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(T,S)));const N=function YU(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):as(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class GN{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class WN{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class zN{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return jU(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Oa("OnDisconnect.remove",this._path);const e=new P.BH;return VN(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Oa("OnDisconnect.set",this._path),$l("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return VN(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Oa("OnDisconnect.setWithPriority",this._path),$l("OnDisconnect.setWithPriority",e,this._path,!1),Ax("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function $U(n,e,t,r,i){const a=cr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&H_(n.onDisconnect_,e,a),af(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Oa("OnDisconnect.update",this._path),MN("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function HU(n,e,t,r){if((0,P.xb)(t))return Ci("onDisconnect().update() called with empty data.  Don't do anything."),void af(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ti(t,(l,h)=>{const m=cr(h);H_(n.onDisconnect_,nr(e,l),m)}),af(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class uo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Wt(this._path)?null:$A(this._path)}get ref(){return new La(this._repo,this._path)}get _queryIdentifier(){const e=JM(this._queryParams),t=NA(e);return"{}"===t?"default":t}get _queryObject(){return JM(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof uo))return!1;const t=this._repo===e._repo,r=HA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function BF(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function kT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function uf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===jl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ud)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Bl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===jn){if(null!=e&&!eE(e)||null!=t&&!eE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof KA||n.getIndex()===ZA,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function MT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class La extends uo{constructor(e,t){super(e,t,new aT,!1)}get parent(){const e=FM(this._path);return null===e?null:new La(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class _g{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new _n(e),r=yg(this.ref,e);return new _g(this._node.getChild(t),r,jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new _g(i,yg(this.ref,r),jn)))}hasChild(e){const t=new _n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function KN(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?yg(n._root,e):n._root}function ZN(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=Fx(e,n._repo.repoInfo_.nodeAdmin);NN("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Vl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),KN(n,t.path.toString())}function yg(n,e){return null===Gt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rE("child","path",t,!1)):rE("child","path",e,!1),new La(n._repo,nr(n._path,e));var t}function Lx(n,e){n=(0,P.m9)(n),Oa("set",n._path),$l("set",e,n._path,!1);const t=new P.BH;return kx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nV(n,e){MN("update",e,n._path,!1);const t=new P.BH;return function VU(n,e,t,r){z_(n,"update",{path:e.toString(),value:t});let i=!0;const a=iE(n),l={};if(Ti(t,(h,m)=>{i=!1,l[h]=AN(nr(e,h),cr(m),n.serverSyncTree_,a)}),i)Ci("update() called with empty data.  Don't do anything."),af(0,r,"ok",void 0);else{const h=AT(n),m=function cU(n,e,t,r){!function SL(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=ox(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=$n.fromObject(t);return q_(n,new G_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);ST(n.eventQueue_,m),n.server_.merge(e.toString(),t,(w,T)=>{const S="ok"===w;S||as("update at "+e+" failed: "+w);const N=sf(n.serverSyncTree_,h,!S),U=N.length>0?K_(n,e):e;Fa(n.eventQueue_,U,N),af(0,r,w,T)}),Ti(t,w=>{const T=Px(n,nr(e,w));K_(n,T)}),Fa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function rV(n){return function UU(n,e){const t=function mU(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,T)=>{const S=Ns(w,t);r=r||nf(T,S)});let i=n.syncPointTree_.get(t);i?r=r||nf(i,hn()):(i=new _N,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new ef(r,!0,!1):null;return function JL(n){return fT(n.viewCache_)}(yN(i,e,pT(n.pendingWriteTree_,e._path),a?l.getNode():Ot.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=cr(r).withIndex(e._queryParams.getIndex()),a=Q0(n.serverSyncTree_,e._path,i);return xx(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(z_(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new _g(e,new La(n._repo,n._path),n._queryParams.getIndex()))}class NT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new GN("value",this,new _g(e.snapshotNode,new La(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WN(this,e,t):null}matches(e){return e instanceof NT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class PT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WN(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=yg(new La(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new GN(e.type,this,new _g(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof PT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function sE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,w=(T,S)=>{Mx(n._repo,n,h),m(T,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new qN(t,a||void 0),h="value"===e?new NT(l):new PT(e,l);return function GU(n,e,t){let r;r=".info"===Gt(e._path)?bN(n.infoSyncTree_,e,t):bN(n.serverSyncTree_,e,t),xx(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Mx(n._repo,n,h)}function Ux(n,e,t,r){return sE(n,"value",e,t,r)}function YN(n,e,t,r){return sE(n,"child_added",e,t,r)}function QN(n,e,t,r){return sE(n,"child_changed",e,t,r)}function JN(n,e,t,r){return sE(n,"child_moved",e,t,r)}function XN(n,e,t,r){return sE(n,"child_removed",e,t,r)}function eP(n,e,t){let r=null;const i=t?new qN(t):null;"value"===e?r=new NT(i):e&&(r=new PT(e,i)),Mx(n._repo,n,r)}class Uu{}class tP extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("endAt",this._value,e._path,!0);const t=XA(e._queryParams,this._value,this._key);if(MT(t),uf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new uo(e._repo,e._path,t,e._orderByCalled)}}class sV extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("endBefore",this._value,e._path,!1);const t=function pL(n,e,t){let r,i;return n.index_===jl?("string"==typeof e&&(e=ZM(e)),i=XA(n,e,t)):(r=null==t?ud:ZM(t),i=XA(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(MT(t),uf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new uo(e._repo,e._path,t,e._orderByCalled)}}class nP extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("startAt",this._value,e._path,!0);const t=JA(e._queryParams,this._value,this._key);if(MT(t),uf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new uo(e._repo,e._path,t,e._orderByCalled)}}class uV extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){$l("startAfter",this._value,e._path,!1);const t=function fL(n,e,t){let r;if(n.index_===jl)"string"==typeof e&&(e=KM(e)),r=JA(n,e,t);else{let i;i=null==t?Bl:KM(t),r=JA(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(MT(t),uf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new uo(e._repo,e._path,t,e._orderByCalled)}}class cV extends Uu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new uo(e._repo,e._path,function dL(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class hV extends Uu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new uo(e._repo,e._path,function hL(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class pV extends Uu{constructor(e){super(),this._path=e}_apply(e){kT(e,"orderByChild");const t=new _n(this._path);if(Wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new KA(t),i=uT(e._queryParams,r);return uf(i),new uo(e._repo,e._path,i,!0)}}class mV extends Uu{_apply(e){kT(e,"orderByKey");const t=uT(e._queryParams,jl);return uf(t),new uo(e._repo,e._path,t,!0)}}class yV extends Uu{_apply(e){kT(e,"orderByPriority");const t=uT(e._queryParams,jn);return uf(t),new uo(e._repo,e._path,t,!0)}}class wV extends Uu{_apply(e){kT(e,"orderByValue");const t=uT(e._queryParams,ZA);return uf(t),new uo(e._repo,e._path,t,!0)}}class IV extends Uu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if($l("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tP(this._value,this._key)._apply(new nP(this._value,this._key)._apply(e))}}function Vu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function nU(n){(0,P.hu)(!yT,"__referenceConstructor has already been defined"),yT=n})(La),function aU(n){(0,P.hu)(!wT,"__referenceConstructor has already been defined"),wT=n}(La);const Vx={};function iP(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Vl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ci("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,w,l=Fx(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(m=!0,a=`http://${w}?ns=${h.namespace}`,l=Fx(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const T=i&&m?new V0(V0.OWNER):new gF(n.name,n.options,e);NN("Invalid Firebase Database URL",l),Wt(l.path)||Vl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function SV(n,e,t,r){let i=Vx[e.name];i||(i={},Vx[e.name]=i);let a=i[n.toURLString()];return a&&Vl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new OU(n,false,t,r),i[n.toURLString()]=a,a}(h,n,T,new pF(n.name,t));return new xV(S,n)}class xV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function FU(n,e,t){if(n.stats_=VA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new lT(n.repoInfo_,(r,i,a,l)=>{LN(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>UN(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new hg(n.repoInfo_,e,(r,i,a,l)=>{LN(n,r,i,a,l)},r=>{UN(n,r)},r=>{!function LU(n,e){Ti(e,(t,r)=>{Rx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function yF(n,e){const t=n.toString();return UA[t]||(UA[t]=e()),UA[t]}(n.repoInfo_,()=>new wL(n.stats_,n.server_)),n.infoData_=new gL,n.infoSyncTree_=new IN({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=Q0(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Rx(n,"connected",!1),n.serverSyncTree_=new IN({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const w=l(h,m);Fa(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new La(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function DV(n,e){const t=Vx[e];(!t||t[n.key]!==n)&&Vl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),BN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Vl("Cannot call "+e+" on a deleted database.")}}function sP(){CM.IS_TRANSPORT_INITIALIZED&&as("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function RV(){sP(),Jh.forceDisallow()}function kV(){sP(),U_.forceDisallow(),Jh.forceAllow()}function OV(n,e){iM(n,e)}const LV={".sv":"timestamp"};class BV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},hg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function FV(n){Xk(ii.SDK_VERSION),(0,ii._registerComponent)(new ms.wA("database",(e,{instanceIdentifier:t})=>iP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(Qk,"0.13.1",n),(0,ii.registerVersion)(Qk,"0.13.1","esm2017")}();const GV=new Ri.Yd("@firebase/database-compat"),oP=function(n){GV.warn("FIREBASE WARNING: "+n)};class zV{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,oP("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class KV{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class lf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),rE("DataSnapshot.child","path",e,!1),new lf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),rE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new lf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Bo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Vi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=Vi.getCancelAndContextArgs_("Query.on",r,i),h=(w,T)=>{t.call(l.context,new lf(this.database,w),T)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Ux(this._delegate,h,m),t;case"child_added":return YN(this._delegate,h,m),t;case"child_removed":return XN(this._delegate,h,m),t;case"child_changed":return QN(this._delegate,h,m),t;case"child_moved":return JN(this._delegate,h,m),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,eP(this._delegate,e,i)}else eP(this._delegate,e)}get(){return rV(this._delegate).then(e=>new lf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=Vi.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,T)=>{const S=new lf(this.database,w);t&&t.call(a.context,S,T),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":Ux(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":YN(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":XN(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":QN(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":JN(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Vi(this.database,Vu(this._delegate,function dV(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cV(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Vi(this.database,Vu(this._delegate,function fV(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new hV(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Vi(this.database,Vu(this._delegate,function gV(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return rE("orderByChild","path",n,!1),new pV(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Vi(this.database,Vu(this._delegate,function _V(){return new mV}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Vi(this.database,Vu(this._delegate,function vV(){return new yV}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Vi(this.database,Vu(this._delegate,function EV(){return new wV}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Vi(this.database,Vu(this._delegate,function aV(n=null,e){return nE("startAt","key",e,!0),new nP(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Vi(this.database,Vu(this._delegate,function lV(n,e){return nE("startAfter","key",e,!0),new uV(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Vi(this.database,Vu(this._delegate,function iV(n,e){return nE("endAt","key",e,!0),new tP(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Vi(this.database,Vu(this._delegate,function oV(n,e){return nE("endBefore","key",e,!0),new sV(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Vi(this.database,Vu(this._delegate,function bV(n,e){return nE("equalTo","key",e,!0),new IV(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Vi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Bo(this.database,new La(this._delegate._repo,this._delegate._path))}}class Bo extends Vi{constructor(e,t){super(e,new uo(t._repo,t._path,new aT,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Bo(this.database,yg(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Bo(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Bo(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=Lx(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,oP("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oa("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=nV(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function tV(n,e,t){if(Oa("setWithPriority",n._path),$l("setWithPriority",e,n._path,!1),Ax("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return kx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function XU(n){return Oa("remove",n._path),Lx(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function jV(n,e,t){var r;if(n=(0,P.m9)(n),Oa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,h=Ux(n,()=>{});return function qU(n,e,t,r,i,a){z_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:tM(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Nx(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{tE("transaction failed: Data returned ",m,l.path),l.status=0;const w=CT(n.transactionQueueTree_,e),T=mg(w)||[];let S;T.push(l),Tx(w,T),"object"==typeof m&&null!==m&&(0,P.r3)(m,".priority")?(S=(0,P.DV)(m,".priority"),(0,P.hu)(eE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(ET(n.serverSyncTree_,e)||Ot.EMPTY_NODE).getPriority().val();const N=iE(n),U=cr(m,S),q=Ix(U,h,N);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=q,l.currentWriteId=AT(n);const _e=gx(n.serverSyncTree_,e,q,l.currentWriteId,l.applyLocally);Fa(n.eventQueue_,e,_e),xT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,w,T)=>{let S=null;m?a.reject(m):(S=new _g(T,new La(n._repo,n._path),jn),a.resolve(new BV(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new KV(a.committed,new lf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function eV(n,e){n=(0,P.m9)(n),Oa("setPriority",n._path),Ax("setPriority",e,!1);const t=new P.BH;return kx(n._repo,nr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function JU(n,e){n=(0,P.m9)(n),Oa("push",n._path),$l("push",e,n._path,!0);const t=FN(n._repo),r=aL(t),i=yg(n,r),a=yg(n,r);let l;return l=null!=e?Lx(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Bo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Bo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Oa("Reference.onDisconnect",this._delegate._path),new zV(new zN(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class oE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:RV,forceLongPolling:kV}}useEmulator(e,t,r={}){!function MV(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Vl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new V0(V0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new V0(l)}!function TV(n,e,t,r){n.repoInfo_=new FA(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Bo){const t=ZN(this._delegate,e.toString());return new Bo(this,t)}{const t=KN(this._delegate,e);return new Bo(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=ZN(this._delegate,e);return new Bo(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function NV(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),BN(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function PV(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function WU(n){n.persistentConnection_&&n.persistentConnection_.resume(ON)}(n._repo)}(this._delegate)}}oE.ServerValue={TIMESTAMP:function UV(){return LV}(),increment:n=>function VV(n){return{".sv":{increment:n}}}(n)};var YV=Object.freeze({__proto__:null,initStandalone:function ZV({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Xk(t);const l=new ms.zt("auth-internal",new ms.H0("database-standalone"));return l.setComponent(new ms.wA("auth-internal",()=>r,"PRIVATE")),{instance:new oE(iP(n,l,void 0,e,a),n),namespace:i}}});const QV=oE.ServerValue;function aP(n){return null==n}function uP(n){return"function"==typeof n.set}function lP(n,e){return uP(e)?e:n.ref(e)}function cP(n,e){if(function XV(n){return"string"==typeof n}(n))return e.stringCase();if(uP(n))return e.firebaseCase();if(function eB(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function aE(n,e,t="on",r=Wd.z){return new Ln.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,oc.B)())}function dP(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function rB(n,e){const{payload:t,prevKey:r,key:i}=e,a=dP(n,i),l=function nB(n,e){if(aP(e))return 0;{const t=dP(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const w={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function hP(n){return(aP(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function fP(n,e,t){return function tB(n,e,t){return aE(n,"value","once",t).pipe(En(r=>{const i=[mt(r)];return e.forEach(a=>i.push(aE(n,a,"on",t))),(0,iu.T)(...i).pipe(wu(rB,[]))}),YE())}(n,e=hP(e),t)}function pP(n,e,t){const r=(e=hP(e)).map(i=>aE(n,i,"on",t));return(0,iu.T)(...r)}function gP(n,e){return function(r,i){return cP(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function aB(n){return function(t){return t?cP(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function mP(n,e){return function(){return aE(n,"value","on",e)}}!function JV(n){n.INTERNAL.registerComponent(new ms.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new oE(i,r)},"PUBLIC").setServiceProps({Reference:Bo,Query:Vi,Database:oE,DataSnapshot:lf,enableLogging:OV,INTERNAL:YV,ServerValue:QV}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.1")}(qd.Z);const cB=new _.OlP("angularfire2.realtimeDatabaseURL"),dB=new _.OlP("angularfire2.database.use-emulator");let hB=(()=>{class n{constructor(t,r,i,a,l,h,m,w,T,S,N,U,q,_e,De){this.schedulers=h;const st=m,ot=(0,Yn.on)(t,l,r);w&&gc(ot,l,T,N,U,q,S,_e),this.database=(0,Yn.cc)(`${ot.name}.database.${i}`,"AngularFireDatabase",ot.name,()=>{const ut=l.runOutsideAngular(()=>ot.database(i||void 0));return st&&ut.useEmulator(...st),ut},[st])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>lP(this.database,t));let a=i;return r&&(a=r(i)),function uB(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:gP(r,"update"),set:gP(r,"set"),push:i=>r.push(i),remove:aB(r),snapshotChanges:i=>fP(n,i,t).pipe(Vt.iC),stateChanges:i=>pP(n,i,t).pipe(Vt.iC),auditTrail:i=>function iB(n,e,t){return function oB(n,e,t){return function sB(n,e){return aE(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function nF(...n){const e=(0,Fn.jO)(n);return(0,Qn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,ri.Xf)(n[m]).subscribe((0,xt.x)(r,w=>{a[m]=w,!h&&!l[m]&&(l[m]=!0,(h=l.every(ts.y))&&(l=null))},tF.Z));t.subscribe((0,xt.x)(r,m=>{if(h){const w=[m,...a];r.next(e?e(...w):w)}}))})}(e),(0,yt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function rF(n){return(0,Qn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,xt.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,pP(n,e).pipe(wu((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Vt.iC),valueChanges:(i,a)=>fP(n,i,t).pipe((0,yt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Vt.iC)}}(a,this)}object(t){return function lB(n,e){return{query:n,snapshotChanges:()=>mP(n,e.schedulers.outsideAngular)().pipe(Vt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>mP(n,e.schedulers.outsideAngular)().pipe(Vt.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>lP(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Yn.Dh),_.LFG(Yn.xv,8),_.LFG(cB,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Vt.HU),_.LFG(dB,8),_.LFG(bf,8),_.LFG(Hd,8),_.LFG(zg,8),_.LFG(Gd,8),_.LFG(Kg,8),_.LFG(pc,8),_.LFG(gu,8),_.LFG(pl,8))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fB=(()=>{class n{constructor(){ml.Z.registerVersion("angularfire",Vt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({providers:[hB]}),n})();const Bx_firebaseConfig={apiKey:"AIzaSyDou8fFXO4ewYZNnlltcZ18PhomHD852xA",authDomain:"pokepedia-1509f.firebaseapp.com",projectId:"pokepedia-1509f",storageBucket:"pokepedia-1509f.appspot.com",messagingSenderId:"780770093383",appId:"1:780770093383:web:350b0579b1566262bb0462"};class Bu extends Eo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:pB}=Array,{getPrototypeOf:gB,prototype:mB,keys:_B}=Object;const{isArray:wB}=Array;var CB=O(9672);function TB(...n){const e=(0,Fn.yG)(n),t=(0,Fn.jO)(n),{args:r,keys:i}=function yB(n){if(1===n.length){const e=n[0];if(pB(e))return{args:e,keys:null};if(function vB(n){return n&&"object"==typeof n&&gB(n)===mB}(e)){const t=_B(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,nn.D)([],e);const a=new Ln.y(function DB(n,e,t=ts.y){return r=>{_P(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)_P(e,()=>{const w=(0,nn.D)(n[m],e);let T=!1;w.subscribe((0,xt.x)(r,S=>{a[m]=S,T||(T=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function bB(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):ts.y));return t?a.pipe(function IB(n){return(0,yt.U)(e=>function EB(n,e){return wB(e)?n(...e):n(e)}(n,e))}(t)):a}function _P(n,e,t){n?(0,CB.f)(t,n,e):e()}function OT(n,e){const t=(0,Io.m)(n)?n:()=>n,r=i=>i.error(t());return new Ln.y(e?i=>e.schedule(r,0,i):r)}function yP(n){return new Ln.y(e=>{(0,ri.Xf)(n()).subscribe(e)})}var Z_=O(515),vP=O(727);function wP(){return(0,Qn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class SB extends Ln.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vP.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vP.w0.EMPTY)}return e}refCount(){return wP()(this)}}function cf(n){return(0,Qn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,xt.x)(t,void 0,void 0,l=>{a=(0,ri.Xf)(n(l,cf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var us=O(5577);function uE(n,e){return(0,Io.m)(e)?(0,us.z)(n,e,1):(0,us.z)(n,1)}function jx(n){return n<=0?()=>Z_.E:(0,Qn.e)((e,t)=>{let r=[];e.subscribe((0,xt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var jo=O(8505);class cd{constructor(e,t){this.id=e,this.url=t}}class $x extends cd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lE extends cd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class EP extends cd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class RB extends cd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kB extends cd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MB extends cd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NB extends cd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class PB extends cd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OB extends cd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IP{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bP{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class FB{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LB{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UB{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VB{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Kt="primary";class BB{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Y_(n){return new BB(n)}const TP="ngNavigationCancelingError";function Hx(n){const e=Error("NavigationCancelingError: "+n);return e[TP]=!0,e}function $B(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!DP(n[i],e[i]))return!1;return!0}function DP(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function SP(n){return Array.prototype.concat.apply([],n)}function AP(n){return n.length>0?n[n.length-1]:null}function Bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gl(n){return(0,_.CqO)(n)?n:(0,_.QGY)(n)?(0,nn.D)(Promise.resolve(n)):mt(n)}const WB={exact:function kP(n,e,t){if(!wg(n.segments,e.segments)||!FT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!kP(n.children[r],e.children[r],t))return!1;return!0},subset:MP},xP={exact:function qB(n,e){return Hl(n,e)},subset:function zB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DP(n[t],e[t]))},ignored:()=>!0};function RP(n,e,t){return WB[t.paths](n.root,e.root,t.matrixParams)&&xP[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function MP(n,e,t){return NP(n,e,e.segments,t)}function NP(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!wg(i,t)||e.hasChildren()||!FT(i,t,r))}if(n.segments.length===t.length){if(!wg(n.segments,t)||!FT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!MP(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(wg(n.segments,i)&&FT(n.segments,i,r)&&n.children[Kt])&&NP(n.children[Kt],e,a,r)}}function FT(n,e,t){return e.every((r,i)=>xP[t](n[i].parameters,r.parameters))}class vg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Y_(this.queryParams)),this._queryParamMap}toString(){return YB.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Bi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return LT(this)}}class cE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Y_(this.parameters)),this._parameterMap}toString(){return UP(this)}}function wg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class PP{}class OP{parse(e){const t=new s2(e);return new vg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${dE(e.root,!0)}`,r=function XB(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${UT(t)}=${UT(i)}`).join("&"):`${UT(t)}=${UT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function QB(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const YB=new OP;function LT(n){return n.segments.map(e=>UP(e)).join("/")}function dE(n,e){if(!n.hasChildren())return LT(n);if(e){const t=n.children[Kt]?dE(n.children[Kt],!1):"",r=[];return Bi(n.children,(i,a)=>{a!==Kt&&r.push(`${a}:${dE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ZB(n,e){let t=[];return Bi(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),Bi(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[dE(n.children[Kt],!1)]:[`${i}:${dE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${LT(n)}/${t[0]}`:`${LT(n)}/(${t.join("//")})`}}function FP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function UT(n){return FP(n).replace(/%3B/gi,";")}function Gx(n){return FP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function VT(n){return decodeURIComponent(n)}function LP(n){return VT(n.replace(/\+/g,"%20"))}function UP(n){return`${Gx(n.path)}${function JB(n){return Object.keys(n).map(e=>`;${Gx(e)}=${Gx(n[e])}`).join("")}(n.parameters)}`}const e2=/^[^\/()?;=#]+/;function BT(n){const e=n.match(e2);return e?e[0]:""}const t2=/^[^=?&#]+/,r2=/^[^&#]+/;class s2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new en(e,t)),r}parseSegment(){const e=BT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new cE(VT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=BT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=BT(this.remaining);i&&(r=i,this.capture(r))}e[VT(t)]=VT(r)}parseQueryParam(e){const t=function n2(n){const e=n.match(t2);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function i2(n){const e=n.match(r2);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=LP(t),a=LP(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=BT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Kt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Kt]:new en([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class VP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wx(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Wx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qx(e,this._root).map(t=>t.value)}}function Wx(n,e){if(n===e.value)return e;for(const t of e.children){const r=Wx(n,t);if(r)return r}return null}function qx(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qx(n,t);if(r.length)return r.unshift(e),r}return[]}class dd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Q_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class BP extends VP{constructor(e,t){super(e),this.snapshot=t,zx(this,e)}toString(){return this.snapshot.toString()}}function jP(n,e){const t=function o2(n,e){const l=new jT([],{},{},"",{},Kt,e,null,n.root,-1,{});return new HP("",new dd(l,[]))}(n,e),r=new Bu([new cE("",{})]),i=new Bu({}),a=new Bu({}),l=new Bu({}),h=new Bu(""),m=new J_(r,i,l,h,a,Kt,e,t.root);return m.snapshot=t.root,new BP(new dd(m,[]),t)}class J_{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>Y_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>Y_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $P(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function a2(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class jT{constructor(e,t,r,i,a,l,h,m,w,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=w,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Y_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Y_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HP extends VP{constructor(e,t){super(t),this.url=e,zx(this,t)}toString(){return GP(this._root)}}function zx(n,e){e.value._routerState=n,e.children.forEach(t=>zx(n,t))}function GP(n){const e=n.children.length>0?` { ${n.children.map(GP).join(", ")} } `:"";return`${n.value}${e}`}function Kx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hl(e.params,t.params)||n.params.next(t.params),function HB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Zx(n,e){const t=Hl(n.params,e.params)&&function KB(n,e){return wg(n,e)&&n.every((t,r)=>Hl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Zx(n.parent,e.parent))}function hE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function l2(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hE(n,r,i);return hE(n,r)})}(n,e,t);return new dd(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>hE(n,h)),l}}const r=function c2(n){return new J_(new Bu(n.url),new Bu(n.params),new Bu(n.queryParams),new Bu(n.fragment),new Bu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>hE(n,a));return new dd(r,i)}}function $T(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fE(n){return"object"==typeof n&&null!=n&&n.outlets}function Yx(n,e,t,r,i){let a={};if(r&&Bi(r,(h,m)=>{a[m]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new vg(t,a,i);const l=WP(n,e,t);return new vg(l,a,i)}function WP(n,e,t){const r={};return Bi(n.children,(i,a)=>{r[a]=i===e?t:WP(i,e,t)}),new en(n.segments,r)}class qP{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$T(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(fE);if(i&&i!==AP(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qx{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function zP(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return HT(n,e,t);const r=function m2(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(fE(h))break;const m=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&w&&"object"==typeof w&&void 0===w.outlets){if(!ZP(m,w,l))return a;r+=2}else{if(!ZP(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Kt]=new en(n.segments.slice(r.pathIndex),n.children),HT(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?Jx(n,e,t):r.match?HT(n,0,i):Jx(n,e,t)}function HT(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function g2(n){return fE(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return Bi(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=zP(n.children[l],e,a))}),Bi(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new en(n.segments,i)}}function Jx(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(fE(a)){const m=_2(a.outlets);return new en(r,m)}if(0===i&&$T(t[0])){r.push(new cE(n.segments[e].path,KP(t[0]))),i++;continue}const l=fE(a)?a.outlets[Kt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&$T(h)?(r.push(new cE(l,KP(h))),i+=2):(r.push(new cE(l,{})),i++)}return new en(r,{})}function _2(n){const e={};return Bi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Jx(new en([],{}),0,t))}),e}function KP(n){const e={};return Bi(n,(t,r)=>e[r]=`${t}`),e}function ZP(n,e,t){return n==t.path&&Hl(e,t.parameters)}class v2{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kx(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Q_(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Bi(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Q_(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Q_(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Q_(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new VB(a.value.snapshot))}),e.children.length&&this.forwardEvent(new LB(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Kx(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Kx(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function w2(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Xx{constructor(e,t){this.routes=e,this.module=t}}function df(n){return"function"==typeof n}function Eg(n){return n instanceof vg}const pE=Symbol("INITIAL_VALUE");function gE(){return En(n=>TB(n.map(e=>e.pipe((0,Gs.q)(1),jf(pE)))).pipe(wu((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==pE?i:(a===pE&&(r=!0),r||!1!==a&&l!==t.length-1&&!Eg(a)?i:a),e)},pE),Br(e=>e!==pE),(0,yt.U)(e=>Eg(e)?e:!0===e),(0,Gs.q)(1)))}class D2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new mE,this.attachRef=null}}class mE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new D2,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let eR=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=a||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new S2(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(mE),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},n.\u0275dir=_.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class S2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===J_?this.route:e===mE?this.childContexts:this.parent.get(e,t)}}let YP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&_._UZ(0,"router-outlet")},directives:[eR],encapsulation:2}),n})();function QP(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];A2(r,x2(e,r))}}function A2(n,e){n.children&&QP(n.children,e)}function x2(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function tR(n){const e=n.children&&n.children.map(tR),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=YP),t}function Ua(n){return n.outlet||Kt}function JP(n,e){const t=n.filter(r=>Ua(r)===e);return t.push(...n.filter(r=>Ua(r)!==e)),t}const XP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},XP):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||$B)(t,n,e);if(!a)return Object.assign({},XP);const l={};Bi(a.posParams,(m,w)=>{l[w]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function WT(n,e,t,r,i="corrected"){if(t.length>0&&function M2(n,e,t){return t.some(r=>qT(n,e,r)&&Ua(r)!==Kt)}(n,t,r)){const l=new en(e,function k2(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ua(a)!==Kt){const l=new en([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ua(a)]=l}return i}(n,e,r,new en(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function N2(n,e,t){return t.some(r=>qT(n,e,r))}(n,t,r)){const l=new en(n.segments,function R2(n,e,t,r,i,a){const l={};for(const h of r)if(qT(n,t,h)&&!i[Ua(h)]){const m=new en([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Ua(h)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function qT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function eO(n,e,t,r){return!!(Ua(n)===r||r!==Kt&&qT(e,t,n))&&("**"===n.path||GT(e,n,t).matched)}function tO(n,e,t){return 0===e.length&&!n.children[t]}class zT{constructor(e){this.segmentGroup=e||null}}class nO{constructor(e){this.urlTree=e}}function _E(n){return OT(new zT(n))}function rO(n){return OT(new nO(n))}function P2(n){return OT(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class L2{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(_.h0i)}apply(){const e=WT(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Kt).pipe((0,yt.U)(a=>this.createUrlTree(nR(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cf(a=>{if(a instanceof nO)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof zT?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Kt).pipe((0,yt.U)(i=>this.createUrlTree(nR(i),e.queryParams,e.fragment))).pipe(cf(i=>{throw i instanceof zT?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[Kt]:e}):e;return new vg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(a=>new en([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,nn.D)(i).pipe(uE(a=>{const l=r.children[a],h=JP(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,yt.U)(m=>({segment:m,outlet:a})))}),wu((a,l)=>(a[l.outlet]=l.segment,a),{}),function AB(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,a)=>n(i,a,r)):ts.y,jx(1),t?ps(e):pr(()=>new es))}())}expandSegment(e,t,r,i,a,l){return(0,nn.D)(r).pipe(uE(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(cf(w=>{if(w instanceof zT)return mt(null);throw w}))),_i(h=>!!h),cf((h,m)=>{if(h instanceof es||"EmptyError"===h.name)return tO(t,i,a)?mt(new en([],{})):_E(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return eO(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):_E(t):_E(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rO(a):this.lineralizeSegments(r,a).pipe((0,us.z)(l=>{const h=new en(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:w,positionalParamSegments:T}=GT(t,i,a);if(!h)return _E(t);const S=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?rO(S):this.lineralizeSegments(i,S).pipe((0,us.z)(N=>this.expandSegment(e,t,r,N.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,yt.U)(S=>(r._loadedConfig=S,new en(i,{})))):mt(new en(i,{}));const{matched:l,consumedSegments:h,remainingSegments:m}=GT(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,us.z)(T=>{const S=T.module,N=T.routes,{segmentGroup:U,slicedSegments:q}=WT(t,h,m,N),_e=new en(U.segments,U.children);if(0===q.length&&_e.hasChildren())return this.expandChildren(S,N,_e).pipe((0,yt.U)(ut=>new en(h,ut)));if(0===N.length&&0===q.length)return mt(new en(h,{}));const De=Ua(r)===a;return this.expandSegment(S,_e,N,q,De?Kt:a,!0).pipe((0,yt.U)(ot=>new en(h.concat(ot.segments),ot.children)))})):_E(t)}getChildConfig(e,t,r){return t.children?mt(new Xx(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,us.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,yt.U)(a=>(t._loadedConfig=a,a))):function O2(n){return OT(Hx(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new Xx([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return mt(!0);const a=i.map(l=>{const h=e.get(l);let m;if(function I2(n){return n&&df(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!df(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return Gl(m)});return mt(a).pipe(gE(),(0,jo.b)(l=>{if(!Eg(l))return;const h=Hx(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,yt.U)(l=>!0===l))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Kt])return P2(e.redirectTo);i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new vg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Bi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Bi(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new en(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function nR(n){const e={};for(const r of Object.keys(n.children)){const a=nR(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function U2(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class iO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class KT{constructor(e,t){this.component=e,this.route=t}}function B2(n,e,t){const r=n._root;return yE(r,e?e._root:null,t,[r.value])}function ZT(n,e,t){const r=function $2(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Q_(e);return n.children.forEach(l=>{(function H2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function G2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wg(n.url,e.url)||!Hl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zx(n,e)||!Hl(n.queryParams,e.queryParams);default:return!Zx(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new iO(r)):(a.data=l.data,a._resolvedData=l._resolvedData),yE(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new KT(h.outlet.component,l))}else l&&vE(e,h,i),i.canActivateChecks.push(new iO(r)),yE(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Bi(a,(l,h)=>vE(l,t.getContext(h),i)),i}function vE(n,e,t){const r=Q_(n),i=n.value;Bi(r,(a,l)=>{vE(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new KT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class X2{}function sO(n){return new Ln.y(e=>e.error(n))}class tj{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=WT(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Kt);if(null===t)return null;const r=new jT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new dd(r,t),a=new HP(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=$P(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=JP(e,a),m=this.processSegmentGroup(h,l,a);if(null===m)return null;r.push(...m)}const i=oO(r);return function nj(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return tO(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!eO(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const U=r.length>0?AP(r).parameters:{};a=new jT(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lO(e),Ua(e),e.component,e,aO(t),uO(t)+r.length,cO(e))}else{const U=GT(t,e,r);if(!U.matched)return null;l=U.consumedSegments,h=U.remainingSegments,a=new jT(l,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,lO(e),Ua(e),e.component,e,aO(t),uO(t)+l.length,cO(e))}const m=function rj(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:T}=WT(t,l,h,m.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===T.length&&w.hasChildren()){const U=this.processChildren(m,w);return null===U?null:[new dd(a,U)]}if(0===m.length&&0===T.length)return[new dd(a,[])];const S=Ua(e)===i,N=this.processSegment(m,w,T,S?Kt:i);return null===N?null:[new dd(a,N)]}}function ij(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function oO(n){const e=[],t=new Set;for(const r of n){if(!ij(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=oO(r.children);e.push(new dd(r.value,i))}return e.filter(r=>!t.has(r))}function aO(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function uO(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function lO(n){return n.data||{}}function cO(n){return n.resolve||{}}function dO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rR(n){return En(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,yt.U)(()=>e)):mt(e)})}class hj extends class dj{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const iR=new _.OlP("ROUTES");class hO{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,yt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new Xx(SP(l.injector.get(iR,void 0,_.XFs.Self|_.XFs.Optional)).map(tR),l)}),cf(a=>{throw t._loader$=void 0,a}));return t._loader$=new SB(i,()=>new Eo.x).pipe(wP()),t._loader$}loadModuleFactory(e){return Gl(e()).pipe((0,us.z)(t=>t instanceof _.YKP?mt(t):(0,nn.D)(this.compiler.compileModuleAsync(t))))}}class pj{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function gj(n){throw n}function mj(n,e,t){return e.parse("/")}function fO(n,e){return mt(null)}const _j={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $o=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Eo.x,this.errorHandler=gj,this.malformedUriErrorHandler=mj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fO,afterPreactivation:fO},this.urlHandlingStrategy=new pj,this.routeReuseStrategy=new hj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(_.h0i),this.console=l.get(_.c2e);const S=l.get(_.R0b);this.isNgZoneEnabled=S instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function GB(){return new vg(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hO(l,h,N=>this.triggerEvent(new IP(N)),N=>this.triggerEvent(new bP(N))),this.routerState=jP(this.currentUrlTree,this.rootComponentType),this.transitions=new Bu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Br(i=>0!==i.id),(0,yt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),En(i=>{let a=!1,l=!1;return mt(i).pipe((0,jo.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),En(h=>{const m=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return pO(h.source)&&(this.browserUrlTree=h.extractedUrl),mt(h).pipe(En(S=>{const N=this.transitions.getValue();return r.next(new $x(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Z_.E:Promise.resolve(S)}),function V2(n,e,t,r){return En(i=>function F2(n,e,t,r,i){return new L2(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jo.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function sj(n,e,t,r,i){return(0,us.z)(a=>function ej(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new tj(n,e,t,r,i,a).recognize();return null===l?sO(new X2):mt(l)}catch(l){return sO(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,yt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jo.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new kB(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:U,source:q,restoredState:_e,extras:De}=h,st=new $x(N,this.serializeUrl(U),q,_e);r.next(st);const ot=jP(U,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},h),{targetSnapshot:ot,urlAfterRedirects:U,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Z_.E}),rR(h=>{const{targetSnapshot:m,id:w,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=h;return this.hooks.beforePreactivation(m,{navigationId:w,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,jo.b)(h=>{const m=new MB(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,yt.U)(h=>Object.assign(Object.assign({},h),{guards:B2(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function W2(n,e){return(0,us.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function q2(n,e,t,r){return(0,nn.D)(n).pipe((0,us.z)(i=>function J2(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?mt(a.map(h=>{const m=ZT(h,e,i);let w;if(function T2(n){return n&&df(n.canDeactivate)}(m))w=Gl(m.canDeactivate(n,e,t,r));else{if(!df(m))throw new Error("Invalid CanDeactivate guard");w=Gl(m(n,e,t,r))}return w.pipe(_i())})).pipe(gE()):mt(!0)}(i.component,i.route,t,e,r)),_i(i=>!0!==i,!0))}(l,r,i,n).pipe((0,us.z)(h=>h&&function E2(n){return"boolean"==typeof n}(h)?function z2(n,e,t,r){return(0,nn.D)(e).pipe(uE(i=>Jy(function Z2(n,e){return null!==n&&e&&e(new FB(n)),mt(!0)}(i.route.parent,r),function K2(n,e){return null!==n&&e&&e(new UB(n)),mt(!0)}(i.route,r),function Q2(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function j2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>yP(()=>mt(l.guards.map(m=>{const w=ZT(m,l.node,t);let T;if(function C2(n){return n&&df(n.canActivateChild)}(w))T=Gl(w.canActivateChild(r,n));else{if(!df(w))throw new Error("Invalid CanActivateChild guard");T=Gl(w(r,n))}return T.pipe(_i())})).pipe(gE())));return mt(a).pipe(gE())}(n,i.path,t),function Y2(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(a=>yP(()=>{const l=ZT(a,e,t);let h;if(function b2(n){return n&&df(n.canActivate)}(l))h=Gl(l.canActivate(e,n));else{if(!df(l))throw new Error("Invalid CanActivate guard");h=Gl(l(e,n))}return h.pipe(_i())}));return mt(i).pipe(gE())}(n,i.route,t))),_i(i=>!0!==i,!0))}(r,a,n,e):mt(h)),(0,yt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,jo.b)(h=>{if(Eg(h.guardsResult)){const w=Hx(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const m=new NB(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Br(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),rR(h=>{if(h.guards.canActivateChecks.length)return mt(h).pipe((0,jo.b)(m=>{const w=new PB(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),En(m=>{let w=!1;return mt(m).pipe(function oj(n,e){return(0,us.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let a=0;return(0,nn.D)(i).pipe(uE(l=>function aj(n,e,t,r){return function uj(n,e,t,r){const i=dO(n);if(0===i.length)return mt({});const a={};return(0,nn.D)(i).pipe((0,us.z)(l=>function lj(n,e,t,r){const i=ZT(n,e,r);return Gl(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,jo.b)(h=>{a[l]=h}))),jx(1),(0,us.z)(()=>dO(a).length===i.length?mt(a):Z_.E))}(n._resolve,n,e,r).pipe((0,yt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),$P(n,t).resolve),null)))}(l.route,r,n,e)),(0,jo.b)(()=>a++),jx(1),(0,us.z)(l=>a===i.length?mt(t):Z_.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jo.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,jo.b)(m=>{const w=new OB(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}))}),rR(h=>{const{targetSnapshot:m,id:w,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:U}}=h;return this.hooks.afterPreactivation(m,{navigationId:w,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!U})}),(0,yt.U)(h=>{const m=function u2(n,e,t){const r=hE(n,e._root,t?t._root:void 0);return new BP(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,jo.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new v2(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,jo.b)({next(){a=!0},complete(){a=!0}}),function xB(n){return(0,Qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),cf(h=>{if(l=!0,function jB(n){return n&&n[TP]}(h)){const m=Eg(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const w=new EP(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pO(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new RB(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Z_.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){QP(t),this.config=t.map(tR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,w=i||this.routerState.root,T=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function d2(n,e,t,r,i){if(0===t.length)return Yx(e.root,e.root,e.root,r,i);const a=function h2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new qP(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Bi(a.outlets,(m,w)=>{h[w]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new qP(t,e,r)}(t);if(a.toRoot())return Yx(e.root,e.root,new en([],{}),r,i);const l=function f2(n,e,t){if(n.isAbsolute)return new Qx(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Qx(a,a===e.root,0)}const r=$T(n.commands[0])?0:1;return function p2(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Qx(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?HT(l.segmentGroup,l.index,a.commands):zP(l.segmentGroup,l.index,a.commands);return Yx(e.root,l.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Eg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function vj(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},_j):!1===r?Object.assign({},yj):r,Eg(t))return RP(this.currentUrlTree,t,i);const a=this.parseUrl(t);return RP(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new lE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,m;if(this.disposed)return Promise.resolve(!1);let w,T,S;l?(w=l.resolve,T=l.reject,S=l.promise):S=new Promise((q,_e)=>{w=q,T=_e});const N=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):U=0,this.setTransition({id:N,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:T,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(q=>Promise.reject(q))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new EP(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function pO(n){return"imperative"!==n}let YT=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Eo.x,this.subscription=t.events.subscribe(a=>{a instanceof lE&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:X_(this.skipLocationChange),replaceUrl:X_(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:X_(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(_.Y36($o),_.Y36(J_),_.Y36(pe))},n.\u0275dir=_.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&_.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&_.uIk("target",r.target)("href",r.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),n})();function X_(n){return""===n||!!n}class gO{}class mO{preload(e,t){return mt(null)}}let _O=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new hO(i,r,m=>t.triggerEvent(new IP(m)),m=>t.triggerEvent(new bP(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Br(t=>t instanceof lE),uE(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(_.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,nn.D)(i).pipe((0,Mo.J)(),(0,yt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,us.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(_.LFG($o),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(gO))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})(),oR=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $x?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lE&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof CP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new CP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){_.$Z()},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();const Ig=new _.OlP("ROUTER_CONFIGURATION"),yO=new _.OlP("ROUTER_FORROOT_GUARD"),bj=[Ie,{provide:PP,useClass:OP},{provide:$o,useFactory:function Aj(n,e,t,r,i,a,l={},h,m){const w=new $o(null,n,e,t,r,i,SP(a));return h&&(w.urlHandlingStrategy=h),m&&(w.routeReuseStrategy=m),function xj(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(T=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(N=console.groupEnd)||void 0===N||N.call(console)}),w},deps:[PP,mE,Ie,_.zs3,_.Sil,iR,Ig,[class fj{},new _.FiY],[class cj{},new _.FiY]]},mE,{provide:J_,useFactory:function Rj(n){return n.routerState.root},deps:[$o]},_O,mO,class Ij{preload(e,t){return t().pipe(cf(()=>mt(null)))}},{provide:Ig,useValue:{enableTracing:!1}}];function Cj(){return new _.PXZ("Router",$o)}let vO=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[bj,wO(t),{provide:yO,useFactory:Sj,deps:[[$o,new _.FiY,new _.tp0]]},{provide:Ig,useValue:r||{}},{provide:pe,useFactory:Dj,deps:[ue,[new _.tBr(qe),new _.FiY],Ig]},{provide:oR,useFactory:Tj,deps:[$o,Kl,Ig]},{provide:gO,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:mO},{provide:_.PXZ,multi:!0,useFactory:Cj},[aR,{provide:_.ip1,multi:!0,useFactory:kj,deps:[aR]},{provide:EO,useFactory:Mj,deps:[aR]},{provide:_.tb,multi:!0,useExisting:EO}]]}}static forChild(t){return{ngModule:n,providers:[wO(t)]}}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(yO,8),_.LFG($o,8))},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({}),n})();function Tj(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new oR(n,e,t)}function Dj(n,e,t={}){return t.useHash?new Se(n,e):new Ye(n,e)}function Sj(n){return"guarded"}function wO(n){return[{provide:_.deG,multi:!0,useValue:n},{provide:iR,multi:!0,useValue:n}]}let aR=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Eo.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get($o),l=this.injector.get(Ig);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ig),i=this.injector.get(_O),a=this.injector.get(oR),l=this.injector.get($o),h=this.injector.get(_.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(_.zs3))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac}),n})();function kj(n){return n.appInitializer.bind(n)}function Mj(n){return n.bootstrapListener.bind(n)}const EO=new _.OlP("Router Initializer");let Pj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-contacto"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"contacto works!"),_.qZA())},styles:[""]}),n})(),Oj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-cuenta"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"cuenta works!"),_.qZA())},styles:[""]}),n})(),Fj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-faq"]],decls:2,vars:0,template:function(t,r){1&t&&(_.TgZ(0,"p"),_._uU(1,"faq works!"),_.qZA())},styles:[""]}),n})(),Lj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-home"]],decls:35,vars:0,consts:[["id","carouselExampleDark","data-bs-ride","carousel",1,"carousel","carousel-dark","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],["data-bs-interval","3000",1,"carousel-item","active"],["src","assets/img/11.png","alt","...",1,"d-block","w-100",2,"width","18rem"],[1,"carousel-caption","d-none","d-md-block"],["data-bs-interval","2000",1,"carousel-item"],["src","assets/img/22.jpeg","alt","...",1,"d-block","w-100"],[1,"carousel-item"],["src","assets/img/33.jpg","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleDark","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"div",1),_._UZ(2,"button",2)(3,"button",3)(4,"button",4),_.qZA(),_.TgZ(5,"div",5)(6,"div",6),_._UZ(7,"img",7),_.TgZ(8,"div",8)(9,"h5"),_._uU(10,"espantaviej@s"),_.qZA(),_.TgZ(11,"p"),_._uU(12,"no"),_.qZA()()(),_.TgZ(13,"div",9),_._UZ(14,"img",10),_.TgZ(15,"div",8)(16,"h5"),_._uU(17,"guidoverso"),_.qZA(),_.TgZ(18,"p"),_._uU(19,"si"),_.qZA()()(),_.TgZ(20,"div",11),_._UZ(21,"img",12),_.TgZ(22,"div",8)(23,"h5"),_._uU(24,"Guido-sama"),_.qZA(),_.TgZ(25,"p"),_._uU(26,"si"),_.qZA()()()(),_.TgZ(27,"button",13),_._UZ(28,"span",14),_.TgZ(29,"span",15),_._uU(30,"Previous"),_.qZA()(),_.TgZ(31,"button",16),_._UZ(32,"span",17),_.TgZ(33,"span",15),_._uU(34,"Next"),_.qZA()()())},styles:[""]}),n})(),Uj=(()=>{class n{constructor(t){this.firestore=t}getPokemones(){return this.firestore.collection("pokemones").snapshotChanges()}getPokemon(t){return this.firestore.collection("pokemones").doc(t).snapshotChanges()}createPokemon(t){return this.firestore.collection("pokemones").add(t)}updatePokemon(t,r){return this.firestore.collection("pokemones").doc(t).set(r)}deletePokemon(t){return this.firestore.collection("pokemones").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(_.LFG(Yk))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vj(n,e){if(1&n&&(_.TgZ(0,"div",6)(1,"div",7),_._UZ(2,"img",8),_.qZA(),_.TgZ(3,"div",9)(4,"p",10),_._uU(5),_.qZA()()()),2&n){const t=e.$implicit;_.s9C("id",t.data.tipo),_.xp6(2),_.s9C("src",t.data.foto,_.LSH),_.xp6(3),_.Oqu(t.data.nombre)}}const Bj=[{path:"home",component:Lj},{path:"contacto",component:Pj},{path:"faq",component:Fj},{path:"cuenta",component:Oj},{path:"pokemon",component:(()=>{class n{constructor(t){this.firestoreService=t,this.pokemones=[]}ngOnInit(){this.filtro("all"),this.firestoreService.getPokemones().subscribe(t=>{this.pokemones=[],t.forEach(r=>{this.pokemones.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}anadirclase(t,r){var i,a,l;for(a=t.className.split(" "),l=r.split(" "),i=0;i<l.length;i++)-1==a.indexOf(l[i])&&(t.className+=" "+l[i])}quitarclase(t,r){var i,a,l;for(a=t.className.split(" "),l=r.split(" "),i=0;i<l.length;i++)for(;a.indexOf(l[i])>-1;)a.splice(a.indexOf(l[i]),1);t.className=a.join(" ")}filtro(t){var r,i;for(r=document.getElementsByClassName("card"),"all"==t&&(t=""),i=0;i<r.length;i++)this.quitarclase(r[i],"show"),r[i].id.indexOf(t)>-1&&this.anadirclase(r[i],"show")}}return n.\u0275fac=function(t){return new(t||n)(_.Y36(Uj))},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-pokemones"]],decls:22,vars:1,consts:[[1,"menutipos"],[1,"displayfiltros"],[1,"lifiltro"],[1,"filtro",3,"click"],[1,"pokecards"],["class","card carta show",3,"id",4,"ngFor","ngForOf"],[1,"card","carta","show",3,"id"],[1,"foto"],["alt","...",1,"card-img-top","imgcard",3,"src"],[1,"card-body"],[1,"card-text","cardtexto"]],template:function(t,r){1&t&&(_.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"button",3),_.NdJ("click",function(){return r.filtro("all")}),_._uU(4,"Todos los roles"),_.qZA()(),_.TgZ(5,"li",2)(6,"button",3),_.NdJ("click",function(){return r.filtro("Ofensivo")}),_._uU(7,"Ofensivo"),_.qZA()(),_.TgZ(8,"li",2)(9,"button",3),_.NdJ("click",function(){return r.filtro("Defensivo")}),_._uU(10,"Defensivo"),_.qZA()(),_.TgZ(11,"li",2)(12,"button",3),_.NdJ("click",function(){return r.filtro("Apoyo")}),_._uU(13,"Apoyo"),_.qZA()(),_.TgZ(14,"li",2)(15,"button",3),_.NdJ("click",function(){return r.filtro("Agil")}),_._uU(16,"Agil"),_.qZA()(),_.TgZ(17,"li",2)(18,"button",3),_.NdJ("click",function(){return r.filtro("Equilibrado")}),_._uU(19,"Equilibrado"),_.qZA()()()(),_.TgZ(20,"div",4),_.YNc(21,Vj,6,3,"div",5),_.qZA()),2&t&&(_.xp6(21),_.Q6J("ngForOf",r.pokemones))},directives:[ir],styles:[".filtro[_ngcontent-%COMP%]{border-radius:20px;height:45px;padding:7px;margin:10px;border-style:none;background-color:#8a2be2;color:#fff;font-weight:bolder}.displayfiltros[_ngcontent-%COMP%]{list-style-type:none;display:flex}.pokecards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row}.carta[_ngcontent-%COMP%]{width:200px;height:auto;display:none;padding:5px;background-color:#380150;margin:10px;border-radius:20px;transition:all .1s}.imgcard[_ngcontent-%COMP%]{border-radius:20px;width:100%;height:100%}.cardtexto[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:bolder;font-size:30px}.show[_ngcontent-%COMP%]{display:block}.foto[_ngcontent-%COMP%]{border-radius:20px}#Defensivo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#0f0;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Ofensivo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#fd7a00;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Apoyo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#9dff00;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Agil[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#00ffea;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Equilibrado[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:purple;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}.carta[_ngcontent-%COMP%]:hover{transform:scale(1.15)}"]}),n})()}];let jj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n}),n.\u0275inj=_.cJS({imports:[[vO.forRoot(Bj)],vO]}),n})();const IO=function(){return["/home"]},$j=function(){return["/pokemon"]},Hj=function(){return["/faq"]},Gj=function(){return["/contacto"]},Wj=function(){return["/cuenta"]};let qj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-menu"]],decls:38,vars:12,consts:[[1,"navbar","navbar-expand-lg","navbar-dark",2,"background-color","#6523b6"],[1,"container-fluid"],["src","assets/img/unite-logo.png","height","60","alt",""],[1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",3,"routerLink"],[1,"nav-link",3,"routerLink"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],["href","#",1,"dropdown-item"],[1,"d-flex"],["type","search","placeholder","Buscar Pokemon","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"]],template:function(t,r){1&t&&(_.TgZ(0,"nav",0)(1,"div",1),_._UZ(2,"img",2),_.TgZ(3,"a",3),_._uU(4,"Pokepoke"),_.qZA(),_.TgZ(5,"button",4),_._UZ(6,"span",5),_.qZA(),_.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),_._uU(11,"Inicio"),_.qZA()(),_.TgZ(12,"li",8)(13,"a",10),_._uU(14,"Pok\xe9mon"),_.qZA()(),_.TgZ(15,"li",8)(16,"a",10),_._uU(17,"FAQ"),_.qZA()(),_.TgZ(18,"li",8)(19,"a",10),_._uU(20,"Contacto"),_.qZA()(),_.TgZ(21,"li",11)(22,"a",12),_._uU(23," Cuenta "),_.qZA(),_.TgZ(24,"ul",13)(25,"li")(26,"a",14),_._uU(27,"Sesion Actual"),_.qZA()(),_.TgZ(28,"li")(29,"a",15),_._uU(30,"Registrarse"),_.qZA()(),_.TgZ(31,"li")(32,"a",15),_._uU(33,"Iniciar Sesion"),_.qZA()()()()()(),_.TgZ(34,"form",16),_._UZ(35,"input",17),_.TgZ(36,"button",18),_._uU(37,"Buscar"),_.qZA()()()()),2&t&&(_.xp6(3),_.Q6J("routerLink",_.DdM(6,IO)),_.xp6(7),_.Q6J("routerLink",_.DdM(7,IO)),_.xp6(3),_.Q6J("routerLink",_.DdM(8,$j)),_.xp6(3),_.Q6J("routerLink",_.DdM(9,Hj)),_.xp6(3),_.Q6J("routerLink",_.DdM(10,Gj)),_.xp6(7),_.Q6J("routerLink",_.DdM(11,Wj)))},directives:[YT],styles:[""]}),n})(),zj=(()=>{class n{constructor(){this.title="ProyectoFinal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=_.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container","mt-3"]],template:function(t,r){1&t&&(_._UZ(0,"app-menu"),_.TgZ(1,"div",0),_._UZ(2,"router-outlet"),_.qZA())},directives:[qj,eR],styles:[""]}),n})();ml.Z.initializeApp(Bx_firebaseConfig);let Kj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_.oAB({type:n,bootstrap:[zj]}),n.\u0275inj=_.cJS({providers:[],imports:[[eu,jj,Yn.hO.initializeApp(Bx_firebaseConfig),SE,eF,wR,fB]]}),n})();(0,_.G48)(),Xu().bootstrapModule(Kj).catch(n=>console.error(n))},5867:(Je,we,O)=>{O.d(we,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=O(9681);(0,_.registerVersion)("firebase","9.8.3","app")},127:(Je,we,O)=>{O.d(we,{Z:()=>_.Z});var _=O(3942);_.Z.registerVersion("firebase","9.8.3","app-compat")},9916:(Je,we,O)=>{O.r(we);var _=O(5861),ee=O(3942),F=O(2090),ce=O(9681),ie=O(655),ge=O(1877),de=O(4859);const Pe=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Be=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new ge.Yd("@firebase/auth");function Ye(y,...f){qe.logLevel<=ge.in.ERROR&&qe.error(`Auth (${ce.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw $e(y,...f)}function Ie(y,...f){return $e(y,...f)}function be(y,f,g){const E=Object.assign(Object.assign({},Be()),{[f]:g});return new F.LL("auth","Firebase",E).create(f,{appName:y.name})}function je(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Se(y,"argument-error"),be(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...f){if("string"!=typeof y){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return pe.create(y,...f)}function $(y,f,...g){if(!y)throw $e(f,...g)}function Ee(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ye(f),new Error(f)}function Y(y,f){y||Ee(f)}const se=new Map;function te(y){Y(y instanceof Function,"Expected a class definition");let f=se.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,se.set(y,f),f)}function Fe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(f,g){this.shortDelay=f,this.longDelay=g,Y(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Ft(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kn(y,f){Y(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class an{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pr=new sn(3e4,6e4);function qt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Lt(y,f,g,E){return ji.apply(this,arguments)}function ji(){return(ji=(0,_.Z)(function*(y,f,g,E,A={}){return di(y,A,(0,_.Z)(function*(){let M={},Z={};E&&("GET"===f?Z=E:M={body:JSON.stringify(E)});const oe=(0,F.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),an.fetch()(Ps(y,y.config.apiHost,g,oe),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function di(y,f,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,_.Z)(function*(y,f,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Jt),f);try{const A=new Qr(y),M=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const Z=yield M.json();if("needConfirmation"in Z)throw Di(y,"account-exists-with-different-credential",Z);if(M.ok&&!("errorMessage"in Z))return Z;{const oe=M.ok?Z.errorMessage:Z.error.message,[Le,Ke]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Di(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw Di(y,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw Di(y,"user-disabled",Z);const ht=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw be(y,ht,Ke);Se(y,ht)}}catch(A){if(A instanceof F.ZR)throw A;Se(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,f,g,E){return $i.apply(this,arguments)}function $i(){return($i=(0,_.Z)(function*(y,f,g,E,A={}){const M=yield Lt(y,f,g,E,A);return"mfaPendingCredential"in M&&Se(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Ps(y,f,g,E){const A=`${f}${g}?${E}`;return y.config.emulator?kn(y.config,A):`${y.config.apiScheme}://${A}`}class Qr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),Pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Di(y,f,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const A=Ie(y,f,E);return A.customData._tokenResponse=g,A}function hi(){return(hi=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Cn(y,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Os(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function rr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function lo(){return(lo=(0,_.Z)(function*(y,f=!1){const g=(0,F.m9)(y),E=yield g.getIdToken(f),A=rt(E);$(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,Z=null==M?void 0:M.sign_in_provider;return{claims:A,token:E,authTime:rr($t(A.auth_time)),issuedAtTime:rr($t(A.iat)),expirationTime:rr($t(A.exp)),signInProvider:Z||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function rt(y){const[f,g,E]=y.split(".");if(void 0===f||void 0===g||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(g);return A?JSON.parse(A):(Ye("Failed to decode base64 JWT payload"),null)}catch(A){return Ye("Caught error parsing JWT payload as JSON",A),null}}function yr(y,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,_.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof F.ZR&&Ut(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Ut({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class co{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class vr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wr(y){return B.apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(y){var f;const g=y.auth,E=yield y.getIdToken(),A=yield yr(y,Os(g,{idToken:E}));$(null==A?void 0:A.users.length,g,"internal-error");const M=A.users[0];y._notifyReloadListener(M);const Z=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?W(M.providerUserInfo):[],oe=Ce(y.providerData,Z),ht=!!y.isAnonymous&&!(y.email&&M.passwordHash||(null==oe?void 0:oe.length)),ft={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:oe,metadata:new vr(M.createdAt,M.lastLoginAt),isAnonymous:ht};Object.assign(y,ft)})).apply(this,arguments)}function K(){return(K=(0,_.Z)(function*(y){const f=(0,F.m9)(y);yield wr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(y,f){return[...y.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}function W(y){return y.map(f=>{var{providerId:g}=f,E=(0,ie._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Me(){return(Me=(0,_.Z)(function*(y,f){const g=yield di(y,{},(0,_.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:M}=y.config,Z=Ps(y,A,"/v1/token",`key=${M}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",an.fetch()(Z,{method:"POST",headers:oe,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){$(f.idToken,"internal-error"),$(void 0!==f.idToken,"internal-error"),$(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Et(y){const f=rt(y);return $(f,"internal-error"),$(void 0!==f.exp,"internal-error"),$(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,_.Z)(function*(){return $(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,_.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:Z}=yield function X(y,f){return Me.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(A,M,Number(Z))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:A,expirationTime:M}=g,Z=new Xe;return E&&($("string"==typeof E,"internal-error",{appName:f}),Z.refreshToken=E),A&&($("string"==typeof A,"internal-error",{appName:f}),Z.accessToken=A),M&&($("number"==typeof M,"internal-error",{appName:f}),Z.expirationTime=M),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function ct(y,f){$("string"==typeof y||void 0===y,"internal-error",{appName:f})}class It{constructor(f){var{uid:g,auth:E,stsTokenManager:A}=f,M=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new co(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new vr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,_.Z)(function*(){const E=yield yr(g,g.stsTokenManager.getToken(g.auth,f));return $(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function fi(y){return lo.apply(this,arguments)}(this,f)}reload(){return function z(y){return K.apply(this,arguments)}(this)}_assign(f){this!==f&&($(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new It(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,_.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield wr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,_.Z)(function*(){const g=yield f.getIdToken();return yield yr(f,function _t(y,f){return hi.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,A,M,Z,oe,Le,Ke,ht;const ft=null!==(E=g.displayName)&&void 0!==E?E:void 0,Gn=null!==(A=g.email)&&void 0!==A?A:void 0,Ei=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,bc=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,Pf=null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,Ro=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,Cc=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,Of=null!==(ht=g.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:Ff,emailVerified:Ni,isAnonymous:Es,providerData:wl,stsTokenManager:im}=g;$(Ff&&im,f,"internal-error");const Ty=Xe.fromJSON(this.name,im);$("string"==typeof Ff,f,"internal-error"),ct(ft,f.name),ct(Gn,f.name),$("boolean"==typeof Ni,f,"internal-error"),$("boolean"==typeof Es,f,"internal-error"),ct(Ei,f.name),ct(bc,f.name),ct(Pf,f.name),ct(Ro,f.name),ct(Cc,f.name),ct(Of,f.name);const pa=new It({uid:Ff,auth:f,email:Gn,emailVerified:Ni,displayName:ft,isAnonymous:Es,photoURL:bc,phoneNumber:Ei,tenantId:Pf,stsTokenManager:Ty,createdAt:Cc,lastLoginAt:Of});return wl&&Array.isArray(wl)&&(pa.providerData=wl.map(Tc=>Object.assign({},Tc))),Ro&&(pa._redirectEventId=Ro),pa}static _fromIdTokenResponse(f,g,E=!1){return(0,_.Z)(function*(){const A=new Xe;A.updateFromServerResponse(g);const M=new It({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield wr(M),M})()}}const bt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(g,E){var A=this;return(0,_.Z)(function*(){A.storage[g]=E})()}_get(g){var E=this;return(0,_.Z)(function*(){const A=E.storage[g];return void 0===A?null:A})()}_remove(g){var E=this;return(0,_.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function zn(y,f,g){return`firebase:${y}:${f}:${g}`}class Fr{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:A,name:M}=this.auth;this.fullUserKey=zn(this.userKey,A.apiKey,M),this.fullPersistenceKey=zn("persistence",A.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?It._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,_.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,_.Z)(function*(){if(!g.length)return new Fr(te(bt),f,E);const A=(yield Promise.all(g.map(function(){var Ke=(0,_.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let M=A[0]||te(bt);const Z=zn(E,f.config.apiKey,f.name);let oe=null;for(const Ke of g)try{const ht=yield Ke._get(Z);if(ht){const ft=It._fromJSON(f,ht);Ke!==M&&(oe=ft),M=Ke;break}}catch(ht){}const Le=A.filter(Ke=>Ke._shouldAllowMigration);return M._shouldAllowMigration&&Le.length?(M=Le[0],oe&&(yield M._set(Z,oe.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,_.Z)(function*(ht){if(ht!==M)try{yield ht._remove(Z)}catch(ft){}});return function(ht){return Ke.apply(this,arguments)}}())),new Fr(M,f,E)):new Fr(M,f,E)})()}}function $u(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Kn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Va(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(ls(f))return"Blackberry";if(Zn(f))return"Webos";if(Hu(f))return"Safari";if((f.includes("chrome/")||Ba(f))&&!f.includes("edge/"))return"Chrome";if(Lr(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Va(y=(0,F.z$)()){return/firefox\//i.test(y)}function Hu(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ba(y=(0,F.z$)()){return/crios\//i.test(y)}function Kn(y=(0,F.z$)()){return/iemobile/i.test(y)}function Lr(y=(0,F.z$)()){return/android/i.test(y)}function ls(y=(0,F.z$)()){return/blackberry/i.test(y)}function Zn(y=(0,F.z$)()){return/webos/i.test(y)}function Xr(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function Fs(y=(0,F.z$)()){return Xr(y)||Lr(y)||Zn(y)||ls(y)||/windows phone/i.test(y)||Kn(y)}function Ho(y,f=[]){let g;switch(y){case"Browser":g=$u((0,F.z$)());break;case"Worker":g=`${$u((0,F.z$)())}-${y}`;break;default:g=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${E}`}class ei{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=M=>new Promise((Z,oe)=>{try{Z(f(M))}catch(Le){oe(Le)}});E.onAbort=g,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,_.Z)(function*(){var E;if(g.auth.currentUser===f)return;const A=[];try{for(const M of g.queue)yield M(f),M.onAbort&&A.push(M.onAbort)}catch(M){A.reverse();for(const Z of A)try{Z()}catch(oe){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=M)||void 0===E?void 0:E.message})}})()}}class ze{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new un(this),this.idTokenSubscription=new un(this),this.beforeStateQueue=new ei(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=te(g)),this._initializationPromise=this.queue((0,_.Z)(function*(){var A,M;if(!E._deleted&&(E.persistenceManager=yield Fr.create(E,f),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Z){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,_.Z)(function*(){var E;const A=yield g.assertedPersistence.getCurrentUser();let M=A,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const oe=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=null==M?void 0:M._redirectEventId,Ke=yield g.tryRedirectSignIn(f);(!oe||oe===Le)&&(null==Ke?void 0:Ke.user)&&(M=Ke.user,Z=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(M)}catch(oe){M=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(oe))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return $(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var g=this;return(0,_.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,_.Z)(function*(){try{yield wr(f)}catch(E){if("auth/network-request-failed"!==E.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,_.Z)(function*(){const E=f?(0,F.m9)(f):null;return E&&$(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,_.Z)(function*(){if(!E._deleted)return f&&$(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,_.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,_.Z)(function*(){yield g.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,_.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,_.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&te(f)||g._popupRedirectResolver;$(E,g,"argument-error"),g.redirectPersistenceManager=yield Fr.create(g,[te(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,_.Z)(function*(){var E,A;return g._isInitialized&&(yield g.queue((0,_.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,_.Z)(function*(){if(f===g.currentUser)return g.queue((0,_.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,A){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return $(Z,this,"internal-error"),Z.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,E,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,_.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ho(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function at(y){return(0,F.m9)(y)}class un{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Gi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Si{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ee("not implemented")}_getIdTokenResponse(f){return Ee("not implemented")}_linkToIdToken(f,g){return Ee("not implemented")}_getReauthenticationResolver(f){return Ee("not implemented")}}function Pn(y,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:resetPassword",qt(y,f))})).apply(this,arguments)}function $a(y,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gu(y,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",qt(y,f))})).apply(this,arguments)}function fo(){return(fo=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithPassword",qt(y,f))})).apply(this,arguments)}function Vs(y,f){return Er.apply(this,arguments)}function Er(){return(Er=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendOobCode",qt(y,f))})).apply(this,arguments)}function ln(y,f){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,_.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function Ha(y,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,_.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function Wi(y,f){return qu.apply(this,arguments)}function qu(){return(qu=(0,_.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function fd(y,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,_.Z)(function*(y,f){return Vs(y,f)})).apply(this,arguments)}function Wl(){return(Wl=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}function pd(){return(pd=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}class Ir extends Si{constructor(f,g,E,A=null){super("password",E),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Ir(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new Ir(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,_.Z)(function*(){switch(g.signInMethod){case"password":return function ir(y,f){return fo.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function zi(y,f){return Wl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,_.Z)(function*(){switch(E.signInMethod){case"password":return $a(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function bg(y,f){return pd.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Bs(y,f){return gd.apply(this,arguments)}function gd(){return(gd=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithIdp",qt(y,f))})).apply(this,arguments)}class cs extends Si{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new cs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Se("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=g,M=(0,ie._T)(g,["providerId","signInMethod"]);if(!E||!A)return null;const Z=new cs(E,A);return Z.idToken=M.idToken||void 0,Z.accessToken=M.accessToken||void 0,Z.secret=M.secret,Z.nonce=M.nonce,Z.pendingToken=M.pendingToken||null,Z}_getIdTokenResponse(f){return Bs(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,Bs(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Bs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function Tg(y,f){return md.apply(this,arguments)}function md(){return(md=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,f))})).apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f))})).apply(this,arguments)}function _d(){return(_d=(0,_.Z)(function*(y,f){const g=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f));if(g.temporaryProof)throw Di(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Sg={USER_NOT_FOUND:"user-not-found"};function yd(){return(yd=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Sg)})).apply(this,arguments)}class Go extends Si{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Go({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Go({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function ql(y,f){return js.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Dg(y,f){return _d.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Ag(y,f){return yd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:M}=f;return E||g||A||M?new Go({verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:M}):null}}class zu{constructor(f){var g,E,A,M,Z,oe;const Le=(0,F.zd)((0,F.pd)(f)),Ke=null!==(g=Le.apiKey)&&void 0!==g?g:null,ht=null!==(E=Le.oobCode)&&void 0!==E?E:null,ft=function hf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);$(Ke&&ht&&ft,"argument-error"),this.apiKey=Ke,this.operation=ft,this.code=ht,this.continueUrl=null!==(M=Le.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const g=function Ga(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||g||f||y}(f);try{return new zu(g)}catch(E){return null}}}let wd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return Ir._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const A=zu.parseLink(E);return $(A,"argument-error"),Ir._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class br{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class po extends br{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ki extends po{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return $("providerId"in g&&"signInMethod"in g,"argument-error"),cs._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return $(f.idToken||f.accessToken,"argument-error"),cs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ki.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ki.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:M,nonce:Z,providerId:oe}=f;if(!E&&!A&&!g&&!M||!oe)return null;try{return new Ki(oe)._credential({idToken:g,accessToken:E,nonce:Z,pendingToken:M})}catch(Le){return null}}}let Wo=(()=>{class y extends po{constructor(){super("facebook.com")}static credential(g){return cs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ed=(()=>{class y extends po{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return cs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A}=g;if(!E&&!A)return null;try{return y.credential(E,A)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ff=(()=>{class y extends po{constructor(){super("github.com")}static credential(g){return cs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class go extends Si{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Bs(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,Bs(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Bs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:M}=g;return E&&A&&M&&E===A?new go(E,M):null}static _create(f,g){return new go(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ur extends br{constructor(f){$(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ur.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ur.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=go.fromJSON(f);return $(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return go._create(E,g)}catch(A){return null}}}let bd=(()=>{class y extends po{constructor(){super("twitter.com")}static credential(g,E){return cs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=g;if(!E||!A)return null;try{return y.credential(E,A)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Vr(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signUp",qt(y,f))})).apply(this,arguments)}class gi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,A=!1){return(0,_.Z)(function*(){const M=yield It._fromIdTokenResponse(f,E,A),Z=zl(E);return new gi({user:M,providerId:Z,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=zl(E);return new gi({user:f,providerId:A,_tokenResponse:E,operationType:g})})()}}function zl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Kl(){return(Kl=(0,_.Z)(function*(y){var f;const g=at(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new gi({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Vr(g,{returnSecureToken:!0}),A=yield gi._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ko extends F.ZR{constructor(f,g,E,A){var M;super(g.code,g.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,A){return new Ko(f,g,E,A)}}function Zl(y,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Ko._fromErrorAndOperation(y,M,f,E):M})}function Zi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function cn(){return(cn=(0,_.Z)(function*(y,f){const g=(0,F.m9)(y);yield tn(!0,g,f);const{providerUserInfo:E}=yield Cn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=Zi(E||[]);return g.providerData=g.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Wa(y,f){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(y,f,g=!1){const E=yield yr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return gi._forOperation(y,"link",E)})).apply(this,arguments)}function tn(y,f,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,_.Z)(function*(y,f,g){yield wr(f);const A=!1===y?"provider-already-linked":"no-such-provider";$(Zi(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function Ku(y,f){return $s.apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(y,f,g=!1){const{auth:E}=y,A="reauthenticate";try{const M=yield yr(y,Zl(E,A,f,y),g);$(M.idToken,E,"internal-error");const Z=rt(M.idToken);$(Z,E,"internal-error");const{sub:oe}=Z;return $(y.uid===oe,E,"user-mismatch"),gi._forOperation(y,A,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Se(E,"user-mismatch"),M}})).apply(this,arguments)}function hr(y,f){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,_.Z)(function*(y,f,g=!1){const E="signIn",A=yield Zl(y,E,f),M=yield gi._fromIdTokenResponse(y,E,A);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function wn(y,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,_.Z)(function*(y,f){return hr(at(y),f)})).apply(this,arguments)}function fr(y,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,_.Z)(function*(y,f){const g=(0,F.m9)(y);return yield tn(!1,g,f.providerId),Wa(g,f)})).apply(this,arguments)}function ds(y,f){return za.apply(this,arguments)}function za(){return(za=(0,_.Z)(function*(y,f){return Ku((0,F.m9)(y),f)})).apply(this,arguments)}function Ai(y,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,_.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,f))})).apply(this,arguments)}function gt(){return(gt=(0,_.Z)(function*(y,f){const g=at(y),E=yield Ai(g,{token:f,returnSecureToken:!0}),A=yield gi._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Yo{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Zu._fromServerResponse(f,g):Se(f,"internal-error")}}class Zu extends Yo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Zu(g)}}function Ka(y,f,g){var E;$((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),$(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&($(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&($(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Za(){return(Za=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&Ka(E,A,g),yield Ha(E,A)})).apply(this,arguments)}function Xl(){return(Xl=(0,_.Z)(function*(y,f,g){yield Pn((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Nt(){return(Nt=(0,_.Z)(function*(y,f){yield Gu((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function ec(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(y,f){const g=(0,F.m9)(y),E=yield Pn(g,{oobCode:f}),A=E.requestType;switch($(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(E.mfaInfo,g,"internal-error");default:$(E.email,g,"internal-error")}let M=null;return E.mfaInfo&&(M=Yo._fromServerResponse(at(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function yo(){return(yo=(0,_.Z)(function*(y,f){const{data:g}=yield ec((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function Ya(){return(Ya=(0,_.Z)(function*(y,f,g){const E=at(y),A=yield Vr(E,{returnSecureToken:!0,email:f,password:g}),M=yield gi._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}function Yu(){return(Yu=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};$(g.handleCodeInApp,E,"argument-error"),g&&Ka(E,A,g),yield Wi(E,A)})).apply(this,arguments)}function On(){return(On=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y),A=wd.credentialWithLink(f,g||Fe());return $(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),wn(E,A)})).apply(this,arguments)}function hs(y,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:createAuthUri",qt(y,f))})).apply(this,arguments)}function xi(){return(xi=(0,_.Z)(function*(y,f){const E={identifier:f,continueUri:lt()?Fe():"http://localhost"},{signinMethods:A}=yield hs((0,F.m9)(y),E);return A||[]})).apply(this,arguments)}function Ju(){return(Ju=(0,_.Z)(function*(y,f){const g=(0,F.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ka(g.auth,A,f);const{email:M}=yield ln(g.auth,A);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function Xu(){return(Xu=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ka(E.auth,M,g);const{email:Z}=yield fd(E.auth,M);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Xa(y,f){return eu.apply(this,arguments)}function eu(){return(eu=(0,_.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function tu(){return(tu=(0,_.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,F.m9)(y),M={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield yr(E,Xa(E.auth,M));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const oe=E.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Jo(y,f,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,_.Z)(function*(y,f,g){const{auth:E}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const Z=yield yr(y,$a(E,M));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Xo{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class Dd extends Xo{constructor(f,g,E,A){super(f,g,E),this.username=A}}class ea extends Xo{constructor(f,g){super(f,"facebook.com",g)}}class Ji extends Dd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class gf extends Xo{constructor(f,g){super(f,"google.com",g)}}class sr extends Dd{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Xi(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Td(y){var f,g;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const Z=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new Xo(M,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new ea(M,A);case"github.com":return new Ji(M,A);case"google.com":return new gf(M,A);case"twitter.com":return new sr(M,A,y.screenName||null);case"custom":case"anonymous":return new Xo(M,null);default:return new Xo(M,E,A)}}(g)}class fs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new fs("enroll",f)}static _fromMfaPendingCredential(f){return new fs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return fs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return fs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ta{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=at(f),A=g.customData._serverResponse,M=(A.mfaInfo||[]).map(oe=>Yo._fromServerResponse(E,oe));$(A.mfaPendingCredential,E,"internal-error");const Z=fs._fromMfaPendingCredential(A.mfaPendingCredential);return new ta(Z,M,function(){var oe=(0,_.Z)(function*(Le){const Ke=yield Le._process(E,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const ht=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const ft=yield gi._fromIdTokenResponse(E,g.operationType,ht);return yield E._updateCurrentUser(ft.user),ft;case"reauthenticate":return $(g.user,E,"internal-error"),gi._forOperation(g.user,g.operationType,ht);default:Se(E,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,_.Z)(function*(){return g.signInResolver(f)})()}}function _f(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,f))}class xd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Yo._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new xd(f)}getSession(){var f=this;return(0,_.Z)(function*(){return fs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var E=this;return(0,_.Z)(function*(){const A=f,M=yield E.getSession(),Z=yield yr(E.user,A._process(E.user.auth,M,g));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(f){var g=this;return(0,_.Z)(function*(){const E="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),M=yield yr(g.user,function el(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Z})=>Z!==E),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const tl=new WeakMap,wo="__sak";class Rd{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(wo,"1"),this.storage.removeItem(wo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const nn=(()=>{class y extends Rd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mg(){const y=(0,F.z$)();return Hu(y)||Xr(y)}()&&function dr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Fs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),M=this.localCache[E];A!==M&&g(E,M,A)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((oe,Le,Ke)=>{this.notifyListeners(oe,Ke)});const A=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(g.newValue!==oe)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!E)return}const M=()=>{const oe=this.storage.getItem(A);!E&&this.localCache[A]===oe||this.notifyListeners(A,oe)},Z=this.storage.getItem(A);!function ja(){return(0,F.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const M of Array.from(A))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var A=()=>super._set,M=this;return(0,_.Z)(function*(){yield A().call(M,g,E),M.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,A=this;return(0,_.Z)(function*(){const M=yield E().call(A,g);return A.localCache[g]=JSON.stringify(M),M})()}_remove(g){var E=()=>super._remove,A=this;return(0,_.Z)(function*(){yield E().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Ln=(()=>{class y extends Rd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let su=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(M=>M.isListeningto(g));if(E)return E;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,_.Z)(function*(){const A=g,{eventId:M,eventType:Z,data:oe}=A.data,Le=E.handlersMap[Z];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:Z});const Ke=Array.from(Le).map(function(){var ft=(0,_.Z)(function*(Gn){return Gn(A.origin,oe)});return function(Gn){return ft.apply(this,arguments)}}()),ht=yield function iu(y){return Promise.all(y.map(function(){var f=(0,_.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:M,eventType:Z,response:ht})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ri(y="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return y+g}class Qn{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var A=this;return(0,_.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,Ke)=>{const ht=ri("",20);M.port1.start();const ft=setTimeout(()=>{Ke(new Error("unsupported_event"))},E);oe={messageChannel:M,onMessage(Gn){const Ei=Gn;if(Ei.data.eventId===ht)switch(Ei.data.status){case"ack":clearTimeout(ft),Z=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Ei.data.response);break;default:clearTimeout(ft),clearTimeout(Z),Ke(new Error("invalid_response"))}}},A.handlers.add(oe),M.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:f,eventId:ht,data:g},[M.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function xt(){return window}function yt(){return void 0!==xt().WorkerGlobalScope&&"function"==typeof xt().importScripts}function rl(){return(rl=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Nd="firebaseLocalStorageDb",Br="firebaseLocalStorage",Gs="fbase_key";class ps{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function pr(y,f){return y.transaction([Br],f?"readwrite":"readonly").objectStore(Br)}function ts(){const y=indexedDB.open(Nd,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Br,{keyPath:Gs})}catch(A){g(A)}}),y.addEventListener("success",(0,_.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Br)?f(E):(E.close(),yield function Pd(){const y=indexedDB.deleteDatabase(Nd);return new ps(y).toPromise()}(),f(yield ts()))}))})}function _i(y,f,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(y,f,g){const E=pr(y,!0).put({[Gs]:f,value:g});return new ps(E).toPromise()})).apply(this,arguments)}function gs(){return(gs=(0,_.Z)(function*(y,f){const g=pr(y,!1).get(f),E=yield new ps(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Vt(y,f){const g=pr(y,!0).delete(f);return new ps(g).toPromise()}const na=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,_.Z)(function*(){return g.db||(g.db=yield ts()),g.db})()}_withRetries(g){var E=this;return(0,_.Z)(function*(){let A=0;for(;;)try{const M=yield E._openDb();return yield g(M)}catch(M){if(A++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,_.Z)(function*(){return yt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,_.Z)(function*(){g.receiver=su._getInstance(function Md(){return yt()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,_.Z)(function*(A,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(A,M){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,_.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,_.Z)(function*(){var E,A;if(g.activeServiceWorker=yield function kd(){return rl.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Qn(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(E=M[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=M[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,_.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function oc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ts();return yield _i(g,wo,"1"),yield Vt(g,wo),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,_.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var A=this;return(0,_.Z)(function*(){return A._withPendingWrite((0,_.Z)(function*(){return yield A._withRetries(M=>_i(M,g,E)),A.localCache[g]=E,A.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,_.Z)(function*(){const A=yield E._withRetries(M=>function il(y,f){return gs.apply(this,arguments)}(M,g));return E.localCache[g]=A,A})()}_remove(g){var E=this;return(0,_.Z)(function*(){return E._withPendingWrite((0,_.Z)(function*(){return yield E._withRetries(A=>Vt(A,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,_.Z)(function*(){const E=yield g._withRetries(Z=>{const oe=pr(Z,!1).getAll();return new ps(oe).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:Z,value:oe}of E)M.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(oe)&&(g.notifyListeners(Z,oe),A.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!M.has(Z)&&(g.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const M of Array.from(A))M(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ol(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,f))}function al(){return(al=(0,_.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bo(y){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=A=>{const M=Ie("internal-error");M.customData=A,g(M)},E.type="text/javascript",E.charset="UTF-8",function ou(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function zs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ul=1e12;class uu{constructor(f){this.auth=f,this.counter=ul,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new ty(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||ul;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||ul))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,_.Z)(function*(){var E;return null===(E=g._widgets.get(f||ul))||void 0===E||E.execute(),""})()}}class ty{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;$(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fd(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dn=zs("rcb"),me=new sn(3e4,6e4);class ms{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!xt().grecaptcha}load(f,g=""){return $(function P(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(xt().grecaptcha):new Promise((E,A)=>{const M=xt().setTimeout(()=>{A(Ie(f,"network-request-failed"))},me.get());xt()[Dn]=()=>{xt().clearTimeout(M),delete xt()[Dn];const oe=xt().grecaptcha;if(!oe)return void A(Ie(f,"internal-error"));const Le=oe.render;oe.render=(Ke,ht)=>{const ft=Le(Ke,ht);return this.counter++,ft},this.hostLanguage=g,E(oe)},bo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Dn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),A(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!xt().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ri{load(f){return(0,_.Z)(function*(){return new uu(f)})()}clearedOneInstance(){}}const uc="recaptcha",Pg={theme:"light",type:"image"};class lu{constructor(f,g=Object.assign({},Pg),E){this.parameters=g,this.type=uc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(E),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;$(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ri:new ms,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(M=>{const Z=oe=>{!oe||(f.tokenChangeListeners.delete(Z),M(oe))};f.tokenChangeListeners.add(Z),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=xt()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){$(lt()&&!yt(),f.auth,"internal-error"),yield function ar(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Od(y){return al.apply(this,arguments)}(f.auth);$(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yt{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Go._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function _s(){return(_s=(0,_.Z)(function*(y,f,g){const E=at(y),A=yield cu(E,f,(0,F.m9)(g));return new Yt(A,M=>wn(E,M))})).apply(this,arguments)}function lc(){return(lc=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y);yield tn(!1,E,"phone");const A=yield cu(E.auth,f,(0,F.m9)(g));return new Yt(A,M=>fr(E,M))})).apply(this,arguments)}function jr(){return(jr=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y),A=yield cu(E.auth,f,(0,F.m9)(g));return new Yt(A,M=>ds(E,M))})).apply(this,arguments)}function cu(y,f,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,_.Z)(function*(y,f,g){var E;const A=yield g.verify();try{let M;if($("string"==typeof A,y,"argument-error"),$(g.type===uc,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const Z=M.session;if("phoneNumber"in M)return $("enroll"===Z.type,y,"internal-error"),(yield _f(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{$("signin"===Z.type,y,"internal-error");const oe=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return $(oe,y,"missing-multi-factor-info"),(yield ol(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Tg(y,{phoneNumber:M.phoneNumber,recaptchaToken:A});return Z}}finally{g._reset()}})).apply(this,arguments)}function sa(){return(sa=(0,_.Z)(function*(y,f){yield Wa((0,F.m9)(y),f)})).apply(this,arguments)}let Sn=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=at(g)}verifyPhoneNumber(g,E){return cu(this.auth,g,(0,F.m9)(E))}static credential(g,E){return Go._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:A}=g;return E&&A?Go._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function vi(y,f){return f?te(f):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class du extends Si{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Bs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Bs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Bs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Ld(y){return hr(y.auth,new du(y),y.bypassAuthState)}function oa(y){const{auth:f,user:g}=y;return $(g,f,"internal-error"),Ku(g,new du(y),y.bypassAuthState)}function Cr(y){return aa.apply(this,arguments)}function aa(){return(aa=(0,_.Z)(function*(y){const{auth:f,user:g}=y;return $(g,f,"internal-error"),Wa(g,new du(y),y.bypassAuthState)})).apply(this,arguments)}class Ks{constructor(f,g,E,A,M=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,_.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(E,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,_.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:M,tenantId:Z,error:oe,type:Le}=f;if(oe)return void g.reject(oe);const Ke={auth:g.auth,requestUri:E,sessionId:A,tenantId:Z||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Ke))}catch(ht){g.reject(ht)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ld;case"linkViaPopup":case"linkViaRedirect":return Cr;case"reauthViaPopup":case"reauthViaRedirect":return oa;default:Se(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Og=new sn(2e3,1e4);function Zs(){return(Zs=(0,_.Z)(function*(y,f,g){const E=at(y);je(y,f,br);const A=vi(E,g);return new To(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function cc(){return(cc=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y);je(E.auth,f,br);const A=vi(E.auth,g);return new To(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function ns(){return(ns=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y);je(E.auth,f,br);const A=vi(E.auth,g);return new To(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let To=(()=>{class y extends Ks{constructor(g,E,A,M,Z){super(g,E,M,Z),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,_.Z)(function*(){const E=yield g.execute();return $(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,_.Z)(function*(){Y(1===g.filter.length,"Popup operations only handle one event");const E=ri();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Ie(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Og.get())};g()}}return y.currentPopupAction=null,y})();const Ys=new Map;class ry extends Ks{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,_.Z)(function*(){let E=Ys.get(g.auth._key());if(!E){try{const M=(yield function ua(y,f){return fu.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(M)}catch(A){E=()=>Promise.reject(A)}Ys.set(g.auth._key(),E)}return g.bypassAuthState||Ys.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function fu(){return(fu=(0,_.Z)(function*(y,f){const g=V(f),E=k(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(g));return yield E._remove(g),A})).apply(this,arguments)}function Do(y,f){return ll.apply(this,arguments)}function ll(){return(ll=(0,_.Z)(function*(y,f){return k(y)._set(V(f),"true")})).apply(this,arguments)}function D(y,f){Ys.set(y._key(),f)}function k(y){return te(y._redirectPersistence)}function V(y){return zn("pendingRedirect",y.config.apiKey,y.name)}function ke(){return(ke=(0,_.Z)(function*(y,f,g){const E=at(y);je(y,f,br);const A=vi(E,g);return yield Do(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Rt(){return(Rt=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y);je(E.auth,f,br);const A=vi(E.auth,g);yield Do(A,E.auth);const M=yield pu(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function Tr(){return(Tr=(0,_.Z)(function*(y,f,g){const E=(0,F.m9)(y);je(E.auth,f,br);const A=vi(E.auth,g);yield tn(!1,E,f.providerId),yield Do(A,E.auth);const M=yield pu(E);return A._openRedirect(E.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function la(){return(la=(0,_.Z)(function*(y,f){return yield at(y)._initializationPromise,$r(y,f,!1)})).apply(this,arguments)}function $r(y,f){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,_.Z)(function*(y,f,g=!1){const E=at(y),A=vi(E,f),Z=yield new ry(E,A,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,f)),Z})).apply(this,arguments)}function pu(y){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(y){const f=ri(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ys{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Fg(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vs(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!vs(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Ie(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(is(f))}saveEventToCache(f){this.cachedEventUids.add(is(f)),this.lastProcessedEventTime=Date.now()}}function is(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function vs({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Lg(y){return yf.apply(this,arguments)}function yf(){return(yf=(0,_.Z)(function*(y,f={}){return Lt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const cl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dc=/^https?/;function Ug(){return(Ug=(0,_.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Lg(y);for(const g of f)try{if(Vg(g))return}catch(E){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function Vg(y){const f=Fe(),{protocol:g,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===E}if(!dc.test(g))return!1;if(cl.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const sy=new sn(3e4,6e4);function oy(){const y=xt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let hc=null;function Bg(y){return hc=hc||function Bd(y){return new Promise((f,g)=>{var E,A,M;function Z(){oy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{oy(),g(Ie(y,"network-request-failed"))},timeout:sy.get()})}if(null===(A=null===(E=xt().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=xt().gapi)||void 0===M?void 0:M.load)){const oe=zs("iframefcb");return xt()[oe]=()=>{gapi.load?Z():g(Ie(y,"network-request-failed"))},bo(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>g(Le))}Z()}}).catch(f=>{throw hc=null,f})}(y),hc}const dl=new sn(5e3,15e3),ay={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uy(y){const f=y.config;$(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?kn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:y.name,v:ce.SDK_VERSION},A=jg.get(y.config.apiHost);A&&(E.eid=A);const M=y._getFrameworks();return M.length&&(E.fw=M.join(",")),`${g}?${(0,F.xO)(E).slice(1)}`}function fl(){return fl=(0,_.Z)(function*(y){const f=yield Bg(y),g=xt().gapi;return $(g,y,"internal-error"),f.open({where:document.body,url:uy(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ay,dontclear:!0},E=>new Promise(function(){var A=(0,_.Z)(function*(M,Z){yield E.restyle({setHideOnLeave:!1});const oe=Ie(y,"network-request-failed"),Le=xt().setTimeout(()=>{Z(oe)},dl.get());function Ke(){xt().clearTimeout(Le),M(E)}E.ping(Ke).then(Ke,()=>{Z(oe)})});return function(M,Z){return A.apply(this,arguments)}}()))}),fl.apply(this,arguments)}const wf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ha(y,f,g,E,A,M){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ce.SDK_VERSION,eventId:A};if(f instanceof br){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Ke]of Object.entries(M||{}))Z[Le]=Ke}if(f instanceof po){const Le=f.getScopes().filter(Ke=>""!==Ke);Le.length>0&&(Z.scopes=Le.join(","))}y.tenantId&&(Z.tid=y.tenantId);const oe=Z;for(const Le of Object.keys(oe))void 0===oe[Le]&&delete oe[Le];return`${function Ef({config:y}){return y.emulator?kn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(oe).slice(1)}`}const pl="webStorageSupport";class Gg extends class JT{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Gg(f)}_finalizeEnroll(f,g,E){return function vo(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function qs(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hy=(()=>{class y{constructor(){}static assertion(g){return Gg._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Wg="@firebase/auth";class CE{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,_.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var A;f((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function So(){return window}function gl(){return(gl=(0,_.Z)(function*(y,f,g){var E;const{BuildInfo:A}=So();Y(f.sessionId,"AuthEvent did not contain a session ID");const M=yield pc(f.sessionId),Z={};return Xr()?Z.ibi=A.packageName:Lr()?Z.apn=A.packageName:Se(y,"operation-not-supported-in-this-environment"),A.displayName&&(Z.appDisplayName=A.displayName),Z.sessionId=M,ha(y,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Z)})).apply(this,arguments)}function $d(){return($d=(0,_.Z)(function*(y){const{BuildInfo:f}=So(),g={};Xr()?g.iosBundleId=f.packageName:Lr()?g.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Lg(y,g)})).apply(this,arguments)}function Gd(){return(Gd=(0,_.Z)(function*(y,f,g){const{cordova:E}=So();let A=()=>{};try{yield new Promise((M,Z)=>{let oe=null;function Le(){var ft;M();const Gn=null===(ft=E.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Gn&&Gn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ke(){oe||(oe=window.setTimeout(()=>{Z(Ie(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}f.addPassiveListener(Le),document.addEventListener("resume",Ke,!1),Lr()&&document.addEventListener("visibilitychange",ht,!1),A=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",ht,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function pc(y){return gu.apply(this,arguments)}function gu(){return(gu=(0,_.Z)(function*(y){const f=gc(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gc(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}!function DE(y){(0,ce._registerComponent)(new de.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:M,authDomain:Z}=E.options;return((oe,Le)=>{$(M&&!M.includes(":"),"invalid-api-key",{appName:oe.name}),$(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:oe.name});const Ke={apiKey:M,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ho(y)},ht=new ze(oe,Le,Ke);return function le(y,f){const g=(null==f?void 0:f.persistence)||[],E=(Array.isArray(g)?g:[g]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(ht,g),ht})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new de.wA("auth-internal",f=>{const g=at(f.getProvider("auth").getImmediate());return new CE(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Wg,"0.20.3",function TE(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(Wg,"0.20.3","esm2017")}("Browser");class SE extends ys{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function qd(y){return zd.apply(this,arguments)}function zd(){return(zd=(0,_.Z)(function*(y){const f=yield _l()._get(In(y));return f&&(yield _l()._remove(In(y))),f})).apply(this,arguments)}function Yg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function _l(){return te(nn)}function In(y){return zn("authEvent",y.config.apiKey,y.name)}function An(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Df(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function _c(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ey(y=(0,F.z$)()){return!("file:"!==_c()&&"ionic:"!==_c()&&"capacitor:"!==_c()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mu(){try{const y=self.localStorage,f=ri();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Sf(y=(0,F.z$)()){return function Jn(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Kd(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return Un()&&(0,F.hl)()}return!1}function Un(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function wy(){return"http:"===_c()||"https:"===_c()}()||(0,F.ru)()||Ey())&&!function yc(){return(0,F.b$)()||(0,F.UG)()}()&&mu()&&!Un()}function Zd(){return Ey()&&"undefined"!=typeof document}function Af(){return(Af=(0,_.Z)(function*(){return!!Zd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Mi={LOCAL:"local",NONE:"none",SESSION:"session"},yl=$,vc="persistence";function wc(y){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,_.Z)(function*(y){yield y._initializationPromise;const f=Rf(),g=zn(vc,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Rf(){var y;try{return(null===(y=function Jg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const fa=$;class Qs{constructor(){this.browserResolver=te(class QT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ln,this._completeRedirectFn=$r,this._overrideRedirectResult=D}_openPopup(f,g,E,A){var M=this;return(0,_.Z)(function*(){var Z;Y(null===(Z=M.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=ha(f,g,E,Fe(),A);return function bE(y,f,g,E=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},wf),{width:E.toString(),height:A.toString(),top:M,left:Z}),Ke=(0,F.z$)().toLowerCase();g&&(oe=Ba(Ke)?"_blank":g),Va(Ke)&&(f=f||"http://localhost",Le.scrollbars="yes");const ht=Object.entries(Le).reduce((Gn,[Ei,bc])=>`${Gn}${Ei}=${bc},`,"");if(function ho(y=(0,F.z$)()){var f;return Xr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ke)&&"_self"!==oe)return function dy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",oe),new jd(null);const ft=window.open(f||"",oe,ht);$(ft,y,"popup-blocked");try{ft.focus()}catch(Gn){}return new jd(ft)}(f,oe,ri())})()}_openRedirect(f,g,E,A){var M=this;return(0,_.Z)(function*(){return yield M._originValidation(f),function En(y){xt().location.href=y}(ha(f,g,E,Fe(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:M}=this.eventManagers[g];return A?Promise.resolve(A):(Y(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,_.Z)(function*(){const E=yield function fc(y){return fl.apply(this,arguments)}(f),A=new ys(f);return E.register("authEvent",M=>($(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(pl,{type:pl},A=>{var M;const Z=null===(M=null==A?void 0:A[0])||void 0===M?void 0:M[pl];void 0!==Z&&g(!!Z),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function iy(y){return Ug.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Fs()||Hu()||Xr()}}),this.cordovaResolver=te(class my{constructor(){this._redirectPersistence=Ln,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$r,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,_.Z)(function*(){const E=f._key();let A=g.eventManagers.get(E);return A||(A=new SE(f),g.eventManagers.set(E,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,A){var M=this;return(0,_.Z)(function*(){!function Kg(y){var f,g,E,A,M,Z,oe,Le,Ke,ht;const ft=So();$("function"==typeof(null===(f=null==ft?void 0:ft.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(g=null==ft?void 0:ft.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(M=null===(A=null===(E=null==ft?void 0:ft.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Le=null===(oe=null===(Z=null==ft?void 0:ft.cordova)||void 0===Z?void 0:Z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(ht=null===(Ke=null==ft?void 0:ft.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield M._initialize(f);yield Z.initialized(),Z.resetRedirect(),function C(){Ys.clear()}(),yield M._originValidation(f);const oe=function Wd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Yg(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(f,E,A);yield function py(y,f){return _l()._set(In(y),f)}(f,oe);const Le=yield function Ao(y,f,g){return gl.apply(this,arguments)}(f,oe,g),Ke=yield function Hd(y){const{cordova:f}=So();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function hd(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Le);return function zg(y,f,g){return Gd.apply(this,arguments)}(f,Z,Ke)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ml(y){return $d.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:A,BuildInfo:M}=So(),Z=setTimeout((0,_.Z)(function*(){yield qd(f),g.onEvent(Df())}),500),oe=function(){var ht=(0,_.Z)(function*(ft){clearTimeout(Z);const Gn=yield qd(f);let Ei=null;Gn&&(null==ft?void 0:ft.url)&&(Ei=function Zg(y,f){var g,E;const A=function Cf(y){const f=An(y),g=f.link?decodeURIComponent(f.link):void 0,E=An(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return An(A).link||A||E||g||y}(f);if(A.includes("/__/auth/callback")){const M=An(A),Z=M.firebaseError?function mc(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,oe=null===(E=null===(g=null==Z?void 0:Z.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Le=oe?Ie(oe):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Gn,ft.url)),g.onEvent(Ei||Df())});return function(Gn){return ht.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const Le=A,Ke=`${M.packageName.toLowerCase()}://`;So().handleOpenURL=function(){var ht=(0,_.Z)(function*(ft){if(ft.toLowerCase().startsWith(Ke)&&oe({url:ft}),"function"==typeof Le)try{Le(ft)}catch(Gn){console.error(Gn)}});return function(ft){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ln,this._completeRedirectFn=$r,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,_.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,A){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,E,A)})()}_openRedirect(f,g,E,A){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,E,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Zd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fa(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Iy(){return Af.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Ic(y){return y.unwrap()}function Yd(y){return Xg(y)}function Xg(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Sn.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Ed;break;case"facebook.com":E=Wo;break;case"github.com":E=ff;break;case"twitter.com":E=bd;break;default:const{oauthIdToken:A,oauthAccessToken:M,oauthTokenSecret:Z,pendingToken:oe,nonce:Le}=f;return M||Z||A||oe?oe?g.startsWith("saml.")?go._create(g,oe):cs._fromParams({providerId:g,signInMethod:g,pendingToken:oe,idToken:A,accessToken:M}):new Ki(g).credential({idToken:A,accessToken:M,rawNonce:Le}):null}return y instanceof F.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function wi(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function Cy(y,f){var g;const E=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new em(y,function or(y,f){var g;const E=(0,F.m9)(y),A=f;return $(f.customData.operationType,E,"argument-error"),$(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),ta._fromError(E,A)}(y,f));else if(E){const A=Xg(f),M=f;A&&(M.credential=A,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Yd(g),additionalUserInfo:Xi(g),user:xo.getOrCreate(A)}})}function kf(y,f){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,_.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>wi(y,g.confirm(E))}})).apply(this,arguments)}class em{constructor(f,g){this.resolver=g,this.auth=function by(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return wi(Ic(this.auth),this.resolver.resolveSignIn(f))}}class xo{constructor(f){this._delegate=f,this.multiFactor=function nl(y){const f=(0,F.m9)(y);return tl.has(f)||tl.set(f,xd._fromUser(f)),tl.get(f)}(f)}static getOrCreate(f){return xo.USER_MAP.has(f)||xo.USER_MAP.set(f,new xo(f)),xo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,_.Z)(function*(){return wi(g.auth,fr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,_.Z)(function*(){return kf(E.auth,function ny(y,f,g){return lc.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,_.Z)(function*(){return wi(g.auth,function hu(y,f,g){return ns.apply(this,arguments)}(g._delegate,f,Qs))})()}linkWithRedirect(f){var g=this;return(0,_.Z)(function*(){return yield wc(at(g.auth)),function Bt(y,f,g){return function dt(y,f,g){return Tr.apply(this,arguments)}(y,f,g)}(g._delegate,f,Qs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,_.Z)(function*(){return wi(g.auth,ds(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return kf(this.auth,function yi(y,f,g){return jr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return wi(this.auth,function Vd(y,f,g){return cc.apply(this,arguments)}(this._delegate,f,Qs))}reauthenticateWithRedirect(f){var g=this;return(0,_.Z)(function*(){return yield wc(at(g.auth)),function Ve(y,f,g){return function vt(y,f,g){return Rt.apply(this,arguments)}(y,f,g)}(g._delegate,f,Qs)})()}sendEmailVerification(f){return function nc(y,f){return Ju.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,_.Z)(function*(){return yield function pf(y,f){return cn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Rg(y,f){return Jo((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function sc(y,f){return Jo((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Co(y,f){return sa.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ic(y,f){return tu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function rc(y,f,g){return Xu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xo.USER_MAP=new WeakMap;const Dr=$;let Qd=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Dr(A,"invalid-api-key",{appName:g.name}),Dr(A,"invalid-api-key",{appName:g.name});const M="undefined"!=typeof window?Qs:void 0;this._delegate=E.initialize({options:{persistence:tm(A,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function ti(y,f,g){const E=at(y);$(E._canInitEmulator,E,"emulator-config-failed"),$(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),M=Hi(f),{host:Z,port:oe}=function Hn(y){const f=Hi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const M=A[1];return{host:M,port:Gi(E.substr(M.length+1))}}{const[M,Z]=E.split(":");return{host:M,port:Gi(Z)}}}(f);E.config.emulator={url:`${M}//${Z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function gn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Ae(y,f){return Nt.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ec(this._delegate,g)}confirmPasswordReset(g,E){return function Jl(y,f,g){return Xl.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var A=this;return(0,_.Z)(function*(){return wi(A._delegate,function mi(y,f,g){return Ya.apply(this,arguments)}(A._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Hs(y,f){return xi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Qa(y,f){const g=zu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,_.Z)(function*(){Dr(Vn(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function si(y,f){return la.apply(this,arguments)}(g._delegate,Qs);return E?wi(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function _y(y,f){at(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,A){const{next:M,error:Z,complete:oe}=Jd(g,E,A);return this._delegate.onAuthStateChanged(M,Z,oe)}onIdTokenChanged(g,E,A){const{next:M,error:Z,complete:oe}=Jd(g,E,A);return this._delegate.onIdTokenChanged(M,Z,oe)}sendSignInLinkToEmail(g,E){return function xg(y,f,g){return Yu.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Ql(y,f,g){return Za.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,_.Z)(function*(){let A;switch(function xf(y,f){yl(Object.values(Mi).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?yl(f!==Mi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?yl(f===Mi.NONE,y,"unsupported-persistence-type"):Un()?yl(f===Mi.NONE||f===Mi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):yl(f===Mi.NONE||mu(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Mi.SESSION:A=Ln;break;case Mi.LOCAL:A=(yield te(na)._isAvailable())?na:nn;break;case Mi.NONE:A=bt;break;default:return Se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return wi(this._delegate,function Cd(y){return Kl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return wi(this._delegate,wn(this._delegate,g))}signInWithCustomToken(g){return wi(this._delegate,function Zo(y,f){return gt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return wi(this._delegate,function tc(y,f,g){return wn((0,F.m9)(y),wd.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return wi(this._delegate,function Qu(y,f,g){return On.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return kf(this._delegate,function ra(y,f,g){return _s.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,_.Z)(function*(){return Dr(Vn(),E._delegate,"operation-not-supported-in-this-environment"),wi(E._delegate,function Ud(y,f,g){return Zs.apply(this,arguments)}(E._delegate,g,Qs))})()}signInWithRedirect(g){var E=this;return(0,_.Z)(function*(){return Dr(Vn(),E._delegate,"operation-not-supported-in-this-environment"),yield wc(E._delegate),function Q(y,f,g){return function re(y,f,g){return ke.apply(this,arguments)}(y,f,g)}(E._delegate,g,Qs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Qo(y,f){return yo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Mi,y})();function Jd(y,f,g){let E=y;"function"!=typeof y&&({next:E,error:f,complete:g}=y);const A=E;return{next:Z=>A(Z&&xo.getOrCreate(Z)),error:f,complete:g}}function tm(y,f){const g=function ws(y,f){const g=Rf();if(!g)return[];const E=zn(vc,y,f);switch(g.getItem(E)){case Mi.NONE:return[bt];case Mi.LOCAL:return[na,Ln];case Mi.SESSION:return[Ln];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(na)&&g.push(na),"undefined"!=typeof window)for(const E of[nn,Ln])g.includes(E)||g.push(E);return g.includes(bt)||g.push(bt),g}class Nf{constructor(){this.providerId="phone",this._delegate=new Sn(Ic(ee.Z.auth()))}static credential(f,g){return Sn.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Nf.PHONE_SIGN_IN_METHOD=Sn.PHONE_SIGN_IN_METHOD,Nf.PROVIDER_ID=Sn.PROVIDER_ID;const nm=$;class rm{constructor(f,g,E=ee.Z.app()){var A;nm(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new lu(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Js(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Qd(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wd,FacebookAuthProvider:Wo,GithubAuthProvider:ff,GoogleAuthProvider:Ed,OAuthProvider:Ki,SAMLAuthProvider:Ur,PhoneAuthProvider:Nf,PhoneMultiFactorGenerator:hy,RecaptchaVerifier:rm,TwitterAuthProvider:bd,Auth:Qd,AuthCredential:Si,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.16")}(ee.Z)},8306:(Je,we,O)=>{O.d(we,{y:()=>G});var _=O(930),ee=O(727),F=O(8822),ce=O(4671);var de=O(2416),ue=O(576),fe=O(2806);let G=(()=>{class Re{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const pe=new Re;return pe.source=this,pe.operator=Be,pe}subscribe(Be,pe,Te){const qe=function We(Re){return Re&&Re instanceof _.Lv||function ne(Re){return Re&&(0,ue.m)(Re.next)&&(0,ue.m)(Re.error)&&(0,ue.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(Be)?Be:new _.Hp(Be,pe,Te);return(0,fe.x)(()=>{const{operator:Ye,source:Se}=this;qe.add(Ye?Ye.call(qe,Se):Se?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(pe){Be.error(pe)}}forEach(Be,pe){return new(pe=H(pe))((Te,qe)=>{const Ye=new _.Hp({next:Se=>{try{Be(Se)}catch(Ie){qe(Ie),Ye.unsubscribe()}},error:qe,complete:Te});this.subscribe(Ye)})}_subscribe(Be){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Be)}[F.L](){return this}pipe(...Be){return function ge(Re){return 0===Re.length?ce.y:1===Re.length?Re[0]:function(Be){return Re.reduce((pe,Te)=>Te(pe),Be)}}(Be)(this)}toPromise(Be){return new(Be=H(Be))((pe,Te)=>{let qe;this.subscribe(Ye=>qe=Ye,Ye=>Te(Ye),()=>pe(qe))})}}return Re.create=Pe=>new Re(Pe),Re})();function H(Re){var Pe;return null!==(Pe=null!=Re?Re:de.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(Je,we,O)=>{O.d(we,{x:()=>de});var _=O(8306),ee=O(727);const ce=(0,O(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(8737),ge=O(2806);let de=(()=>{class fe extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ne=new ue(this,this);return ne.operator=H,ne}_throwIfClosed(){if(this.closed)throw new ce}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ne}=this;for(;ne.length;)ne.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ne,isStopped:We,observers:Re}=this;return ne||We?ee.Lc:(this.currentObservers=null,Re.push(H),new ee.w0(()=>{this.currentObservers=null,(0,ie.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:ne,thrownError:We,isStopped:Re}=this;ne?H.error(We):Re&&H.complete()}asObservable(){const H=new _.y;return H.source=this,H}}return fe.create=(G,H)=>new ue(G,H),fe})();class ue extends de{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ne||ne.call(H,G)}error(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ne||ne.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,ne;return null!==(ne=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==ne?ne:ee.Lc}}},930:(Je,we,O)=>{O.d(we,{Hp:()=>Be,Lv:()=>ne});var _=O(576),ee=O(727),F=O(2416),ce=O(7849),ie=O(5032);const ge=fe("C",void 0,void 0);function fe(Se,Ie,be){return{kind:Se,value:Ie,error:be}}var G=O(3410),H=O(2806);class ne extends ee.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ee.Nn)(Ie)&&Ie.add(this)):this.destination=Ye}static create(Ie,be,je){return new Be(Ie,be,je)}next(Ie){this.isStopped?qe(function ue(Se){return fe("N",Se,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?qe(function de(Se){return fe("E",void 0,Se)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?qe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Re(Se,Ie){return We.call(Se,Ie)}class Pe{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:be}=this;if(be.next)try{be.next(Ie)}catch(je){pe(je)}}error(Ie){const{partialObserver:be}=this;if(be.error)try{be.error(Ie)}catch(je){pe(je)}else pe(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(be){pe(be)}}}class Be extends ne{constructor(Ie,be,je){let $e;if(super(),(0,_.m)(Ie)||!Ie)$e={next:null!=Ie?Ie:void 0,error:null!=be?be:void 0,complete:null!=je?je:void 0};else{let $;this&&F.v.useDeprecatedNextContext?($=Object.create(Ie),$.unsubscribe=()=>this.unsubscribe(),$e={next:Ie.next&&Re(Ie.next,$),error:Ie.error&&Re(Ie.error,$),complete:Ie.complete&&Re(Ie.complete,$)}):$e=Ie}this.destination=new Pe($e)}}function pe(Se){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Se):(0,ce.h)(Se)}function qe(Se,Ie){const{onStoppedNotification:be}=F.v;be&&G.z.setTimeout(()=>be(Se,Ie))}const Ye={closed:!0,next:ie.Z,error:function Te(Se){throw Se},complete:ie.Z}},727:(Je,we,O)=>{O.d(we,{Lc:()=>ge,w0:()=>ie,Nn:()=>de});var _=O(576);const F=(0,O(3888).d)(fe=>function(H){fe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ne,We)=>`${We+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ce=O(8737);class ie{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:ne}=this;if((0,_.m)(ne))try{ne()}catch(Re){G=Re instanceof F?Re.errors:[Re]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Re of We)try{ue(Re)}catch(Pe){G=null!=G?G:[],Pe instanceof F?G=[...G,...Pe.errors]:G.push(Pe)}}if(G)throw new F(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ue(G);else{if(G instanceof ie){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ce.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,ce.P)(H,G),G instanceof ie&&G._removeParent(this)}}ie.EMPTY=(()=>{const fe=new ie;return fe.closed=!0,fe})();const ge=ie.EMPTY;function de(fe){return fe instanceof ie||fe&&"closed"in fe&&(0,_.m)(fe.remove)&&(0,_.m)(fe.add)&&(0,_.m)(fe.unsubscribe)}function ue(fe){(0,_.m)(fe)?fe():fe.unsubscribe()}},2416:(Je,we,O)=>{O.d(we,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,O)=>{O.d(we,{E:()=>ee});const ee=new(O(8306).y)(ie=>ie.complete())},8996:(Je,we,O)=>{O.d(we,{D:()=>Ie});var _=O(8421),ee=O(5363),F=O(9468),ge=O(8306),ue=O(2202),fe=O(576),G=O(9672);function ne(be,je){if(!be)throw new Error("Iterable cannot be null");return new ge.y($e=>{(0,G.f)($e,je,()=>{const $=be[Symbol.asyncIterator]();(0,G.f)($e,je,()=>{$.next().then(Ee=>{Ee.done?$e.complete():$e.next(Ee.value)})},0,!0)})})}var We=O(3670),Re=O(8239),Pe=O(1144),Be=O(6495),pe=O(2206),Te=O(4532),qe=O(3260);function Ie(be,je){return je?function Se(be,je){if(null!=be){if((0,We.c)(be))return function ce(be,je){return(0,_.Xf)(be).pipe((0,F.R)(je),(0,ee.Q)(je))}(be,je);if((0,Pe.z)(be))return function de(be,je){return new ge.y($e=>{let $=0;return je.schedule(function(){$===be.length?$e.complete():($e.next(be[$++]),$e.closed||this.schedule())})})}(be,je);if((0,Re.t)(be))return function ie(be,je){return(0,_.Xf)(be).pipe((0,F.R)(je),(0,ee.Q)(je))}(be,je);if((0,pe.D)(be))return ne(be,je);if((0,Be.T)(be))return function H(be,je){return new ge.y($e=>{let $;return(0,G.f)($e,je,()=>{$=be[ue.h](),(0,G.f)($e,je,()=>{let Ee,Y;try{({value:Ee,done:Y}=$.next())}catch(se){return void $e.error(se)}Y?$e.complete():$e.next(Ee)},0,!0)}),()=>(0,fe.m)(null==$?void 0:$.return)&&$.return()})}(be,je);if((0,qe.L)(be))return function Ye(be,je){return ne((0,qe.Q)(be),je)}(be,je)}throw(0,Te.z)(be)}(be,je):(0,_.Xf)(be)}},8421:(Je,we,O)=>{O.d(we,{Xf:()=>We});var _=O(655),ee=O(1144),F=O(8239),ce=O(8306),ie=O(3670),ge=O(2206),de=O(4532),ue=O(6495),fe=O(3260),G=O(576),H=O(7849),ne=O(8822);function We(Se){if(Se instanceof ce.y)return Se;if(null!=Se){if((0,ie.c)(Se))return function Re(Se){return new ce.y(Ie=>{const be=Se[ne.L]();if((0,G.m)(be.subscribe))return be.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,ee.z)(Se))return function Pe(Se){return new ce.y(Ie=>{for(let be=0;be<Se.length&&!Ie.closed;be++)Ie.next(Se[be]);Ie.complete()})}(Se);if((0,F.t)(Se))return function Be(Se){return new ce.y(Ie=>{Se.then(be=>{Ie.closed||(Ie.next(be),Ie.complete())},be=>Ie.error(be)).then(null,H.h)})}(Se);if((0,ge.D)(Se))return Te(Se);if((0,ue.T)(Se))return function pe(Se){return new ce.y(Ie=>{for(const be of Se)if(Ie.next(be),Ie.closed)return;Ie.complete()})}(Se);if((0,fe.L)(Se))return function qe(Se){return Te((0,fe.Q)(Se))}(Se)}throw(0,de.z)(Se)}function Te(Se){return new ce.y(Ie=>{(function Ye(Se,Ie){var be,je,$e,$;return(0,_.mG)(this,void 0,void 0,function*(){try{for(be=(0,_.KL)(Se);!(je=yield be.next()).done;)if(Ie.next(je.value),Ie.closed)return}catch(Ee){$e={error:Ee}}finally{try{je&&!je.done&&($=be.return)&&(yield $.call(be))}finally{if($e)throw $e.error}}Ie.complete()})})(Se,Ie).catch(be=>Ie.error(be))})}},6451:(Je,we,O)=>{O.d(we,{T:()=>ge});var _=O(8189),ee=O(8421),F=O(515),ce=O(7669),ie=O(8996);function ge(...de){const ue=(0,ce.yG)(de),fe=(0,ce._6)(de,1/0),G=de;return G.length?1===G.length?(0,ee.Xf)(G[0]):(0,_.J)(fe)((0,ie.D)(G,ue)):F.E}},5403:(Je,we,O)=>{O.d(we,{x:()=>ee});var _=O(930);function ee(ce,ie,ge,de,ue){return new F(ce,ie,ge,de,ue)}class F extends _.Lv{constructor(ie,ge,de,ue,fe,G){super(ie),this.onFinalize=fe,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(ne){ie.error(ne)}}:super._next,this._error=ue?function(H){try{ue(H)}catch(ne){ie.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(H){ie.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Je,we,O)=>{O.d(we,{U:()=>F});var _=O(4482),ee=O(5403);function F(ce,ie){return(0,_.e)((ge,de)=>{let ue=0;ge.subscribe((0,ee.x)(de,fe=>{de.next(ce.call(ie,fe,ue++))}))})}},8189:(Je,we,O)=>{O.d(we,{J:()=>F});var _=O(5577),ee=O(4671);function F(ce=1/0){return(0,_.z)(ee.y,ce)}},5577:(Je,we,O)=>{O.d(we,{z:()=>ue});var _=O(4004),ee=O(8421),F=O(4482),ce=O(9672),ie=O(5403),de=O(576);function ue(fe,G,H=1/0){return(0,de.m)(G)?ue((ne,We)=>(0,_.U)((Re,Pe)=>G(ne,Re,We,Pe))((0,ee.Xf)(fe(ne,We))),H):("number"==typeof G&&(H=G),(0,F.e)((ne,We)=>function ge(fe,G,H,ne,We,Re,Pe,Be){const pe=[];let Te=0,qe=0,Ye=!1;const Se=()=>{Ye&&!pe.length&&!Te&&G.complete()},Ie=je=>Te<ne?be(je):pe.push(je),be=je=>{Re&&G.next(je),Te++;let $e=!1;(0,ee.Xf)(H(je,qe++)).subscribe((0,ie.x)(G,$=>{null==We||We($),Re?Ie($):G.next($)},()=>{$e=!0},void 0,()=>{if($e)try{for(Te--;pe.length&&Te<ne;){const $=pe.shift();Pe?(0,ce.f)(G,Pe,()=>be($)):be($)}Se()}catch($){G.error($)}}))};return fe.subscribe((0,ie.x)(G,Ie,()=>{Ye=!0,Se()})),()=>{null==Be||Be()}}(ne,We,fe,H)))}},5363:(Je,we,O)=>{O.d(we,{Q:()=>ce});var _=O(9672),ee=O(4482),F=O(5403);function ce(ie,ge=0){return(0,ee.e)((de,ue)=>{de.subscribe((0,F.x)(ue,fe=>(0,_.f)(ue,ie,()=>ue.next(fe),ge),()=>(0,_.f)(ue,ie,()=>ue.complete(),ge),fe=>(0,_.f)(ue,ie,()=>ue.error(fe),ge)))})}},3099:(Je,we,O)=>{O.d(we,{B:()=>ge});var _=O(8996),ee=O(5698),F=O(7579),ce=O(930),ie=O(4482);function ge(ue={}){const{connector:fe=(()=>new F.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:ne=!0}=ue;return We=>{let Re=null,Pe=null,Be=null,pe=0,Te=!1,qe=!1;const Ye=()=>{null==Pe||Pe.unsubscribe(),Pe=null},Se=()=>{Ye(),Re=Be=null,Te=qe=!1},Ie=()=>{const be=Re;Se(),null==be||be.unsubscribe()};return(0,ie.e)((be,je)=>{pe++,!qe&&!Te&&Ye();const $e=Be=null!=Be?Be:fe();je.add(()=>{pe--,0===pe&&!qe&&!Te&&(Pe=de(Ie,ne))}),$e.subscribe(je),Re||(Re=new ce.Hp({next:$=>$e.next($),error:$=>{qe=!0,Ye(),Pe=de(Se,G,$),$e.error($)},complete:()=>{Te=!0,Ye(),Pe=de(Se,H),$e.complete()}}),(0,_.D)(be).subscribe(Re))})(We)}}function de(ue,fe,...G){return!0===fe?(ue(),null):!1===fe?null:fe(...G).pipe((0,ee.q)(1)).subscribe(()=>ue())}},9468:(Je,we,O)=>{O.d(we,{R:()=>ee});var _=O(4482);function ee(F,ce=0){return(0,_.e)((ie,ge)=>{ge.add(F.schedule(()=>ie.subscribe(ge),ce))})}},5698:(Je,we,O)=>{O.d(we,{q:()=>ce});var _=O(515),ee=O(4482),F=O(5403);function ce(ie){return ie<=0?()=>_.E:(0,ee.e)((ge,de)=>{let ue=0;ge.subscribe((0,F.x)(de,fe=>{++ue<=ie&&(de.next(fe),ie<=ue&&de.complete())}))})}},8505:(Je,we,O)=>{O.d(we,{b:()=>ie});var _=O(576),ee=O(4482),F=O(5403),ce=O(4671);function ie(ge,de,ue){const fe=(0,_.m)(ge)||de||ue?{next:ge,error:de,complete:ue}:ge;return fe?(0,ee.e)((G,H)=>{var ne;null===(ne=fe.subscribe)||void 0===ne||ne.call(fe);let We=!0;G.subscribe((0,F.x)(H,Re=>{var Pe;null===(Pe=fe.next)||void 0===Pe||Pe.call(fe,Re),H.next(Re)},()=>{var Re;We=!1,null===(Re=fe.complete)||void 0===Re||Re.call(fe),H.complete()},Re=>{var Pe;We=!1,null===(Pe=fe.error)||void 0===Pe||Pe.call(fe,Re),H.error(Re)},()=>{var Re,Pe;We&&(null===(Re=fe.unsubscribe)||void 0===Re||Re.call(fe)),null===(Pe=fe.finalize)||void 0===Pe||Pe.call(fe)}))}):ce.y}},4408:(Je,we,O)=>{O.d(we,{o:()=>ie});var _=O(727);class ee extends _.w0{constructor(de,ue){super()}schedule(de,ue=0){return this}}const F={setInterval(ge,de,...ue){const{delegate:fe}=F;return(null==fe?void 0:fe.setInterval)?fe.setInterval(ge,de,...ue):setInterval(ge,de,...ue)},clearInterval(ge){const{delegate:de}=F;return((null==de?void 0:de.clearInterval)||clearInterval)(ge)},delegate:void 0};var ce=O(8737);class ie extends ee{constructor(de,ue){super(de,ue),this.scheduler=de,this.work=ue,this.pending=!1}schedule(de,ue=0){if(this.closed)return this;this.state=de;const fe=this.id,G=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(G,fe,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(G,this.id,ue),this}requestAsyncId(de,ue,fe=0){return F.setInterval(de.flush.bind(de,this),fe)}recycleAsyncId(de,ue,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ue;F.clearInterval(ue)}execute(de,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(de,ue);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ue){let G,fe=!1;try{this.work(de)}catch(H){fe=!0,G=H||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:de,scheduler:ue}=this,{actions:fe}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(fe,this),null!=de&&(this.id=this.recycleAsyncId(ue,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,O)=>{O.d(we,{v:()=>F});var _=O(6063);class ee{constructor(ie,ge=ee.now){this.schedulerActionCtor=ie,this.now=ge}schedule(ie,ge=0,de){return new this.schedulerActionCtor(this,ie).schedule(de,ge)}}ee.now=_.l.now;class F extends ee{constructor(ie,ge=ee.now){super(ie,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:ge}=this;if(this._active)return void ge.push(ie);let de;this._active=!0;do{if(de=ie.execute(ie.state,ie.delay))break}while(ie=ge.shift());if(this._active=!1,de){for(;ie=ge.shift();)ie.unsubscribe();throw de}}}},4986:(Je,we,O)=>{O.d(we,{z:()=>F});var _=O(4408);const F=new(O(7565).v)(_.o)},6063:(Je,we,O)=>{O.d(we,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(Je,we,O)=>{O.d(we,{z:()=>_});const _={setTimeout(ee,F,...ce){const{delegate:ie}=_;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(ee,F,...ce):setTimeout(ee,F,...ce)},clearTimeout(ee){const{delegate:F}=_;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Je,we,O)=>{O.d(we,{h:()=>ee});const ee=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,O)=>{O.d(we,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,O)=>{O.d(we,{_6:()=>ge,jO:()=>ce,yG:()=>ie});var _=O(576);function F(de){return de[de.length-1]}function ce(de){return(0,_.m)(F(de))?de.pop():void 0}function ie(de){return function ee(de){return de&&(0,_.m)(de.schedule)}(F(de))?de.pop():void 0}function ge(de,ue){return"number"==typeof F(de)?de.pop():ue}},8737:(Je,we,O)=>{function _(ee,F){if(ee){const ce=ee.indexOf(F);0<=ce&&ee.splice(ce,1)}}O.d(we,{P:()=>_})},3888:(Je,we,O)=>{function _(ee){const ce=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}O.d(we,{d:()=>_})},2806:(Je,we,O)=>{O.d(we,{x:()=>F,O:()=>ce});var _=O(2416);let ee=null;function F(ie){if(_.v.useDeprecatedSynchronousErrorHandling){const ge=!ee;if(ge&&(ee={errorThrown:!1,error:null}),ie(),ge){const{errorThrown:de,error:ue}=ee;if(ee=null,de)throw ue}}else ie()}function ce(ie){_.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},9672:(Je,we,O)=>{function _(ee,F,ce,ie=0,ge=!1){const de=F.schedule(function(){ce(),ge?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(de),!ge)return de}O.d(we,{f:()=>_})},4671:(Je,we,O)=>{function _(ee){return ee}O.d(we,{y:()=>_})},1144:(Je,we,O)=>{O.d(we,{z:()=>_});const _=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Je,we,O)=>{O.d(we,{D:()=>ee});var _=O(576);function ee(F){return Symbol.asyncIterator&&(0,_.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(Je,we,O)=>{function _(ee){return"function"==typeof ee}O.d(we,{m:()=>_})},3670:(Je,we,O)=>{O.d(we,{c:()=>F});var _=O(8822),ee=O(576);function F(ce){return(0,ee.m)(ce[_.L])}},6495:(Je,we,O)=>{O.d(we,{T:()=>F});var _=O(2202),ee=O(576);function F(ce){return(0,ee.m)(null==ce?void 0:ce[_.h])}},8239:(Je,we,O)=>{O.d(we,{t:()=>ee});var _=O(576);function ee(F){return(0,_.m)(null==F?void 0:F.then)}},3260:(Je,we,O)=>{O.d(we,{Q:()=>F,L:()=>ce});var _=O(655),ee=O(576);function F(ie){return(0,_.FC)(this,arguments,function*(){const de=ie.getReader();try{for(;;){const{value:ue,done:fe}=yield(0,_.qq)(de.read());if(fe)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(ue)}}finally{de.releaseLock()}})}function ce(ie){return(0,ee.m)(null==ie?void 0:ie.getReader)}},4482:(Je,we,O)=>{O.d(we,{A:()=>ee,e:()=>F});var _=O(576);function ee(ce){return(0,_.m)(null==ce?void 0:ce.lift)}function F(ce){return ie=>{if(ee(ie))return ie.lift(function(ge){try{return ce(ge,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Je,we,O)=>{function _(){}O.d(we,{Z:()=>_})},7849:(Je,we,O)=>{O.d(we,{h:()=>F});var _=O(2416),ee=O(3410);function F(ce){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=_.v;if(!ie)throw ce;ie(ce)})}},4532:(Je,we,O)=>{function _(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(we,{z:()=>_})},655:(Je,we,O)=>{function ce(Y,se){var te={};for(var ye in Y)Object.prototype.hasOwnProperty.call(Y,ye)&&se.indexOf(ye)<0&&(te[ye]=Y[ye]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(ye=Object.getOwnPropertySymbols(Y);le<ye.length;le++)se.indexOf(ye[le])<0&&Object.prototype.propertyIsEnumerable.call(Y,ye[le])&&(te[ye[le]]=Y[ye[le]])}return te}function ue(Y,se,te,ye){return new(te||(te=Promise))(function(Fe,lt){function jt(sn){try{Qe(ye.next(sn))}catch(kn){lt(kn)}}function Ft(sn){try{Qe(ye.throw(sn))}catch(kn){lt(kn)}}function Qe(sn){sn.done?Fe(sn.value):function le(Fe){return Fe instanceof te?Fe:new te(function(lt){lt(Fe)})}(sn.value).then(jt,Ft)}Qe((ye=ye.apply(Y,se||[])).next())})}function pe(Y){return this instanceof pe?(this.v=Y,this):new pe(Y)}function Te(Y,se,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ye=te.apply(Y,se||[]),Fe=[];return le={},lt("next"),lt("throw"),lt("return"),le[Symbol.asyncIterator]=function(){return this},le;function lt(an){ye[an]&&(le[an]=function(Jt){return new Promise(function(Pr,qt){Fe.push([an,Jt,Pr,qt])>1||jt(an,Jt)})})}function jt(an,Jt){try{!function Ft(an){an.value instanceof pe?Promise.resolve(an.value.v).then(Qe,sn):kn(Fe[0][2],an)}(ye[an](Jt))}catch(Pr){kn(Fe[0][3],Pr)}}function Qe(an){jt("next",an)}function sn(an){jt("throw",an)}function kn(an,Jt){an(Jt),Fe.shift(),Fe.length&&jt(Fe[0][0],Fe[0][1])}}function Ye(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,se=Y[Symbol.asyncIterator];return se?se.call(Y):(Y=function ne(Y){var se="function"==typeof Symbol&&Symbol.iterator,te=se&&Y[se],ye=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ye>=Y.length&&(Y=void 0),{value:Y&&Y[ye++],done:!Y}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},ye("next"),ye("throw"),ye("return"),te[Symbol.asyncIterator]=function(){return this},te);function ye(Fe){te[Fe]=Y[Fe]&&function(lt){return new Promise(function(jt,Ft){!function le(Fe,lt,jt,Ft){Promise.resolve(Ft).then(function(Qe){Fe({value:Qe,done:jt})},lt)}(jt,Ft,(lt=Y[Fe](lt)).done,lt.value)})}}}O.d(we,{_T:()=>ce,mG:()=>ue,qq:()=>pe,FC:()=>Te,KL:()=>Ye})},5e3:(Je,we,O)=>{O.d(we,{deG:()=>me,tb:()=>g_,AFp:()=>qw,ip1:()=>p_,CZH:()=>Ww,hGG:()=>I0,z2F:()=>I_,sBO:()=>c0,Sil:()=>wC,_Vd:()=>Xm,EJc:()=>jS,SBq:()=>Np,qLn:()=>Yd,vpe:()=>oo,tBr:()=>$r,XFs:()=>_t,OlP:()=>Dn,zs3:()=>Po,ZZ4:()=>v0,aQg:()=>R_,soG:()=>m_,YKP:()=>Kc,h0i:()=>Uh,PXZ:()=>r0,R0b:()=>xs,FiY:()=>Hr,Lbi:()=>id,g9A:()=>rd,Qsj:()=>Pp,FYo:()=>Cw,JOm:()=>A,tp0:()=>ki,Rgc:()=>Vh,dDg:()=>Wp,q4F:()=>Dw,GfV:()=>Fh,s_b:()=>Ra,ifc:()=>$t,eFA:()=>y_,G48:()=>T_,X6Q:()=>l0,_c5:()=>E0,VLi:()=>TC,c2e:()=>Zw,zSh:()=>vv,wAp:()=>wt,vHH:()=>Pe,cg1:()=>Ah,kL8:()=>lw,dqk:()=>Ut,sIi:()=>sp,CqO:()=>LI,QGY:()=>Dl,F4k:()=>FI,RDi:()=>Zl,AaK:()=>ue,TTD:()=>Ki,xp6:()=>Uy,uIk:()=>Ov,Suo:()=>Xb,Xpm:()=>ct,lG2:()=>Hu,Yz7:()=>Jt,cJS:()=>qt,oAB:()=>Fr,Yjl:()=>Ba,Y36:()=>Lc,_UZ:()=>Lm,qZA:()=>cp,TgZ:()=>Ia,LFG:()=>Ve,$8M:()=>ou,$Z:()=>Xv,NdJ:()=>dp,CRH:()=>eC,Q6J:()=>mh,s9C:()=>ba,DdM:()=>Aw,iGM:()=>Nl,LSH:()=>Tf,YNc:()=>Bv,_uU:()=>JI,Oqu:()=>Cu});var _=O(7579),ee=O(727),F=O(8306),ce=O(6451),ie=O(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return ue(this())},s}function ne(s){return function We(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}(s)?s():s}class Pe extends Error{constructor(o,u){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function Ie(s,o){const u=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${Te(s)} found${u}`)}function Ft(s,o){null==s&&function Qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Jt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Lt(s){return ji(s,$i)||ji(s,Qr)}function ji(s,o){return s.hasOwnProperty(o)?s[o]:null}function Or(s){return s&&(s.hasOwnProperty(Ps)||s.hasOwnProperty(Di))?s[Ps]:null}const $i=ge({\u0275prov:ge}),Ps=ge({\u0275inj:ge}),Qr=ge({ngInjectableDef:ge}),Di=ge({ngInjectorDef:ge});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let hi;function Mn(s){const o=hi;return hi=s,o}function Os(s,o,u){const c=Lt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&_t.Optional?null:void 0!==o?o:void Ie(ue(s),"Injector")}function rr(s){return{toString:s}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),$t=(()=>{return(s=$t||($t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",$t;var s})();const rt="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,yr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=rt||"undefined"!=typeof global&&global||Et||yr,wr={},B=[],z=ge({\u0275cmp:ge}),K=ge({\u0275dir:ge}),Ce=ge({\u0275pipe:ge}),W=ge({\u0275mod:ge}),X=ge({\u0275fac:ge}),Me=ge({__NG_ELEMENT_ID__:ge});let Xe=0;function ct(s){return rr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$t.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return c.id+=Xe++,c.inputs=Va(s.inputs,u),c.outputs=Va(s.outputs),p&&p.forEach(I=>I(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(pn):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(bt):null,c})}function pn(s){return Kn(s)||function Lr(s){return s[K]||null}(s)}function bt(s){return function ls(s){return s[Ce]||null}(s)}const zn={};function Fr(s){return rr(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(zn[s.id]=s.type),o})}function Va(s,o){if(null==s)return wr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const Hu=ct;function Ba(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Kn(s){return s[z]||null}function Zn(s,o){const u=s[W]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function ni(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wi(s){return Array.isArray(s)&&!0===s[1]}function qu(s){return 0!=(8&s.flags)}function fd(s){return 2==(2&s.flags)}function qi(s){return 1==(1&s.flags)}function zi(s){return null!==s.template}function Wl(s){return 0!=(512&s[2])}function br(s,o){return s.hasOwnProperty(X)?s[X]:null}class po{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ki(){return Wo}function Wo(s){return s.type.prototype.ngOnChanges&&(s.setInput=ff),Ed}function Ed(){const s=go(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===wr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function ff(s,o,u,c){const d=go(s)||function qo(s,o){return s[Id]=o}(s,{previous:wr,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[u],b=v[I];p[I]=new po(b&&b.currentValue,o,v===wr),s[c]=o}Ki.ngInherit=!0;const Id="__ngSimpleChanges__";function go(s){return s[Id]||null}let Ko;function Zl(s){Ko=s}function cn(s){return!!s.listen}const Wa={createRenderer:(s,o)=>function Zi(){return void 0!==Ko?Ko:"undefined"!=typeof document?document:void 0}()};function tn(s){for(;Array.isArray(s);)s=s[0];return s}function hr(s,o){return tn(o[s.index])}function wn(s,o){return s.data[o]}function fr(s,o){const u=o[s];return ni(u)?u:u[0]}function _o(s){return 4==(4&s[2])}function ds(s){return 128==(128&s[2])}function Ai(s,o){return null==o?null:s[o]}function Qi(s){s[18]=0}function Zo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const gt={lFrame:Td(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Za(){return gt.bindingsEnabled}function Ae(){return gt.lFrame.lView}function Nt(){return gt.lFrame.tView}function yn(){let s=Qo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Qo(){return gt.lFrame.currentTNode}function mi(s,o){const u=gt.lFrame;u.currentTNode=s,u.isParent=o}function Ya(){return gt.lFrame.isParent}function Qa(){return gt.isInCheckNoChangesMode}function Qu(s){gt.isInCheckNoChangesMode=s}function Hs(){return gt.lFrame.bindingIndex++}function rc(s,o){const u=gt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Xa(o)}function Xa(s){gt.lFrame.currentDirectiveIndex=s}function ic(){return gt.lFrame.currentQueryIndex}function tu(s){gt.lFrame.currentQueryIndex=s}function Rg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function sc(s,o,u){if(u&_t.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&_t.Host||(d=Rg(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=gt.lFrame=nu();return c.currentTNode=o,c.lView=s,!0}function Jo(s){const o=nu(),u=s[1];gt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function nu(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?Td(s):o}function Td(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Xo(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Dd=Xo;function ea(){const s=Xo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function sr(){return gt.lFrame.selectedIndex}function Xi(s){gt.lFrame.selectedIndex=s}function Tn(){const s=gt.lFrame;return wn(s.tView,s.selectedIndex)}function Ad(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:R}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function ru(s,o,u){or(s,o,3,u)}function fs(s,o,u,c){(3&s[2])===u&&or(s,o,u,c)}function ta(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function or(s,o,u,c){const p=null!=c?c:-1,v=o.length-1;let I=0;for(let b=void 0!==c?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=c&&I>=c)break}else o[b]<0&&(s[18]+=65536),(I<p||-1==p)&&(_f(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function _f(s,o,u,c){const d=u[c]<0,p=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class el{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Fn(s,o,u){const c=cn(s);let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const v=u[d++],I=u[d++],b=u[d++];c?s.setAttribute(o,I,b,v):o.setAttributeNS(v,I,b)}else{const v=p,I=u[++d];mt(v)?c&&s.setProperty(o,v,I):c?s.setAttribute(o,v,I):o.setAttribute(v,I),d++}}return d}function nn(s){return 3===s||4===s||6===s}function mt(s){return 64===s.charCodeAt(0)}function Ln(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||iu(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function iu(s,o,u,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function su(s){return-1!==s}function ri(s){return 32767&s}function xt(s,o){let u=function Qn(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let En=!0;function yt(s){const o=En;return En=s,o}let Md=0;function es(s,o){const u=Gs(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Br(c.data,s),Br(o,null),Br(c.blueprint,null));const d=ps(s,o),p=s.injectorIndex;if(su(d)){const v=ri(d),I=xt(d,o),b=I[1].data;for(let x=0;x<8;x++)o[p+x]=I[v+x]|b[v+x]}return o[p+8]=d,p}function Br(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Gs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ps(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(c=2===v?p.declTNode:1===v?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function pr(s,o,u){!function Nd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Me)&&(c=u[Me]),null==c&&(c=u[Me]=Md++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function ts(s,o,u){if(u&_t.Optional)return s;Ie(o,"NodeInjector")}function _i(s,o,u,c){if(u&_t.Optional&&void 0===c&&(c=null),0==(u&(_t.Self|_t.Host))){const d=s[9],p=Mn(void 0);try{return d?d.get(o,c,u&_t.Optional):Os(o,c,u&_t.Optional)}finally{Mn(p)}}return ts(c,o,u)}function Io(s,o,u,c=_t.Default,d){if(null!==s){const p=function Ng(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Me)?s[Me]:void 0;return"number"==typeof o?o>=0?255&o:gs:o}(u);if("function"==typeof p){if(!sc(o,s,c))return c&_t.Host?ts(d,u,c):_i(o,u,c,d);try{const v=p(c);if(null!=v||c&_t.Optional)return v;Ie(u)}finally{Dd()}}else if("number"==typeof p){let v=null,I=Gs(s,o),b=-1,x=c&_t.Host?o[16][6]:null;for((-1===I||c&_t.SkipSelf)&&(b=-1===I?ps(s,o):o[I+8],-1!==b&&ol(c,!1)?(v=o[1],I=ri(b),o=xt(b,o)):I=-1);-1!==I;){const R=o[1];if(na(p,I,R.data)){const L=Vt(I,o,u,v,c,x);if(L!==il)return L}b=o[I+8],-1!==b&&ol(c,o[1].data[I+8]===x)&&na(p,I,o)?(v=R,I=ri(b),o=xt(b,o)):I=-1}}}return _i(o,u,c,d)}const il={};function gs(){return new qs(yn(),Ae())}function Vt(s,o,u,c,d,p){const v=o[1],I=v.data[s+8],R=sl(I,v,u,null==c?fd(I)&&En:c!=v&&0!=(3&I.type),d&_t.Host&&p===I);return null!==R?Ws(o,v,R,I):il}function sl(s,o,u,c,d){const p=s.providerIndexes,v=o.data,I=1048575&p,b=s.directiveStart,R=p>>20,j=d?I+R:s.directiveEnd;for(let J=c?I:I+R;J<j;J++){const ve=v[J];if(J<b&&u===ve||J>=b&&ve.type===u)return J}if(d){const J=v[b];if(J&&zi(J)&&J.type===u)return b}return null}function Ws(s,o,u,c){let d=s[u];const p=o.data;if(function xd(s){return s instanceof el}(d)){const v=d;v.resolving&&function qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(Te(p[u]));const I=yt(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?Mn(v.injectImpl):null;sc(s,c,_t.Default);try{d=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function kg(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=Wo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&Mn(b),yt(I),v.resolving=!1,Dd()}}return d}function na(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ol(s,o){return!(s&_t.Self||s&_t.Host&&o)}class qs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Io(this._tNode,this._lView,o,c,u)}}function ou(s){return function Pd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(nn(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(yn(),s)}const zs="__parameters__";function uu(s,o,u){return rr(()=>{const c=function ul(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(b,x,R){const L=b.hasOwnProperty(zs)?b[zs]:Object.defineProperty(b,zs,{value:[]})[zs];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Dn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Jt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const me=new Dn("AnalyzeForEntryComponents");function yi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),yi(c,o)):o!==s&&o.push(c)}return o}function jr(s,o){s.forEach(u=>Array.isArray(u)?jr(u,o):o(u))}function cu(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ia(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const ua={},fu="__NG_DI_FLAG__",Do="ngTempTokenPath",C=/\n/gm,k="__source",V=ge({provide:String,useValue:ge});let Q;function re(s){const o=Q;return Q=s,o}function ke(s,o=_t.Default){if(void 0===Q)throw new Pe(203,"");return null===Q?Os(s,void 0,o):Q.get(s,o&_t.Optional?null:void 0,o)}function Ve(s,o=_t.Default){return(function Cn(){return hi}()||ke)(ne(s),o)}const Rt=Ve;function Bt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Pe(900,"");let d,p=_t.Default;for(let v=0;v<c.length;v++){const I=c[v],b=Tr(I);"number"==typeof b?-1===b?d=I.token:p|=b:d=I}o.push(Ve(d,p))}else o.push(Ve(c))}return o}function dt(s,o){return s[fu]=o,s.prototype[fu]=o,s}function Tr(s){return s[fu]}const $r=dt(uu("Inject",s=>({token:s})),-1),Hr=dt(uu("Optional"),8),ki=dt(uu("SkipSelf"),4);class cy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const TE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,XT=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var An=(()=>((An=An||{})[An.NONE=0]="NONE",An[An.HTML=1]="HTML",An[An.STYLE=2]="STYLE",An[An.SCRIPT=3]="SCRIPT",An[An.URL=4]="URL",An[An.RESOURCE_URL=5]="RESOURCE_URL",An))();function Tf(s){const o=function yc(){const s=Ae();return s&&s[12]}();return o?o.sanitize(An.URL,s)||"":function ha(s,o){const u=function Ef(s){return s instanceof cy&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function da(s){return s instanceof cy?s.changingThisBreaksApplicationSecurity:s}(s):function So(s){return(s=String(s)).match(TE)||s.match(XT)?s:"unsafe:"+s}(pe(s))}const mu="__ngContext__";function Un(s,o){s[mu]=o}function Zd(s){const o=function Vn(s){return s[mu]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Qs(s){return s.ngOriginalError}function by(s,...o){s.error(...o)}class Yd{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function Ic(s){return s&&s.ngErrorLogger||by}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Qs(o);for(;u&&Qs(u);)u=Qs(u);return u||null}}const tm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function Js(s){return s instanceof Function?s():s}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function Z(s,o){return undefined(s,o)}function Ke(s){const o=s[3];return Wi(o)?o[3]:o}function Gn(s){return bc(s[13])}function Ei(s){return bc(s[4])}function bc(s){for(;null!==s&&!Wi(s);)s=s[4];return s}function Ro(s,o,u,c,d){if(null!=c){let p,v=!1;Wi(c)?p=c:ni(c)&&(v=!0,c=c[0]);const I=tn(c);0===s&&null!==u?null==d?Lf(o,u,I):El(o,u,I,d||null,!0):1===s&&null!==u?El(o,u,I,d||null,!0):2===s?function Xs(s,o,u){const c=om(s,o);c&&function nD(s,o,u,c){cn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function OE(s,o,u,c,d){const p=u[7];p!==tn(u)&&Ro(o,s,c,p,d);for(let I=10;I<u.length;I++){const b=u[I];Bf(b[1],b,s,o,c,p)}}(o,s,p,u,d)}}function Ni(s,o,u){if(cn(s))return s.createElement(o,u);{const c=null!==u?function Kl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Dy(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Zo(d,-1)),u.splice(c,1)}function Sy(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Dy(d,c),o>0&&(s[u-1][4]=c[4]);const p=ia(s,10+o);!function Es(s,o){Bf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Ay(s,o){if(!(256&o[2])){const u=o[11];cn(u)&&u.destroyNode&&Bf(s,o,u,3,null,null),function Ty(s){let o=s[13];if(!o)return xy(s[1],s);for(;o;){let u=null;if(ni(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ni(o)&&xy(o[1],o),o=o[3];null===o&&(o=s),ni(o)&&xy(o[1],o),u=o&&o[4]}o=u}}(o)}}function xy(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function tD(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof el)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],b=p[v+1];try{b.call(I)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function eD(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],I="function"==typeof v?v(o):tn(o[v]),b=c[d=u[p+2]],x=u[p+3];"boolean"==typeof x?I.removeEventListener(u[p],b,x):x>=0?c[d=x]():c[d=-x].unsubscribe(),p+=2}else{const v=c[d=u[p+1]];u[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&cn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Wi(o[3])){u!==o[3]&&Dy(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function AE(s,o,u){return function Ry(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===$t.None||d===$t.Emulated)return null}return hr(c,u)}(s,o.parent,u)}function El(s,o,u,c,d){cn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Lf(s,o,u){cn(s)?s.appendChild(o,u):o.appendChild(u)}function sm(s,o,u,c,d){null!==c?El(s,o,u,c,d):Lf(s,o,u)}function om(s,o){return cn(s)?s.parentNode(o):o.parentNode}let Ii=function kE(s,o,u){return 40&s.type?hr(s,u):null};function _u(s,o,u,c){const d=AE(s,c,o),p=o[11],I=function RE(s,o,u){return Ii(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)sm(p,d,u[b],I,!1);else sm(p,d,u,I,!1)}function Vf(s,o){if(null!==o){const u=o.type;if(3&u)return hr(o,s);if(4&u)return ky(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Vf(s,c);{const d=s[o.index];return Wi(d)?ky(-1,d):tn(d)}}if(32&u)return Z(o,s)()||tn(s[o.index]);{const c=NE(s,o);return null!==c?Array.isArray(c)?c[0]:Vf(Ke(s[16]),c):Vf(s,o.next)}}return null}function NE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ky(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Vf(c,d)}return o[7]}function My(s,o,u,c,d,p,v){for(;null!=u;){const I=c[u.index],b=u.type;if(v&&0===o&&(I&&Un(tn(I),c),u.flags|=4),64!=(64&u.flags))if(8&b)My(s,o,u.child,c,d,p,!1),Ro(o,s,d,I,p);else if(32&b){const x=Z(u,c);let R;for(;R=x();)Ro(o,s,d,R,p);Ro(o,s,d,I,p)}else 16&b?PE(s,o,c,u,d,p):Ro(o,s,d,I,p);u=v?u.projectionNext:u.next}}function Bf(s,o,u,c,d,p){My(u,c,s.firstChild,o,d,p,!1)}function PE(s,o,u,c,d,p){const v=u[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)Ro(o,s,d,b[x],p);else My(s,o,b,v[3],d,p,!0)}function FE(s,o,u){cn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Ny(s,o,u){cn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function Py(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const LE="ng-template";function iD(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Py(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Oy(s){return 4===s.type&&s.value!==LE}function Fy(s,o,u){return o===(4!==s.type||u?s.value:LE)}function UE(s,o,u){let c=4;const d=s.attrs||[],p=function BE(s){for(let o=0;o<s.length;o++)if(nn(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!Fy(s,b,u)||""===b&&1===o.length){if(ko(c))return!1;v=!0}}else{const x=8&c?b:o[++I];if(8&c&&null!==s.attrs){if(!iD(s.attrs,x,u)){if(ko(c))return!1;v=!0}continue}const L=sD(8&c?"class":b,d,Oy(s),u);if(-1===L){if(ko(c))return!1;v=!0;continue}if(""!==x){let j;j=L>p?"":d[L+1].toLowerCase();const J=8&c?j:null;if(J&&-1!==Py(J,x,0)||2&c&&x!==j){if(ko(c))return!1;v=!0}}}}else{if(!v&&!ko(c)&&!ko(b))return!1;if(v&&ko(b))continue;v=!1,c=b|1&c}}return ko(c)||v}function ko(s){return 0==(1&s)}function sD(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function aD(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function VE(s,o,u=!1){for(let c=0;c<o.length;c++)if(UE(s,o[c],u))return!0;return!1}function Ly(s,o){return s?":not("+o.trim()+")":o}function lD(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!ko(v)&&(o+=Ly(p,d),d=""),c=v,p=p||!ko(c);u++}return""!==d&&(o+=Ly(p,d)),o}const St={};function Uy(s){Vy(Nt(),Ae(),sr()+s,Qa())}function Vy(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ru(o,p,u)}else{const p=s.preOrderHooks;null!==p&&fs(o,p,0,u)}Xi(u)}function lm(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];tu(d),v.contentQueries(2,o[p],p)}}}function Sc(s,o,u,c,d,p,v,I,b,x){const R=o.blueprint.slice();return R[0]=d,R[2]=140|c,Qi(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=I||s&&s[11],R[12]=b||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function ma(s,o,u,c,d){let p=s.data[o];if(null===p)p=function Xy(s,o,u,c,d){const p=Qo(),v=Ya(),b=s.data[o]=function fm(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,u,c,d),function nc(){return gt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const v=function yo(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return mi(p,!0),p}function bl(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Hf(s,o,u){Jo(o);try{const c=s.viewQuery;null!==c&&ym(1,c,u);const d=s.template;null!==d&&Gr(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&lm(s,o),s.staticViewQueries&&ym(2,s.viewQuery,u);const p=s.components;null!==p&&function cm(s,o){for(let u=0;u<o.length;u++)DD(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ea()}}function Xd(s,o,u,c){const d=o[2];if(256==(256&d))return;Jo(o);const p=Qa();try{Qi(o),function Ja(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Gr(s,o,u,2,c);const v=3==(3&d);if(!p)if(v){const x=s.preOrderCheckHooks;null!==x&&ru(o,x,null)}else{const x=s.preOrderHooks;null!==x&&fs(o,x,0,null),ta(o,0)}if(function TD(s){for(let o=Gn(s);null!==o;o=Ei(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(1024&d[2])&&Zo(p,1),d[2]|=1024}}}(o),function qf(s){for(let o=Gn(s);null!==o;o=Ei(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ds(c)&&Xd(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&lm(s,o),!p)if(v){const x=s.contentCheckHooks;null!==x&&ru(o,x)}else{const x=s.contentHooks;null!==x&&fs(o,x,1),ta(o,1)}!function et(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Xi(~d);else{const p=d,v=u[++c],I=u[++c];rc(v,p),I(2,o[p])}}}finally{Xi(-1)}}(s,o);const I=s.components;null!==I&&function At(s,o){for(let u=0;u<o.length;u++)zf(s,o[u])}(o,I);const b=s.viewQuery;if(null!==b&&ym(2,b,c),!p)if(v){const x=s.viewCheckHooks;null!==x&&ru(o,x)}else{const x=s.viewHooks;null!==x&&fs(o,x,2),ta(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Zo(o[3],-1))}finally{ea()}}function vD(s,o,u,c){const d=o[10],p=!Qa(),v=_o(o);try{p&&!v&&d.begin&&d.begin(),v&&Hf(s,o,c),Xd(s,o,u,c)}finally{p&&!v&&d.end&&d.end()}}function Gr(s,o,u,c,d){const p=sr(),v=2&c;try{Xi(-1),v&&o.length>20&&Vy(s,o,20,Qa()),u(c,d)}finally{Xi(p)}}function Sr(s,o,u){!Za()||(function rI(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||es(u,o),Un(c,o);const v=u.initialInputs;for(let I=d;I<p;I++){const b=s.data[I],x=zi(b);x&&bD(o,u,b);const R=Ws(o,s,I,u);Un(R,o),null!==v&&iI(0,I-d,R,b,0,v),x&&(fr(u.index,o)[8]=R)}}(s,o,u,hr(u,o)),128==(128&u.flags)&&function av(s,o,u){const c=u.directiveStart,d=u.directiveEnd,v=u.index,I=function Xu(){return gt.lFrame.currentDirectiveIndex}();try{Xi(v);for(let b=c;b<d;b++){const x=s.data[b],R=o[b];Xa(b),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&uv(x,R)}}finally{Xi(-1),Xa(I)}}(s,o,u))}function _a(s,o,u=hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function QE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=dm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function dm(s,o,u,c,d,p,v,I,b,x){const R=20+c,L=R+d,j=function JE(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:St);return u}(R,L),J="function"==typeof x?x():x;return j[1]={type:s,blueprint:j,template:u,queries:null,viewQuery:I,declTNode:o,data:j.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:J,incompleteFirstPass:!1}}function hm(s,o,u,c){const d=gv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&oI(s).push(c,d.length-1))}function nv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function vn(s,o,u,c,d,p,v,I){const b=hr(o,u);let R,x=o.inputs;!I&&null!=x&&(R=x[c])?(Em(s,u,R,c,d),fd(o)&&function XE(s,o){const u=fr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function rv(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,cn(p)?p.setProperty(b,c,d):mt(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}function ov(s,o,u,c){let d=!1;if(Za()){const p=function ID(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];VE(u,v.selectors,!1)&&(d||(d=[]),pr(es(u,o),s,v.type),zi(v)?(lv(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==p){d=!0,gm(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const L=p[R];L.providersResolver&&L.providersResolver(L)}let I=!1,b=!1,x=bl(s,o,p.length,null);for(let R=0;R<p.length;R++){const L=p[R];u.mergedAttrs=Ln(u.mergedAttrs,L.hostAttrs),mm(s,u,o,x,L),cv(x,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const j=L.type.prototype;!I&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!b&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),x++}!function Pi(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let I=null,b=null;for(let x=o.directiveStart;x<c;x++){const R=d[x],L=R.inputs,j=null===p||Oy(o)?null:CD(L,p);v.push(j),I=nv(L,x,I),b=nv(R.outputs,x,b)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=b}(s,u)}v&&function pm(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Pe(-301,!1);c.push(o[d],p)}}}(u,c,v)}return u.mergedAttrs=Ln(u.mergedAttrs,u.attrs),d}function nI(s,o,u,c,d,p){const v=p.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~o.index;(function eh(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=b&&I.push(b),I.push(c,d,v)}}function uv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function lv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function cv(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;zi(o)&&(u[""]=s)}}function gm(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function mm(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=br(d.type)),v=new el(p,zi(d),null);s.blueprint[c]=v,u[c]=v,nI(s,o,0,c,bl(s,u,d.hostVars,St),d)}function bD(s,o,u){const c=hr(o,s),d=QE(u),p=s[10],v=Ac(s,Sc(s,d,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=v}function ya(s,o,u,c,d,p){const v=hr(s,o);!function Wf(s,o,u,c,d,p,v){if(null==p)cn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const I=null==v?pe(p):v(p,c||"",d);cn(s)?s.setAttribute(o,d,I,u):u?o.setAttributeNS(u,d,I):o.setAttribute(d,I)}}(o[11],v,p,s.value,u,c,d)}function iI(s,o,u,c,d,p){const v=p[o];if(null!==v){const I=c.setInput;for(let b=0;b<v.length;){const x=v[b++],R=v[b++],L=v[b++];null!==I?c.setInput(u,L,x,R):u[R]=L}}}function CD(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function oi(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function zf(s,o){const u=fr(o,s);if(ds(u)){const c=u[1];80&u[2]?Xd(c,u,c.template,u[8]):u[5]>0&&dv(u)}}function dv(s){for(let c=Gn(s);null!==c;c=Ei(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const v=p[1];Xd(v,p,v.template,p[8])}else p[5]>0&&dv(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=fr(u[c],s);ds(d)&&d[5]>0&&dv(d)}}function DD(s,o){const u=fr(o,s),c=u[1];(function _m(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Hf(c,u,u[8])}function Ac(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Kf(s){for(;s;){s[2]|=64;const o=Ke(s);if(Wl(s)&&!o)return s;s=o}return null}function Yf(s,o,u){const c=o[10];c.begin&&c.begin();try{Xd(s,o,s.template,u)}catch(d){throw wm(o,d),d}finally{c.end&&c.end()}}function fv(s){!function Zf(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Zd(u),d=c[1];vD(d,c,d.template,u)}}(s[8])}function ym(s,o,u){tu(0),o(s,u)}const pv=(()=>Promise.resolve(null))();function gv(s){return s[7]||(s[7]=[])}function oI(s){return s.cleanup||(s.cleanup=[])}function wm(s,o){const u=s[9],c=u?u.get(Yd,null):null;c&&c.handleError(o)}function Em(s,o,u,c,d){for(let p=0;p<u.length;){const v=u[p++],I=u[p++],b=o[v],x=s.data[v];null!==x.setInput?x.setInput(b,d,c,I):b[I]=d}}function bn(s,o,u){const c=function $s(s,o){return tn(o[s])}(o,s);!function Of(s,o,u){cn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function gr(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=fe(d,I):2==p&&(c=fe(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const _v=new Dn("INJECTOR",-1);class yv{get(o,u=ua){if(u===ua){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const vv=new Dn("Set Injector scope."),Qf={},wv={};let Jf;function aI(){return void 0===Jf&&(Jf=new yv),Jf}function bm(s,o=null,u=null,c){const d=Ev(s,o,u,c);return d._resolveInjectorDefTypes(),d}function Ev(s,o=null,u=null,c){return new xD(s,u,o||aI(),c)}class xD{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&jr(u,I=>this.processProvider(I,o,u)),jr([o],I=>this.processInjectorType(I,[],p)),this.records.set(_v,nh(void 0,this));const v=this.records.get(vv);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=ua,c=_t.Default){this.assertNotDestroyed();const d=re(this),p=Mn(void 0);try{if(!(c&_t.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function ih(s){return"function"==typeof s||"object"==typeof s&&s instanceof Dn}(o)&&Lt(o);I=b&&this.injectableDefInScope(b)?nh(th(o),Qf):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&_t.Self?aI():this.parent).get(o,u=c&_t.Optional&&u===ua?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Do]=v[Do]||[]).unshift(ue(o)),d)throw v;return function si(s,o,u,c){const d=s[Do];throw o[k]&&d.unshift(o[k]),s.message=function la(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):ue(I)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(C,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Do]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Mn(p),re(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Or(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,I=-1!==c.indexOf(v);if(void 0!==p&&(d=Or(p)),null==d)return!1;if(null!=d.imports&&!I){let R;c.push(v);try{jr(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:j,providers:J}=R[L];jr(J,ve=>this.processProvider(ve,j,J||B))}}this.injectorDefTypes.add(v);const b=br(v)||(()=>new v);this.records.set(v,nh(b,Qf));const x=d.providers;if(null!=x&&!I){const R=o;jr(x,L=>this.processProvider(L,R,x))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let d=xc(o=ne(o))?o:ne(o&&o.provide);const p=function bv(s,o,u){return rh(s)?nh(void 0,s.useValue):nh(function Cv(s,o,u){let c;if(xc(s)){const d=ne(s);return br(d)||th(d)}if(rh(s))c=()=>ne(s.useValue);else if(function lI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Bt(s.deps||[]));else if(function uI(s){return!(!s||!s.useExisting)}(s))c=()=>Ve(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function RD(s){return!!s.deps}(s))return br(d)||th(d);c=()=>new d(...Bt(s.deps))}return c}(s),Qf)}(o);if(xc(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=nh(void 0,Qf,!0),v.factory=()=>Bt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,u){return u.value===Qf&&(u.value=wv,u.value=u.factory()),"object"==typeof u.value&&u.value&&function kD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function th(s){const o=Lt(s),u=null!==o?o.factory:br(s);if(null!==u)return u;if(s instanceof Dn)throw new Pe(204,!1);if(s instanceof Function)return function Iv(s){const o=s.length;if(o>0)throw function Co(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Pe(204,!1);const u=function di(s){const o=s&&(s[$i]||s[Qr]);if(o){const u=function _r(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Pe(204,!1)}function nh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function rh(s){return null!==s&&"object"==typeof s&&V in s}function xc(s){return"function"==typeof s}let Po=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return bm({name:""},c,u,"");{const p=null!==(d=u.name)&&void 0!==d?d:"";return bm({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=ua,s.NULL=new yv,s.\u0275prov=Jt({token:s,providedIn:"any",factory:()=>Ve(_v)}),s.__NG_ELEMENT_ID__=-1,s})();function pI(s,o){Ad(Zd(s)[1],yn())}let lh=null;function to(){if(!lh){const s=Ut.Symbol;if(s&&s.iterator)lh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(lh=c)}}}return lh}function sp(s){return!!ch(s)&&(Array.isArray(s)||!(s instanceof Map)&&to()in s)}function ch(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ai(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Ov(s,o,u,c){const d=Ae();return ai(d,Hs(),o)&&(Nt(),ya(Tn(),d,s,o,u,c)),Ov}function wa(s,o,u,c){return ai(s,Hs(),u)?o+pe(u)+c:St}function Bv(s,o,u,c,d,p,v,I){const b=Ae(),x=Nt(),R=s+20,L=x.firstCreatePass?function EI(s,o,u,c,d,p,v,I,b){const x=o.consts,R=ma(o,s,4,v||null,Ai(x,I));ov(o,u,R,Ai(x,b)),Ad(o,R);const L=R.tViews=dm(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,x,b,o,u,c,d,p,v):x.data[R];mi(L,!1);const j=b[11].createComment("");_u(x,b,j,L),Un(j,b),Ac(b,b[R]=oi(j,b,j,L)),qi(L)&&Sr(x,b,L),null!=v&&_a(b,L,I)}function Lc(s,o=_t.Default){const u=Ae();return null===u?Ve(s,o):Io(yn(),u,ne(s),o)}function Xv(){throw new Error("invalid")}function mh(s,o,u){const c=Ae();return ai(c,Hs(),o)&&vn(Nt(),Tn(),c,s,o,c[11],u,!1),mh}function Fm(s,o,u,c,d){const v=d?"class":"style";Em(s,u,o.inputs[v],v,c)}function Ia(s,o,u,c){const d=Ae(),p=Nt(),v=20+s,I=d[11],b=d[v]=Ni(I,o,function Sd(){return gt.lFrame.currentNamespace}()),x=p.firstCreatePass?function NI(s,o,u,c,d,p,v){const I=o.consts,x=ma(o,s,2,d,Ai(I,p));return ov(o,u,x,Ai(I,v)),null!==x.attrs&&gr(x,x.attrs,!1),null!==x.mergedAttrs&&gr(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,p,d,0,o,u,c):p.data[v];mi(x,!0);const R=x.mergedAttrs;null!==R&&Fn(I,b,R);const L=x.classes;null!==L&&Ny(I,b,L);const j=x.styles;return null!==j&&FE(I,b,j),64!=(64&x.flags)&&_u(p,d,b,x),0===function Zu(){return gt.lFrame.elementDepthCount}()&&Un(b,d),function Ka(){gt.lFrame.elementDepthCount++}(),qi(x)&&(Sr(p,d,x),function Gf(s,o,u){if(qu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,x,d)),null!==c&&_a(d,x),Ia}function cp(){let s=yn();Ya()?function tc(){gt.lFrame.isParent=!1}():(s=s.parent,mi(s,!1));const o=s;!function Ql(){gt.lFrame.elementDepthCount--}();const u=Nt();return u.firstCreatePass&&(Ad(u,s),qu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Rd(s){return 0!=(16&s.flags)}(o)&&Fm(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Mg(s){return 0!=(32&s.flags)}(o)&&Fm(u,o,Ae(),o.stylesWithoutHost,!1),cp}function Lm(s,o,u,c){return Ia(s,o,u,c),cp(),Lm}function Dl(s){return!!s&&"function"==typeof s.then}function FI(s){return!!s&&"function"==typeof s.subscribe}const LI=FI;function dp(s,o,u,c){const d=Ae(),p=Nt(),v=yn();return function tw(s,o,u,c,d,p,v,I){const b=qi(c),R=s.firstCreatePass&&oI(s),L=o[8],j=gv(o);let J=!0;if(3&c.type||I){const He=hr(c,o),nt=I?I(He):He,xe=j.length,pt=I?Ht=>I(tn(Ht[c.index])):c.index;if(cn(u)){let Ht=null;if(!I&&b&&(Ht=function BD(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===c){const I=o[7],b=d[p+2];return I.length>b?I[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=p,Ht.__ngLastListenerFn__=p,J=!1;else{p=yh(c,o,L,p,!1);const on=u.listen(nt,d,p);j.push(p,on),R&&R.push(d,pt,xe,xe+1)}}else p=yh(c,o,L,p,!0),nt.addEventListener(d,p,v),j.push(p),R&&R.push(d,pt,xe,v)}else p=yh(c,o,L,p,!1);const ve=c.outputs;let Ue;if(J&&null!==ve&&(Ue=ve[d])){const He=Ue.length;if(He)for(let nt=0;nt<He;nt+=2){const Rs=o[Ue[nt]][Ue[nt+1]].subscribe(p),Ou=j.length;j.push(p,Rs),R&&R.push(d,c.index,Ou,-(Ou+1))}}}(p,d,d[11],v,s,o,!!u,c),dp}function VI(s,o,u,c){try{return!1!==u(c)}catch(d){return wm(s,d),!1}}function yh(s,o,u,c,d){return function p(v){if(v===Function)return c;const I=2&s.flags?fr(s.index,o):o;0==(32&o[2])&&Kf(I);let b=VI(o,0,c,v),x=p.__ngNextListenerFn__;for(;x;)b=VI(o,0,x,v)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function ba(s,o,u){return hp(s,"",o,"",u),ba}function hp(s,o,u,c,d){const p=Ae(),v=wa(p,o,u,c);return v!==St&&vn(Nt(),Tn(),p,s,v,p[11],d,!1),hp}function JI(s,o=""){const u=Ae(),c=Nt(),d=s+20,p=c.firstCreatePass?ma(c,d,1,o,null):c.data[d],v=u[d]=function Cc(s,o){return cn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);_u(c,u,v,p),mi(p,!1)}function Cu(s){return $m("",s,""),Cu}function $m(s,o,u){const c=Ae(),d=wa(c,s,o,u);return d!==St&&bn(c,sr(),d),$m}const Ss=void 0;var vp=["en",[["a","p"],["AM","PM"],Ss],[["AM","PM"],Ss,Ss],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ss,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ss,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ss,"{1} 'at' {0}",Ss],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uw(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let jc={};function Ah(s){const o=function ib(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=rb(o);if(u)return u;const c=o.split("-")[0];if(u=rb(c),u)return u;if("en"===c)return vp;throw new Error(`Missing locale data for the locale "${s}".`)}function lw(s){return Ah(s)[wt.PluralCase]}function rb(s){return s in jc||(jc[s]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[s]),jc[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const fn="en-US";let Ep=fn;class Mb{}class aS{resolveComponentFactory(o){throw function Nb(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Xm=(()=>{class s{}return s.NULL=new aS,s})();function Mp(){return zc(yn(),Ae())}function zc(s,o){return new Np(hr(s,o))}let Np=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Mp,s})();function zr(s){return s instanceof Np?s.nativeElement:s}class Cw{}let Pp=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Tw(){const s=Ae(),u=fr(yn().index,s);return function Sa(s){return s[11]}(ni(u)?u:s)}(),s})(),Ob=(()=>{class s{}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:()=>null}),s})();class Fh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Dw=new Fh("13.2.7"),e_={};function Op(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(tn(p)),Wi(p))for(let I=10;I<p.length;I++){const b=p[I],x=b[1].firstChild;null!==x&&Op(b[1],b,x,c)}const v=u.type;if(8&v)Op(s,o,u.child,c);else if(32&v){const I=Z(u,o);let b;for(;b=I();)c.push(b)}else if(16&v){const I=NE(o,u);if(Array.isArray(I))c.push(...I);else{const b=Ke(o[16]);Op(b[1],b,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class Fp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Op(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Wi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Sy(o,c),ia(u,c))}this._attachedToViewContainer=!1}Ay(this._lView[1],this._lView)}onDestroy(o){hm(this._lView[1],this._lView,null,o)}markForCheck(){Kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Yf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function sI(s,o,u){Qu(!0);try{Yf(s,o,u)}finally{Qu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function im(s,o){Bf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class uS extends Fp{constructor(o){super(o),this._view=o}detectChanges(){fv(this._view)}checkNoChanges(){!function SD(s){Qu(!0);try{fv(s)}finally{Qu(!1)}}(this._view)}get context(){return null}}class Lh extends Xm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Kn(o);return new n_(u,this.ngModule)}}function t_(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class n_ extends Mb{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function jE(s){return s.map(lD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return t_(this.componentDef.inputs)}get outputs(){return t_(this.componentDef.outputs)}create(o,u,c,d){const p=(d=d||this.ngModule)?function Fb(s,o){return{get:(u,c,d)=>{const p=s.get(u,e_,d);return p!==e_||c===e_?p:o.get(u,c,d)}}}(o,d.injector):o,v=p.get(Cw,Wa),I=p.get(Ob,null),b=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=c?function tv(s,o,u){if(cn(s))return s.selectRootElement(o,u===$t.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):Ni(v.createRenderer(null,this.componentDef),x,function lS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),L=this.componentDef.onPush?576:528,j=function Mv(s,o){return{components:[],scheduler:s||tm,clean:pv,playerHandler:o||null,flags:0}}(),J=dm(0,null,null,1,0,null,null,null,null,null),ve=Sc(null,J,j,L,null,null,v,b,I,p);let Ue,He;Jo(ve);try{const nt=function rp(s,o,u,c,d,p){const v=u[1];u[20]=s;const b=ma(v,20,2,"#host",null),x=b.mergedAttrs=o.hostAttrs;null!==x&&(gr(b,x,!0),null!==s&&(Fn(d,s,x),null!==b.classes&&Ny(d,s,b.classes),null!==b.styles&&FE(d,s,b.styles)));const R=c.createRenderer(s,o),L=Sc(u,QE(o),null,o.onPush?64:16,u[20],b,c,R,p||null,null);return v.firstCreatePass&&(pr(es(b,u),v,o.type),lv(v,b),gm(b,u.length,1)),Ac(u,L),u[20]=L}(R,this.componentDef,ve,v,b);if(R)if(c)Fn(b,R,["ng-version",Dw.full]);else{const{attrs:xe,classes:pt}=function cD(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!ko(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);xe&&Fn(b,R,xe),pt&&pt.length>0&&Ny(b,R,pt.join(" "))}if(He=wn(J,20),void 0!==u){const xe=He.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const Ht=u[pt];xe.push(null!=Ht?Array.from(Ht):null)}}Ue=function Am(s,o,u,c,d){const p=u[1],v=function sv(s,o,u){const c=yn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),mm(s,c,o,bl(s,o,1,null),u));const d=Ws(o,s,c.directiveStart,c);Un(d,o);const p=hr(c,o);return p&&Un(p,o),d}(p,u,o);if(c.components.push(v),s[8]=v,d&&d.forEach(b=>b(v,o)),o.contentQueries){const b=yn();o.contentQueries(1,v,b.directiveStart)}const I=yn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Xi(I.index),nI(u[1],I,0,I.directiveStart,I.directiveEnd,o),uv(o,v)),v}(nt,this.componentDef,ve,j,[pI]),Hf(J,ve,null)}finally{ea()}return new Ub(this.componentType,Ue,zc(He,ve),ve,He)}}class Ub extends class kb{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new uS(d),this.componentType=o}get injector(){return new qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Uh{}class Kc{}const Lo=new Map;class Sw extends Uh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lh(this);const c=Zn(o);this._bootstrapComponents=Js(c.bootstrap),this._r3Injector=Ev(o,u,[{provide:Uh,useValue:this},{provide:Xm,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Po.THROW_IF_NOT_FOUND,c=_t.Default){return o===Po||o===Uh||o===_v?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class so extends Kc{constructor(o){super(),this.moduleType=o,null!==Zn(o)&&function dS(s){const o=new Set;!function u(c){const d=Zn(c,!0),p=d.id;null!==p&&(function Vb(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(p,Lo.get(p),c),Lo.set(p,c));const v=Js(d.imports);for(const I of v)o.has(I)||(o.add(I),u(I))}(s)}(o)}create(o){return new Sw(this.moduleType,o)}}function Aw(s,o,u){const c=function On(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,d=Ae();return d[c]===St?function Is(s,o,u){return s[o]=u}(d,c,u?o.call(u):o()):function Tl(s,o){return s[o]}(d,c)}function Up(s){return o=>{setTimeout(s,void 0,o)}}const oo=class Kr extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,p,v;let I=o,b=u||(()=>null),x=c;if(o&&"object"==typeof o){const L=o;I=null===(d=L.next)||void 0===d?void 0:d.bind(L),b=null===(p=L.error)||void 0===p?void 0:p.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(b=Up(b),I&&(I=Up(I)),x&&(x=Up(x)));const R=super.subscribe({next:I,error:b,complete:x});return o instanceof ee.w0&&o.add(R),R}};function xw(){return this._results[to()]()}class Aa{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=to(),c=Aa.prototype;c[u]||(c[u]=xw)}get changes(){return this._changes||(this._changes=new oo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=yi(o);(this._changesDetected=!function lc(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Vh=(()=>{class s{}return s.__NG_ELEMENT_ID__=i_,s})();const CS=Vh,Zb=class extends CS{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Sc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),Hf(u,c,o),new Fp(c)}};function i_(){return xa(yn(),Ae())}function xa(s,o){return 4&s.type?new Zb(o,s,zc(s,o)):null}let Ra=(()=>{class s{}return s.__NG_ELEMENT_ID__=Yc,s})();function Yc(){return kw(yn(),Ae())}const Vp=Ra,Rw=class extends Vp{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return zc(this._hostTNode,this._hostLView)}get injector(){return new qs(this._hostTNode,this._hostLView)}get parentInjector(){const o=ps(this._hostTNode,this._hostLView);if(su(o)){const u=xt(o,this._hostLView),c=ri(o);return new qs(u[1].data[c+8],u)}return new qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=s_(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,p){const v=o&&!function _s(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const L=u||{};I=L.index,c=L.injector,d=L.projectableNodes,p=L.ngModuleRef}const b=v?o:new n_(Kn(o)),x=c||this.parentInjector;if(!p&&null==b.ngModule){const j=(v?x:this.parentInjector).get(Uh,null);j&&(p=j)}const R=b.create(x,d,void 0,p);return this.insert(R.hostView,I),R}insert(o,u){const c=o._lView,d=c[1];if(function za(s){return Wi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[3],j=new Rw(L,L[6],L[3]);j.detach(j.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function pa(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],cu(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function Tc(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=128}(d,c,v,p);const I=ky(p,v),b=c[11],x=om(b,v[7]);return null!==x&&function wl(s,o,u,c,d,p){c[0]=d,c[6]=o,Bf(s,c,u,1,d,p)}(d,v[6],b,c,x,I),o.attachToViewContainerRef(),cu(Bp(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=s_(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Sy(this._lContainer,u);c&&(ia(Bp(this._lContainer),u),Ay(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Sy(this._lContainer,u);return c&&null!=ia(Bp(this._lContainer),u)?new Fp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function s_(s){return s[8]}function Bp(s){return s[8]||(s[8]=[])}function kw(s,o){let u;const c=o[s.index];if(Wi(c))u=c;else{let d;if(8&s.type)d=tn(c);else{const p=o[11];d=p.createComment("");const v=hr(s,o);El(p,om(p,v),d,function xE(s,o){return cn(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=u=oi(c,o,d,s),Ac(o,u)}return new Rw(u,s,o)}class o_{constructor(o){this.queryList=o,this.matches=null}clone(){return new o_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Bh{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Bh(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Hh(o,u).matches&&this.queries[u].setDirty()}}class jh{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class ku{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new ku(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Mw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Mw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,Qb(u,p)),this.matchTNodeWithReadOption(o,u,sl(u,o,p,!1,!1))}else c===Vh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,sl(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Np||d===Ra||d===Vh&&4&u.type)this.addMatch(u.index,-2);else{const p=sl(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Qb(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function AS(s,o,u,c){return-1===u?function SS(s,o){return 11&s.type?zc(s,o):4&s.type?xa(s,o):null}(o,s):-2===u?function xS(s,o,u){return u===Np?zc(o,s):u===Vh?xa(o,s):u===Ra?kw(o,s):void 0}(s,o,c):Ws(s,s[1],u,o)}function $h(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=u.matches,I=[];for(let b=0;b<v.length;b+=2){const x=v[b];I.push(x<0?null:AS(o,p[x],v[b+1],u.metadata.read))}d.matches=I}return d.matches}function Mu(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=$h(s,o,d,u);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)c.push(v[I/2]);else{const x=p[I+1],R=o[-b];for(let L=10;L<R.length;L++){const j=R[L];j[17]===j[3]&&Mu(j[1],j,x,c)}if(null!==R[9]){const L=R[9];for(let j=0;j<L.length;j++){const J=L[j];Mu(J[1],J,x,c)}}}}}return c}function Nl(s){const o=Ae(),u=Nt(),c=ic();tu(c+1);const d=Hh(u,c);if(s.dirty&&_o(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Mu(u,o,c,[]):$h(u,o,d,c);s.reset(p,zr),s.notifyOnChanges()}return!0}return!1}function Xb(s,o,u,c){const d=Nt();if(d.firstCreatePass){const p=yn();(function tC(s,o,u){null===s.queries&&(s.queries=new ku),s.queries.track(new Mw(o,u))})(d,new jh(o,u,c),p.index),function nC(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function jp(s,o,u){const c=new Aa(4==(4&u));hm(s,o,c,c.destroy),null===o[19]&&(o[19]=new Bh),o[19].queries.push(new o_(c))}(d,Ae(),u)}function eC(){return function Nw(s,o){return s[19].queries[o].queryList}(Ae(),ic())}function Hh(s,o){return s.queries.getByIndex(o)}function Hp(...s){}const p_=new Dn("Application Initializer");let Ww=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Hp,this.reject=Hp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Dl(p))u.push(p);else if(LI(p)){const v=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Ve(p_,8))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const qw=new Dn("AppId",{providedIn:"root",factory:function gC(){return`${zw()}${zw()}${zw()}`}});function zw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rd=new Dn("Platform Initializer"),id=new Dn("Platform ID"),g_=new Dn("appBootstrapListener");let Zw=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})();const m_=new Dn("LocaleId",{providedIn:"root",factory:()=>Rt(m_,_t.Optional|_t.SkipSelf)||function mC(){return"undefined"!=typeof $localize&&$localize.locale||fn}()}),jS=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vC{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let wC=(()=>{class s{compileModuleSync(u){return new so(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Js(Zn(u).declarations).reduce((v,I)=>{const b=Kn(I);return b&&v.push(new n_(b)),v},[]);return new vC(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Gp=(()=>Promise.resolve(0))();function Gh(s){"undefined"==typeof Zone?Gp.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class xs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oo(!1),this.onMicrotaskEmpty=new oo(!1),this.onStable=new oo(!1),this.onError=new oo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Jw(){let s=Ut.requestAnimationFrame,o=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function EC(s){const o=()=>{!function $S(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ut,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,e0(s),s.isCheckStableRunning=!0,__(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),e0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,v,I)=>{try{return IC(s),u.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),bC(s)}},onInvoke:(u,c,d,p,v,I,b)=>{try{return IC(s),u.invoke(d,p,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),bC(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,e0(s),__(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,Xw,Hp,Hp);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Xw={};function __(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function e0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function IC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function bC(s){s._nesting--,__(s)}class CC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oo,this.onMicrotaskEmpty=new oo,this.onStable=new oo,this.onError=new oo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let Wp=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xs.assertNotInAngularZone(),Gh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gh(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Ve(xs))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})(),Wh=(()=>{class s{constructor(){this._applications=new Map,n0.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return n0.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})();class t0{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function TC(s){n0=s}let Vo,n0=new t0;const qh=new Dn("AllowMultipleToken");class r0{constructor(o,u){this.name=o,this.token=u}}function y_(s,o,u=[]){const c=`Platform: ${o}`,d=new Dn(c);return(p=[])=>{let v=E_();if(!v||v.injector.get(qh,!1))if(s)s(u.concat(p).concat({provide:d,useValue:!0}));else{const I=u.concat(p).concat({provide:d,useValue:!0},{provide:vv,useValue:"platform"});!function zh(s){if(Vo&&!Vo.destroyed&&!Vo.injector.get(qh,!1))throw new Pe(400,"");Vo=s.get(s0);const o=s.get(rd,null);o&&o.forEach(u=>u())}(Po.create({providers:I,name:c}))}return function v_(s){const o=E_();if(!o)throw new Pe(401,"");return o}()}}function E_(){return Vo&&!Vo.destroyed?Vo:null}let s0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const I=function o0(s,o){let u;return u="noop"===s?new CC:("zone.js"===s?void 0:s)||new xs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:xs,useValue:I}];return I.run(()=>{const x=Po.create({providers:b,parent:this.injector,name:u.moduleType.name}),R=u.create(x),L=R.injector.get(Yd,null);if(!L)throw new Pe(402,"");return I.runOutsideAngular(()=>{const j=I.onError.subscribe({next:J=>{L.handleError(J)}});R.onDestroy(()=>{u0(this._modules,R),j.unsubscribe()})}),function a0(s,o,u){try{const c=u();return Dl(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,I,()=>{const j=R.injector.get(Ww);return j.runInitializers(),j.donePromise.then(()=>(function Km(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&(Ep=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(m_,fn)||fn),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const d=Nu({},c);return function HS(s,o,u){const c=new so(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(I_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Pe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Ve(Po))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac}),s})();function Nu(s,o){return Array.isArray(o)?o.reduce(Nu,s):Object.assign(Object.assign({},s),o)}let I_=(()=>{class s{constructor(u,c,d,p,v){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new F.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),b=new F.y(x=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{xs.assertNotInAngularZone(),Gh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{R.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ce.T)(I,b.pipe((0,ie.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Pe(405,"");let d;d=u instanceof Mb?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const p=function GS(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Uh),I=d.create(Po.NULL,[],c||d.selector,p),b=I.location.nativeElement,x=I.injector.get(Wp,null),R=x&&I.injector.get(Wh);return x&&R&&R.registerApplication(b,x),I.onDestroy(()=>{this.detachView(I.hostView),u0(this.components,I),R&&R.unregisterApplication(b)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;u0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(g_,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Ve(xs),Ve(Po),Ve(Yd),Ve(Xm),Ve(Ww))},s.\u0275prov=Jt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function u0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let C_=!0,DC=!1;function l0(){return DC=!0,C_}function T_(){if(DC)throw new Error("Cannot enable prod mode after platform setup.");C_=!1}let c0=(()=>{class s{}return s.__NG_ELEMENT_ID__=zS,s})();function zS(s){return function KS(s,o,u){if(fd(s)&&!u){const c=fr(s.index,o);return new Fp(c,c)}return 47&s.type?new Fp(o[16],o):null}(yn(),Ae(),16==(16&s))}class xC{constructor(){}supports(o){return sp(o)}create(o){return new p0(o)}}const f0=(s,o)=>o;class p0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||f0}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<kC(c,d,p)?u:c,I=kC(v,d,p),b=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const x=I-d,R=b-d;if(x!=R){for(let j=0;j<x;j++){const J=j<p.length?p[j]:p[j]=0,ve=J+j;R<=ve&&ve<x&&(p[j]=J+1)}p[v.previousIndex]=R-x}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!sp(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,I),c=!0),u=u._next}else d=0,function Eu(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[to()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new g0(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new RC),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class g0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class m0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class RC{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new m0,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kC(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class x_{constructor(){}supports(o){return o instanceof Map||ch(o)}create(){return new _0}}class _0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||ch(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new XS(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class XS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function y0(){return new v0([new xC])}let v0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||y0()),deps:[[s,new ki,new Hr]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Pe(901,"")}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:y0}),s})();function w0(){return new R_([new x_])}let R_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||w0()),deps:[[s,new ki,new Hr]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Pe(901,"")}}return s.\u0275prov=Jt({token:s,providedIn:"root",factory:w0}),s})();const E0=y_(null,"core",[{provide:id,useValue:"unknown"},{provide:s0,deps:[Po]},{provide:Wh,deps:[]},{provide:Zw,deps:[]}]);let I0=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Ve(I_))},s.\u0275mod=Fr({type:s}),s.\u0275inj=qt({}),s})()},3942:(Je,we,O)=>{O.d(we,{Z:()=>Pe});var _=O(2090),ee=O(4859),F=O(9681),ce=O(1877);class ie{constructor(pe,Te){this._delegate=pe,this.firebase=Te,(0,F._addComponent)(pe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(pe,Te=F._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(pe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(qe=Ye.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Te})}_removeServiceInstance(pe,Te=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Te)}_addComponent(pe){(0,F._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,F._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function fe(){const Be=function ue(Be){const pe={},Te={__esModule:!0,initializeApp:function Se($e,$={}){const Ee=F.initializeApp($e,$);if((0,_.r3)(pe,Ee.name))return pe[Ee.name];const Y=new Be(Ee,Te);return pe[Ee.name]=Y,Y},app:Ye,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function be($e){const $=$e.name,Ee=$.replace("-compat","");if(F._registerComponent($e)&&"PUBLIC"===$e.type){const Y=(se=Ye())=>{if("function"!=typeof se[Ee])throw de.create("invalid-app-argument",{appName:$});return se[Ee]()};void 0!==$e.serviceProps&&(0,_.ZB)(Y,$e.serviceProps),Te[Ee]=Y,Be.prototype[Ee]=function(...se){return this._getService.bind(this,$).apply(this,$e.multipleInstances?se:[])}}return"PUBLIC"===$e.type?Te[Ee]:null},removeApp:function qe($e){delete pe[$e]},useAsService:function je($e,$){return"serverAuth"===$?null:$},modularAPIs:F}};function Ye($e){if(!(0,_.r3)(pe,$e=$e||F._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:$e});return pe[$e]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function Ie(){return Object.keys(pe).map($e=>pe[$e])}}),Ye.App=Be,Te}(ie);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(Te){(0,_.ZB)(Be,Te)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Be}(),H=new ce.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=G;!function Re(Be){(0,F.registerVersion)("@firebase/app-compat","0.1.27",Be)}()},9681:(Je,we,O)=>{O.r(we),O.d(we,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>$i,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>an,_addOrOverwriteComponent:()=>Jt,_apps:()=>sn,_clearComponents:()=>ji,_components:()=>kn,_getProvider:()=>qt,_registerComponent:()=>Pr,_removeServiceInstance:()=>Lt,deleteApp:()=>_t,getApp:()=>Qr,getApps:()=>Di,initializeApp:()=>Ps,onLog:()=>Mn,registerVersion:()=>Cn,setLogLevel:()=>Os});var _=O(5861),ee=O(4859),F=O(1877),ce=O(2090),ie=O(8766);class ge{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function de(W){const X=W.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Me)){const Xe=Me.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(Me=>Me).join(" ")}}const ue="@firebase/app",G=new F.Yd("@firebase/app"),Ft="[DEFAULT]",Qe={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,kn=new Map;function an(W,X){try{W.container.addComponent(X)}catch(Me){G.debug(`Component ${X.name} failed to register with FirebaseApp ${W.name}`,Me)}}function Jt(W,X){W.container.addOrOverwriteComponent(X)}function Pr(W){const X=W.name;if(kn.has(X))return G.debug(`There were multiple attempts to register component ${X}.`),!1;kn.set(X,W);for(const Me of sn.values())an(Me,W);return!0}function qt(W,X){const Me=W.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),W.container.getProvider(X)}function Lt(W,X,Me=Ft){qt(W,X).clearInstance(Me)}function ji(){kn.clear()}const _r=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Or{constructor(X,Me,Xe){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const $i="9.8.3";function Ps(W,X={}){"object"!=typeof X&&(X={name:X});const Me=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},X),Xe=Me.name;if("string"!=typeof Xe||!Xe)throw _r.create("bad-app-name",{appName:String(Xe)});const ct=sn.get(Xe);if(ct){if((0,ce.vZ)(W,ct.options)&&(0,ce.vZ)(Me,ct.config))return ct;throw _r.create("duplicate-app",{appName:Xe})}const It=new ee.H0(Xe);for(const bt of kn.values())It.addComponent(bt);const pn=new Or(W,Me,It);return sn.set(Xe,pn),pn}function Qr(W=Ft){const X=sn.get(W);if(!X)throw _r.create("no-app",{appName:W});return X}function Di(){return Array.from(sn.values())}function _t(W){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.Z)(function*(W){const X=W.name;sn.has(X)&&(sn.delete(X),yield Promise.all(W.container.getProviders().map(Me=>Me.delete())),W.isDeleted=!0)})).apply(this,arguments)}function Cn(W,X,Me){var Xe;let ct=null!==(Xe=Qe[W])&&void 0!==Xe?Xe:W;Me&&(ct+=`-${Me}`);const It=ct.match(/\s|\//),pn=X.match(/\s|\//);if(It||pn){const bt=[`Unable to register library "${ct}" with version "${X}":`];return It&&bt.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),It&&pn&&bt.push("and"),pn&&bt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void G.warn(bt.join(" "))}Pr(new ee.wA(`${ct}-version`,()=>({library:ct,version:X}),"VERSION"))}function Mn(W,X){if(null!==W&&"function"!=typeof W)throw _r.create("invalid-log-argument");(0,F.Am)(W,X)}function Os(W){(0,F.Ub)(W)}const Nn="firebase-heartbeat-store";let fi=null;function lo(){return fi||(fi=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(W,X)=>{0===X&&W.createObjectStore(Nn)}}).catch(W=>{throw _r.create("storage-open",{originalErrorMessage:W.message})})),fi}function rt(){return(rt=(0,_.Z)(function*(W){var X;try{return(yield lo()).transaction(Nn).objectStore(Nn).get(pi(W))}catch(Me){throw _r.create("storage-get",{originalErrorMessage:null===(X=Me)||void 0===X?void 0:X.message})}})).apply(this,arguments)}function Et(W,X){return yr.apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(W,X){var Me;try{const ct=(yield lo()).transaction(Nn,"readwrite");return yield ct.objectStore(Nn).put(X,pi(W)),ct.done}catch(Xe){throw _r.create("storage-set",{originalErrorMessage:null===(Me=Xe)||void 0===Me?void 0:Me.message})}})).apply(this,arguments)}function pi(W){return`${W.name}!${W.options.appId}`}class vr{constructor(X){this.container=X,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new z(Me),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var X=this;return(0,_.Z)(function*(){const Xe=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ct=wr();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ct&&!X._heartbeatsCache.heartbeats.some(It=>It.date===ct))return X._heartbeatsCache.heartbeats.push({date:ct,agent:Xe}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(It=>{const pn=new Date(It.date).valueOf();return Date.now()-pn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,_.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Me=wr(),{heartbeatsToSend:Xe,unsentEntries:ct}=function B(W,X=1024){const Me=[];let Xe=W.slice();for(const ct of W){const It=Me.find(pn=>pn.agent===ct.agent);if(It){if(It.dates.push(ct.date),K(Me)>X){It.dates.pop();break}}else if(Me.push({agent:ct.agent,dates:[ct.date]}),K(Me)>X){Me.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Xe}}(X._heartbeatsCache.heartbeats),It=(0,ce.L)(JSON.stringify({version:2,heartbeats:Xe}));return X._heartbeatsCache.lastSentHeartbeatDate=Me,ct.length>0?(X._heartbeatsCache.heartbeats=ct,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),It})()}}function wr(){return(new Date).toISOString().substring(0,10)}class z{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,_.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function $t(W){return rt.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Me=this;return(0,_.Z)(function*(){var Xe;if(yield Me._canUseIndexedDBPromise){const It=yield Me.read();return Et(Me.app,{lastSentHeartbeatDate:null!==(Xe=X.lastSentHeartbeatDate)&&void 0!==Xe?Xe:It.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Me=this;return(0,_.Z)(function*(){var Xe;if(yield Me._canUseIndexedDBPromise){const It=yield Me.read();return Et(Me.app,{lastSentHeartbeatDate:null!==(Xe=X.lastSentHeartbeatDate)&&void 0!==Xe?Xe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...X.heartbeats]})}})()}}function K(W){return(0,ce.L)(JSON.stringify({version:2,heartbeats:W})).length}!function Ce(W){Pr(new ee.wA("platform-logger",X=>new ge(X),"PRIVATE")),Pr(new ee.wA("heartbeat",X=>new vr(X),"PRIVATE")),Cn(ue,"0.7.26",W),Cn(ue,"0.7.26","esm2017"),Cn("fire-js","")}("")},4859:(Je,we,O)=>{O.d(we,{wA:()=>F,H0:()=>ue,zt:()=>ie});var _=O(5861),ee=O(2090);class F{constructor(G,H,ne){this.name=G,this.instanceFactory=H,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ce="[DEFAULT]";class ie{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const ne=new ee.BH;if(this.instancesDeferred.set(H,ne),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&ne.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),We=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Re){if(We)return null;throw Re}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function de(fe){return"EAGER"===fe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(H){}for(const[H,ne]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:We});ne.resolve(Re)}catch(Re){}}}}clearInstance(G=ce){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,_.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...H.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ce){return this.instances.has(G)}getOptions(G=ce){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ne,options:H});for(const[Re,Pe]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(Re)&&Pe.resolve(We);return We}onInit(G,H){var ne;const We=this.normalizeInstanceIdentifier(H),Re=null!==(ne=this.onInitCallbacks.get(We))&&void 0!==ne?ne:new Set;Re.add(G),this.onInitCallbacks.set(We,Re);const Pe=this.instances.get(We);return Pe&&G(Pe,We),()=>{Re.delete(G)}}invokeOnInitCallbacks(G,H){const ne=this.onInitCallbacks.get(H);if(ne)for(const We of ne)try{We(G,H)}catch(Re){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=G,fe===ce?void 0:fe),options:H}),this.instances.set(G,ne),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch(We){}var fe;return ne||null}normalizeInstanceIdentifier(G=ce){return this.component?this.component.multipleInstances?G:ce:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new ie(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,O)=>{O.d(we,{in:()=>ee,Yd:()=>de,Ub:()=>ue,Am:()=>fe});const _=[];var ee=(()=>{return(G=ee||(ee={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ee;var G})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ge=(G,H,...ne)=>{if(H<G.logLevel)return;const We=(new Date).toISOString(),Re=ie[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${We}]  ${G.name}:`,...ne)};class de{constructor(H){this.name=H,this._logLevel=ce,this._logHandler=ge,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function ue(G){_.forEach(H=>{H.setLogLevel(G)})}function fe(G,H){for(const ne of _){let We=null;H&&H.level&&(We=F[H.level]),ne.userLogHandler=null===G?null:(Re,Pe,...Be)=>{const pe=Be.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(qe){return null}}).filter(Te=>Te).join(" ");Pe>=(null!=We?We:Re.logLevel)&&G({level:ee[Pe].toLowerCase(),message:pe,args:Be,type:Re.name})}}}},8766:(Je,we,O)=>{O.d(we,{Lj:()=>Se,X3:()=>Ye});var _=O(5861);let F,ce;const de=new WeakMap,ue=new WeakMap,fe=new WeakMap,G=new WeakMap,H=new WeakMap;let Re={get($,Ee,Y){if($ instanceof IDBTransaction){if("done"===Ee)return ue.get($);if("objectStoreNames"===Ee)return $.objectStoreNames||fe.get($);if("store"===Ee)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return Te($[Ee])},set:($,Ee,Y)=>($[Ee]=Y,!0),has:($,Ee)=>$ instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in $};function pe($){return"function"==typeof $?function Be($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...Ee){return $.apply(qe(this),Ee),Te(de.get(this))}:function(...Ee){return Te($.apply(qe(this),Ee))}:function(Ee,...Y){const se=$.call(qe(this),Ee,...Y);return fe.set(se,Ee.sort?Ee.sort():[Ee]),Te(se)}}($):($ instanceof IDBTransaction&&function We($){if(ue.has($))return;const Ee=new Promise((Y,se)=>{const te=()=>{$.removeEventListener("complete",ye),$.removeEventListener("error",le),$.removeEventListener("abort",le)},ye=()=>{Y(),te()},le=()=>{se($.error||new DOMException("AbortError","AbortError")),te()};$.addEventListener("complete",ye),$.addEventListener("error",le),$.addEventListener("abort",le)});ue.set($,Ee)}($),(($,Ee)=>Ee.some(Y=>$ instanceof Y))($,function ie(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Re):$)}function Te($){if($ instanceof IDBRequest)return function ne($){const Ee=new Promise((Y,se)=>{const te=()=>{$.removeEventListener("success",ye),$.removeEventListener("error",le)},ye=()=>{Y(Te($.result)),te()},le=()=>{se($.error),te()};$.addEventListener("success",ye),$.addEventListener("error",le)});return Ee.then(Y=>{Y instanceof IDBCursor&&de.set(Y,$)}).catch(()=>{}),H.set(Ee,$),Ee}($);if(G.has($))return G.get($);const Ee=pe($);return Ee!==$&&(G.set($,Ee),H.set(Ee,$)),Ee}const qe=$=>H.get($);function Ye($,Ee,{blocked:Y,upgrade:se,blocking:te,terminated:ye}={}){const le=indexedDB.open($,Ee),Fe=Te(le);return se&&le.addEventListener("upgradeneeded",lt=>{se(Te(le.result),lt.oldVersion,lt.newVersion,Te(le.transaction))}),Y&&le.addEventListener("blocked",()=>Y()),Fe.then(lt=>{ye&&lt.addEventListener("close",()=>ye()),te&&lt.addEventListener("versionchange",()=>te())}).catch(()=>{}),Fe}function Se($,{blocked:Ee}={}){const Y=indexedDB.deleteDatabase($);return Ee&&Y.addEventListener("blocked",()=>Ee()),Te(Y).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function $e($,Ee){if(!($ instanceof IDBDatabase)||Ee in $||"string"!=typeof Ee)return;if(je.get(Ee))return je.get(Ee);const Y=Ee.replace(/FromIndex$/,""),se=Ee!==Y,te=be.includes(Y);if(!(Y in(se?IDBIndex:IDBObjectStore).prototype)||!te&&!Ie.includes(Y))return;const ye=function(){var le=(0,_.Z)(function*(Fe,...lt){const jt=this.transaction(Fe,te?"readwrite":"readonly");let Ft=jt.store;return se&&(Ft=Ft.index(lt.shift())),(yield Promise.all([Ft[Y](...lt),te&&jt.done]))[0]});return function(lt){return le.apply(this,arguments)}}();return je.set(Ee,ye),ye}!function Pe($){Re=$(Re)}($=>DO(TO({},$),{get:(Ee,Y,se)=>$e(Ee,Y)||$.get(Ee,Y,se),has:(Ee,Y)=>!!$e(Ee,Y)||$.has(Ee,Y)}))},5861:(Je,we,O)=>{function _(F,ce,ie,ge,de,ue,fe){try{var G=F[ue](fe),H=G.value}catch(ne){return void ie(ne)}G.done?ce(H):Promise.resolve(H).then(ge,de)}function ee(F){return function(){var ce=this,ie=arguments;return new Promise(function(ge,de){var ue=F.apply(ce,ie);function fe(H){_(ue,ge,de,fe,G,"next",H)}function G(H){_(ue,ge,de,fe,G,"throw",H)}fe(void 0)})}}O.d(we,{Z:()=>ee})}},Je=>{Je(Je.s=5036)}]);