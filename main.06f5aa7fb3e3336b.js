(self.webpackChunkProyectoFinal=self.webpackChunkProyectoFinal||[]).push([[179],{2011:(ze,G,M)=>{"use strict";M.d(G,{Dh:()=>H,GT:()=>q,cc:()=>be,hO:()=>Te,on:()=>Z,pX:()=>U,xv:()=>ae});var u=M(4650),P=M(127),D=M(5813);ze=M.hmd(ze);const F=["ngOnDestroy"],U=(fe,Re,Me,xe={})=>new Proxy(fe,{get:(Ne,de)=>Me.runOutsideAngular(()=>{var Oe;if(fe[de])return!(null===(Oe=xe?.spy)||void 0===Oe)&&Oe.get&&xe.spy.get(de,fe[de]),fe[de];if(F.indexOf(de)>-1)return()=>{};const ie=Re.toPromise().then(ue=>{const me=ue&&ue[de];return"function"==typeof me?me.bind(ue):me&&me.then?me.then(K=>Me.run(()=>K)):Me.run(()=>me)});return new Proxy(()=>{},{get:(ue,me)=>ie[me],apply:(ue,me,K)=>ie.then(ne=>{var le;const pe=ne&&ne(...K);return!(null===(le=xe?.spy)||void 0===le)&&le.apply&&xe.spy.apply(de,K,pe),pe})})})}),q=(fe,Re)=>{Re.forEach(Me=>{Object.getOwnPropertyNames(Me.prototype||Me).forEach(xe=>{Object.defineProperty(fe.prototype,xe,Object.getOwnPropertyDescriptor(Me.prototype||Me,xe))})})};class W{constructor(Re){return Re}}const H=new u.OlP("angularfire2.app.options"),ae=new u.OlP("angularfire2.app.name");function Z(fe,Re,Me){const Ne="object"==typeof Me&&Me||{};Ne.name=Ne.name||"string"==typeof Me&&Me||"[DEFAULT]";const Oe=P.Z.apps.filter(ie=>ie&&ie.name===Ne.name)[0]||Re.runOutsideAngular(()=>P.Z.initializeApp(fe,Ne));try{JSON.stringify(fe)!==JSON.stringify(Oe.options)&&$("error",`${Oe.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new W(Oe)}const $=(fe,...Re)=>{(0,u.X6Q)()&&typeof console<"u"&&console[fe](...Re)},J={provide:W,useFactory:Z,deps:[H,u.R0b,[new u.FiY,ae]]};let Te=(()=>{class fe{constructor(Me){P.Z.registerVersion("angularfire",D.q4.full,"core"),P.Z.registerVersion("angularfire",D.q4.full,"app-compat"),P.Z.registerVersion("angular",u.q4F.full,Me.toString())}static initializeApp(Me,xe){return{ngModule:fe,providers:[{provide:H,useValue:Me},{provide:ae,useValue:xe}]}}}return fe.\u0275fac=function(Me){return new(Me||fe)(u.LFG(u.Lbi))},fe.\u0275mod=u.oAB({type:fe}),fe.\u0275inj=u.cJS({providers:[J]}),fe})();function be(fe,Re,Me,xe,Ne){const[,de,Oe]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===fe)||[];if(de)return function Ie(fe,Re){try{return fe.toString()===Re.toString()}catch{return fe===Re}}(Ne,Oe)||(he("error",`${Re} was already initialized on the ${Me} Firebase App with different settings.${Ze?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Ne,was:Oe})),de;{const ie=xe();return globalThis.\u0275AngularfireInstanceCache.push([fe,ie,Ne]),ie}}const Ze=!!ze.hot,he=(fe,...Re)=>{(0,u.X6Q)()&&typeof console<"u"&&console[fe](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ze,G,M)=>{"use strict";M.d(G,{q4:()=>el,iC:()=>nl,fc:()=>Tf,HU:()=>ba,vb:()=>Vr,JM:()=>eu});var u=M(4650),P=M(5867),D=M(5861),F=M(9681),U=M(2090),q=M(4859),W=M(1877),H=M(8766);const ae="@firebase/installations",Z="0.5.10",J=`w:${Z}`,Te="FIS_v2",Re=new U.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(T){return T instanceof U.ZR&&T.code.includes("request-failed")}function xe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ne(T){return{token:T.token,requestStatus:2,expiresIn:ne(T.expiresIn),creationTime:Date.now()}}function de(T,A){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,D.Z)(function*(T,A){const z=(yield A.json()).error;return Re.create("request-failed",{requestName:T,serverCode:z.code,serverMessage:z.message,serverStatus:z.status})})).apply(this,arguments)}function ie({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ue(T,{refreshToken:A}){const R=ie(T);return R.append("Authorization",function le(T){return`${Te} ${T}`}(A)),R}function me(T){return K.apply(this,arguments)}function K(){return(K=(0,D.Z)(function*(T){const A=yield T();return A.status>=500&&A.status<600?T():A})).apply(this,arguments)}function ne(T){return Number(T.replace("s","000"))}function pe(T,A){return we.apply(this,arguments)}function we(){return(we=(0,D.Z)(function*({appConfig:T,heartbeatServiceProvider:A},{fid:R}){const z=xe(T),ce=ie(T),ve=A.getImmediate({optional:!0});if(ve){const Zt=yield ve.getHeartbeatsHeader();Zt&&ce.append("x-firebase-client",Zt)}const nt={method:"POST",headers:ce,body:JSON.stringify({fid:R,authVersion:Te,appId:T.appId,sdkVersion:J})},Ct=yield me(()=>fetch(z,nt));if(Ct.ok){const Zt=yield Ct.json();return{fid:Zt.fid||R,registrationStatus:2,refreshToken:Zt.refreshToken,authToken:Ne(Zt.authToken)}}throw yield de("Create Installation",Ct)})).apply(this,arguments)}function Ge(T){return new Promise(A=>{setTimeout(A,T)})}const $t=/^[cdef][\w-]{21}$/;function Qe(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const R=function en(T){return function mt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return $t.test(R)?R:""}catch{return""}}function Rn(T){return`${T.appName}!${T.appId}`}const on=new Map;function Qt(T,A){const R=Rn(T);Jt(R,A),function Zn(T,A){const R=function vn(){return!Vn&&"BroadcastChannel"in self&&(Vn=new BroadcastChannel("[Firebase] FID Change"),Vn.onmessage=T=>{Jt(T.data.key,T.data.fid)}),Vn}();R&&R.postMessage({key:T,fid:A}),function ss(){0===on.size&&Vn&&(Vn.close(),Vn=null)}()}(R,A)}function Jt(T,A){const R=on.get(T);if(R)for(const z of R)z(A)}let Vn=null;const Hn="firebase-installations-store";let os=null;function gt(){return os||(os=(0,H.X3)("firebase-installations-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(Hn)}})),os}function Jr(T,A){return An.apply(this,arguments)}function An(){return(An=(0,D.Z)(function*(T,A){const R=Rn(T),ce=(yield gt()).transaction(Hn,"readwrite"),ve=ce.objectStore(Hn),Ve=yield ve.get(R);return yield ve.put(A,R),yield ce.done,(!Ve||Ve.fid!==A.fid)&&Qt(T,A.fid),A})).apply(this,arguments)}function Xt(T){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,D.Z)(function*(T){const A=Rn(T),z=(yield gt()).transaction(Hn,"readwrite");yield z.objectStore(Hn).delete(A),yield z.done})).apply(this,arguments)}function lr(T,A){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,D.Z)(function*(T,A){const R=Rn(T),ce=(yield gt()).transaction(Hn,"readwrite"),ve=ce.objectStore(Hn),Ve=yield ve.get(R),nt=A(Ve);return void 0===nt?yield ve.delete(R):yield ve.put(nt,R),yield ce.done,nt&&(!Ve||Ve.fid!==nt.fid)&&Qt(T,nt.fid),nt})).apply(this,arguments)}function Sn(T){return cr.apply(this,arguments)}function cr(){return(cr=(0,D.Z)(function*(T){let A;const R=yield lr(T.appConfig,z=>{const ce=As(z),ve=Gt(T,ce);return A=ve.registrationPromise,ve.installationEntry});return""===R.fid?{installationEntry:yield A}:{installationEntry:R,registrationPromise:A}})).apply(this,arguments)}function As(T){return ei(T||{fid:Qe(),registrationStatus:0})}function Gt(T,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Re.create("app-offline"))};const R={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},z=function Je(T,A){return at.apply(this,arguments)}(T,R);return{installationEntry:R,registrationPromise:z}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Ui(T)}:{installationEntry:A}}function at(){return(at=(0,D.Z)(function*(T,A){try{const R=yield pe(T,A);return Jr(T.appConfig,R)}catch(R){throw Me(R)&&409===R.customData.serverCode?yield Xt(T.appConfig):yield Jr(T.appConfig,{fid:A.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Ui(T){return dr.apply(this,arguments)}function dr(){return(dr=(0,D.Z)(function*(T){let A=yield Rt(T.appConfig);for(;1===A.registrationStatus;)yield Ge(100),A=yield Rt(T.appConfig);if(0===A.registrationStatus){const{installationEntry:R,registrationPromise:z}=yield Sn(T);return z||R}return A})).apply(this,arguments)}function Rt(T){return lr(T,A=>{if(!A)throw Re.create("installation-not-found");return ei(A)})}function ei(T){return function Nn(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function xn(T,A){return se.apply(this,arguments)}function se(){return(se=(0,D.Z)(function*({appConfig:T,heartbeatServiceProvider:A},R){const z=te(T,R),ce=ue(T,R),ve=A.getImmediate({optional:!0});if(ve){const Zt=yield ve.getHeartbeatsHeader();Zt&&ce.append("x-firebase-client",Zt)}const nt={method:"POST",headers:ce,body:JSON.stringify({installation:{sdkVersion:J,appId:T.appId}})},Ct=yield me(()=>fetch(z,nt));if(Ct.ok)return Ne(yield Ct.json());throw yield de("Generate Auth Token",Ct)})).apply(this,arguments)}function te(T,{fid:A}){return`${xe(T)}/${A}/authTokens:generate`}function oe(T){return ke.apply(this,arguments)}function ke(){return(ke=(0,D.Z)(function*(T,A=!1){let R;const z=yield lr(T.appConfig,ve=>{if(!Nt(ve))throw Re.create("not-registered");const Ve=ve.authToken;if(!A&&_n(Ve))return ve;if(1===Ve.requestStatus)return R=ee(T,A),ve;{if(!navigator.onLine)throw Re.create("app-offline");const nt=er(ve);return R=tt(T,nt),nt}});return R?yield R:z.authToken})).apply(this,arguments)}function ee(T,A){return ge.apply(this,arguments)}function ge(){return(ge=(0,D.Z)(function*(T,A){let R=yield Ue(T.appConfig);for(;1===R.authToken.requestStatus;)yield Ge(100),R=yield Ue(T.appConfig);const z=R.authToken;return 0===z.requestStatus?oe(T,A):z})).apply(this,arguments)}function Ue(T){return lr(T,A=>{if(!Nt(A))throw Re.create("not-registered");return function Ce(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function tt(T,A){return yt.apply(this,arguments)}function yt(){return(yt=(0,D.Z)(function*(T,A){try{const R=yield xn(T,A),z=Object.assign(Object.assign({},A),{authToken:R});return yield Jr(T.appConfig,z),R}catch(R){if(!Me(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const z=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Jr(T.appConfig,z)}else yield Xt(T.appConfig);throw R}})).apply(this,arguments)}function Nt(T){return void 0!==T&&2===T.registrationStatus}function _n(T){return 2===T.requestStatus&&!function St(T){const A=Date.now();return A<T.creationTime||T.creationTime+T.expiresIn<A+36e5}(T)}function er(T){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:A})}function X(){return(X=(0,D.Z)(function*(T){const A=T,{installationEntry:R,registrationPromise:z}=yield Sn(A);return z?z.catch(console.error):oe(A).catch(console.error),R.fid})).apply(this,arguments)}function Ye(){return(Ye=(0,D.Z)(function*(T,A=!1){const R=T;return yield vt(R),(yield oe(R,A)).token})).apply(this,arguments)}function vt(T){return Be.apply(this,arguments)}function Be(){return(Be=(0,D.Z)(function*(T){const{registrationPromise:A}=yield Sn(T);A&&(yield A)})).apply(this,arguments)}function as(T){return Re.create("missing-app-config-values",{valueName:T})}const Ft="installations",Do=T=>{const A=T.getProvider("app").getImmediate(),R=function sa(T){if(!T||!T.options)throw as("App Configuration");if(!T.name)throw as("App Name");const A=["projectId","apiKey","appId"];for(const R of A)if(!T.options[R])throw as(R);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(A);return{app:A,appConfig:R,heartbeatServiceProvider:(0,F._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},Ba=T=>{const A=T.getProvider("app").getImmediate(),R=(0,F._getProvider)(A,Ft).getImmediate();return{getId:()=>function Q(T){return X.apply(this,arguments)}(R),getToken:ce=>function Pe(T){return Ye.apply(this,arguments)}(R,ce)}};(function Ys(){(0,F._registerComponent)(new q.wA(Ft,Do,"PUBLIC")),(0,F._registerComponent)(new q.wA("installations-internal",Ba,"PRIVATE"))})(),(0,F.registerVersion)(ae,Z),(0,F.registerVersion)(ae,Z,"esm2017");const fr="@firebase/remote-config",Dr=new U.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zl{constructor(A,R,z,ce){this.client=A,this.storage=R,this.storageCache=z,this.logger=ce}isCachedDataFresh(A,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const z=Date.now()-R,ce=z<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${z}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ce}.`),ce}fetch(A){var R=this;return(0,D.Z)(function*(){const[z,ce]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ce&&R.isCachedDataFresh(A.cacheMaxAgeMillis,z))return ce;A.eTag=ce&&ce.eTag;const ve=yield R.client.fetch(A),Ve=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ve.status&&Ve.push(R.storage.setLastSuccessfulFetchResponse(ve)),yield Promise.all(Ve),ve})()}}function Fu(T=navigator){return T.languages&&T.languages[0]||T.language}class Mo{constructor(A,R,z,ce,ve,Ve){this.firebaseInstallations=A,this.sdkVersion=R,this.namespace=z,this.projectId=ce,this.apiKey=ve,this.appId=Ve}fetch(A){var R=this;return(0,D.Z)(function*(){var z,ce,ve;const[Ve,nt]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Zt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,wt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Tt={sdk_version:R.sdkVersion,app_instance_id:Ve,app_instance_id_token:nt,app_id:R.appId,language_code:Fu()},Gr={method:"POST",headers:wt,body:JSON.stringify(Tt)},_r=fetch(Zt,Gr),_s=new Promise((Bs,Wi)=>{A.signal.addEventListener(()=>{const tu=new Error("The operation was aborted.");tu.name="AbortError",Wi(tu)})});let Vs;try{yield Promise.race([_r,_s]),Vs=yield _r}catch(Bs){let Wi="fetch-client-network";throw"AbortError"===(null===(z=Bs)||void 0===z?void 0:z.name)&&(Wi="fetch-timeout"),Dr.create(Wi,{originalErrorMessage:null===(ce=Bs)||void 0===ce?void 0:ce.message})}let fo=Vs.status;const rl=Vs.headers.get("ETag")||void 0;let po,ys;if(200===Vs.status){let Bs;try{Bs=yield Vs.json()}catch(Wi){throw Dr.create("fetch-client-parse",{originalErrorMessage:null===(ve=Wi)||void 0===ve?void 0:ve.message})}po=Bs.entries,ys=Bs.state}if("INSTANCE_STATE_UNSPECIFIED"===ys?fo=500:"NO_CHANGE"===ys?fo=304:("NO_TEMPLATE"===ys||"EMPTY_CONFIG"===ys)&&(po={}),304!==fo&&200!==fo)throw Dr.create("fetch-status",{httpStatus:fo});return{status:fo,eTag:rl,config:po}})()}}class Ms{constructor(A,R){this.client=A,this.storage=R}fetch(A){var R=this;return(0,D.Z)(function*(){const z=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(A,z)})()}attemptFetch(A,{throttleEndTimeMillis:R,backoffCount:z}){var ce=this;return(0,D.Z)(function*(){yield function Ti(T,A){return new Promise((R,z)=>{const ce=Math.max(A-Date.now(),0),ve=setTimeout(R,ce);T.addEventListener(()=>{clearTimeout(ve),z(Dr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,R);try{const ve=yield ce.client.fetch(A);return yield ce.storage.deleteThrottleMetadata(),ve}catch(ve){if(!function Rg(T){if(!(T instanceof U.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ve))throw ve;const Ve={throttleEndTimeMillis:Date.now()+(0,U.$s)(z),backoffCount:z+1};return yield ce.storage.setThrottleMetadata(Ve),ce.attemptFetch(A,Ve)}})()}}class Og{constructor(A,R,z,ce,ve){this.app=A,this._client=R,this._storageCache=z,this._storage=ce,this._logger=ve,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ja(T,A){var R;const z=T.target.error||void 0;return Dr.create(A,{originalErrorMessage:z&&(null===(R=z)||void 0===R?void 0:R.message)})}const oa="app_namespace_store";class hd{constructor(A,R,z,ce=function Lg(){return new Promise((T,A)=>{var R;try{const z=indexedDB.open("firebase_remote_config",1);z.onerror=ce=>{A(ja(ce,"storage-open"))},z.onsuccess=ce=>{T(ce.target.result)},z.onupgradeneeded=ce=>{0===ce.oldVersion&&ce.target.result.createObjectStore(oa,{keyPath:"compositeKey"})}}catch(z){A(Dr.create("storage-open",{originalErrorMessage:null===(R=z)||void 0===R?void 0:R.message}))}})}()){this.appId=A,this.appName=R,this.namespace=z,this.openDbPromise=ce}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var R=this;return(0,D.Z)(function*(){const z=yield R.openDbPromise;return new Promise((ce,ve)=>{var Ve;const Ct=z.transaction([oa],"readonly").objectStore(oa),Zt=R.createCompositeKey(A);try{const wt=Ct.get(Zt);wt.onerror=Tt=>{ve(ja(Tt,"storage-get"))},wt.onsuccess=Tt=>{const Gr=Tt.target.result;ce(Gr?Gr.value:void 0)}}catch(wt){ve(Dr.create("storage-get",{originalErrorMessage:null===(Ve=wt)||void 0===Ve?void 0:Ve.message}))}})})()}set(A,R){var z=this;return(0,D.Z)(function*(){const ce=yield z.openDbPromise;return new Promise((ve,Ve)=>{var nt;const Zt=ce.transaction([oa],"readwrite").objectStore(oa),wt=z.createCompositeKey(A);try{const Tt=Zt.put({compositeKey:wt,value:R});Tt.onerror=Gr=>{Ve(ja(Gr,"storage-set"))},Tt.onsuccess=()=>{ve()}}catch(Tt){Ve(Dr.create("storage-set",{originalErrorMessage:null===(nt=Tt)||void 0===nt?void 0:nt.message}))}})})()}delete(A){var R=this;return(0,D.Z)(function*(){const z=yield R.openDbPromise;return new Promise((ce,ve)=>{var Ve;const Ct=z.transaction([oa],"readwrite").objectStore(oa),Zt=R.createCompositeKey(A);try{const wt=Ct.delete(Zt);wt.onerror=Tt=>{ve(ja(Tt,"storage-delete"))},wt.onsuccess=()=>{ce()}}catch(wt){ve(Dr.create("storage-delete",{originalErrorMessage:null===(Ve=wt)||void 0===Ve?void 0:Ve.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Xs{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,D.Z)(function*(){const R=A.storage.getLastFetchStatus(),z=A.storage.getLastSuccessfulFetchTimestampMillis(),ce=A.storage.getActiveConfig(),ve=yield R;ve&&(A.lastFetchStatus=ve);const Ve=yield z;Ve&&(A.lastSuccessfulFetchTimestampMillis=Ve);const nt=yield ce;nt&&(A.activeConfig=nt)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function yy(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,D.Z)(function*(){if(!(0,U.hl)())return!1;try{return yield(0,U.eu)()}catch{return!1}})).apply(this,arguments)}!function Hl(){(0,F._registerComponent)(new q.wA("remote-config",function T(A,{instanceIdentifier:R}){const z=A.getProvider("app").getImmediate(),ce=A.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Dr.create("registration-window");if(!(0,U.hl)())throw Dr.create("indexed-db-unavailable");const{projectId:ve,apiKey:Ve,appId:nt}=z.options;if(!ve)throw Dr.create("registration-project-id");if(!Ve)throw Dr.create("registration-api-key");if(!nt)throw Dr.create("registration-app-id");const Ct=new hd(nt,z.name,R=R||"firebase"),Zt=new Xs(Ct),wt=new W.Yd(fr);wt.logLevel=W.in.ERROR;const Tt=new Mo(ce,F.SDK_VERSION,R,ve,Ve,nt),Gr=new Ms(Tt,Ct),_r=new Zl(Gr,Ct,Zt,wt),_s=new Og(z,_r,Zt,Ct,wt);return function Vi(T){const A=(0,U.m9)(T);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(_s),_s},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(fr,"0.3.9"),(0,F.registerVersion)(fr,"0.3.9","esm2017")}();const ls="/firebase-messaging-sw.js",eo="/firebase-cloud-messaging-push-scope",Po="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Lu="google.c.a.c_id",Uu="google.c.a.c_l",fd="google.c.a.ts",qa="google.c.a.e";var cs=(()=>{return(T=cs||(cs={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",cs;var T})();function Gn(T){const A=new Uint8Array(T);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vu(T){const R=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),z=atob(R),ce=new Uint8Array(z.length);for(let ve=0;ve<z.length;++ve)ce[ve]=z.charCodeAt(ve);return ce}const Za="fcm_token_details_db",Bu="fcm_token_object_Store";function Ug(T){return ua.apply(this,arguments)}function ua(){return ua=(0,D.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ve=>ve.name).includes(Za))return null;let A=null;return(yield(0,H.X3)(Za,5,{upgrade:(z=(0,D.Z)(function*(ce,ve,Ve,nt){var Ct;if(ve<2||!ce.objectStoreNames.contains(Bu))return;const Zt=nt.objectStore(Bu),wt=yield Zt.index("fcmSenderId").get(T);if(yield Zt.clear(),wt)if(2===ve){const Tt=wt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;A={token:Tt.fcmToken,createTime:null!==(Ct=Tt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:Gn(Tt.vapidKey)}}}else if(3===ve){const Tt=wt;A={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:Gn(Tt.auth),p256dh:Gn(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:Gn(Tt.vapidKey)}}}else if(4===ve){const Tt=wt;A={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:Gn(Tt.auth),p256dh:Gn(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:Gn(Tt.vapidKey)}}}}),function(ve,Ve,nt,Ct){return z.apply(this,arguments)})})).close(),yield(0,H.Lj)(Za),yield(0,H.Lj)("fcm_vapid_details_db"),yield(0,H.Lj)("undefined"),$l(A)?A:null;var z}),ua.apply(this,arguments)}function $l(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:A}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const gn="firebase-messaging-store";let la=null;function qu(){return la||(la=(0,H.X3)("firebase-messaging-database",1,{upgrade:(T,A)=>{0===A&&T.createObjectStore(gn)}})),la}function On(T){return ca.apply(this,arguments)}function ca(){return(ca=(0,D.Z)(function*(T){const A=Ro(T),z=yield(yield qu()).transaction(gn).objectStore(gn).get(A);if(z)return z;{const ce=yield Ug(T.appConfig.senderId);if(ce)return yield da(T,ce),ce}})).apply(this,arguments)}function da(T,A){return ji.apply(this,arguments)}function ji(){return(ji=(0,D.Z)(function*(T,A){const R=Ro(T),ce=(yield qu()).transaction(gn,"readwrite");return yield ce.objectStore(gn).put(A,R),yield ce.done,A})).apply(this,arguments)}function ni(T){return ko.apply(this,arguments)}function ko(){return(ko=(0,D.Z)(function*(T){const A=Ro(T),z=(yield qu()).transaction(gn,"readwrite");yield z.objectStore(gn).delete(A),yield z.done})).apply(this,arguments)}function Ro({appConfig:T}){return T.appId}const ln=new U.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Gl(T,A){return No.apply(this,arguments)}function No(){return(No=(0,D.Z)(function*(T,A){const R=yield hs(T),z=pa(A),ce={method:"POST",headers:R,body:JSON.stringify(z)};let ve;try{ve=yield(yield fetch(xt(T.appConfig),ce)).json()}catch(Ve){throw ln.create("token-subscribe-failed",{errorInfo:Ve})}if(ve.error)throw ln.create("token-subscribe-failed",{errorInfo:ve.error.message});if(!ve.token)throw ln.create("token-subscribe-no-token");return ve.token})).apply(this,arguments)}function gd(T,A){return $r.apply(this,arguments)}function $r(){return($r=(0,D.Z)(function*(T,A){const R=yield hs(T),z=pa(A.subscriptionOptions),ce={method:"PATCH",headers:R,body:JSON.stringify(z)};let ve;try{ve=yield(yield fetch(`${xt(T.appConfig)}/${A.token}`,ce)).json()}catch(Ve){throw ln.create("token-update-failed",{errorInfo:Ve})}if(ve.error)throw ln.create("token-update-failed",{errorInfo:ve.error.message});if(!ve.token)throw ln.create("token-update-no-token");return ve.token})).apply(this,arguments)}function ha(T,A){return to.apply(this,arguments)}function to(){return(to=(0,D.Z)(function*(T,A){const z={method:"DELETE",headers:yield hs(T)};try{const ve=yield(yield fetch(`${xt(T.appConfig)}/${A}`,z)).json();if(ve.error)throw ln.create("token-unsubscribe-failed",{errorInfo:ve.error.message})}catch(ce){throw ln.create("token-unsubscribe-failed",{errorInfo:ce})}})).apply(this,arguments)}function xt({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function hs(T){return fa.apply(this,arguments)}function fa(){return(fa=(0,D.Z)(function*({appConfig:T,installations:A}){const R=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function pa({p256dh:T,auth:A,endpoint:R,vapidKey:z}){const ce={web:{endpoint:R,auth:A,p256dh:T}};return z!==Po&&(ce.web.applicationPubKey=z),ce}const ga=6048e5;function md(T){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,D.Z)(function*(T){const A=yield pr(T.swRegistration,T.vapidKey),R={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:A.endpoint,auth:Gn(A.getKey("auth")),p256dh:Gn(A.getKey("p256dh"))},z=yield On(T.firebaseDependencies);if(z){if(Uo(z.subscriptionOptions,R))return Date.now()>=z.createTime+ga?je(T,{token:z.token,createTime:Date.now(),subscriptionOptions:R}):z.token;try{yield ha(T.firebaseDependencies,z.token)}catch(ce){console.warn(ce)}return Fo(T.firebaseDependencies,R)}return Fo(T.firebaseDependencies,R)})).apply(this,arguments)}function _d(T){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,D.Z)(function*(T){const A=yield On(T.firebaseDependencies);A&&(yield ha(T.firebaseDependencies,A.token),yield ni(T.firebaseDependencies));const R=yield T.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function je(T,A){return qt.apply(this,arguments)}function qt(){return(qt=(0,D.Z)(function*(T,A){try{const R=yield gd(T.firebaseDependencies,A),z=Object.assign(Object.assign({},A),{token:R,createTime:Date.now()});return yield da(T.firebaseDependencies,z),R}catch(R){throw yield _d(T),R}})).apply(this,arguments)}function Fo(T,A){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,D.Z)(function*(T,A){const z={token:yield Gl(T,A),createTime:Date.now(),subscriptionOptions:A};return yield da(T,z),z.token})).apply(this,arguments)}function pr(T,A){return no.apply(this,arguments)}function no(){return(no=(0,D.Z)(function*(T,A){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vu(A)})})).apply(this,arguments)}function Uo(T,A){return A.vapidKey===T.vapidKey&&A.endpoint===T.endpoint&&A.auth===T.auth&&A.p256dh===T.p256dh}function fi(T){const A={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Zu(T,A){if(!A.notification)return;T.notification={};const R=A.notification.title;R&&(T.notification.title=R);const z=A.notification.body;z&&(T.notification.body=z);const ce=A.notification.image;ce&&(T.notification.image=ce)}(A,T),function Hu(T,A){!A.data||(T.data=A.data)}(A,T),function yd(T,A){var R,z,ce,ve,Ve;if(!(A.fcmOptions||null!==(R=A.notification)&&void 0!==R&&R.click_action))return;T.fcmOptions={};const nt=null!==(ce=null===(z=A.fcmOptions)||void 0===z?void 0:z.link)&&void 0!==ce?ce:null===(ve=A.notification)||void 0===ve?void 0:ve.click_action;nt&&(T.fcmOptions.link=nt);const Ct=null===(Ve=A.fcmOptions)||void 0===Ve?void 0:Ve.analytics_label;Ct&&(T.fcmOptions.analyticsLabel=Ct)}(A,T),A}function yf(T){return"object"==typeof T&&!!T&&Lu in T}function vf(T,A){const R=[];for(let z=0;z<T.length;z++)R.push(T.charAt(z)),z<A.length&&R.push(A.charAt(z));return R.join("")}function Sr(T){return ln.create("missing-app-config-values",{valueName:T})}vf("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vf("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class qi{constructor(A,R,z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ce=function Vo(T){if(!T||!T.options)throw Sr("App Configuration Object");if(!T.name)throw Sr("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:R}=T;for(const z of A)if(!R[z])throw Sr(z);return{appName:T.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ce,installations:R,analyticsProvider:z}}_delete(){return Promise.resolve()}}function $u(T){return fs.apply(this,arguments)}function fs(){return(fs=(0,D.Z)(function*(T){var A;try{T.swRegistration=yield navigator.serviceWorker.register(ls,{scope:eo}),T.swRegistration.update().catch(()=>{})}catch(R){throw ln.create("failed-service-worker-registration",{browserErrorMessage:null===(A=R)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function Ps(T,A){return $a.apply(this,arguments)}function $a(){return($a=(0,D.Z)(function*(T,A){if(!A&&!T.swRegistration&&(yield $u(T)),A||!T.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");T.swRegistration=A}})).apply(this,arguments)}function Gu(T,A){return zu.apply(this,arguments)}function zu(){return(zu=(0,D.Z)(function*(T,A){A?T.vapidKey=A:T.vapidKey||(T.vapidKey=Po)})).apply(this,arguments)}function Bo(){return(Bo=(0,D.Z)(function*(T,A){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield Gu(T,A?.vapidKey),yield Ps(T,A?.serviceWorkerRegistration),md(T)})).apply(this,arguments)}function zl(T,A,R){return ma.apply(this,arguments)}function ma(){return(ma=(0,D.Z)(function*(T,A,R){const z=Wu(A);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(z,{message_id:R[Lu],message_name:R[Uu],message_time:R[fd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wu(T){switch(T){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function _a(){return(_a=(0,D.Z)(function*(T,A){const R=A.data;if(!R.isFirebaseMessaging)return;T.onMessageHandler&&R.messageType===cs.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(fi(R)):T.onMessageHandler.next(fi(R)));const z=R.data;yf(z)&&"1"===z[qa]&&(yield zl(T,R.messageType,z))})).apply(this,arguments)}const ro="@firebase/messaging",jo=T=>{const A=new qi(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function bf(T,A){return _a.apply(this,arguments)}(A,R)),A},vd=T=>{const A=T.getProvider("messaging").getImmediate();return{getToken:z=>function wf(T,A){return Bo.apply(this,arguments)}(A,z)}};function Yu(){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,D.Z)(function*(){try{yield(0,U.eu)()}catch{return!1}return typeof window<"u"&&(0,U.hl)()&&(0,U.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wd(){(0,F._registerComponent)(new q.wA("messaging",jo,"PUBLIC")),(0,F._registerComponent)(new q.wA("messaging-internal",vd,"PRIVATE")),(0,F.registerVersion)(ro,"0.9.14"),(0,F.registerVersion)(ro,"0.9.14","esm2017")}();const Yl="analytics",Cd="firebase_id",Ga="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ql="https://www.googletagmanager.com/gtag/js",gr=new W.Yd("@firebase/analytics");function Cf(T){return Promise.all(T.map(A=>A.catch(R=>R)))}function io(T,A){const R=document.createElement("script");R.src=`${Ql}?l=${T}&id=${A}`,R.async=!0,document.head.appendChild(R)}function Ed(T,A,R,z,ce,ve){return Id.apply(this,arguments)}function Id(){return(Id=(0,D.Z)(function*(T,A,R,z,ce,ve){const Ve=z[ce];try{if(Ve)yield A[Ve];else{const Ct=(yield Cf(R)).find(Zt=>Zt.measurementId===ce);Ct&&(yield A[Ct.appId])}}catch(nt){gr.error(nt)}T("config",ce,ve)})).apply(this,arguments)}function so(T,A,R,z,ce){return za.apply(this,arguments)}function za(){return(za=(0,D.Z)(function*(T,A,R,z,ce){try{let ve=[];if(ce&&ce.send_to){let Ve=ce.send_to;Array.isArray(Ve)||(Ve=[Ve]);const nt=yield Cf(R);for(const Ct of Ve){const Zt=nt.find(Tt=>Tt.measurementId===Ct),wt=Zt&&A[Zt.appId];if(!wt){ve=[];break}ve.push(wt)}}0===ve.length&&(ve=Object.values(A)),yield Promise.all(ve),T("event",z,ce||{})}catch(ve){gr.error(ve)}})).apply(this,arguments)}function wy(){const T=window.document.getElementsByTagName("script");for(const A of Object.values(T))if(A.src&&A.src.includes(Ql))return A;return null}const Fr=new U.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Dd=new class Ka{constructor(A={},R=1e3){this.throttleMetadata=A,this.intervalMillis=R}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,R){this.throttleMetadata[A]=R}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Fn(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Mr(T){return wn.apply(this,arguments)}function wn(){return(wn=(0,D.Z)(function*(T){var A;const{appId:R,apiKey:z}=T,ce={method:"GET",headers:Fn(z)},ve=Ga.replace("{app-id}",R),Ve=yield fetch(ve,ce);if(200!==Ve.status&&304!==Ve.status){let nt="";try{const Ct=yield Ve.json();null!==(A=Ct.error)&&void 0!==A&&A.message&&(nt=Ct.error.message)}catch{}throw Fr.create("config-fetch-failed",{httpStatus:Ve.status,responseMessage:nt})}return Ve.json()})).apply(this,arguments)}function tn(T){return ct.apply(this,arguments)}function ct(){return(ct=(0,D.Z)(function*(T,A=Dd,R){const{appId:z,apiKey:ce,measurementId:ve}=T.options;if(!z)throw Fr.create("no-app-id");if(!ce){if(ve)return{measurementId:ve,appId:z};throw Fr.create("no-api-key")}const Ve=A.getThrottleMetadata(z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new ir;return setTimeout((0,D.Z)(function*(){nt.abort()}),void 0!==R?R:6e4),zn({appId:z,apiKey:ce,measurementId:ve},Ve,nt,A)})).apply(this,arguments)}function zn(T,A,R){return oo.apply(this,arguments)}function oo(){return(oo=(0,D.Z)(function*(T,{throttleEndTimeMillis:A,backoffCount:R},z,ce=Dd){const{appId:ve,measurementId:Ve}=T;try{yield Ya(z,A)}catch(nt){if(Ve)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ve} provided in the "measurementId" field in the local Firebase config. [${nt.message}]`),{appId:ve,measurementId:Ve};throw nt}try{const nt=yield Mr(T);return ce.deleteThrottleMetadata(ve),nt}catch(nt){if(!Ho(nt)){if(ce.deleteThrottleMetadata(ve),Ve)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ve} provided in the "measurementId" field in the local Firebase config. [${nt.message}]`),{appId:ve,measurementId:Ve};throw nt}const Ct=503===Number(nt.customData.httpStatus)?(0,U.$s)(R,ce.intervalMillis,30):(0,U.$s)(R,ce.intervalMillis),Zt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:R+1};return ce.setThrottleMetadata(ve,Zt),gr.debug(`Calling attemptFetch again in ${Ct} millis`),zn(T,Zt,z,ce)}})).apply(this,arguments)}function Ya(T,A){return new Promise((R,z)=>{const ce=Math.max(A-Date.now(),0),ve=setTimeout(R,ce);T.addEventListener(()=>{clearTimeout(ve),z(Fr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Ho(T){if(!(T instanceof U.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}class ir{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function yn(){return bn.apply(this,arguments)}function bn(){return(bn=(0,D.Z)(function*(){if(!(0,U.hl)())return gr.warn(Fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,U.eu)()}catch(T){return gr.warn(Fr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Rs(){return(Rs=(0,D.Z)(function*(T,A,R,z,ce,ve,Ve){var nt;const Ct=tn(T);Ct.then(_r=>{R[_r.measurementId]=_r.appId,T.options.measurementId&&_r.measurementId!==T.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${_r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_r=>gr.error(_r)),A.push(Ct);const Zt=yn().then(_r=>{if(_r)return z.getId()}),[wt,Tt]=yield Promise.all([Ct,Zt]);wy()||io(ve,wt.measurementId),ce("js",new Date);const Gr=null!==(nt=Ve?.config)&&void 0!==nt?nt:{};return Gr.origin="firebase",Gr.update=!0,null!=Tt&&(Gr[Cd]=Tt),ce("config",wt.measurementId,Gr),wt.measurementId})).apply(this,arguments)}class wa{constructor(A){this.app=A}_delete(){return delete pi[this.app.options.appId],Promise.resolve()}}let pi={},ao=[];const Jl={};let Lr,Ns,Zi="dataLayer",Qu=!1;function Fs(T,A,R){!function Os(){const T=[];if((0,U.ru)()&&T.push("This is a browser extension environment."),(0,U.zI)()||T.push("Cookies are not available."),T.length>0){const A=T.map((z,ce)=>`(${ce+1}) ${z}`).join(" "),R=Fr.create("invalid-analytics-context",{errorInfo:A});gr.warn(R.message)}}();const z=T.options.appId;if(!z)throw Fr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Fr.create("no-api-key");gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pi[z])throw Fr.create("already-exists",{id:z});if(!Qu){!function va(T){let A=[];Array.isArray(window[T])?A=window[T]:window[T]=A}(Zi);const{wrappedGtag:ve,gtagCore:Ve}=function Bg(T,A,R,z,ce){let ve=function(...Ve){window[z].push(arguments)};return window[ce]&&"function"==typeof window[ce]&&(ve=window[ce]),window[ce]=function Vg(T,A,R,z){function ve(){return(ve=(0,D.Z)(function*(Ve,nt,Ct){try{"event"===Ve?yield so(T,A,R,nt,Ct):"config"===Ve?yield Ed(T,A,R,z,nt,Ct):T("set",nt)}catch(Zt){gr.error(Zt)}})).apply(this,arguments)}return function ce(Ve,nt,Ct){return ve.apply(this,arguments)}}(ve,T,A,R),{gtagCore:ve,wrappedGtag:window[ce]}}(pi,ao,Jl,Zi,"gtag");Ns=ve,Lr=Ve,Qu=!0}return pi[z]=function dt(T,A,R,z,ce,ve,Ve){return Rs.apply(this,arguments)}(T,ao,Jl,A,Lr,Zi,R),new wa(T)}function Qa(){return(Qa=(0,D.Z)(function*(T,A,R,z,ce){if(ce&&ce.global)T("event",R,z);else{const ve=yield A;T("event",R,Object.assign(Object.assign({},z),{send_to:ve}))}})).apply(this,arguments)}function Sd(){return $o.apply(this,arguments)}function $o(){return($o=(0,D.Z)(function*(){if((0,U.ru)()||!(0,U.zI)()||!(0,U.hl)())return!1;try{return yield(0,U.eu)()}catch{return!1}})).apply(this,arguments)}const Ef="@firebase/analytics";!function Cy(){(0,F._registerComponent)(new q.wA(Yl,(A,{options:R})=>Fs(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,F._registerComponent)(new q.wA("analytics-internal",function T(A){try{const R=A.getProvider(Yl).getImmediate();return{logEvent:(z,ce,ve)=>function jg(T,A,R,z){T=(0,U.m9)(T),function gi(T,A,R,z,ce){return Qa.apply(this,arguments)}(Ns,pi[T.app.options.appId],A,R,z).catch(ce=>gr.error(ce))}(R,z,ce,ve)}}catch(R){throw Fr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,F.registerVersion)(Ef,"0.7.10"),(0,F.registerVersion)(Ef,"0.7.10","esm2017")}();var Se=M(4408),ps=M(7565);const gs=new class L extends ps.v{}(class Ur extends Se.o{constructor(A,R){super(A,R),this.scheduler=A,this.work=R}schedule(A,R=0){return R>0?super.schedule(A,R):(this.delay=R,this.state=A,this.scheduler.flush(this),this)}execute(A,R){return R>0||this.closed?super.execute(A,R):this._execute(A,R)}requestAsyncId(A,R,z=0){return null!=z&&z>0||null==z&&this.delay>0?super.requestAsyncId(A,R,z):A.flush(this)}});var sr=M(4986),Xa=M(8505),Tn=M(5363),Di=M(9468);const el=new u.GfV("7.4.1"),or="__angularfire_symbol__analyticsIsSupportedValue",Hi="__angularfire_symbol__analyticsIsSupported",ms="__angularfire_symbol__remoteConfigIsSupportedValue",lo="__angularfire_symbol__remoteConfigIsSupported",co="__angularfire_symbol__messagingIsSupportedValue",tl="__angularfire_symbol__messagingIsSupported";function eu(T,A,R){if(A){if(1===A.length)return A[0];const ve=A.filter(Ve=>Ve.app===R);if(1===ve.length)return ve[0]}return R.container.getProvider(T).getImmediate({optional:!0})}globalThis[Hi]||(globalThis[Hi]=Sd().then(T=>globalThis[or]=T).catch(()=>globalThis[or]=!1)),globalThis[tl]||(globalThis[tl]=Yu().then(T=>globalThis[co]=T).catch(()=>globalThis[co]=!1)),globalThis[lo]||(globalThis[lo]=yy().then(T=>globalThis[ms]=T).catch(()=>globalThis[ms]=!1));const Vr=(T,A)=>{const R=A?[A]:(0,P.C6)(),z=[];return R.forEach(ce=>{ce.container.getProvider(T).instances.forEach(Ve=>{z.includes(Ve)||z.push(Ve)})}),z};function ho(){}class $i{constructor(A,R=gs){this.zone=A,this.delegate=R}now(){return this.delegate.now()}schedule(A,R,z){const ce=this.zone;return this.delegate.schedule(function(Ve){ce.runGuarded(()=>{A.apply(this,[Ve])})},R,z)}}class ic{constructor(A){this.zone=A,this.task=null}call(A,R){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ho,{},ho,ho)),R.pipe((0,Xa.b)({next:z,complete:z,error:z})).subscribe(A).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ba=(()=>{class T{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new $i(Zone.current)),this.insideAngular=R.run(()=>new $i(Zone.current,sr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(R){return new(R||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Gi(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Tf(T){return T.pipe((0,Tn.Q)(Gi().outsideAngular))}function nl(T){return Gi(),function Us(T){return function(R){return(R=R.lift(new ic(T.ngZone))).pipe((0,Di.R)(T.outsideAngular),(0,Tn.Q)(T.insideAngular))}}(Gi())(T)}},5876:(ze,G,M)=>{const P=M(532),D=M(7554),F=M(179),U=M(1036);function q(W,H,ae,Z,$){const J=[].slice.call(arguments,1),Te=J.length,be="function"==typeof J[Te-1];if(!be&&!P())throw new Error("Callback required as last argument");if(!be){if(Te<1)throw new Error("Too few arguments provided");return 1===Te?(ae=H,H=Z=void 0):2===Te&&!H.getContext&&(Z=ae,ae=H,H=void 0),new Promise(function(Ie,Ze){try{const he=D.create(ae,Z);Ie(W(he,H,Z))}catch(he){Ze(he)}})}if(Te<2)throw new Error("Too few arguments provided");2===Te?($=ae,ae=H,H=Z=void 0):3===Te&&(H.getContext&&typeof $>"u"?($=Z,Z=void 0):($=Z,Z=ae,ae=H,H=void 0));try{const Ie=D.create(ae,Z);$(null,W(Ie,H,Z))}catch(Ie){$(Ie)}}G.rT=q.bind(null,F.render),G.hz=q.bind(null,F.renderToDataURL),G.toString=q.bind(null,function(W,H,ae){return U.render(W,ae)})},532:ze=>{ze.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},3012:(ze,G,M)=>{const u=M(4860).getSymbolSize;G.getRowColCoords=function(D){if(1===D)return[];const F=Math.floor(D/7)+2,U=u(D),q=145===U?26:2*Math.ceil((U-13)/(2*F-2)),W=[U-7];for(let H=1;H<F-1;H++)W[H]=W[H-1]-q;return W.push(6),W.reverse()},G.getPositions=function(D){const F=[],U=G.getRowColCoords(D),q=U.length;for(let W=0;W<q;W++)for(let H=0;H<q;H++)0===W&&0===H||0===W&&H===q-1||W===q-1&&0===H||F.push([U[W],U[H]]);return F}},812:(ze,G,M)=>{const u=M(6906),P=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function D(F){this.mode=u.ALPHANUMERIC,this.data=F}D.getBitsLength=function(U){return 11*Math.floor(U/2)+U%2*6},D.prototype.getLength=function(){return this.data.length},D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)},D.prototype.write=function(U){let q;for(q=0;q+2<=this.data.length;q+=2){let W=45*P.indexOf(this.data[q]);W+=P.indexOf(this.data[q+1]),U.put(W,11)}this.data.length%2&&U.put(P.indexOf(this.data[q]),6)},ze.exports=D},3044:ze=>{function G(){this.buffer=[],this.length=0}G.prototype={get:function(M){const u=Math.floor(M/8);return 1==(this.buffer[u]>>>7-M%8&1)},put:function(M,u){for(let P=0;P<u;P++)this.putBit(1==(M>>>u-P-1&1))},getLengthInBits:function(){return this.length},putBit:function(M){const u=Math.floor(this.length/8);this.buffer.length<=u&&this.buffer.push(0),M&&(this.buffer[u]|=128>>>this.length%8),this.length++}},ze.exports=G},1973:ze=>{function G(M){if(!M||M<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=M,this.data=new Uint8Array(M*M),this.reservedBit=new Uint8Array(M*M)}G.prototype.set=function(M,u,P,D){const F=M*this.size+u;this.data[F]=P,D&&(this.reservedBit[F]=!0)},G.prototype.get=function(M,u){return this.data[M*this.size+u]},G.prototype.xor=function(M,u,P){this.data[M*this.size+u]^=P},G.prototype.isReserved=function(M,u){return this.reservedBit[M*this.size+u]},ze.exports=G},1824:(ze,G,M)=>{const u=M(8419),P=M(6906);function D(F){this.mode=P.BYTE,this.data=new Uint8Array(u(F))}D.getBitsLength=function(U){return 8*U},D.prototype.getLength=function(){return this.data.length},D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)},D.prototype.write=function(F){for(let U=0,q=this.data.length;U<q;U++)F.put(this.data[U],8)},ze.exports=D},6194:(ze,G,M)=>{const u=M(9020),P=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],D=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];G.getBlocksCount=function(U,q){switch(q){case u.L:return P[4*(U-1)+0];case u.M:return P[4*(U-1)+1];case u.Q:return P[4*(U-1)+2];case u.H:return P[4*(U-1)+3];default:return}},G.getTotalCodewordsCount=function(U,q){switch(q){case u.L:return D[4*(U-1)+0];case u.M:return D[4*(U-1)+1];case u.Q:return D[4*(U-1)+2];case u.H:return D[4*(U-1)+3];default:return}}},9020:(ze,G)=>{G.L={bit:1},G.M={bit:0},G.Q={bit:3},G.H={bit:2},G.isValid=function(P){return P&&typeof P.bit<"u"&&P.bit>=0&&P.bit<4},G.from=function(P,D){if(G.isValid(P))return P;try{return function M(u){if("string"!=typeof u)throw new Error("Param is not a string");switch(u.toLowerCase()){case"l":case"low":return G.L;case"m":case"medium":return G.M;case"q":case"quartile":return G.Q;case"h":case"high":return G.H;default:throw new Error("Unknown EC Level: "+u)}}(P)}catch{return D}}},9172:(ze,G,M)=>{const u=M(4860).getSymbolSize;G.getPositions=function(F){const U=u(F);return[[0,0],[U-7,0],[0,U-7]]}},611:(ze,G,M)=>{const u=M(4860),F=u.getBCHDigit(1335);G.getEncodedBits=function(q,W){const H=q.bit<<3|W;let ae=H<<10;for(;u.getBCHDigit(ae)-F>=0;)ae^=1335<<u.getBCHDigit(ae)-F;return 21522^(H<<10|ae)}},7794:(ze,G)=>{const M=new Uint8Array(512),u=new Uint8Array(256);(function(){let D=1;for(let F=0;F<255;F++)M[F]=D,u[D]=F,D<<=1,256&D&&(D^=285);for(let F=255;F<512;F++)M[F]=M[F-255]})(),G.log=function(D){if(D<1)throw new Error("log("+D+")");return u[D]},G.exp=function(D){return M[D]},G.mul=function(D,F){return 0===D||0===F?0:M[u[D]+u[F]]}},8043:(ze,G,M)=>{const u=M(6906),P=M(4860);function D(F){this.mode=u.KANJI,this.data=F}D.getBitsLength=function(U){return 13*U},D.prototype.getLength=function(){return this.data.length},D.prototype.getBitsLength=function(){return D.getBitsLength(this.data.length)},D.prototype.write=function(F){let U;for(U=0;U<this.data.length;U++){let q=P.toSJIS(this.data[U]);if(q>=33088&&q<=40956)q-=33088;else{if(!(q>=57408&&q<=60351))throw new Error("Invalid SJIS character: "+this.data[U]+"\nMake sure your charset is UTF-8");q-=49472}q=192*(q>>>8&255)+(255&q),F.put(q,13)}},ze.exports=D},7135:(ze,G)=>{G.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function u(P,D,F){switch(P){case G.Patterns.PATTERN000:return(D+F)%2==0;case G.Patterns.PATTERN001:return D%2==0;case G.Patterns.PATTERN010:return F%3==0;case G.Patterns.PATTERN011:return(D+F)%3==0;case G.Patterns.PATTERN100:return(Math.floor(D/2)+Math.floor(F/3))%2==0;case G.Patterns.PATTERN101:return D*F%2+D*F%3==0;case G.Patterns.PATTERN110:return(D*F%2+D*F%3)%2==0;case G.Patterns.PATTERN111:return(D*F%3+(D+F)%2)%2==0;default:throw new Error("bad maskPattern:"+P)}}G.isValid=function(D){return null!=D&&""!==D&&!isNaN(D)&&D>=0&&D<=7},G.from=function(D){return G.isValid(D)?parseInt(D,10):void 0},G.getPenaltyN1=function(D){const F=D.size;let U=0,q=0,W=0,H=null,ae=null;for(let Z=0;Z<F;Z++){q=W=0,H=ae=null;for(let $=0;$<F;$++){let J=D.get(Z,$);J===H?q++:(q>=5&&(U+=q-5+3),H=J,q=1),J=D.get($,Z),J===ae?W++:(W>=5&&(U+=W-5+3),ae=J,W=1)}q>=5&&(U+=q-5+3),W>=5&&(U+=W-5+3)}return U},G.getPenaltyN2=function(D){const F=D.size;let U=0;for(let q=0;q<F-1;q++)for(let W=0;W<F-1;W++){const H=D.get(q,W)+D.get(q,W+1)+D.get(q+1,W)+D.get(q+1,W+1);(4===H||0===H)&&U++}return 3*U},G.getPenaltyN3=function(D){const F=D.size;let U=0,q=0,W=0;for(let H=0;H<F;H++){q=W=0;for(let ae=0;ae<F;ae++)q=q<<1&2047|D.get(H,ae),ae>=10&&(1488===q||93===q)&&U++,W=W<<1&2047|D.get(ae,H),ae>=10&&(1488===W||93===W)&&U++}return 40*U},G.getPenaltyN4=function(D){let F=0;const U=D.data.length;for(let W=0;W<U;W++)F+=D.data[W];return 10*Math.abs(Math.ceil(100*F/U/5)-10)},G.applyMask=function(D,F){const U=F.size;for(let q=0;q<U;q++)for(let W=0;W<U;W++)F.isReserved(W,q)||F.xor(W,q,u(D,W,q))},G.getBestMask=function(D,F){const U=Object.keys(G.Patterns).length;let q=0,W=1/0;for(let H=0;H<U;H++){F(H),G.applyMask(H,D);const ae=G.getPenaltyN1(D)+G.getPenaltyN2(D)+G.getPenaltyN3(D)+G.getPenaltyN4(D);G.applyMask(H,D),ae<W&&(W=ae,q=H)}return q}},6906:(ze,G,M)=>{const u=M(2316),P=M(4677);G.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},G.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},G.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},G.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},G.MIXED={bit:-1},G.getCharCountIndicator=function(U,q){if(!U.ccBits)throw new Error("Invalid mode: "+U);if(!u.isValid(q))throw new Error("Invalid version: "+q);return q>=1&&q<10?U.ccBits[0]:q<27?U.ccBits[1]:U.ccBits[2]},G.getBestModeForData=function(U){return P.testNumeric(U)?G.NUMERIC:P.testAlphanumeric(U)?G.ALPHANUMERIC:P.testKanji(U)?G.KANJI:G.BYTE},G.toString=function(U){if(U&&U.id)return U.id;throw new Error("Invalid mode")},G.isValid=function(U){return U&&U.bit&&U.ccBits},G.from=function(U,q){if(G.isValid(U))return U;try{return function D(F){if("string"!=typeof F)throw new Error("Param is not a string");switch(F.toLowerCase()){case"numeric":return G.NUMERIC;case"alphanumeric":return G.ALPHANUMERIC;case"kanji":return G.KANJI;case"byte":return G.BYTE;default:throw new Error("Unknown mode: "+F)}}(U)}catch{return q}}},6002:(ze,G,M)=>{const u=M(6906);function P(D){this.mode=u.NUMERIC,this.data=D.toString()}P.getBitsLength=function(F){return 10*Math.floor(F/3)+(F%3?F%3*3+1:0)},P.prototype.getLength=function(){return this.data.length},P.prototype.getBitsLength=function(){return P.getBitsLength(this.data.length)},P.prototype.write=function(F){let U,q,W;for(U=0;U+3<=this.data.length;U+=3)q=this.data.substr(U,3),W=parseInt(q,10),F.put(W,10);const H=this.data.length-U;H>0&&(q=this.data.substr(U),W=parseInt(q,10),F.put(W,3*H+1))},ze.exports=P},7793:(ze,G,M)=>{const u=M(7794);G.mul=function(D,F){const U=new Uint8Array(D.length+F.length-1);for(let q=0;q<D.length;q++)for(let W=0;W<F.length;W++)U[q+W]^=u.mul(D[q],F[W]);return U},G.mod=function(D,F){let U=new Uint8Array(D);for(;U.length-F.length>=0;){const q=U[0];for(let H=0;H<F.length;H++)U[H]^=u.mul(F[H],q);let W=0;for(;W<U.length&&0===U[W];)W++;U=U.slice(W)}return U},G.generateECPolynomial=function(D){let F=new Uint8Array([1]);for(let U=0;U<D;U++)F=G.mul(F,new Uint8Array([1,u.exp(U)]));return F}},7554:(ze,G,M)=>{const u=M(4860),P=M(9020),D=M(3044),F=M(1973),U=M(3012),q=M(9172),W=M(7135),H=M(6194),ae=M(8098),Z=M(6602),$=M(611),J=M(6906),Te=M(9465);function fe(de,Oe,ie){const ue=de.size,me=$.getEncodedBits(Oe,ie);let K,ne;for(K=0;K<15;K++)ne=1==(me>>K&1),de.set(K<6?K:K<8?K+1:ue-15+K,8,ne,!0),de.set(8,K<8?ue-K-1:K<9?15-K-1+1:15-K-1,ne,!0);de.set(ue-8,8,1,!0)}function Ne(de,Oe,ie,ue){let me;if(Array.isArray(de))me=Te.fromArray(de);else{if("string"!=typeof de)throw new Error("Invalid data");{let we=Oe;if(!we){const Ge=Te.rawSplit(de);we=Z.getBestVersionForData(Ge,ie)}me=Te.fromString(de,we||40)}}const K=Z.getBestVersionForData(me,ie);if(!K)throw new Error("The amount of data is too big to be stored in a QR Code");if(Oe){if(Oe<K)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+K+".\n")}else Oe=K;const ne=function Me(de,Oe,ie){const ue=new D;ie.forEach(function(pe){ue.put(pe.mode.bit,4),ue.put(pe.getLength(),J.getCharCountIndicator(pe.mode,de)),pe.write(ue)});const ne=8*(u.getSymbolTotalCodewords(de)-H.getTotalCodewordsCount(de,Oe));for(ue.getLengthInBits()+4<=ne&&ue.put(0,4);ue.getLengthInBits()%8!=0;)ue.putBit(0);const le=(ne-ue.getLengthInBits())/8;for(let pe=0;pe<le;pe++)ue.put(pe%2?17:236,8);return function xe(de,Oe,ie){const ue=u.getSymbolTotalCodewords(Oe),K=ue-H.getTotalCodewordsCount(Oe,ie),ne=H.getBlocksCount(Oe,ie),pe=ne-ue%ne,we=Math.floor(ue/ne),Ge=Math.floor(K/ne),mt=Ge+1,$t=we-Ge,Lt=new ae($t);let Qe=0;const en=new Array(ne),Rn=new Array(ne);let on=0;const Qt=new Uint8Array(de.buffer);for(let Vn=0;Vn<ne;Vn++){const vn=Vn<pe?Ge:mt;en[Vn]=Qt.slice(Qe,Qe+vn),Rn[Vn]=Lt.encode(en[Vn]),Qe+=vn,on=Math.max(on,vn)}const Ot=new Uint8Array(ue);let Jt,Zn,Kt=0;for(Jt=0;Jt<on;Jt++)for(Zn=0;Zn<ne;Zn++)Jt<en[Zn].length&&(Ot[Kt++]=en[Zn][Jt]);for(Jt=0;Jt<$t;Jt++)for(Zn=0;Zn<ne;Zn++)Ot[Kt++]=Rn[Zn][Jt];return Ot}(ue,de,Oe)}(Oe,ie,me),le=u.getSymbolSize(Oe),pe=new F(le);return function be(de,Oe){const ie=de.size,ue=q.getPositions(Oe);for(let me=0;me<ue.length;me++){const K=ue[me][0],ne=ue[me][1];for(let le=-1;le<=7;le++)if(!(K+le<=-1||ie<=K+le))for(let pe=-1;pe<=7;pe++)ne+pe<=-1||ie<=ne+pe||de.set(K+le,ne+pe,le>=0&&le<=6&&(0===pe||6===pe)||pe>=0&&pe<=6&&(0===le||6===le)||le>=2&&le<=4&&pe>=2&&pe<=4,!0)}}(pe,Oe),function Ie(de){const Oe=de.size;for(let ie=8;ie<Oe-8;ie++){const ue=ie%2==0;de.set(ie,6,ue,!0),de.set(6,ie,ue,!0)}}(pe),function Ze(de,Oe){const ie=U.getPositions(Oe);for(let ue=0;ue<ie.length;ue++){const me=ie[ue][0],K=ie[ue][1];for(let ne=-2;ne<=2;ne++)for(let le=-2;le<=2;le++)de.set(me+ne,K+le,-2===ne||2===ne||-2===le||2===le||0===ne&&0===le,!0)}}(pe,Oe),fe(pe,ie,0),Oe>=7&&function he(de,Oe){const ie=de.size,ue=Z.getEncodedBits(Oe);let me,K,ne;for(let le=0;le<18;le++)me=Math.floor(le/3),K=le%3+ie-8-3,ne=1==(ue>>le&1),de.set(me,K,ne,!0),de.set(K,me,ne,!0)}(pe,Oe),function Re(de,Oe){const ie=de.size;let ue=-1,me=ie-1,K=7,ne=0;for(let le=ie-1;le>0;le-=2)for(6===le&&le--;;){for(let pe=0;pe<2;pe++)if(!de.isReserved(me,le-pe)){let we=!1;ne<Oe.length&&(we=1==(Oe[ne]>>>K&1)),de.set(me,le-pe,we),K--,-1===K&&(ne++,K=7)}if(me+=ue,me<0||ie<=me){me-=ue,ue=-ue;break}}}(pe,ne),isNaN(ue)&&(ue=W.getBestMask(pe,fe.bind(null,pe,ie))),W.applyMask(ue,pe),fe(pe,ie,ue),{modules:pe,version:Oe,errorCorrectionLevel:ie,maskPattern:ue,segments:me}}G.create=function(Oe,ie){if(typeof Oe>"u"||""===Oe)throw new Error("No input text");let me,K,ue=P.M;return typeof ie<"u"&&(ue=P.from(ie.errorCorrectionLevel,P.M),me=Z.from(ie.version),K=W.from(ie.maskPattern),ie.toSJISFunc&&u.setToSJISFunction(ie.toSJISFunc)),Ne(Oe,me,ue,K)}},8098:(ze,G,M)=>{const u=M(7793);function P(D){this.genPoly=void 0,this.degree=D,this.degree&&this.initialize(this.degree)}P.prototype.initialize=function(F){this.degree=F,this.genPoly=u.generateECPolynomial(this.degree)},P.prototype.encode=function(F){if(!this.genPoly)throw new Error("Encoder not initialized");const U=new Uint8Array(F.length+this.degree);U.set(F);const q=u.mod(U,this.genPoly),W=this.degree-q.length;if(W>0){const H=new Uint8Array(this.degree);return H.set(q,W),H}return q},ze.exports=P},4677:(ze,G)=>{const M="[0-9]+";let P="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";P=P.replace(/u/g,"\\u");const D="(?:(?![A-Z0-9 $%*+\\-./:]|"+P+")(?:.|[\r\n]))+";G.KANJI=new RegExp(P,"g"),G.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),G.BYTE=new RegExp(D,"g"),G.NUMERIC=new RegExp(M,"g"),G.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const F=new RegExp("^"+P+"$"),U=new RegExp("^"+M+"$"),q=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");G.testKanji=function(H){return F.test(H)},G.testNumeric=function(H){return U.test(H)},G.testAlphanumeric=function(H){return q.test(H)}},9465:(ze,G,M)=>{const u=M(6906),P=M(6002),D=M(812),F=M(1824),U=M(8043),q=M(4677),W=M(4860),H=M(4901);function ae(he){return unescape(encodeURIComponent(he)).length}function Z(he,fe,Re){const Me=[];let xe;for(;null!==(xe=he.exec(Re));)Me.push({data:xe[0],index:xe.index,mode:fe,length:xe[0].length});return Me}function $(he){const fe=Z(q.NUMERIC,u.NUMERIC,he),Re=Z(q.ALPHANUMERIC,u.ALPHANUMERIC,he);let Me,xe;return W.isKanjiModeEnabled()?(Me=Z(q.BYTE,u.BYTE,he),xe=Z(q.KANJI,u.KANJI,he)):(Me=Z(q.BYTE_KANJI,u.BYTE,he),xe=[]),fe.concat(Re,Me,xe).sort(function(de,Oe){return de.index-Oe.index}).map(function(de){return{data:de.data,mode:de.mode,length:de.length}})}function J(he,fe){switch(fe){case u.NUMERIC:return P.getBitsLength(he);case u.ALPHANUMERIC:return D.getBitsLength(he);case u.KANJI:return U.getBitsLength(he);case u.BYTE:return F.getBitsLength(he)}}function Ze(he,fe){let Re;const Me=u.getBestModeForData(he);if(Re=u.from(fe,Me),Re!==u.BYTE&&Re.bit<Me.bit)throw new Error('"'+he+'" cannot be encoded with mode '+u.toString(Re)+".\n Suggested mode is: "+u.toString(Me));switch(Re===u.KANJI&&!W.isKanjiModeEnabled()&&(Re=u.BYTE),Re){case u.NUMERIC:return new P(he);case u.ALPHANUMERIC:return new D(he);case u.KANJI:return new U(he);case u.BYTE:return new F(he)}}G.fromArray=function(fe){return fe.reduce(function(Re,Me){return"string"==typeof Me?Re.push(Ze(Me,null)):Me.data&&Re.push(Ze(Me.data,Me.mode)),Re},[])},G.fromString=function(fe,Re){const xe=function be(he){const fe=[];for(let Re=0;Re<he.length;Re++){const Me=he[Re];switch(Me.mode){case u.NUMERIC:fe.push([Me,{data:Me.data,mode:u.ALPHANUMERIC,length:Me.length},{data:Me.data,mode:u.BYTE,length:Me.length}]);break;case u.ALPHANUMERIC:fe.push([Me,{data:Me.data,mode:u.BYTE,length:Me.length}]);break;case u.KANJI:fe.push([Me,{data:Me.data,mode:u.BYTE,length:ae(Me.data)}]);break;case u.BYTE:fe.push([{data:Me.data,mode:u.BYTE,length:ae(Me.data)}])}}return fe}($(fe,W.isKanjiModeEnabled())),Ne=function Ie(he,fe){const Re={},Me={start:{}};let xe=["start"];for(let Ne=0;Ne<he.length;Ne++){const de=he[Ne],Oe=[];for(let ie=0;ie<de.length;ie++){const ue=de[ie],me=""+Ne+ie;Oe.push(me),Re[me]={node:ue,lastCount:0},Me[me]={};for(let K=0;K<xe.length;K++){const ne=xe[K];Re[ne]&&Re[ne].node.mode===ue.mode?(Me[ne][me]=J(Re[ne].lastCount+ue.length,ue.mode)-J(Re[ne].lastCount,ue.mode),Re[ne].lastCount+=ue.length):(Re[ne]&&(Re[ne].lastCount=ue.length),Me[ne][me]=J(ue.length,ue.mode)+4+u.getCharCountIndicator(ue.mode,fe))}}xe=Oe}for(let Ne=0;Ne<xe.length;Ne++)Me[xe[Ne]].end=0;return{map:Me,table:Re}}(xe,Re),de=H.find_path(Ne.map,"start","end"),Oe=[];for(let ie=1;ie<de.length-1;ie++)Oe.push(Ne.table[de[ie]].node);return G.fromArray(function Te(he){return he.reduce(function(fe,Re){const Me=fe.length-1>=0?fe[fe.length-1]:null;return Me&&Me.mode===Re.mode?(fe[fe.length-1].data+=Re.data,fe):(fe.push(Re),fe)},[])}(Oe))},G.rawSplit=function(fe){return G.fromArray($(fe,W.isKanjiModeEnabled()))}},4860:(ze,G)=>{let M;const u=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];G.getSymbolSize=function(D){if(!D)throw new Error('"version" cannot be null or undefined');if(D<1||D>40)throw new Error('"version" should be in range from 1 to 40');return 4*D+17},G.getSymbolTotalCodewords=function(D){return u[D]},G.getBCHDigit=function(P){let D=0;for(;0!==P;)D++,P>>>=1;return D},G.setToSJISFunction=function(D){if("function"!=typeof D)throw new Error('"toSJISFunc" is not a valid function.');M=D},G.isKanjiModeEnabled=function(){return typeof M<"u"},G.toSJIS=function(D){return M(D)}},2316:(ze,G)=>{G.isValid=function(u){return!isNaN(u)&&u>=1&&u<=40}},6602:(ze,G,M)=>{const u=M(4860),P=M(6194),D=M(9020),F=M(6906),U=M(2316),W=u.getBCHDigit(7973);function ae(J,Te){return F.getCharCountIndicator(J,Te)+4}function Z(J,Te){let be=0;return J.forEach(function(Ie){be+=ae(Ie.mode,Te)+Ie.getBitsLength()}),be}G.from=function(Te,be){return U.isValid(Te)?parseInt(Te,10):be},G.getCapacity=function(Te,be,Ie){if(!U.isValid(Te))throw new Error("Invalid QR Code version");typeof Ie>"u"&&(Ie=F.BYTE);const fe=8*(u.getSymbolTotalCodewords(Te)-P.getTotalCodewordsCount(Te,be));if(Ie===F.MIXED)return fe;const Re=fe-ae(Ie,Te);switch(Ie){case F.NUMERIC:return Math.floor(Re/10*3);case F.ALPHANUMERIC:return Math.floor(Re/11*2);case F.KANJI:return Math.floor(Re/13);default:return Math.floor(Re/8)}},G.getBestVersionForData=function(Te,be){let Ie;const Ze=D.from(be,D.M);if(Array.isArray(Te)){if(Te.length>1)return function $(J,Te){for(let be=1;be<=40;be++)if(Z(J,be)<=G.getCapacity(be,Te,F.MIXED))return be}(Te,Ze);if(0===Te.length)return 1;Ie=Te[0]}else Ie=Te;return function H(J,Te,be){for(let Ie=1;Ie<=40;Ie++)if(Te<=G.getCapacity(Ie,be,J))return Ie}(Ie.mode,Ie.getLength(),Ze)},G.getEncodedBits=function(Te){if(!U.isValid(Te)||Te<7)throw new Error("Invalid QR Code version");let be=Te<<12;for(;u.getBCHDigit(be)-W>=0;)be^=7973<<u.getBCHDigit(be)-W;return Te<<12|be}},179:(ze,G,M)=>{const u=M(714);G.render=function(U,q,W){let H=W,ae=q;typeof H>"u"&&(!q||!q.getContext)&&(H=q,q=void 0),q||(ae=function D(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),H=u.getOptions(H);const Z=u.getImageWidth(U.modules.size,H),$=ae.getContext("2d"),J=$.createImageData(Z,Z);return u.qrToImageData(J.data,U,H),function P(F,U,q){F.clearRect(0,0,U.width,U.height),U.style||(U.style={}),U.height=q,U.width=q,U.style.height=q+"px",U.style.width=q+"px"}($,ae,Z),$.putImageData(J,0,0),ae},G.renderToDataURL=function(U,q,W){let H=W;return typeof H>"u"&&(!q||!q.getContext)&&(H=q,q=void 0),H||(H={}),G.render(U,q,H).toDataURL(H.type||"image/png",(H.rendererOpts||{}).quality)}},1036:(ze,G,M)=>{const u=M(714);function P(U,q){const W=U.a/255,H=q+'="'+U.hex+'"';return W<1?H+" "+q+'-opacity="'+W.toFixed(2).slice(1)+'"':H}function D(U,q,W){let H=U+q;return typeof W<"u"&&(H+=" "+W),H}G.render=function(q,W,H){const ae=u.getOptions(W),Z=q.modules.size,$=q.modules.data,J=Z+2*ae.margin,Te=ae.color.light.a?"<path "+P(ae.color.light,"fill")+' d="M0 0h'+J+"v"+J+'H0z"/>':"",be="<path "+P(ae.color.dark,"stroke")+' d="'+function F(U,q,W){let H="",ae=0,Z=!1,$=0;for(let J=0;J<U.length;J++){const Te=Math.floor(J%q),be=Math.floor(J/q);!Te&&!Z&&(Z=!0),U[J]?($++,J>0&&Te>0&&U[J-1]||(H+=Z?D("M",Te+W,.5+be+W):D("m",ae,0),ae=0,Z=!1),Te+1<q&&U[J+1]||(H+=D("h",$),$=0)):ae++}return H}($,Z,ae.margin)+'"/>',he='<svg xmlns="http://www.w3.org/2000/svg" '+(ae.width?'width="'+ae.width+'" height="'+ae.width+'" ':"")+'viewBox="0 0 '+J+" "+J+'" shape-rendering="crispEdges">'+Te+be+"</svg>\n";return"function"==typeof H&&H(null,he),he}},714:(ze,G)=>{function M(u){if("number"==typeof u&&(u=u.toString()),"string"!=typeof u)throw new Error("Color should be defined as hex string");let P=u.slice().replace("#","").split("");if(P.length<3||5===P.length||P.length>8)throw new Error("Invalid hex color: "+u);(3===P.length||4===P.length)&&(P=Array.prototype.concat.apply([],P.map(function(F){return[F,F]}))),6===P.length&&P.push("F","F");const D=parseInt(P.join(""),16);return{r:D>>24&255,g:D>>16&255,b:D>>8&255,a:255&D,hex:"#"+P.slice(0,6).join("")}}G.getOptions=function(P){P||(P={}),P.color||(P.color={});const F=P.width&&P.width>=21?P.width:void 0;return{width:F,scale:F?4:P.scale||4,margin:typeof P.margin>"u"||null===P.margin||P.margin<0?4:P.margin,color:{dark:M(P.color.dark||"#000000ff"),light:M(P.color.light||"#ffffffff")},type:P.type,rendererOpts:P.rendererOpts||{}}},G.getScale=function(P,D){return D.width&&D.width>=P+2*D.margin?D.width/(P+2*D.margin):D.scale},G.getImageWidth=function(P,D){const F=G.getScale(P,D);return Math.floor((P+2*D.margin)*F)},G.qrToImageData=function(P,D,F){const U=D.modules.size,q=D.modules.data,W=G.getScale(U,F),H=Math.floor((U+2*F.margin)*W),ae=F.margin*W,Z=[F.color.light,F.color.dark];for(let $=0;$<H;$++)for(let J=0;J<H;J++){let Te=4*($*H+J),be=F.color.light;$>=ae&&J>=ae&&$<H-ae&&J<H-ae&&(be=Z[q[Math.floor(($-ae)/W)*U+Math.floor((J-ae)/W)]?1:0]),P[Te++]=be.r,P[Te++]=be.g,P[Te++]=be.b,P[Te]=be.a}}},2309:(ze,G,M)=>{"use strict";M.d(G,{$:()=>xt,A:()=>$,B:()=>be,G:()=>Ba,H:()=>nr,J:()=>Ms,L:()=>_n,M:()=>Bi,N:()=>mf,P:()=>Hi,Q:()=>Lu,R:()=>Cy,T:()=>Uu,U:()=>Po,V:()=>cs,W:()=>Gn,X:()=>Ug,Y:()=>ds,Z:()=>Gl,_:()=>gd,a:()=>Wa,a0:()=>md,a1:()=>_d,a2:()=>je,a3:()=>Fo,a4:()=>pr,a5:()=>Uo,a6:()=>Zu,a7:()=>Hu,a8:()=>yf,a9:()=>vf,aA:()=>ys,aB:()=>_s,aC:()=>T,aD:()=>Pd,aE:()=>tr,aI:()=>Fn,aL:()=>qa,aa:()=>$u,ab:()=>Ps,ac:()=>Gu,af:()=>zl,ag:()=>Wu,ah:()=>bf,ak:()=>gn,al:()=>xr,an:()=>Ql,ao:()=>Id,ap:()=>pn,aq:()=>me,ar:()=>Dt,as:()=>vt,at:()=>Me,au:()=>cc,av:()=>sc,aw:()=>xe,ax:()=>ie,ay:()=>ne,az:()=>St,b:()=>Fr,c:()=>eu,d:()=>ic,e:()=>ho,f:()=>z,g:()=>Zt,h:()=>Ve,i:()=>Fs,j:()=>Gr,k:()=>nu,l:()=>gs,m:()=>Py,n:()=>Jb,o:()=>H,r:()=>sr,s:()=>ps,u:()=>el});var u=M(5861),P=M(2090),D=M(9681),F=M(655),U=M(1877),q=M(4859);const H={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const be=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ie=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fe=new U.Yd("@firebase/auth");function Re(w,...g){fe.logLevel<=U.in.ERROR&&fe.error(`Auth (${D.SDK_VERSION}): ${w}`,...g)}function Me(w,...g){throw Oe(w,...g)}function xe(w,...g){return Oe(w,...g)}function Ne(w,g,_){const C=Object.assign(Object.assign({},Ie()),{[g]:_});return new P.LL("auth","Firebase",C).create(g,{appName:w.name})}function de(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Me(w,"argument-error"),Ne(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(w,...g){if("string"!=typeof w){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return Ze.create(w,...g)}function ie(w,g,..._){if(!w)throw Oe(g,..._)}function ue(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Re(g),new Error(g)}function me(w,g){w||ue(g)}const K=new Map;function ne(w){me(w instanceof Function,"Expected a class definition");let g=K.get(w);return g?(me(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,K.set(w,g),g)}function we(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ge(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Qe{constructor(g,_){this.shortDelay=g,this.longDelay=_,me(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ge()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function en(w,g){me(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Rn{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new Qe(3e4,6e4);function Ot(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Kt(w,g,_,C){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,u.Z)(function*(w,g,_,C,k={}){return Zn(w,k,(0,u.Z)(function*(){let V={},_e={};C&&("GET"===g?_e=C:V={body:JSON.stringify(C)});const qe=(0,P.xO)(Object.assign({key:w.config.apiKey},_e)).slice(1),ot=yield w._getAdditionalHeaders();return ot["Content-Type"]="application/json",w.languageCode&&(ot["X-Firebase-Locale"]=w.languageCode),Rn.fetch()(Ei(w,w.config.apiHost,_,qe),Object.assign({method:g,headers:ot,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function Zn(w,g,_){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,u.Z)(function*(w,g,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},on),g);try{const k=new Li(w),V=yield Promise.race([_(),k.promise]);k.clearNetworkTimeout();const _e=yield V.json();if("needConfirmation"in _e)throw Hn(w,"account-exists-with-different-credential",_e);if(V.ok&&!("errorMessage"in _e))return _e;{const qe=V.ok?_e.errorMessage:_e.error.message,[ot,Et]=qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ot)throw Hn(w,"credential-already-in-use",_e);if("EMAIL_EXISTS"===ot)throw Hn(w,"email-already-in-use",_e);if("USER_DISABLED"===ot)throw Hn(w,"user-disabled",_e);const zt=C[ot]||ot.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Ne(w,zt,Et);Me(w,zt)}}catch(k){if(k instanceof P.ZR)throw k;Me(w,"network-request-failed")}})).apply(this,arguments)}function vn(w,g,_,C){return ss.apply(this,arguments)}function ss(){return(ss=(0,u.Z)(function*(w,g,_,C,k={}){const V=yield Kt(w,g,_,C,k);return"mfaPendingCredential"in V&&Me(w,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function Ei(w,g,_,C){const k=`${g}${_}?${C}`;return w.config.emulator?en(w.config,k):`${w.config.apiScheme}://${k}`}class Li{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(xe(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(w,g,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const k=xe(w,g,C);return k.customData._tokenResponse=_,k}function gt(){return(gt=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Jr(w,g){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Xt(w,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function lr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function cr(){return(cr=(0,u.Z)(function*(w,g=!1){const _=(0,P.m9)(w),C=yield _.getIdToken(g),k=Gt(C);ie(k&&k.exp&&k.auth_time&&k.iat,_.auth,"internal-error");const V="object"==typeof k.firebase?k.firebase:void 0,_e=V?.sign_in_provider;return{claims:k,token:C,authTime:lr(As(k.auth_time)),issuedAtTime:lr(As(k.iat)),expirationTime:lr(As(k.exp)),signInProvider:_e||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function As(w){return 1e3*Number(w)}function Gt(w){const[g,_,C]=w.split(".");if(void 0===g||void 0===_||void 0===C)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,P.tV)(_);return k?JSON.parse(k):(Re("Failed to decode base64 JWT payload"),null)}catch(k){return Re("Caught error parsing JWT payload as JSON",k),null}}function at(w,g){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof P.ZR&&dr(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function dr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Rt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const k=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class ei{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(w){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(w){var g;const _=w.auth,C=yield w.getIdToken(),k=yield at(w,Xt(_,{idToken:C}));ie(k?.users.length,_,"internal-error");const V=k.users[0];w._notifyReloadListener(V);const _e=null!==(g=V.providerUserInfo)&&void 0!==g&&g.length?ke(V.providerUserInfo):[],qe=oe(w.providerData,_e),zt=!!w.isAnonymous&&!(w.email&&V.passwordHash||qe?.length),Pn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:qe,metadata:new ei(V.createdAt,V.lastLoginAt),isAnonymous:zt};Object.assign(w,Pn)})).apply(this,arguments)}function te(){return(te=(0,u.Z)(function*(w){const g=(0,P.m9)(w);yield Nn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function oe(w,g){return[...w.filter(C=>!g.some(k=>k.providerId===C.providerId)),...g]}function ke(w){return w.map(g=>{var{providerId:_}=g,C=(0,F._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function ge(){return(ge=(0,u.Z)(function*(w,g){const _=yield Zn(w,{},(0,u.Z)(function*(){const C=(0,P.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:k,apiKey:V}=w.config,_e=Ei(w,k,"/v1/token",`key=${V}`),qe=yield w._getAdditionalHeaders();return qe["Content-Type"]="application/x-www-form-urlencoded",Rn.fetch()(_e,{method:"POST",headers:qe,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ue{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(typeof g.idToken<"u","internal-error"),ie(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Je(w){const g=Gt(w);return ie(g,"internal-error"),ie(typeof g.exp<"u","internal-error"),ie(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,u.Z)(function*(){return ie(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,u.Z)(function*(){const{accessToken:k,refreshToken:V,expiresIn:_e}=yield function ee(w,g){return ge.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(k,V,Number(_e))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:k,expirationTime:V}=_,_e=new Ue;return C&&(ie("string"==typeof C,"internal-error",{appName:g}),_e.refreshToken=C),k&&(ie("string"==typeof k,"internal-error",{appName:g}),_e.accessToken=k),V&&(ie("number"==typeof V,"internal-error",{appName:g}),_e.expirationTime=V),_e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ue,this.toJSON())}_performRefresh(){return ue("not implemented")}}function tt(w,g){ie("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class yt{constructor(g){var{uid:_,auth:C,stsTokenManager:k}=g,V=(0,F._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new ei(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,u.Z)(function*(){const C=yield at(_,_.stsTokenManager.getToken(_.auth,g));return ie(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function Sn(w){return cr.apply(this,arguments)}(this,g)}reload(){return function se(w){return te.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new yt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,u.Z)(function*(){let k=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),k=!0),_&&(yield Nn(C)),yield C.auth._persistUserIfCurrent(C),k&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,u.Z)(function*(){const _=yield g.getIdToken();return yield at(g,function os(w,g){return gt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,k,V,_e,qe,ot,Et,zt;const Pn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Wn=null!==(k=_.email)&&void 0!==k?k:void 0,zr=null!==(V=_.phoneNumber)&&void 0!==V?V:void 0,go=null!==(_e=_.photoURL)&&void 0!==_e?_e:void 0,hc=null!==(qe=_.tenantId)&&void 0!==qe?qe:void 0,sl=null!==(ot=_._redirectEventId)&&void 0!==ot?ot:void 0,fc=null!==(Et=_.createdAt)&&void 0!==Et?Et:void 0,Mf=null!==(zt=_.lastLoginAt)&&void 0!==zt?zt:void 0,{uid:Bd,emailVerified:Pf,isAnonymous:Ea,providerData:pc,stsTokenManager:Ia}=_;ie(Bd&&Ia,g,"internal-error");const Xb=Ue.fromJSON(this.name,Ia);ie("string"==typeof Bd,g,"internal-error"),tt(Pn,g.name),tt(Wn,g.name),ie("boolean"==typeof Pf,g,"internal-error"),ie("boolean"==typeof Ea,g,"internal-error"),tt(zr,g.name),tt(go,g.name),tt(hc,g.name),tt(sl,g.name),tt(fc,g.name),tt(Mf,g.name);const jd=new yt({uid:Bd,auth:g,email:Wn,emailVerified:Pf,displayName:Pn,isAnonymous:Ea,photoURL:go,phoneNumber:zr,tenantId:hc,stsTokenManager:Xb,createdAt:fc,lastLoginAt:Mf});return pc&&Array.isArray(pc)&&(jd.providerData=pc.map(kf=>Object.assign({},kf))),sl&&(jd._redirectEventId=sl),jd}static _fromIdTokenResponse(g,_,C=!1){return(0,u.Z)(function*(){const k=new Ue;k.updateFromServerResponse(_);const V=new yt({uid:_.localId,auth:g,stsTokenManager:k,isAnonymous:C});return yield Nn(V),V})()}}const _n=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,C){var k=this;return(0,u.Z)(function*(){k.storage[_]=C})()}_get(_){var C=this;return(0,u.Z)(function*(){const k=C.storage[_];return void 0===k?null:k})()}_remove(_){var C=this;return(0,u.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function St(w,g,_){return`firebase:${w}:${g}:${_}`}class er{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:k,name:V}=this.auth;this.fullUserKey=St(this.userKey,k.apiKey,V),this.fullPersistenceKey=St("persistence",k.apiKey,V),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?yt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,u.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,u.Z)(function*(){if(!_.length)return new er(ne(_n),g,C);const k=(yield Promise.all(_.map(function(){var Et=(0,u.Z)(function*(zt){if(yield zt._isAvailable())return zt});return function(zt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let V=k[0]||ne(_n);const _e=St(C,g.config.apiKey,g.name);let qe=null;for(const Et of _)try{const zt=yield Et._get(_e);if(zt){const Pn=yt._fromJSON(g,zt);Et!==V&&(qe=Pn),V=Et;break}}catch{}const ot=k.filter(Et=>Et._shouldAllowMigration);return V._shouldAllowMigration&&ot.length?(V=ot[0],qe&&(yield V._set(_e,qe.toJSON())),yield Promise.all(_.map(function(){var Et=(0,u.Z)(function*(zt){if(zt!==V)try{yield zt._remove(_e)}catch{}});return function(zt){return Et.apply(this,arguments)}}())),new er(V,g,C)):new er(V,g,C)})()}}function Ce(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ye(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Q(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Be(g))return"Blackberry";if(it(g))return"Webos";if(X(g))return"Safari";if((g.includes("chrome/")||Pe(g))&&!g.includes("edge/"))return"Chrome";if(vt(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Q(w=(0,P.z$)()){return/firefox\//i.test(w)}function X(w=(0,P.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Pe(w=(0,P.z$)()){return/crios\//i.test(w)}function Ye(w=(0,P.z$)()){return/iemobile/i.test(w)}function vt(w=(0,P.z$)()){return/android/i.test(w)}function Be(w=(0,P.z$)()){return/blackberry/i.test(w)}function it(w=(0,P.z$)()){return/webos/i.test(w)}function Dt(w=(0,P.z$)()){return/iphone|ipad|ipod/i.test(w)}function pn(w=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function hr(w=(0,P.z$)()){return Dt(w)||vt(w)||it(w)||Be(w)||/windows phone/i.test(w)||Ye(w)}function sa(w,g=[]){let _;switch(w){case"Browser":_=Ce((0,P.z$)());break;case"Worker":_=`${Ce((0,P.z$)())}-${w}`;break;default:_=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${D.SDK_VERSION}/${C}`}class as{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=V=>new Promise((_e,qe)=>{try{_e(g(V))}catch(ot){qe(ot)}});C.onAbort=_,this.queue.push(C);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,u.Z)(function*(){var C;if(_.auth.currentUser===g)return;const k=[];try{for(const V of _.queue)yield V(g),V.onAbort&&k.push(V.onAbort)}catch(V){k.reverse();for(const _e of k)try{_e()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=V)||void 0===C?void 0:C.message})}})()}}class Ft{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Do(this),this.idTokenSubscription=new Do(this),this.beforeStateQueue=new as(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=ne(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var k,V;if(!C._deleted&&(C.persistenceManager=yield er.create(C,g),!C._deleted)){if(null!==(k=C._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(V=C.currentUser)||void 0===V?void 0:V.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,u.Z)(function*(){var C;const k=yield _.assertedPersistence.getCurrentUser();let V=k,_e=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const qe=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,ot=V?._redirectEventId,Et=yield _.tryRedirectSignIn(g);(!qe||qe===ot)&&Et?.user&&(V=Et.user,_e=!0)}if(!V)return _.directlySetCurrentUser(null);if(!V._redirectEventId){if(_e)try{yield _.beforeStateQueue.runMiddleware(V)}catch(qe){V=k,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(qe))}return V?_.reloadAndSetCurrentUserOrClear(V):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===V._redirectEventId?_.directlySetCurrentUser(V):_.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(g){var _=this;return(0,u.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,u.Z)(function*(){try{yield Nn(g)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Lt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,u.Z)(function*(){const C=g?(0,P.m9)(g):null;return C&&ie(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,u.Z)(function*(){if(!C._deleted)return g&&ie(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,u.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(ne(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new P.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,u.Z)(function*(){const k=yield C.getOrInitRedirectPersistenceManager(_);return null===g?k.removeCurrentUser():k.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&ne(g)||_._popupRedirectResolver;ie(C,_,"argument-error"),_.redirectPersistenceManager=yield er.create(_,[ne(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,u.Z)(function*(){var C,k;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(k=_.redirectUser)||void 0===k?void 0:k._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,u.Z)(function*(){if(g===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,k){if(this._deleted)return()=>{};const V="function"==typeof _?_:_.next.bind(_),_e=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(_e,this,"internal-error"),_e.then(()=>V(this.currentUser)),"function"==typeof _?g.addObserver(_,C,k):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=sa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const k=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return k&&(C["X-Firebase-Client"]=k),C})()}}function tr(w){return(0,P.m9)(w)}class Do{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,P.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ba(w,g,_){const C=tr(w);ie(C._canInitEmulator,C,"emulator-config-failed"),ie(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const k=!!_?.disableWarnings,V=Ys(g),{host:_e,port:qe}=function fr(w){const g=Ys(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(C);if(k){const V=k[1];return{host:V,port:Ao(C.substr(V.length+1))}}{const[V,_e]=C.split(":");return{host:V,port:Ao(_e)}}}(g);C.config.emulator={url:`${V}//${_e}${null===qe?"":`:${qe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:_e,port:qe,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Qs(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ys(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Ao(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class nr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return ue("not implemented")}_getIdTokenResponse(g){return ue("not implemented")}_linkToIdToken(g,_){return ue("not implemented")}_getReauthenticationResolver(g){return ue("not implemented")}}function Js(w,g){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:resetPassword",Ot(w,g))})).apply(this,arguments)}function In(w,g){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ud(w,g){return So.apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",Ot(w,g))})).apply(this,arguments)}function Ss(){return(Ss=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithPassword",Ot(w,g))})).apply(this,arguments)}function xs(w,g){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:sendOobCode",Ot(w,g))})).apply(this,arguments)}function Ar(w,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,u.Z)(function*(w,g){return xs(w,g)})).apply(this,arguments)}function ti(w,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(w,g){return xs(w,g)})).apply(this,arguments)}function Ou(w,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,u.Z)(function*(w,g){return xs(w,g)})).apply(this,arguments)}function jl(w,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,u.Z)(function*(w,g){return xs(w,g)})).apply(this,arguments)}function ld(){return(ld=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithEmailLink",Ot(w,g))})).apply(this,arguments)}function Zl(){return(Zl=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithEmailLink",Ot(w,g))})).apply(this,arguments)}class Fu extends nr{constructor(g,_,C,k=null){super("password",C),this._email=g,this._password=_,this._tenantId=k}static _fromEmailAndPassword(g,_){return new Fu(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Fu(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function Nu(w,g){return Ss.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ql(w,g){return ld.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,u.Z)(function*(){switch(C.signInMethod){case"password":return In(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function gf(w,g){return Zl.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Mo(w,g){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithIdp",Ot(w,g))})).apply(this,arguments)}class Ms extends nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ms(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:k}=_,V=(0,F._T)(_,["providerId","signInMethod"]);if(!C||!k)return null;const _e=new Ms(C,k);return _e.idToken=V.idToken||void 0,_e.accessToken=V.accessToken||void 0,_e.secret=V.secret,_e.nonce=V.nonce,_e.pendingToken=V.pendingToken||null,_e}_getIdTokenResponse(g){return Mo(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Mo(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Mo(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,P.xO)(_)}return g}}function Ng(w,g){return cd.apply(this,arguments)}function cd(){return(cd=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:sendVerificationCode",Ot(w,g))})).apply(this,arguments)}function ja(){return(ja=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ot(w,g))})).apply(this,arguments)}function dd(){return(dd=(0,u.Z)(function*(w,g){const _=yield vn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ot(w,g));if(_.temporaryProof)throw Hn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Fg={USER_NOT_FOUND:"user-not-found"};function hd(){return(hd=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ot(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Fg)})).apply(this,arguments)}class Xs extends nr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Xs({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Xs({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Og(w,g){return ja.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function oa(w,g){return dd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Lg(w,g){return hd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:k}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:k}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:k,temporaryProof:V}=g;return C||_||k||V?new Xs({verificationId:_,verificationCode:C,phoneNumber:k,temporaryProof:V}):null}}class aa{constructor(g){var _,C,k,V,_e,qe;const ot=(0,P.zd)((0,P.pd)(g)),Et=null!==(_=ot.apiKey)&&void 0!==_?_:null,zt=null!==(C=ot.oobCode)&&void 0!==C?C:null,Pn=function Hl(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=ot.mode)&&void 0!==k?k:null);ie(Et&&zt&&Pn,"argument-error"),this.apiKey=Et,this.operation=Pn,this.code=zt,this.continueUrl=null!==(V=ot.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(_e=ot.languageCode)&&void 0!==_e?_e:null,this.tenantId=null!==(qe=ot.tenantId)&&void 0!==qe?qe:null}static parseLink(g){const _=function _y(w){const g=(0,P.zd)((0,P.pd)(w)).link,_=g?(0,P.zd)((0,P.pd)(g)).deep_link_id:null,C=(0,P.zd)((0,P.pd)(w)).deep_link_id;return(C?(0,P.zd)((0,P.pd)(C)).link:null)||C||_||g||w}(g);try{return new aa(_)}catch{return null}}}let Bi=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return Fu._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const k=aa.parseLink(C);return ie(k,"argument-error"),Fu._fromEmailAndCode(_,k.code,k.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ls{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class eo extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Po extends eo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),Ms._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),Ms._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Po.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Po.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:k,pendingToken:V,nonce:_e,providerId:qe}=g;if(!C&&!k&&!_&&!V||!qe)return null;try{return new Po(qe)._credential({idToken:_,accessToken:C,nonce:_e,pendingToken:V})}catch{return null}}}let mf=(()=>{class w extends eo{constructor(){super("facebook.com")}static credential(_){return Ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Lu=(()=>{class w extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:k}=_;if(!C&&!k)return null;try{return w.credential(C,k)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Uu=(()=>{class w extends eo{constructor(){super("github.com")}static credential(_){return Ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class qa extends nr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Mo(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Mo(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Mo(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:k,pendingToken:V}=_;return C&&k&&V&&C===k?new qa(C,V):null}static _create(g,_){return new qa(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cs extends ls{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return cs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return cs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=qa.fromJSON(g);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return qa._create(C,_)}catch{return null}}}let Gn=(()=>{class w extends eo{constructor(){super("twitter.com")}static credential(_,C){return Ms._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:k}=_;if(!C||!k)return null;try{return w.credential(C,k)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Vu(w,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signUp",Ot(w,g))})).apply(this,arguments)}class Hr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,k=!1){return(0,u.Z)(function*(){const V=yield yt._fromIdTokenResponse(g,C,k),_e=Bu(C);return new Hr({user:V,providerId:_e,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const k=Bu(C);return new Hr({user:g,providerId:k,_tokenResponse:C,operationType:_})})()}}function Bu(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Ug(w){return ua.apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(w){var g;const _=tr(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Hr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Vu(_,{returnSecureToken:!0}),k=yield Hr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class $l extends P.ZR{constructor(g,_,C,k){var V;super(_.code,_.message),this.operationType=C,this.user=k,Object.setPrototypeOf(this,$l.prototype),this.customData={appName:g.name,tenantId:null!==(V=g.tenantId)&&void 0!==V?V:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,k){return new $l(g,_,C,k)}}function ju(w,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?$l._fromErrorAndOperation(w,V,g,C):V})}function _f(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function gn(w,g){return la.apply(this,arguments)}function la(){return(la=(0,u.Z)(function*(w,g){const _=(0,P.m9)(w);yield ca(!0,_,g);const{providerUserInfo:C}=yield Jr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),k=_f(C||[]);return _.providerData=_.providerData.filter(V=>k.has(V.providerId)),k.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function qu(w,g){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(w,g,_=!1){const C=yield at(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Hr._forOperation(w,"link",C)})).apply(this,arguments)}function ca(w,g,_){return da.apply(this,arguments)}function da(){return(da=(0,u.Z)(function*(w,g,_){yield Nn(g);const k=!1===w?"provider-already-linked":"no-such-provider";ie(_f(g.providerData).has(_)===w,g.auth,k)})).apply(this,arguments)}function ji(w,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,u.Z)(function*(w,g,_=!1){const{auth:C}=w,k="reauthenticate";try{const V=yield at(w,ju(C,k,g,w),_);ie(V.idToken,C,"internal-error");const _e=Gt(V.idToken);ie(_e,C,"internal-error");const{sub:qe}=_e;return ie(w.uid===qe,C,"user-mismatch"),Hr._forOperation(w,k,V)}catch(V){throw"auth/user-not-found"===V?.code&&Me(C,"user-mismatch"),V}})).apply(this,arguments)}function ko(w,g){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(w,g,_=!1){const C="signIn",k=yield ju(w,C,g),V=yield Hr._fromIdTokenResponse(w,C,k);return _||(yield w._updateCurrentUser(V.user)),V})).apply(this,arguments)}function ds(w,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(w,g){return ko(tr(w),g)})).apply(this,arguments)}function Gl(w,g){return No.apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(w,g){const _=(0,P.m9)(w);return yield ca(!1,_,g.providerId),qu(_,g)})).apply(this,arguments)}function gd(w,g){return $r.apply(this,arguments)}function $r(){return($r=(0,u.Z)(function*(w,g){return ji((0,P.m9)(w),g)})).apply(this,arguments)}function ha(w,g){return to.apply(this,arguments)}function to(){return(to=(0,u.Z)(function*(w,g){return vn(w,"POST","/v1/accounts:signInWithCustomToken",Ot(w,g))})).apply(this,arguments)}function xt(w,g){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(w,g){const _=tr(w),C=yield ha(_,{token:g,returnSecureToken:!0}),k=yield Hr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class fa{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?pa._fromServerResponse(g,_):Me(g,"internal-error")}}class pa extends fa{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new pa(_)}}function ga(w,g,_){var C;ie((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function md(w,g,_){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w),k={requestType:"PASSWORD_RESET",email:g};_&&ga(C,k,_),yield ti(C,k)})).apply(this,arguments)}function _d(w,g,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,u.Z)(function*(w,g,_){yield Js((0,P.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function je(w,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,u.Z)(function*(w,g){yield ud((0,P.m9)(w),{oobCode:g})})).apply(this,arguments)}function Fo(w,g){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,u.Z)(function*(w,g){const _=(0,P.m9)(w),C=yield Js(_,{oobCode:g}),k=C.requestType;switch(ie(k,_,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(C.mfaInfo,_,"internal-error");default:ie(C.email,_,"internal-error")}let V=null;return C.mfaInfo&&(V=fa._fromServerResponse(tr(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:V},operation:k}})).apply(this,arguments)}function pr(w,g){return no.apply(this,arguments)}function no(){return(no=(0,u.Z)(function*(w,g){const{data:_}=yield Fo((0,P.m9)(w),g);return _.email})).apply(this,arguments)}function Uo(w,g,_){return fi.apply(this,arguments)}function fi(){return(fi=(0,u.Z)(function*(w,g,_){const C=tr(w),k=yield Vu(C,{returnSecureToken:!0,email:g,password:_}),V=yield Hr._fromIdTokenResponse(C,"signIn",k);return yield C._updateCurrentUser(V.user),V})).apply(this,arguments)}function Zu(w,g,_){return ds((0,P.m9)(w),Bi.credential(g,_))}function Hu(w,g,_){return yd.apply(this,arguments)}function yd(){return(yd=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w),k={requestType:"EMAIL_SIGNIN",email:g};ie(_.handleCodeInApp,C,"argument-error"),_&&ga(C,k,_),yield Ou(C,k)})).apply(this,arguments)}function yf(w,g){return"EMAIL_SIGNIN"===aa.parseLink(g)?.operation}function vf(w,g,_){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w),k=Bi.credentialWithLink(g,_||we());return ie(k._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),ds(C,k)})).apply(this,arguments)}function Sr(w,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:createAuthUri",Ot(w,g))})).apply(this,arguments)}function $u(w,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,u.Z)(function*(w,g){const C={identifier:g,continueUri:Ge()?we():"http://localhost"},{signinMethods:k}=yield Sr((0,P.m9)(w),C);return k||[]})).apply(this,arguments)}function Ps(w,g){return $a.apply(this,arguments)}function $a(){return($a=(0,u.Z)(function*(w,g){const _=(0,P.m9)(w),k={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&ga(_.auth,k,g);const{email:V}=yield Ar(_.auth,k);V!==w.email&&(yield w.reload())})).apply(this,arguments)}function Gu(w,g,_){return zu.apply(this,arguments)}function zu(){return(zu=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&ga(C.auth,V,_);const{email:_e}=yield jl(C.auth,V);_e!==w.email&&(yield w.reload())})).apply(this,arguments)}function wf(w,g){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,u.Z)(function*(w,g){return Kt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function zl(w,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,u.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,P.m9)(w),V={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},_e=yield at(C,wf(C.auth,V));C.displayName=_e.displayName||null,C.photoURL=_e.photoUrl||null;const qe=C.providerData.find(({providerId:ot})=>"password"===ot);qe&&(qe.displayName=C.displayName,qe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(_e)})).apply(this,arguments)}function Wu(w,g){return _a((0,P.m9)(w),g,null)}function bf(w,g){return _a((0,P.m9)(w),null,g)}function _a(w,g,_){return ro.apply(this,arguments)}function ro(){return(ro=(0,u.Z)(function*(w,g,_){const{auth:C}=w,V={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(V.email=g),_&&(V.password=_);const _e=yield at(w,In(C,V));yield w._updateTokensIfNecessary(_e,!0)})).apply(this,arguments)}class jo{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class vd extends jo{constructor(g,_,C,k){super(g,_,C),this.username=k}}class wd extends jo{constructor(g,_){super(g,"facebook.com",_)}}class Yu extends vd{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Wl extends jo{constructor(g,_){super(g,"google.com",_)}}class bd extends vd{constructor(g,_,C){super(g,"twitter.com",_,C)}}function xr(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ku(w){var g,_;if(!w)return null;const{providerId:C}=w,k=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},V=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&w?.idToken){const _e=null===(_=null===(g=Gt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(_e)return new jo(V,"anonymous"!==_e&&"custom"!==_e?_e:null)}if(!C)return null;switch(C){case"facebook.com":return new wd(V,k);case"github.com":return new Yu(V,k);case"google.com":return new Wl(V,k);case"twitter.com":return new bd(V,k,w.screenName||null);case"custom":case"anonymous":return new jo(V,null);default:return new jo(V,C,k)}}(_)}class ks{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new ks("enroll",g)}static _fromMfaPendingCredential(g){return new ks("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ks._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return ks._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ga{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=tr(g),k=_.customData._serverResponse,V=(k.mfaInfo||[]).map(qe=>fa._fromServerResponse(C,qe));ie(k.mfaPendingCredential,C,"internal-error");const _e=ks._fromMfaPendingCredential(k.mfaPendingCredential);return new Ga(_e,V,function(){var qe=(0,u.Z)(function*(ot){const Et=yield ot._process(C,_e);delete k.mfaInfo,delete k.mfaPendingCredential;const zt=Object.assign(Object.assign({},k),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(_.operationType){case"signIn":const Pn=yield Hr._fromIdTokenResponse(C,_.operationType,zt);return yield C._updateCurrentUser(Pn.user),Pn;case"reauthenticate":return ie(_.user,C,"internal-error"),Hr._forOperation(_.user,_.operationType,zt);default:Me(C,"internal-error")}});return function(ot){return qe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,u.Z)(function*(){return _.signInResolver(g)})()}}function Ql(w,g){var _;const C=(0,P.m9)(w),k=g;return ie(g.customData.operationType,C,"argument-error"),ie(null===(_=k.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Ga._fromError(C,k)}function gr(w,g){return Kt(w,"POST","/v2/accounts/mfaEnrollment:start",Ot(w,g))}class va{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>fa._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new va(g)}getSession(){var g=this;return(0,u.Z)(function*(){return ks._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,u.Z)(function*(){const k=g,V=yield C.getSession(),_e=yield at(C.user,k._process(C.user.auth,V,_));return yield C.user._updateTokensIfNecessary(_e),C.user.reload()})()}unenroll(g){var _=this;return(0,u.Z)(function*(){const C="string"==typeof g?g:g.uid,k=yield _.user.getIdToken(),V=yield at(_.user,function io(w,g){return Kt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(w,g))}(_.user.auth,{idToken:k,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:_e})=>_e!==C),yield _.user._updateTokensIfNecessary(V);try{yield _.user.reload()}catch(_e){if("auth/user-token-expired"!==_e.code)throw _e}})()}}const Ed=new WeakMap;function Id(w){const g=(0,P.m9)(w);return Ed.has(g)||Ed.set(g,va._fromUser(g)),Ed.get(g)}const so="__sak";class za{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(so,"1"),this.storage.removeItem(so),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fr=(()=>{class w extends za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vg(){const w=(0,P.z$)();return X(w)||Dt(w)}()&&function En(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const k=this.storage.getItem(C),V=this.localCache[C];k!==V&&_(C,V,k)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((qe,ot,Et)=>{this.notifyListeners(qe,Et)});const k=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const qe=this.storage.getItem(k);if(_.newValue!==qe)null!==_.newValue?this.storage.setItem(k,_.newValue):this.storage.removeItem(k);else if(this.localCache[k]===_.newValue&&!C)return}const V=()=>{const qe=this.storage.getItem(k);!C&&this.localCache[k]===qe||this.notifyListeners(k,qe)},_e=this.storage.getItem(k);!function It(){return(0,P.w1)()&&10===document.documentMode}()||_e===_.newValue||_.newValue===_.oldValue?V():setTimeout(V,10)}notifyListeners(_,C){this.localCache[_]=C;const k=this.listeners[_];if(k)for(const V of Array.from(k))V(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var k=()=>super._set,V=this;return(0,u.Z)(function*(){yield k().call(V,_,C),V.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,k=this;return(0,u.Z)(function*(){const V=yield C().call(k,_);return k.localCache[_]=JSON.stringify(V),V})()}_remove(_){var C=()=>super._remove,k=this;return(0,u.Z)(function*(){yield C().call(k,_),delete k.localCache[_]})()}}return w.type="LOCAL",w})(),Wa=(()=>{class w extends za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let Dd=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(V=>V.isListeningto(_));if(C)return C;const k=new w(_);return this.receivers.push(k),k}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,u.Z)(function*(){const k=_,{eventId:V,eventType:_e,data:qe}=k.data,ot=C.handlersMap[_e];if(!ot?.size)return;k.ports[0].postMessage({status:"ack",eventId:V,eventType:_e});const Et=Array.from(ot).map(function(){var Pn=(0,u.Z)(function*(Wn){return Wn(k.origin,qe)});return function(Wn){return Pn.apply(this,arguments)}}()),zt=yield function Ka(w){return Promise.all(w.map(function(){var g=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Et);k.ports[0].postMessage({status:"done",eventId:V,eventType:_e,response:zt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Fn(w="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return w+_}class Mr{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var k=this;return(0,u.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let _e,qe;return new Promise((ot,Et)=>{const zt=Fn("",20);V.port1.start();const Pn=setTimeout(()=>{Et(new Error("unsupported_event"))},C);qe={messageChannel:V,onMessage(Wn){const zr=Wn;if(zr.data.eventId===zt)switch(zr.data.status){case"ack":clearTimeout(Pn),_e=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(_e),ot(zr.data.response);break;default:clearTimeout(Pn),clearTimeout(_e),Et(new Error("invalid_response"))}}},k.handlers.add(qe),V.port1.addEventListener("message",qe.onMessage),k.target.postMessage({eventType:g,eventId:zt,data:_},[V.port2])}).finally(()=>{qe&&k.removeMessageHandler(qe)})})()}}function wn(){return window}function ct(){return typeof wn().WorkerGlobalScope<"u"&&"function"==typeof wn().importScripts}function oo(){return(oo=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ir="firebaseLocalStorageDb",bn="firebaseLocalStorage",dt="fbase_key";class Rs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function wa(w,g){return w.transaction([bn],g?"readwrite":"readonly").objectStore(bn)}function ao(){const w=indexedDB.open(ir,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(bn,{keyPath:dt})}catch(k){_(k)}}),w.addEventListener("success",(0,u.Z)(function*(){const C=w.result;C.objectStoreNames.contains(bn)?g(C):(C.close(),yield function pi(){const w=indexedDB.deleteDatabase(ir);return new Rs(w).toPromise()}(),g(yield ao()))}))})}function Jl(w,g,_){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,u.Z)(function*(w,g,_){const C=wa(w,!0).put({[dt]:g,value:_});return new Rs(C).toPromise()})).apply(this,arguments)}function Lr(){return(Lr=(0,u.Z)(function*(w,g){const _=wa(w,!1).get(g),C=yield new Rs(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Ns(w,g){const _=wa(w,!0).delete(g);return new Rs(_).toPromise()}const Fs=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield ao()),_.db})()}_withRetries(_){var C=this;return(0,u.Z)(function*(){let k=0;for(;;)try{const V=yield C._openDb();return yield _(V)}catch(V){if(k++>3)throw V;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return ct()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Dd._getInstance(function Ho(){return ct()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,u.Z)(function*(k,V){return{keyProcessed:(yield _._poll()).includes(V.key)}});return function(k,V){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,u.Z)(function*(k,V){return["keyChanged"]});return function(k,V){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var C,k;if(_.activeServiceWorker=yield function zn(){return oo.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Mr(_.activeServiceWorker);const V=yield _.sender._send("ping",{},800);!V||(null===(C=V[0])||void 0===C?void 0:C.fulfilled)&&(null===(k=V[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,u.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Ya(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ao();return yield Jl(_,so,"1"),yield Ns(_,so),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,u.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var k=this;return(0,u.Z)(function*(){return k._withPendingWrite((0,u.Z)(function*(){return yield k._withRetries(V=>Jl(V,_,C)),k.localCache[_]=C,k.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,u.Z)(function*(){const k=yield C._withRetries(V=>function mr(w,g){return Lr.apply(this,arguments)}(V,_));return C.localCache[_]=k,k})()}_remove(_){var C=this;return(0,u.Z)(function*(){return C._withPendingWrite((0,u.Z)(function*(){return yield C._withRetries(k=>Ns(k,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const C=yield _._withRetries(_e=>{const qe=wa(_e,!1).getAll();return new Rs(qe).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const k=[],V=new Set;for(const{fbase_key:_e,value:qe}of C)V.add(_e),JSON.stringify(_.localCache[_e])!==JSON.stringify(qe)&&(_.notifyListeners(_e,qe),k.push(_e));for(const _e of Object.keys(_.localCache))_.localCache[_e]&&!V.has(_e)&&(_.notifyListeners(_e,null),k.push(_e));return k})()}notifyListeners(_,C){this.localCache[_]=C;const k=this.listeners[_];if(k)for(const V of Array.from(k))V(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function gi(w,g){return Kt(w,"POST","/v2/accounts/mfaSignIn:start",Ot(w,g))}function Yt(){return(Yt=(0,u.Z)(function*(w){return(yield Kt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ls(w){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=k=>{const V=xe("internal-error");V.customData=k,_(V)},C.type="text/javascript",C.charset="UTF-8",function ec(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function Ad(w){return`__${w}${Math.floor(1e6*Math.random())}`}const mi=1e12;class Ju{constructor(g){this.auth=g,this.counter=mi,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Ja(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||mi;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||mi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,u.Z)(function*(){var C;return null===(C=_._widgets.get(g||mi))||void 0===C||C.execute(),""})()}}class Ja{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof g?document.getElementById(g):g;ie(k,"argument-error",{appName:_}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Sd(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $o=Ad("rcb"),Xu=new Qe(3e4,6e4);class by{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wn().grecaptcha}load(g,_=""){return ie(function Mn(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(wn().grecaptcha):new Promise((C,k)=>{const V=wn().setTimeout(()=>{k(xe(g,"network-request-failed"))},Xu.get());wn()[$o]=()=>{wn().clearTimeout(V),delete wn()[$o];const qe=wn().grecaptcha;if(!qe)return void k(xe(g,"internal-error"));const ot=qe.render;qe.render=(Et,zt)=>{const Pn=ot(Et,zt);return this.counter++,Pn},this.hostLanguage=_,C(qe)},Ls(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:$o,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(V),k(xe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!wn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jg{load(g){return(0,u.Z)(function*(){return new Ju(g)})()}clearedOneInstance(){}}const Ef="recaptcha",qg={theme:"light",type:"image"};class Cy{constructor(g,_=Object.assign({},qg),C){this.parameters=_,this.type=Ef,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(C),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof g?document.getElementById(g):g;ie(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jg:new by,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(V=>{const _e=qe=>{!qe||(g.tokenChangeListeners.delete(_e),V(qe))};g.tokenChangeListeners.add(_e),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=wn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){ie(Ge()&&!ct(),g.auth,"internal-error"),yield function Se(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function uo(w){return Yt.apply(this,arguments)}(g.auth);ie(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ur{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Xs._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function ps(w,g,_){return L.apply(this,arguments)}function L(){return(L=(0,u.Z)(function*(w,g,_){const C=tr(w),k=yield Tn(C,g,(0,P.m9)(_));return new Ur(k,V=>ds(C,V))})).apply(this,arguments)}function gs(w,g,_){return xd.apply(this,arguments)}function xd(){return(xd=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w);yield ca(!1,C,"phone");const k=yield Tn(C.auth,g,(0,P.m9)(_));return new Ur(k,V=>Gl(C,V))})).apply(this,arguments)}function sr(w,g,_){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w),k=yield Tn(C.auth,g,(0,P.m9)(_));return new Ur(k,V=>gd(C,V))})).apply(this,arguments)}function Tn(w,g,_){return Di.apply(this,arguments)}function Di(){return(Di=(0,u.Z)(function*(w,g,_){var C;const k=yield _.verify();try{let V;if(ie("string"==typeof k,w,"argument-error"),ie(_.type===Ef,w,"argument-error"),V="string"==typeof g?{phoneNumber:g}:g,"session"in V){const _e=V.session;if("phoneNumber"in V)return ie("enroll"===_e.type,w,"internal-error"),(yield gr(w,{idToken:_e.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{ie("signin"===_e.type,w,"internal-error");const qe=(null===(C=V.multiFactorHint)||void 0===C?void 0:C.uid)||V.multiFactorUid;return ie(qe,w,"missing-multi-factor-info"),(yield gi(w,{mfaPendingCredential:_e.credential,mfaEnrollmentId:qe,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:_e}=yield Ng(w,{phoneNumber:V.phoneNumber,recaptchaToken:k});return _e}}finally{_._reset()}})).apply(this,arguments)}function el(w,g){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(w,g){yield qu((0,P.m9)(w),g)})).apply(this,arguments)}let Hi=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=tr(_)}verifyPhoneNumber(_,C){return Tn(this.auth,_,(0,P.m9)(C))}static credential(_,C){return Xs._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:k}=_;return C&&k?Xs._fromTokenResponse(C,k):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ms(w,g){return g?ne(g):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class lo extends nr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Mo(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Mo(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Mo(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function co(w){return ko(w.auth,new lo(w),w.bypassAuthState)}function tl(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),ji(_,new lo(w),w.bypassAuthState)}function rc(w){return Md.apply(this,arguments)}function Md(){return(Md=(0,u.Z)(function*(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),qu(_,new lo(w),w.bypassAuthState)})).apply(this,arguments)}class Zg{constructor(g,_,C,k,V=!1){this.auth=g,this.resolver=C,this.user=k,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,u.Z)(function*(C,k){g.pendingPromise={resolve:C,reject:k};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(V){g.reject(V)}});return function(C,k){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,u.Z)(function*(){const{urlResponse:C,sessionId:k,postBody:V,tenantId:_e,error:qe,type:ot}=g;if(qe)return void _.reject(qe);const Et={auth:_.auth,requestUri:C,sessionId:k,tenantId:_e||void 0,postBody:V||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(ot)(Et))}catch(zt){_.reject(zt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return co;case"linkViaPopup":case"linkViaRedirect":return rc;case"reauthViaPopup":case"reauthViaRedirect":return tl;default:Me(this.auth,"internal-error")}}resolve(g){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _i=new Qe(2e3,1e4);function eu(w,g,_){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,u.Z)(function*(w,g,_){const C=tr(w);de(w,g,ls);const k=ms(C,_);return new Gi(C,"signInViaPopup",g,k).executeNotNull()})).apply(this,arguments)}function ho(w,g,_){return $i.apply(this,arguments)}function $i(){return($i=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w);de(C.auth,g,ls);const k=ms(C.auth,_);return new Gi(C.auth,"reauthViaPopup",g,k,C).executeNotNull()})).apply(this,arguments)}function ic(w,g,_){return ba.apply(this,arguments)}function ba(){return(ba=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w);de(C.auth,g,ls);const k=ms(C.auth,_);return new Gi(C.auth,"linkViaPopup",g,k,C).executeNotNull()})).apply(this,arguments)}let Gi=(()=>{class w extends Zg{constructor(_,C,k,V,_e){super(_,C,V,_e),this.provider=k,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const C=yield _.execute();return ie(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,u.Z)(function*(){me(1===_.filter.length,"Popup operations only handle one event");const C=Fn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(k=>{_.reject(k)}),_.resolver._isIframeWebStorageSupported(_.auth,k=>{k||_.reject(xe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,k;this.pollId=null!==(k=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,_i.get())};_()}}return w.currentPopupAction=null,w})();const zi=new Map;class Tf extends Zg{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,u.Z)(function*(){let C=zi.get(_.auth._key());if(!C){try{const V=(yield function Hg(w,g){return nl.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(V)}catch(k){C=()=>Promise.reject(k)}zi.set(_.auth._key(),C)}return _.bypassAuthState||zi.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const k=yield C.auth._redirectUserForId(g.eventId);if(k)return C.user=k,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function nl(){return(nl=(0,u.Z)(function*(w,g){const _=R(g),C=A(w);if(!(yield C._isAvailable()))return!1;const k="true"===(yield C._get(_));return yield C._remove(_),k})).apply(this,arguments)}function Us(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,u.Z)(function*(w,g){return A(w)._set(R(g),"true")})).apply(this,arguments)}function Pd(){zi.clear()}function T(w,g){zi.set(w._key(),g)}function A(w){return ne(w._redirectPersistence)}function R(w){return St("pendingRedirect",w.config.apiKey,w.name)}function z(w,g,_){return function ce(w,g,_){return ve.apply(this,arguments)}(w,g,_)}function ve(){return(ve=(0,u.Z)(function*(w,g,_){const C=tr(w);de(w,g,ls);const k=ms(C,_);return yield Us(k,C),k._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function Ve(w,g,_){return function nt(w,g,_){return Ct.apply(this,arguments)}(w,g,_)}function Ct(){return(Ct=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w);de(C.auth,g,ls);const k=ms(C.auth,_);yield Us(k,C.auth);const V=yield fo(C);return k._openRedirect(C.auth,g,"reauthViaRedirect",V)})).apply(this,arguments)}function Zt(w,g,_){return function wt(w,g,_){return Tt.apply(this,arguments)}(w,g,_)}function Tt(){return(Tt=(0,u.Z)(function*(w,g,_){const C=(0,P.m9)(w);de(C.auth,g,ls);const k=ms(C.auth,_);yield ca(!1,C,g.providerId),yield Us(k,C.auth);const V=yield fo(C);return k._openRedirect(C.auth,g,"linkViaRedirect",V)})).apply(this,arguments)}function Gr(w,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(w,g){return yield tr(w)._initializationPromise,_s(w,g,!1)})).apply(this,arguments)}function _s(w,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,u.Z)(function*(w,g,_=!1){const C=tr(w),k=ms(C,g),_e=yield new Tf(C,k,_).execute();return _e&&!_&&(delete _e.user._redirectEventId,yield C._persistUserIfCurrent(_e.user),yield C._setRedirectUser(null,g)),_e})).apply(this,arguments)}function fo(w){return rl.apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(w){const g=Fn(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class ys{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function tu(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wi(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!Wi(g)){const k=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(xe(this.auth,k))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bs(g))}saveEventToCache(g){this.cachedEventUids.add(Bs(g)),this.lastProcessedEventTime=Date.now()}}function Bs(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Wi({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function sc(w){return zo.apply(this,arguments)}function zo(){return(zo=(0,u.Z)(function*(w,g={}){return Kt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const il=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Df=/^https?/;function kd(){return(kd=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield sc(w);for(const _ of g)try{if(Wo(_))return}catch{}Me(w,"unauthorized-domain")})).apply(this,arguments)}function Wo(w){const g=we(),{protocol:_,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const _e=new URL(w);return""===_e.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&_e.hostname===C}if(!Df.test(_))return!1;if(il.test(w))return C===w;const k=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(C)}const oc=new Qe(3e4,6e4);function $g(){const w=wn().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let ac=null;function Iy(w){return ac=ac||function Kb(w){return new Promise((g,_)=>{var C,k,V;function _e(){$g(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{$g(),_(xe(w,"network-request-failed"))},timeout:oc.get()})}if(null!==(k=null===(C=wn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==k&&k.Iframe)g(gapi.iframes.getContext());else{if(null===(V=wn().gapi)||void 0===V||!V.load){const qe=Ad("iframefcb");return wn()[qe]=()=>{gapi.load?_e():_(xe(w,"network-request-failed"))},Ls(`https://apis.google.com/js/api.js?onload=${qe}`).catch(ot=>_(ot))}_e()}}).catch(g=>{throw ac=null,g})}(w),ac}const Yb=new Qe(5e3,15e3),Ay={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uc(w){const g=w.config;ie(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?en(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:w.name,v:D.SDK_VERSION},k=Rd.get(w.config.apiHost);k&&(C.eid=k);const V=w._getFrameworks();return V.length&&(C.fw=V.join(",")),`${_}?${(0,P.xO)(C).slice(1)}`}function lc(){return lc=(0,u.Z)(function*(w){const g=yield Iy(w),_=wn().gapi;return ie(_,w,"internal-error"),g.open({where:document.body,url:uc(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ay,dontclear:!0},C=>new Promise(function(){var k=(0,u.Z)(function*(V,_e){yield C.restyle({setHideOnLeave:!1});const qe=xe(w,"network-request-failed"),ot=wn().setTimeout(()=>{_e(qe)},Yb.get());function Et(){wn().clearTimeout(ot),V(C)}C.ping(Et).then(Et,()=>{_e(qe)})});return function(V,_e){return k.apply(this,arguments)}}()))}),lc.apply(this,arguments)}const zg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ca{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cc(w,g,_,C,k,V){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const _e={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:D.SDK_VERSION,eventId:k};if(g instanceof ls){g.setDefaultLanguage(w.languageCode),_e.providerId=g.providerId||"",(0,P.xb)(g.getCustomParameters())||(_e.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ot,Et]of Object.entries(V||{}))_e[ot]=Et}if(g instanceof eo){const ot=g.getScopes().filter(Et=>""!==Et);ot.length>0&&(_e.scopes=ot.join(","))}w.tenantId&&(_e.tid=w.tenantId);const qe=_e;for(const ot of Object.keys(qe))void 0===qe[ot]&&delete qe[ot];return`${function xy({config:w}){return w.emulator?en(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,P.xO)(qe).slice(1)}`}const Sf="webStorageSupport",nu=class Fd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wa,this._completeRedirectFn=_s,this._overrideRedirectResult=T}_openPopup(g,_,C,k){var V=this;return(0,u.Z)(function*(){var _e;me(null===(_e=V.eventManagers[g._key()])||void 0===_e?void 0:_e.manager,"_initialize() not called before _openPopup()");const qe=cc(g,_,C,we(),k);return function Kg(w,g,_,C=500,k=600){const V=Math.max((window.screen.availHeight-k)/2,0).toString(),_e=Math.max((window.screen.availWidth-C)/2,0).toString();let qe="";const ot=Object.assign(Object.assign({},zg),{width:C.toString(),height:k.toString(),top:V,left:_e}),Et=(0,P.z$)().toLowerCase();_&&(qe=Pe(Et)?"_blank":_),Q(Et)&&(g=g||"http://localhost",ot.scrollbars="yes");const zt=Object.entries(ot).reduce((Wn,[zr,go])=>`${Wn}${zr}=${go},`,"");if(function Tr(w=(0,P.z$)()){var g;return Dt(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Et)&&"_self"!==qe)return function Yg(w,g){const _=document.createElement("a");_.href=w,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",qe),new Ca(null);const Pn=window.open(g||"",qe,zt);ie(Pn,w,"popup-blocked");try{Pn.focus()}catch{}return new Ca(Pn)}(g,qe,Fn())})()}_openRedirect(g,_,C,k){var V=this;return(0,u.Z)(function*(){return yield V._originValidation(g),function tn(w){wn().location.href=w}(cc(g,_,C,we(),k)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:k,promise:V}=this.eventManagers[_];return k?Promise.resolve(k):(me(V,"If manager is not set, promise should be"),V)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,u.Z)(function*(){const C=yield function Gg(w){return lc.apply(this,arguments)}(g),k=new ys(g);return C.register("authEvent",V=>(ie(V?.authEvent,g,"invalid-auth-event"),{status:k.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:k},_.iframes[g._key()]=C,k})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Sf,{type:Sf},k=>{var V;const _e=null===(V=k?.[0])||void 0===V?void 0:V[Sf];void 0!==_e&&_(!!_e),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ey(w){return kd.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return hr()||X()||Dt()}};class Ld extends class My{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ld(g)}_finalizeEnroll(g,_,C){return function Cf(w,g){return Kt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(w,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Qa(w,g){return Kt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ot(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Py=(()=>{class w{constructor(){}static assertion(_){return Ld._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var xf="@firebase/auth";class Ki{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var k;g((null===(k=C)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Jb(w=(0,D.getApp)()){const g=(0,D._getProvider)(w,"auth");return g.isInitialized()?g.getImmediate():function le(w,g){const _=(0,D._getProvider)(w,"auth");if(_.isInitialized()){const k=_.getImmediate(),V=_.getOptions();if((0,P.vZ)(V,g??{}))return k;Me(k,"already-initialized")}return _.initialize({options:g})}(w,{popupRedirectResolver:nu,persistence:[Fs,Fr,Wa]})}!function Vd(w){(0,D._registerComponent)(new q.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),k=g.getProvider("heartbeat"),{apiKey:V,authDomain:_e}=C.options;return((qe,ot)=>{ie(V&&!V.includes(":"),"invalid-api-key",{appName:qe.name}),ie(!_e?.includes(":"),"argument-error",{appName:qe.name});const Et={apiKey:V,authDomain:_e,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sa(w)},zt=new Ft(qe,ot,Et);return function pe(w,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(ne);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,g?.popupRedirectResolver)}(zt,_),zt})(C,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,D._registerComponent)(new q.wA("auth-internal",g=>{const _=tr(g.getProvider("auth").getImmediate());return new Ki(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,D.registerVersion)(xf,"0.20.3",function dc(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,D.registerVersion)(xf,"0.20.3","esm2017")}("Browser")},2090:(ze,G,M)=>{"use strict";M.d(G,{$s:()=>Rt,BH:()=>Te,DV:()=>Kt,Dv:()=>Nr,G6:()=>ie,GJ:()=>Qt,L:()=>H,LL:()=>we,Mn:()=>de,Pz:()=>Lt,Sg:()=>be,UG:()=>he,UI:()=>Zn,US:()=>q,Wj:()=>Sn,Yr:()=>Oe,ZB:()=>$,ZR:()=>pe,b$:()=>Me,cI:()=>$t,d:()=>xe,dS:()=>As,eu:()=>me,g5:()=>D,gK:()=>lr,gQ:()=>Hn,h$:()=>W,hl:()=>ue,hu:()=>P,jU:()=>fe,lb:()=>cr,m9:()=>xn,ne:()=>os,p$:()=>Z,pd:()=>Li,r3:()=>Ot,ru:()=>Re,tV:()=>ae,uI:()=>Ze,ug:()=>Gt,vZ:()=>Vn,w1:()=>Ne,w9:()=>on,xO:()=>ss,xb:()=>Jt,z$:()=>Ie,zI:()=>K,zd:()=>Ei});const P=function(se,te){if(!se)throw D(te)},D=function(se){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+se)},F=function(se){const te=[];let oe=0;for(let ke=0;ke<se.length;ke++){let ee=se.charCodeAt(ke);ee<128?te[oe++]=ee:ee<2048?(te[oe++]=ee>>6|192,te[oe++]=63&ee|128):55296==(64512&ee)&&ke+1<se.length&&56320==(64512&se.charCodeAt(ke+1))?(ee=65536+((1023&ee)<<10)+(1023&se.charCodeAt(++ke)),te[oe++]=ee>>18|240,te[oe++]=ee>>12&63|128,te[oe++]=ee>>6&63|128,te[oe++]=63&ee|128):(te[oe++]=ee>>12|224,te[oe++]=ee>>6&63|128,te[oe++]=63&ee|128)}return te},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,te){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,ke=[];for(let ee=0;ee<se.length;ee+=3){const ge=se[ee],Ue=ee+1<se.length,tt=Ue?se[ee+1]:0,yt=ee+2<se.length,Nt=yt?se[ee+2]:0;let er=(15&tt)<<2|Nt>>6,Ce=63&Nt;yt||(Ce=64,Ue||(er=64)),ke.push(oe[ge>>2],oe[(3&ge)<<4|tt>>4],oe[er],oe[Ce])}return ke.join("")},encodeString(se,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(se):this.encodeByteArray(F(se),te)},decodeString(se,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(se):function(se){const te=[];let oe=0,ke=0;for(;oe<se.length;){const ee=se[oe++];if(ee<128)te[ke++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const ge=se[oe++];te[ke++]=String.fromCharCode((31&ee)<<6|63&ge)}else if(ee>239&&ee<365){const yt=((7&ee)<<18|(63&se[oe++])<<12|(63&se[oe++])<<6|63&se[oe++])-65536;te[ke++]=String.fromCharCode(55296+(yt>>10)),te[ke++]=String.fromCharCode(56320+(1023&yt))}else{const ge=se[oe++],Ue=se[oe++];te[ke++]=String.fromCharCode((15&ee)<<12|(63&ge)<<6|63&Ue)}}return te.join("")}(this.decodeStringToByteArray(se,te))},decodeStringToByteArray(se,te){this.init_();const oe=te?this.charToByteMapWebSafe_:this.charToByteMap_,ke=[];for(let ee=0;ee<se.length;){const ge=oe[se.charAt(ee++)],tt=ee<se.length?oe[se.charAt(ee)]:0;++ee;const Nt=ee<se.length?oe[se.charAt(ee)]:64;++ee;const St=ee<se.length?oe[se.charAt(ee)]:64;if(++ee,null==ge||null==tt||null==Nt||null==St)throw Error();ke.push(ge<<2|tt>>4),64!==Nt&&(ke.push(tt<<4&240|Nt>>2),64!==St&&ke.push(Nt<<6&192|St))}return ke},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}},W=function(se){const te=F(se);return q.encodeByteArray(te,!0)},H=function(se){return W(se).replace(/\./g,"")},ae=function(se){try{return q.decodeString(se,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function Z(se){return $(void 0,se)}function $(se,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return te}for(const oe in te)!te.hasOwnProperty(oe)||!J(oe)||(se[oe]=$(se[oe],te[oe]));return se}function J(se){return"__proto__"!==se}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,oe)=>{this.resolve=te,this.reject=oe})}wrapCallback(te){return(oe,ke)=>{oe?this.reject(oe):this.resolve(ke),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(oe):te(oe,ke))}}}function be(se,te){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ke=te||"demo-project",ee=se.iat||0,ge=se.sub||se.user_id;if(!ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${ke}`,aud:ke,iat:ee,exp:ee+3600,auth_time:ee,sub:ge,user_id:ge,firebase:{sign_in_provider:"custom",identities:{}}},se);return[H(JSON.stringify({alg:"none",type:"JWT"})),H(JSON.stringify(Ue)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Re(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function Me(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Ie().indexOf("Electron/")>=0}function Ne(){const se=Ie();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function de(){return Ie().indexOf("MSAppHost/")>=0}function Oe(){return!1}function ie(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){return"object"==typeof indexedDB}function me(){return new Promise((se,te)=>{try{let oe=!0;const ke="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(ke);ee.onsuccess=()=>{ee.result.close(),oe||self.indexedDB.deleteDatabase(ke),se(!0)},ee.onupgradeneeded=()=>{oe=!1},ee.onerror=()=>{var ge;te((null===(ge=ee.error)||void 0===ge?void 0:ge.message)||"")}}catch(oe){te(oe)}})}function K(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pe extends Error{constructor(te,oe,ke){super(oe),this.code=te,this.customData=ke,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}}class we{constructor(te,oe,ke){this.service=te,this.serviceName=oe,this.errors=ke}create(te,...oe){const ke=oe[0]||{},ee=`${this.service}/${te}`,ge=this.errors[te],Ue=ge?function Ge(se,te){return se.replace(mt,(oe,ke)=>{const ee=te[ke];return null!=ee?String(ee):`<${ke}?>`})}(ge,ke):"Error";return new pe(ee,`${this.serviceName}: ${Ue} (${ee}).`,ke)}}const mt=/\{\$([^}]+)}/g;function $t(se){return JSON.parse(se)}function Lt(se){return JSON.stringify(se)}const Qe=function(se){let te={},oe={},ke={},ee="";try{const ge=se.split(".");te=$t(ae(ge[0])||""),oe=$t(ae(ge[1])||""),ee=ge[2],ke=oe.d||{},delete oe.d}catch{}return{header:te,claims:oe,data:ke,signature:ee}},on=function(se){const oe=Qe(se).claims;return!!oe&&"object"==typeof oe&&oe.hasOwnProperty("iat")},Qt=function(se){const te=Qe(se).claims;return"object"==typeof te&&!0===te.admin};function Ot(se,te){return Object.prototype.hasOwnProperty.call(se,te)}function Kt(se,te){if(Object.prototype.hasOwnProperty.call(se,te))return se[te]}function Jt(se){for(const te in se)if(Object.prototype.hasOwnProperty.call(se,te))return!1;return!0}function Zn(se,te,oe){const ke={};for(const ee in se)Object.prototype.hasOwnProperty.call(se,ee)&&(ke[ee]=te.call(oe,se[ee],ee,se));return ke}function Vn(se,te){if(se===te)return!0;const oe=Object.keys(se),ke=Object.keys(te);for(const ee of oe){if(!ke.includes(ee))return!1;const ge=se[ee],Ue=te[ee];if(vn(ge)&&vn(Ue)){if(!Vn(ge,Ue))return!1}else if(ge!==Ue)return!1}for(const ee of ke)if(!oe.includes(ee))return!1;return!0}function vn(se){return null!==se&&"object"==typeof se}function ss(se){const te=[];for(const[oe,ke]of Object.entries(se))Array.isArray(ke)?ke.forEach(ee=>{te.push(encodeURIComponent(oe)+"="+encodeURIComponent(ee))}):te.push(encodeURIComponent(oe)+"="+encodeURIComponent(ke));return te.length?"&"+te.join("&"):""}function Ei(se){const te={};return se.replace(/^\?/,"").split("&").forEach(ke=>{if(ke){const[ee,ge]=ke.split("=");te[decodeURIComponent(ee)]=decodeURIComponent(ge)}}),te}function Li(se){const te=se.indexOf("?");if(!te)return"";const oe=se.indexOf("#",te);return se.substring(te,oe>0?oe:void 0)}class Hn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let te=1;te<this.blockSize;++te)this.pad_[te]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(te,oe){oe||(oe=0);const ke=this.W_;if("string"==typeof te)for(let St=0;St<16;St++)ke[St]=te.charCodeAt(oe)<<24|te.charCodeAt(oe+1)<<16|te.charCodeAt(oe+2)<<8|te.charCodeAt(oe+3),oe+=4;else for(let St=0;St<16;St++)ke[St]=te[oe]<<24|te[oe+1]<<16|te[oe+2]<<8|te[oe+3],oe+=4;for(let St=16;St<80;St++){const er=ke[St-3]^ke[St-8]^ke[St-14]^ke[St-16];ke[St]=4294967295&(er<<1|er>>>31)}let Nt,_n,ee=this.chain_[0],ge=this.chain_[1],Ue=this.chain_[2],tt=this.chain_[3],yt=this.chain_[4];for(let St=0;St<80;St++){St<40?St<20?(Nt=tt^ge&(Ue^tt),_n=1518500249):(Nt=ge^Ue^tt,_n=1859775393):St<60?(Nt=ge&Ue|tt&(ge|Ue),_n=2400959708):(Nt=ge^Ue^tt,_n=3395469782);const er=(ee<<5|ee>>>27)+Nt+yt+_n+ke[St]&4294967295;yt=tt,tt=Ue,Ue=4294967295&(ge<<30|ge>>>2),ge=ee,ee=er}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+ge&4294967295,this.chain_[2]=this.chain_[2]+Ue&4294967295,this.chain_[3]=this.chain_[3]+tt&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update(te,oe){if(null==te)return;void 0===oe&&(oe=te.length);const ke=oe-this.blockSize;let ee=0;const ge=this.buf_;let Ue=this.inbuf_;for(;ee<oe;){if(0===Ue)for(;ee<=ke;)this.compress_(te,ee),ee+=this.blockSize;if("string"==typeof te){for(;ee<oe;)if(ge[Ue]=te.charCodeAt(ee),++Ue,++ee,Ue===this.blockSize){this.compress_(ge),Ue=0;break}}else for(;ee<oe;)if(ge[Ue]=te[ee],++Ue,++ee,Ue===this.blockSize){this.compress_(ge),Ue=0;break}}this.inbuf_=Ue,this.total_+=oe}digest(){const te=[];let oe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&oe,oe/=256;this.compress_(this.buf_);let ke=0;for(let ee=0;ee<5;ee++)for(let ge=24;ge>=0;ge-=8)te[ke]=this.chain_[ee]>>ge&255,++ke;return te}}function os(se,te){const oe=new gt(se,te);return oe.subscribe.bind(oe)}class gt{constructor(te,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{te(this)}).catch(ke=>{this.error(ke)})}next(te){this.forEachObserver(oe=>{oe.next(te)})}error(te){this.forEachObserver(oe=>{oe.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,oe,ke){let ee;if(void 0===te&&void 0===oe&&void 0===ke)throw new Error("Missing Observer.");ee=function An(se,te){if("object"!=typeof se||null===se)return!1;for(const oe of te)if(oe in se&&"function"==typeof se[oe])return!0;return!1}(te,["next","error","complete"])?te:{next:te,error:oe,complete:ke},void 0===ee.next&&(ee.next=Xt),void 0===ee.error&&(ee.error=Xt),void 0===ee.complete&&(ee.complete=Xt);const ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),ge}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,te)}sendOne(te,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{oe(this.observers[te])}catch(ke){typeof console<"u"&&console.error&&console.error(ke)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xt(){}const Nr=function(se,te,oe,ke){let ee;if(ke<te?ee="at least "+te:ke>oe&&(ee=0===oe?"none":"no more than "+oe),ee)throw new Error(se+" failed: Was called with "+ke+(1===ke?" argument.":" arguments.")+" Expects "+ee+".")};function lr(se,te){return`${se} failed: ${te} argument `}function Sn(se,te,oe,ke){if((!ke||oe)&&"function"!=typeof oe)throw new Error(lr(se,te)+"must be a valid function.")}function cr(se,te,oe,ke){if((!ke||oe)&&("object"!=typeof oe||null===oe))throw new Error(lr(se,te)+"must be a valid context object.")}const As=function(se){const te=[];let oe=0;for(let ke=0;ke<se.length;ke++){let ee=se.charCodeAt(ke);if(ee>=55296&&ee<=56319){const ge=ee-55296;ke++,P(ke<se.length,"Surrogate pair missing trail surrogate."),ee=65536+(ge<<10)+(se.charCodeAt(ke)-56320)}ee<128?te[oe++]=ee:ee<2048?(te[oe++]=ee>>6|192,te[oe++]=63&ee|128):ee<65536?(te[oe++]=ee>>12|224,te[oe++]=ee>>6&63|128,te[oe++]=63&ee|128):(te[oe++]=ee>>18|240,te[oe++]=ee>>12&63|128,te[oe++]=ee>>6&63|128,te[oe++]=63&ee|128)}return te},Gt=function(se){let te=0;for(let oe=0;oe<se.length;oe++){const ke=se.charCodeAt(oe);ke<128?te++:ke<2048?te+=2:ke>=55296&&ke<=56319?(te+=4,oe++):te+=3}return te};function Rt(se,te=1e3,oe=2){const ke=te*Math.pow(oe,se),ee=Math.round(.5*ke*(Math.random()-.5)*2);return Math.min(144e5,ke+ee)}function xn(se){return se&&se._delegate?se._delegate:se}},1398:(ze,G,M)=>{"use strict";var u=M(4650);let P=null;function D(){return P}const W=new u.OlP("DocumentToken");let H=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ae(){return(0,u.LFG)($)}()},providedIn:"platform"}),n})();const Z=new u.OlP("Location Initialized");let $=(()=>{class n extends H{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return D().getBaseHref(this._doc)}onPopState(t){const r=D().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=D().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return new $((0,u.LFG)(W))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function fe(){const n=(0,u.LFG)(W).location;return new Me((0,u.LFG)(H),n&&n.origin||"")}()},providedIn:"root"}),n})();const Re=new u.OlP("appBaseHref");let Me=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Ze(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Ze(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(H),u.LFG(Re,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Ze(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Ze(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(H),u.LFG(Re,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(ie(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ze(r))}normalize(t){return n.stripTrailingSlash(function Oe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=be,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function de(){return new Ne((0,u.LFG)(he))}()},providedIn:"root"}),n})();function ie(n){return n.replace(/\/index.html$/,"")}function Ru(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let ud=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Ss{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ss(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),us(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{us(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function us(n,e){n.context.$implicit=e.item}let Vi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ti,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Or("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Or("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ti{constructor(){this.$implicit=null,this.ngIf=null}}function Or(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let pd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const cs="browser";function Hr(n){return n===cs}function Bu(n){return"server"===n}let ju=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new _f((0,u.LFG)(W),window)}),n})();class _f{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function la(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=gn(this.window.history)||gn(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function gn(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class On{}class da extends class ca extends class q{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function U(n){P||(P=n)}(new da)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ni(){return ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null}();return null==t?null:function Ro(n){ko=ko||document.createElement("a"),ko.setAttribute("href",n);const e=ko.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ru(document.cookie,e)}}let ko,ji=null;const ds=new u.OlP("TRANSITION_ID"),Gl=[{provide:u.ip1,useFactory:function ln(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=D(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[ds,W,u.zs3],multi:!0}];let gd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const $r=new u.OlP("EventManagerPlugins");let ha=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($r),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class to{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=D().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let xt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),hs=(()=>{class n extends xt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(fa),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fa))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function fa(n){D().remove(n)}const pa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ga=/%COMP%/g;function Fo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Fo(n,i,t):(i=i.replace(ga,n),t.push(i))}return t}function Lo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let no=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Uo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new yf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Fo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ha),u.LFG(hs),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Uo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pa[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Hu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Hu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=pa[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pa[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lo(r)):this.eventManager.addEventListener(e,t,Lo(r))}}function Hu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class yd extends Uo{constructor(e,t,r,i){super(e),this.component=r;const a=Fo(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function je(n){return"_ngcontent-%COMP%".replace(ga,n)}(i+"-"+r.id),this.hostAttr=function qt(n){return"_nghost-%COMP%".replace(ga,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yf extends Uo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Fo(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let vf=(()=>{class n extends to{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Vo=["alt","control","meta","shift"],qi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$u={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ps=(()=>{class n extends to{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>D().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(Vo.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function $a(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&$u.hasOwnProperty(e)&&(e=$u[e]))}return qi[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Vo.forEach(a=>{a!=i&&fs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const bf=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:cs},{provide:u.g9A,useValue:function Bo(){da.makeCurrent()},multi:!0},{provide:W,useFactory:function ma(){return(0,u.RDi)(document),document},deps:[]}]),_a=new u.OlP(""),ro=[{provide:u.rWj,useClass:class No{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(m){c=c||m,a--,0==a&&r(c)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?D().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Ku=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function zl(){return new u.qLn},deps:[]},{provide:$r,useClass:vf,multi:!0,deps:[W,u.R0b,u.Lbi]},{provide:$r,useClass:Ps,multi:!0,deps:[W]},{provide:no,useClass:no,deps:[ha,hs,u.AFp]},{provide:u.FYo,useExisting:no},{provide:xt,useExisting:hs},{provide:hs,useClass:hs,deps:[W]},{provide:ha,useClass:ha,deps:[$r,u.R0b]},{provide:On,useClass:gd,deps:[]},[]];let jo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:ds,useExisting:u.AFp},Gl]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_a,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Ku,...ro],imports:[pd,u.hGG]}),n})(),bd=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wl(){return new bd((0,u.LFG)(W))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Td=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):u.LFG(Ka),r},providedIn:"root"}),n})(),Ka=(()=>{class n extends Td{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case u.q3G.NONE:return r;case u.q3G.HTML:return(0,u.qzn)(r,"HTML")?(0,u.z3N)(r):(0,u.EiD)(this._doc,String(r)).toString();case u.q3G.STYLE:return(0,u.qzn)(r,"Style")?(0,u.z3N)(r):r;case u.q3G.SCRIPT:if((0,u.qzn)(r,"Script"))return(0,u.z3N)(r);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(r),(0,u.qzn)(r,"URL")?(0,u.z3N)(r):(0,u.mCW)(String(r));case u.q3G.RESOURCE_URL:if((0,u.qzn)(r,"ResourceURL"))return(0,u.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wa(n){return new Ka(n.get(W))}(u.LFG(u.zs3)),r},providedIn:"root"}),n})();var Fn=M(2011),Mr=M(7579),wn=M(3269),tn=M(8996);function ct(...n){const e=(0,wn.yG)(n);return(0,tn.D)(n,e)}var zn=M(8306),oo=M(6451),Ya=M(5363),Ho=M(8421),ir=M(4482),yn=M(5403);function bn(n,e){return(0,ir.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,yn.x)(r,m=>{i?.unsubscribe();let v=0;const I=a++;(0,Ho.Xf)(n(m,I)).subscribe(i=(0,yn.x)(r,S=>r.next(e?e(m,S,I,v++):S),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var dt=M(4004),Rs=M(6063);class wa extends Mr.x{constructor(e=1/0,t=1/0,r=Rs.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)f=m;f&&r.splice(0,f+1)}}}var pi=M(3099);function ao(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,pi.B)({connector:()=>new wa(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Zi=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function mr(n,e){return(0,ir.e)((t,r)=>{let i=0;t.subscribe((0,yn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Lr=M(5698);function Ns(n){return(0,ir.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qu(n=Xl){return(0,ir.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Xl(){return new Zi}var Os=M(4671);function Fs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mr((i,a)=>n(i,a,r)):Os.y,(0,Lr.q)(1),t?Ns(e):Qu(()=>new Zi))}var gi=M(576);function Qa(n,e){return(0,gi.m)(e)?bn(()=>n,e):bn(()=>n)}var uo=M(9468),Yt=M(5813);M(5867);var Se=M(5861),Ur=M(9681),ps=M(4859),L=M(2090),gs=M(1877);const xd=new Map,sr={activated:!1,tokenObservers:[]},Xa={initialized:!1,enabled:!1};function Tn(n){return xd.get(n)||sr}function Di(n,e){xd.set(n,e)}function el(){return Xa}class rc{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Se.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function Md(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vr(n){if(!Tn(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function ba(n,e){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,Se.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const j=yield c.getHeartbeatsHeader();j&&(a["X-Firebase-Client"]=j)}const f={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,f)}catch(j){throw _i.create("fetch-network-error",{originalErrorMessage:null===(r=j)||void 0===r?void 0:r.message})}if(200!==m.status)throw _i.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(j){throw _i.create("fetch-parse-error",{originalErrorMessage:null===(i=j)||void 0===i?void 0:i.message})}const I=v.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(I[1]),O=Date.now();return{token:v.token,expireTimeMillis:O+S,issuedAtTimeMillis:O}})).apply(this,arguments)}function Tf(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Us="firebase-app-check-store";let Pd=null;function T(){return Pd||(Pd=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(_i.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Us,{keyPath:"compositeKey"})}}catch(r){e(_i.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Pd)}function Ve(){return(Ve=(0,Se.Z)(function*(n,e){const r=(yield T()).transaction(Us,"readwrite"),a=r.objectStore(Us).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=m=>{c()},r.onerror=m=>{var v;f(_i.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const wt=new gs.Yd("@firebase/app-check");function _r(n,e){return(0,L.hl)()?function R(n,e){return function ve(n,e){return Ve.apply(this,arguments)}(function Zt(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{wt.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fo(){return el().enabled}function rl(){return po.apply(this,arguments)}function po(){return(po=(0,Se.Z)(function*(){const n=el();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Bs={error:"UNKNOWN_ERROR"};function Wi(n){return L.US.encodeString(JSON.stringify(n),!1)}function tu(n){return sc.apply(this,arguments)}function sc(){return(sc=(0,Se.Z)(function*(n,e=!1){const t=n.app;Vr(t);const r=Tn(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Wo(m)&&(i=m)}if(!e&&i&&Wo(i))return{token:i.token};let f,c=!1;if(fo()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ba(Tf(t,yield rl()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0);const m=yield r.exchangeTokenPromise;return yield _r(t,m),Di(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?wt.warn(m.message):wt.error(m),a=m}return i?(f={token:i.token},Di(t,Object.assign(Object.assign({},r),{token:i})),yield _r(t,i)):f=oc(a),c&&kd(t,f),f})).apply(this,arguments)}function il(n,e){const t=Tn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Di(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Df(n){const{app:e}=n,t=Tn(e);let r=t.tokenRefresher;r||(r=function Ey(n){const{app:e}=n;return new rc((0,Se.Z)(function*(){let r;if(r=Tn(e).token?yield tu(n,!0):yield tu(n),r.error)throw r.error}),()=>!0,()=>{const t=Tn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Di(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kd(n,e){const t=Tn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Wo(n){return n.expireTimeMillis-Date.now()>0}function oc(n){return{token:Wi(Bs),error:n}}class $g{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tn(this.app);for(const t of e)il(this.app,t.next);return Promise.resolve()}}const Ld="app-check-internal";!function Py(){(0,Ur._registerComponent)(new ps.wA("app-check",n=>function Kb(n,e){return new $g(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ld).initialize()})),(0,Ur._registerComponent)(new ps.wA(Ld,n=>function ac(n){return{getToken:e=>tu(n,e),addTokenListener:e=>function zo(n,e,t,r){const{app:i}=n,a=Tn(i),c={next:t,error:r,type:e};if(Di(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&Wo(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Df(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Df(n))}(n,"INTERNAL",e),removeTokenListener:e=>il(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ur.registerVersion)("@firebase/app-check","0.5.9")}();class Ki{constructor(){return(0,Yt.vb)("app-check")}}typeof window<"u"&&window;var Wn=M(127);const go=new u.OlP("angularfire2.auth.use-emulator"),hc=new u.OlP("angularfire2.auth.settings"),sl=new u.OlP("angularfire2.auth.tenant-id"),fc=new u.OlP("angularfire2.auth.langugage-code"),Mf=new u.OlP("angularfire2.auth.use-device-language"),Bd=new u.OlP("angularfire.auth.persistence"),Pf=(n,e,t,r,i,a,c,f)=>(0,Fn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),c)for(const[v,I]of Object.entries(c))m.settings[v]=I;return f&&m.setPersistence(f),m},[t,r,i,a,c,f]);let Ea=(()=>{class n{constructor(t,r,i,a,c,f,m,v,I,S,O,j){const Y=new Mr.x,Ae=ct(void 0).pipe((0,Ya.Q)(c.outsideAngular),bn(()=>a.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,5881)))),(0,dt.U)(()=>(0,Fn.on)(t,a,r)),(0,dt.U)(Le=>Pf(Le,a,f,v,I,S,m,O)),ao({bufferSize:1,refCount:!1}));if(Bu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Ae.pipe(Fs()).subscribe();const st=Ae.pipe(bn(pt=>pt.getRedirectResult().then(jt=>jt,()=>null)),Yt.iC,ao({bufferSize:1,refCount:!1})),ft=Ae.pipe(bn(pt=>new zn.y(jt=>({unsubscribe:a.runOutsideAngular(()=>pt.onAuthStateChanged(un=>jt.next(un),un=>jt.error(un),()=>jt.complete()))})))),_t=Ae.pipe(bn(pt=>new zn.y(jt=>({unsubscribe:a.runOutsideAngular(()=>pt.onIdTokenChanged(un=>jt.next(un),un=>jt.error(un),()=>jt.complete()))}))));this.authState=st.pipe(Qa(ft),(0,uo.R)(c.outsideAngular),(0,Ya.Q)(c.insideAngular)),this.user=st.pipe(Qa(_t),(0,uo.R)(c.outsideAngular),(0,Ya.Q)(c.insideAngular)),this.idToken=this.user.pipe(bn(pt=>pt?(0,tn.D)(pt.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(bn(pt=>pt?(0,tn.D)(pt.getIdTokenResult()):ct(null))),this.credential=(0,oo.T)(st,Y,this.authState.pipe(mr(pt=>!pt))).pipe((0,dt.U)(pt=>pt?.user?pt:null),(0,uo.R)(c.outsideAngular),(0,Ya.Q)(c.insideAngular))}return(0,Fn.pX)(this,Ae,a,{spy:{apply:(Le,st,ft)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&ft.then(_t=>Y.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fn.Dh),u.LFG(Fn.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Yt.HU),u.LFG(go,8),u.LFG(hc,8),u.LFG(sl,8),u.LFG(fc,8),u.LFG(Mf,8),u.LFG(Bd,8),u.LFG(Ki,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pc=(()=>{class n{constructor(){Wn.Z.registerVersion("angularfire",Yt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ea]}),n})();var Ia=M(4986),jd=M(3942);const kf="firebasestorage.googleapis.com",eC="storageBucket";class yr extends L.ZR{constructor(e,t){super(Qg(e),`Firebase Storage: ${t} (${Qg(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}_codeEquals(e){return Qg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Qg(n){return"storage/"+n}function qd(){return new yr("unknown","An unknown error occurred, please check the error payload for server response.")}function Jg(){return new yr("canceled","User canceled the upload/download.")}function rC(){return new yr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Rf(n){return new yr("invalid-argument",n)}function pA(){return new yr("app-deleted","The Firebase app was deleted.")}function Zd(n){return new yr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gc(n,e){return new yr("invalid-format","String does not match format '"+n+"': "+e)}function Nf(n){throw new yr("internal-error","Internal error: "+n)}class ri{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ri.makeFromUrl(e,t)}catch{return new ri(e,"")}if(""===r.path)return r;throw function cA(n){return new yr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(pt){pt.path_=decodeURIComponent(pt.path)}const S=t.replace(/[.]/g,"\\."),_t=[{regex:f,indices:{bucket:1,path:3},postModify:function a(pt){"/"===pt.path.charAt(pt.path.length-1)&&(pt.path_=pt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===kf?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let pt=0;pt<_t.length;pt++){const jt=_t[pt],un=jt.regex.exec(e);if(un){let ku=un[jt.indices.path];ku||(ku=""),r=new ri(un[jt.indices.bucket],ku),jt.postModify(r);break}}if(null==r)throw function nC(n){return new yr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Of{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Xg(n){return"string"==typeof n||n instanceof String}function sC(n){return Ry()&&n instanceof Blob}function Ry(){return typeof Blob<"u"}function Ff(n,e,t,r){if(r<e)throw Rf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Rf(`Invalid value for '${n}'. Expected ${t} or less.`)}function ru(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function oC(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ol=(()=>{return(n=ol||(ol={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ol;var n})();class aC{constructor(e,t,r,i,a,c,f,m,v,I,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=I,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,j)=>{this.resolve_=O,this.reject_=j,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function _A(n){return void 0!==n}(m)?a():a(m)}catch(m){c(m)}else if(null!==f){const m=qd();m.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,m):m)}else c(i.canceled?this.appDelete_?pA():Jg():function lA(){return new yr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new em(!1,null,!0)):this.backoffId_=function gA(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function m(){return 2===f}let v=!1;function I(...Le){v||(v=!0,e.apply(null,Le))}function S(Le){i=setTimeout(()=>{i=null,n(j,m())},Le)}function O(){a&&clearTimeout(a)}function j(Le,...st){if(v)return void O();if(Le)return O(),void I.call(null,Le,...st);if(m()||c)return O(),void I.call(null,Le,...st);let _t;r<64&&(r*=2),1===f?(f=2,_t=0):_t=1e3*(r+Math.random()),S(_t)}let Y=!1;function Ae(Le){Y||(Y=!0,O(),!v&&(null!==i?(Le||(f=2),clearTimeout(i),S(0)):Le||(f=1)))}return S(0),a=setTimeout(()=>{c=!0,Ae(!0)},t),Ae}((r,i)=>{if(i)return void r(!1,new em(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===ol.NO_ERROR,m=a.getStatus();if(!f||this.isRetryStatusCode_(m)){const I=a.getErrorCode()===ol.ABORT;return void r(!1,new em(!1,null,I))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new em(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function mA(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class em{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Lf(...n){const e=function Ai(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Ry())return new Blob(n);throw new yr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tm{constructor(e,t){this.data=e,this.contentType=t||null}}function Ly(n,e){switch(n){case js.RAW:return new tm(Uy(e));case js.BASE64:case js.BASE64URL:return new tm(Vy(n,e));case js.DATA_URL:return new tm(function CA(n){const e=new lC(n);return e.base64?Vy(js.BASE64,e.rest):function bA(n){let e;try{e=decodeURIComponent(n)}catch{throw gc(js.DATA_URL,"Malformed data URL.")}return Uy(e)}(e.rest)}(e),function EA(n){return new lC(n).contentType}(e))}throw qd()}function Uy(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Vy(n,e){switch(n){case js.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw gc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case js.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw gc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function wA(n){return atob(n)}(e)}catch{throw gc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class lC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gc(js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function IA(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ta{constructor(e,t){let r=0,i="";sC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(sC(this.data_)){const i=function Fy(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ta(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ta(r,!0)}}static getBlob(...e){if(Ry()){const t=e.map(r=>r instanceof Ta?r.data_:r);return new Ta(Lf.apply(null,t))}{const t=e.map(c=>Xg(c)?Ly(js.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[a++]=c[f]}),new Ta(i,!0)}}uploadData(){return this.data_}}function By(n){let e;try{e=JSON.parse(n)}catch{return null}return function yA(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function cC(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function fP(n,e){return e}class vs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||fP}}let Uf=null;function ws(){if(Uf)return Uf;const n=[];n.push(new vs("bucket")),n.push(new vs("generation")),n.push(new vs("metageneration")),n.push(new vs("name","fullPath",!0));const t=new vs("name");t.xform=function e(a,c){return function pP(n){return!Xg(n)||n.length<2?n:cC(n)}(c)},n.push(t);const i=new vs("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new vs("timeCreated")),n.push(new vs("updated")),n.push(new vs("md5Hash",null,!0)),n.push(new vs("cacheControl",null,!0)),n.push(new vs("contentDisposition",null,!0)),n.push(new vs("contentEncoding",null,!0)),n.push(new vs("contentLanguage",null,!0)),n.push(new vs("contentType",null,!0)),n.push(new vs("metadata","customMetadata",!0)),Uf=n,Uf}function dC(n,e,t){const r=By(e);return null===r?null:function qy(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function jy(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ri(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function mc(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Zy="prefixes";class Ko{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function su(n){if(!n)throw qd()}function ou(n,e){return function t(r,i){const a=dC(n,i,e);return su(null!==a),a}}function $d(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Pr(){return new yr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function aA(){return new yr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function ky(n){return new yr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function uA(n){return new yr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function _c(n){const e=$d(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function tC(n){return new yr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function pC(n,e,t){const i=ru(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Ko(i,"GET",ou(n,t),c);return f.errorHandler=_c(e),f}function TA(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=ru(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,I=new Ko(f,"GET",function zy(n,e){return function t(r,i){const a=function Gy(n,e,t){const r=By(t);return null===r?null:function $y(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Zy])for(const i of t[Zy]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new ri(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ri(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return su(null!==a),a}}(n,e.bucket),v);return I.urlParams=a,I.errorHandler=$d(e),I}function nm(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function mC(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Gd{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Ky(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{su(!1)}return su(!!t&&-1!==(e||["active"]).indexOf(t)),t}const yC={STATE_CHANGED:"state_changed"},Si={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qy(n){switch(n){case"running":case"pausing":case"canceling":return Si.RUNNING;case"paused":return Si.PAUSED;case"success":return Si.SUCCESS;case"canceled":return Si.CANCELED;default:return Si.ERROR}}class vC{constructor(e,t,r){if(function iC(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function au(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class CC extends class bC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ol.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ol.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ol.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Nf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function mo(){return new CC}class Xy{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ws(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function xA(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=nm(e,r,i),f={name:c.fullPath},m=ru(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=mc(c,t),Y=new Ko(m,"POST",function j(Ae){let Le;Ky(Ae);try{Le=Ae.getResponseHeader("X-Goog-Upload-URL")}catch{su(!1)}return su(Xg(Le)),Le},n.maxUploadRetryTime);return Y.urlParams=f,Y.headers=I,Y.body=S,Y.errorHandler=$d(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function _C(n,e,t,r){const m=new Ko(t,"POST",function a(v){const I=Ky(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{su(!1)}S||su(!1);const O=Number(S);return su(!isNaN(O)),new Gd(O,r.size(),"final"===I)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=$d(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,mo,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Gd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function yc(n,e,t,r,i,a,c,f){const m=new Gd(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function hA(){return new yr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let I=v;i>0&&(I=Math.min(I,i));const S=m.current,Y={"X-Goog-Upload-Command":I===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},Ae=r.slice(S,S+I);if(null===Ae)throw rC();const _t=new Ko(t,"POST",function Le(pt,jt){const un=Ky(pt,["active","final"]),hi=m.current+I,ku=r.size();let hP;return hP="final"===un?ou(e,a)(pt,jt):null,new Gd(hi,ku,"final"===un,hP)},e.maxUploadRetryTime);return _t.headers=Y,_t.body=Ae.uploadData(),_t.progressCallback=f||null,_t.errorHandler=$d(n),_t}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(c,mo,i,a);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=pC(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,mo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Wy(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let _t="";for(let pt=0;pt<2;pt++)_t+=Math.random().toString().slice(2);return _t}();c["Content-Type"]="multipart/related; boundary="+m;const v=nm(e,r,i),I=mc(v,t),j=Ta.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===j)throw rC();const Y={name:v.fullPath},Ae=ru(a,n.host,n._protocol),st=n.maxUploadRetryTime,ft=new Ko(Ae,"POST",ou(n,t),st);return ft.urlParams=Y,ft.headers=c,ft.body=j.uploadData(),ft.errorHandler=$d(e),ft}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Jg(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new vC(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qy(this._state)){case Si.SUCCESS:au(this._resolve.bind(null,this.snapshot))();break;case Si.CANCELED:case Si.ERROR:au(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qy(this._state)){case Si.RUNNING:case Si.PAUSED:e.next&&au(e.next.bind(e,this.snapshot))();break;case Si.SUCCESS:e.complete&&au(e.complete.bind(e))();break;default:e.error&&au(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class uu{constructor(e,t){this._service=e,this._location=t instanceof ri?t:ri.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uu(e,t)}get root(){const e=new ri(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cC(this._location.path)}get storage(){return this._service}get parent(){const e=function Hd(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ri(this._location.bucket,e);return new uu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Zd(e)}}function DC(n,e,t){return sm.apply(this,arguments)}function sm(){return(sm=(0,Se.Z)(function*(n,e,t){const i=yield om(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield DC(n,e,i.nextPageToken))})).apply(this,arguments)}function om(n,e){null!=e&&"number"==typeof e.maxResults&&Ff("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=TA(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,mo)}function SC(n){n._throwIfRoot("getDownloadURL");const e=function DA(n,e,t){const i=ru(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Ko(i,"GET",function fC(n,e){return function t(r,i){const a=dC(n,i,e);return su(null!==a),function hC(n,e,t,r){const i=By(e);if(null===i||!Xg(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return ru("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+oC({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=_c(e),f}(n.storage,n._location,ws());return n.storage.makeRequestWithTokens(e,mo).then(t=>{if(null===t)throw function fA(){return new yr("no-download-url","The given file does not have any download URLs.")}();return t})}function tv(n,e){const t=function iu(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ri(n._location.bucket,t);return new uu(n.storage,r)}function _o(n,e){if(n instanceof rv){const t=n;if(null==t._bucket)throw function dA(){return new yr("no-default-bucket","No default bucket found. Did you set the '"+eC+"' property when initializing the app?")}();const r=new uu(t,t._bucket);return null!=e?_o(r,e):r}return void 0!==e?tv(n,e):n}function OA(n,e){if(e&&function RA(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof rv)return function NA(n,e){return new uu(n,e)}(n,e);throw Rf("To use ref(service, url), the first argument must be a Storage instance.")}return _o(n,e)}function nv(n,e){const t=e?.[eC];return null==t?null:ri.makeFromBucketSpec(t,n)}class rv{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=kf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ri.makeFromBucketSpec(i,this._host):nv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ri.makeFromBucketSpec(this._url,e):nv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ff("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ff("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Se.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Se.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uu(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Of(pA());{const a=function Oy(n,e,t,r,i,a){const c=oC(n.urlParams),f=n.url+c,m=Object.assign({},n.headers);return function Ny(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function vA(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function Yi(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,a),function uC(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new aC(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Se.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const xC="@firebase/storage";function OC(n,e){return OA(n=(0,L.m9)(n),e)}function LC(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new rv(t,r,i,e,Ur.SDK_VERSION)}!function jA(){(0,Ur._registerComponent)(new ps.wA("storage",LC,"PUBLIC").setMultipleInstances(!0)),(0,Ur.registerVersion)(xC,"0.9.7",""),(0,Ur.registerVersion)(xC,"0.9.7","esm2017")}();class Vf{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sv{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Vf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Vf(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new Vf(c,this,this._ref)):{next:t.next?c=>t.next(new Vf(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class am{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new al(e,this._service))}get items(){return this._delegate.items.map(e=>new al(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class al{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function FC(n,e){return tv(n,e)}(this._delegate,e);return new al(t,this.storage)}get root(){return new al(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new al(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sv(function Ut(n,e,t){return function MA(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Xy(n,new Ta(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=js.RAW,r){this._throwIfRoot("putString");const i=Ly(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new sv(new Xy(this._delegate,new Ta(i.data,!0),a),this)}listAll(){return function LA(n){return function PA(n){const e={prefixes:[],items:[]};return DC(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new am(e,this.storage))}list(e){return function RC(n,e){return om(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new am(t,this.storage))}getMetadata(){return function PC(n){return function AC(n){n._throwIfRoot("getMetadata");const e=pC(n.storage,n._location,ws());return n.storage.makeRequestWithTokens(e,mo)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function kC(n,e){return function gP(n,e){n._throwIfRoot("updateMetadata");const t=function AA(n,e,t,r){const a=ru(e.fullServerUrl(),n.host,n._protocol),f=mc(t,r),v=n.maxOperationRetryTime,I=new Ko(a,"PATCH",ou(n,r),v);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=f,I.errorHandler=_c(e),I}(n.storage,n._location,e,ws());return n.storage.makeRequestWithTokens(t,mo)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function UA(n){return SC(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function NC(n){return function kA(n){n._throwIfRoot("deleteObject");const e=function SA(n,e){const r=ru(e.fullServerUrl(),n.host,n._protocol),f=new Ko(r,"DELETE",function c(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=_c(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,mo)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Zd(e)}}class UC{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(um(e))throw Rf("ref() expected a child path but got a URL, use refFromURL instead.");return new al(OC(this._delegate,e),this)}refFromURL(e){if(!um(e))throw Rf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ri.makeFromUrl(e,this._delegate.host)}catch{throw Rf("refFromUrl() expected a valid full URL but got an invalid one.")}return new al(OC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function VA(n,e,t,r={}){!function FA(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function um(n){return/^[A-Za-z]+:\/\//.test(n)}function qA(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new UC(t,r)}function lm(n){const e=function jC(n){return new zn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function Xb(n,e=Ia.z){return(0,ir.e)((t,r)=>{let i=null,a=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=c+n,I=e.now();if(I<v)return i=this.schedule(void 0,v-I),void r.add(i);f()}t.subscribe((0,yn.x)(r,v=>{a=v,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function wc(n){return{getDownloadURL:()=>ct(void 0).pipe(Yt.fc,bn(()=>n.getDownloadURL()),Yt.iC),getMetadata:()=>ct(void 0).pipe(Yt.fc,bn(()=>n.getMetadata()),Yt.iC),delete:()=>(0,tn.D)(n.delete()),child:e=>wc(n.child(e)),updateMetadata:e=>(0,tn.D)(n.updateMetadata(e)),put:(e,t)=>lm(n.put(e,t)),putString:(e,t,r)=>lm(n.putString(e,t,r)),list:e=>(0,tn.D)(n.list(e)),listAll:()=>(0,tn.D)(n.listAll())}}!function ov(n){const e={TaskState:Si,TaskEvent:yC,StringFormat:js,Storage:UC,Reference:al};n.INTERNAL.registerComponent(new ps.wA("storage-compat",qA,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.15")}(jd.Z);const ZA=new u.OlP("angularfire2.storageBucket"),av=new u.OlP("angularfire2.storage.maxUploadRetryTime"),uv=new u.OlP("angularfire2.storage.maxOperationRetryTime"),Wd=new u.OlP("angularfire2.storage.use-emulator");let qC=(()=>{class n{constructor(t,r,i,a,c,f,m,v,I,S){const O=(0,Fn.on)(t,c,r);this.storage=(0,Fn.cc)(`${O.name}.storage.${i}`,"AngularFireStorage",O.name,()=>{const j=c.runOutsideAngular(()=>O.storage(i||void 0)),Y=I;return Y&&j.useEmulator(...Y),m&&j.setMaxUploadRetryTime(m),v&&j.setMaxOperationRetryTime(v),j},[m,v])}ref(t){return wc(this.storage.ref(t))}refFromURL(t){return wc(this.storage.refFromURL(t))}upload(t,r,i){return wc(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fn.Dh),u.LFG(Fn.xv,8),u.LFG(ZA,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Yt.HU),u.LFG(av,8),u.LFG(uv,8),u.LFG(Wd,8),u.LFG(Ki,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),$A=(()=>{class n{constructor(){Wn.Z.registerVersion("angularfire",Yt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[qC],imports:[HA]}),n})();var Kd=M(8189);function Bf(...n){return function Yd(){return(0,Kd.J)(1)}()((0,tn.D)(n,(0,wn.yG)(n)))}function cm(...n){const e=(0,wn.yG)(n);return(0,ir.e)((t,r)=>{(e?Bf(n,t,e):Bf(n,t)).subscribe(r)})}function lv(){return(0,ir.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function GA(n,e,t,r,i){return(a,c)=>{let f=t,m=e,v=0;a.subscribe((0,yn.x)(c,I=>{const S=v++;m=f?n(m,I,S):(f=!0,I),r&&c.next(m)},i&&(()=>{f&&c.next(m),c.complete()})))}}function lu(n,e){return(0,ir.e)(GA(n,e,arguments.length>=2,!0))}function cv(n,e=Os.y){return n=n??HC,(0,ir.e)((t,r)=>{let i,a=!0;t.subscribe((0,yn.x)(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}function HC(n,e){return n===e}M(5881);var ut,zA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yo={},dv=dv||{},Vt=zA||self;function hv(){}function $C(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zC="closure_uid_"+(1e9*Math.random()>>>0),WA=0;function Qd(n,e,t){return n.call.apply(n.bind,arguments)}function KA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ii(n,e,t){return(ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qd:KA).apply(null,arguments)}function bc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function yi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function du(){this.s=this.s,this.o=this.o}var QA={};du.prototype.s=!1,du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function GC(n){return Object.prototype.hasOwnProperty.call(n,zC)&&n[zC]||(n[zC]=++WA)}(this);delete QA[n]}},du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},KC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function fv(n){return Array.prototype.concat.apply([],arguments)}function pv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function qf(n){return/^[\s\xa0]*$/.test(n)}var wi,gv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function vi(n,e){return-1!=n.indexOf(e)}function YC(n,e){return n<e?-1:n>e?1:0}e:{var QC=Vt.navigator;if(QC){var XA=QC.userAgent;if(XA){wi=XA;break e}}wi=""}function ul(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function mv(n){const e={};for(const t in n)e[t]=n[t];return e}var JC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<JC.length;a++)t=JC[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Zf(n){return Zf[" "](n),n}Zf[" "]=hv;var Hf,n,bP=vi(wi,"Opera"),ll=vi(wi,"Trident")||vi(wi,"MSIE"),eS=vi(wi,"Edge"),eE=eS||ll,tS=vi(wi,"Gecko")&&!(vi(wi.toLowerCase(),"webkit")&&!vi(wi,"Edge"))&&!(vi(wi,"Trident")||vi(wi,"MSIE"))&&!vi(wi,"Edge"),CP=vi(wi.toLowerCase(),"webkit")&&!vi(wi,"Edge");function nS(){var n=Vt.document;return n?n.documentMode:void 0}e:{var $f="",dm=(n=wi,tS?/rv:([^\);]+)(\)|;)/.exec(n):eS?/Edge\/([\d\.]+)/.exec(n):ll?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):CP?/WebKit\/(\S+)/.exec(n):bP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dm&&($f=dm?dm[1]:""),ll){var _v=nS();if(null!=_v&&_v>parseFloat($f)){Hf=String(_v);break e}}Hf=$f}var tE={};var rE=Vt.document&&ll&&(nS()||parseInt(Hf,10))||void 0,rS=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",hv,e),Vt.removeEventListener("test",hv,e)}catch{}return n}();function si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qs(n,e){if(si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tS){e:{try{Zf(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qs.Z.h.call(this)}}si.prototype.h=function(){this.defaultPrevented=!0},yi(qs,si);var yv={2:"touch",3:"pen",4:"mouse"};qs.prototype.h=function(){qs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xd="closure_listenable_"+(1e6*Math.random()|0),vv=0;function EP(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++vv,this.ca=this.fa=!1}function Gf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function wv(n){this.src=n,this.g={},this.h=0}function eh(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=WC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Gf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function th(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}wv.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=th(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new EP(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var zf="closure_lm_"+(1e6*Math.random()|0),Wf={};function hm(n,e,t,r,i){if(r&&r.once)return iE(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)hm(n,e[a],t,r,i);return null}return t=fm(t),n&&n[Xd]?n.N(e,t,jf(r)?!!r.capture:!!r,i):iS(n,e,t,!1,r,i)}function iS(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=jf(i)?!!i.capture:!!i,f=Ev(n);if(f||(n[zf]=f=new wv(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function sS(){var e=IP;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)rS||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Cv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iE(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)iE(n,e[a],t,r,i);return null}return t=fm(t),n&&n[Xd]?n.O(e,t,jf(r)?!!r.capture:!!r,i):iS(n,e,t,!0,r,i)}function sE(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)sE(n,e[a],t,r,i);else r=jf(r)?!!r.capture:!!r,t=fm(t),n&&n[Xd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=th(a=n.g[e],t,r,i))&&(Gf(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ev(n))&&(e=n.g[e.toString()],n=-1,e&&(n=th(e,t,r,i)),(t=-1<n?e[n]:null)&&bv(t))}function bv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Xd])eh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Cv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ev(e))?(eh(t,n),0==t.h&&(t.src=null,e[zf]=null)):Gf(n)}}}function Cv(n){return n in Wf?Wf[n]:Wf[n]="on"+n}function IP(n,e){if(n.ca)n=!0;else{e=new qs(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&bv(n),n=t.call(r,e)}return n}function Ev(n){return(n=n[zf])instanceof wv?n:null}var oE="__closure_events_fn_"+(1e9*Math.random()>>>0);function fm(n){return"function"==typeof n?n:(n[oE]||(n[oE]=function(e){return n.handleEvent(e)}),n[oE])}function Wr(){du.call(this),this.i=new wv(this),this.P=this,this.I=null}function bi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new si(e,n);else if(e instanceof si)e.target=e.target||n;else{var i=e;XC(e=new si(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=nh(c,r,!0,e)&&i}if(i=nh(c=e.g=n,r,!0,e)&&i,i=nh(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=nh(c=e.g=t[a],r,!1,e)&&i}function nh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var f=c.listener,m=c.ia||c.src;c.fa&&eh(n.i,c),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}yi(Wr,du),Wr.prototype[Xd]=!0,Wr.prototype.removeEventListener=function(n,e,t,r){sE(this,n,e,t,r)},Wr.prototype.M=function(){if(Wr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Gf(t[r]);delete n.g[e],n.h--}}this.I=null},Wr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Wr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var aE=Vt.JSON.stringify;function TP(){var n=hu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lE,oS=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new AP,n=>n.reset());class AP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function SP(n){Vt.setTimeout(()=>{throw n},0)}function uE(n,e){lE||function xP(){var n=Vt.Promise.resolve(void 0);lE=function(){n.then(Iv)}}(),cE||(lE(),cE=!0),hu.add(n,e)}var cE=!1,hu=new class DP{constructor(){this.h=this.g=null}add(e,t){const r=oS.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Iv(){for(var n;n=TP();){try{n.h.call(n.g)}catch(t){SP(t)}var e=oS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cE=!1}function pm(n,e){Wr.call(this),this.h=n||1,this.g=e||Vt,this.j=ii(this.kb,this),this.l=Date.now()}function gm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Kf(n,e,t){if("function"==typeof n)t&&(n=ii(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ii(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function Tv(n){n.g=Kf(()=>{n.g=null,n.i&&(n.i=!1,Tv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}yi(pm,Wr),(ut=pm.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bi(this,"tick"),this.da&&(gm(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){pm.Z.M.call(this),gm(this),delete this.g};class Dv extends du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tv(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yf(n){du.call(this),this.h=n,this.g={}}yi(Yf,du);var fu=[];function Av(n,e,t,r){Array.isArray(t)||(t&&(fu[0]=t.toString()),t=fu);for(var i=0;i<t.length;i++){var a=hm(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function dE(n){ul(n.g,function(e,t){this.g.hasOwnProperty(t)&&bv(e)},n),n.g={}}function rh(){this.g=!0}function ih(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Qf(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return aE(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Yf.prototype.M=function(){Yf.Z.M.call(this),dE(this)},Yf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rh.prototype.Aa=function(){this.g=!1},rh.prototype.info=function(){};var vo={},mm=null;function pu(){return mm=mm||new Wr}function sh(n){si.call(this,vo.Ma,n)}function Da(n){const e=pu();bi(e,new sh(e,n))}function fE(n,e){si.call(this,vo.STAT_EVENT,n),this.stat=e}function xi(n){const e=pu();bi(e,new fE(e,n))}function Sv(n,e){si.call(this,vo.Na,n),this.size=e}function Cc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}vo.Ma="serverreachability",yi(sh,si),vo.STAT_EVENT="statevent",yi(fE,si),vo.Na="timingevent",yi(Sv,si);var oh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ah(){}function Mv(){}ah.prototype.h=null;var Pv,_m={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ym(){si.call(this,"d")}function vm(){si.call(this,"c")}function Jf(){}function Xf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Yf(this),this.P=Zs,this.W=new pm(n=eE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new gE}function gE(){this.i=null,this.g="",this.h=!1}yi(ym,si),yi(vm,si),yi(Jf,ah),Jf.prototype.g=function(){return new XMLHttpRequest},Jf.prototype.i=function(){return{}},Pv=new Jf;var Zs=45e3,kv={},wm={};function mE(n,e,t){n.K=1,n.v=Dm(dl(e)),n.s=t,n.U=!0,_E(n,null)}function _E(n,e){n.F=Date.now(),ep(n),n.A=dl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Bv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new gE,n.g=Hs(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Dv(ii(n.Ia,n,n.g),n.O)),Av(n.V,n.g,"readystatechange",n.gb),e=n.H?mv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Da(1),function aS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var I=v[0];v=v[1];var S=I.split("_");c=2<=S.length&&"type"==S[1]?c+(I+"=")+v+"&":c+(I+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function bm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Rv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=lS(n,t),i==wm){4==e&&(n.o=4,xi(14),r=!1),ih(n.j,n.m,null,"[Incomplete Response]");break}if(i==kv){n.o=4,xi(15),ih(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ih(n.j,n.m,i,null),Nv(n,i)}bm(n)&&i!=wm&&i!=kv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,xi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Kv(e),e.L=!0,xi(11))):(ih(n.j,n.m,t,"[Invalid Chunked Response]"),cl(n),np(n))}function lS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?wm:(t=Number(e.substring(t,r)),isNaN(t)?kv:(r+=1)+t>e.length?wm:(e=e.substr(r,t),n.C=r+t,e))}function ep(n){n.Y=Date.now()+n.P,yE(n,n.P)}function yE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cc(ii(n.eb,n),e)}function tp(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function np(n){0==n.l.G||n.I||Xo(n.l,n)}function cl(n){tp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,gm(n.W),dE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Nv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||op(t.i,n)))if(t.I=n.N,!n.J&&op(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Vm(t),Fm(t)}Wv(t),xi(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Cc(ii(t.ab,t),6e3));if(1>=pS(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else vr(t,11)}else if((n.J||t.g==n)&&Vm(t),!qf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const I=v[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const O=v[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const Y=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;!a.g&&(vi(Y,"spdy")||vi(Y,"quic")||vi(Y,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Mm(a,a.h),a.h=null))}if(r.D){const Ae=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.sa=Ae,Bn(r.F,r.D,Ae))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=hp(r,r.H?r.la:null,r.W),c.J){jv(r.i,c);var f=c,m=r.K;m&&f.setTimeout(m),f.B&&(tp(f),ep(f)),r.g=c}else lh(r);0<t.l.length&&Lm(t)}else"stop"!=v[0]&&"close"!=v[0]||vr(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?vr(t,7):Gv(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}Da(4)}catch{}}function Cm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if($C(n)||"string"==typeof n)KC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if($C(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function cS(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if($C(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Ec(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ec)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ov(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Mi(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Mi(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Mi(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=Xf.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==mu(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const I=mu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>I)&&(3!=I||eE||this.g&&(this.h.h||this.g.ga()||wS(this.g)))){this.I||4!=I||7==e||Da(8==e||0>=S?3:2),tp(this);var t=this.g.ba();this.N=t;t:if(bm(this)){var r=wS(this.g);n="";var i=r.length,a=4==mu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){cl(this),np(this);var c="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function hE(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qf(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,xi(12),cl(this),np(this);break e}ih(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nv(this,t)}this.U?(Rv(this,I,c),eE&&this.i&&3==I&&(Av(this.V,this.W,"tick",this.fb),this.W.start())):(ih(this.j,this.m,c,null),Nv(this,c)),4==I&&cl(this),this.i&&!this.I&&(4==I?Xo(this.l,this):(this.i=!1,ep(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,xi(12)):(this.o=0,xi(13)),cl(this),np(this)}}}catch{}},ut.fb=function(){if(this.g){var n=mu(this.g),e=this.g.ga();this.C<e.length&&(tp(this),Rv(this,n,e),this.i&&4!=n&&ep(this))}},ut.cancel=function(){this.I=!0,cl(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function uS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Da(3),xi(17)),cl(this),this.o=2,np(this)):yE(this,this.Y-n)},(ut=Ec.prototype).R=function(){Ov(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return Ov(this),this.g.concat()},ut.get=function(n,e){return Mi(this.h,n)?this.h[n]:e},ut.set=function(n,e){Mi(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Em=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ic(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ic){this.g=void 0!==e?e:n.g,rp(this,n.j),this.s=n.s,Im(this,n.i),Tm(this,n.m),this.l=n.l,e=n.h;var t=new xm;t.i=e.i,e.g&&(t.g=new Ec(e.g),t.h=e.h),vE(this,t),this.o=n.o}else n&&(t=String(n).match(Em))?(this.g=!!e,rp(this,t[1]||"",!0),this.s=Tc(t[2]||""),Im(this,t[3]||"",!0),Tm(this,t[4]),this.l=Tc(t[5]||"",!0),vE(this,t[6]||"",!0),this.o=Tc(t[7]||"")):(this.g=!!e,this.h=new xm(null,this.g))}function dl(n){return new Ic(n)}function rp(n,e,t){n.j=t?Tc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Im(n,e,t){n.i=t?Tc(e,!0):e}function Tm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vE(n,e,t){e instanceof xm?(n.h=e,function bE(n,e){e&&!n.j&&(hl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Uv(this,r),Bv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ip(e,PP)),n.h=new xm(e,n.g))}function Bn(n,e,t){n.h.set(e,t)}function Dm(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Tc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ip(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Fv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Fv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ic.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ip(e,Sm,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ip(e,Sm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ip(t,"/"==t.charAt(0)?MP:wE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ip(t,Lv)),n.join("")};var Sm=/[#\/\?@]/g,wE=/[#\?:]/g,MP=/[#\?]/g,PP=/[#\?@]/g,Lv=/#/g;function xm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hl(n){n.g||(n.g=new Ec,n.h=0,n.i&&function dS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Uv(n,e){hl(n),e=Dc(n,e),Mi(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Mi((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ov(n)))}function Vv(n,e){return hl(n),e=Dc(n,e),Mi(n.g.h,e)}function Bv(n,e,t){Uv(n,e),0<t.length&&(n.i=null,n.g.set(Dc(n,e),pv(t)),n.h+=t.length)}function Dc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function sp(n){this.l=n||fS,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=xm.prototype).add=function(n,e){hl(this),this.i=null,n=Dc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){hl(this),this.g.forEach(function(t,r){KC(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){hl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ut.R=function(n){hl(this);var e=[];if("string"==typeof n)Vv(this,n)&&(e=fv(e,this.g.get(Dc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=fv(e,n[t])}return e},ut.set=function(n,e){return hl(this),this.i=null,Vv(this,n=Dc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var fS=10;function CE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pS(n){return n.h?1:n.g?n.g.size:0}function op(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mm(n,e){n.g?n.g.add(e):n.h=e}function jv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return pv(n.i)}function Pm(){}function gS(){this.g=new Pm}function mS(n,e,t){const r=t||"";try{Cm(n,function(i,a){let c=i;jf(i)&&(c=aE(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function km(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function uh(n){this.l=n.$b||null,this.j=n.ib||!1}function Zv(n,e){Wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Rm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sp.prototype.cancel=function(){if(this.i=qv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Pm.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},Pm.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},yi(uh,ah),uh.prototype.g=function(){return new Zv(this.l,this.j)},uh.prototype.i=function(n){return function(){return n}}({}),yi(Zv,Wr);var Rm=0;function EE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ap(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nm(n)}function Nm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Zv.prototype).open=function(n,e){if(this.readyState!=Rm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nm(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ap(this)),this.readyState=Rm},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nm(this)),this.g&&(this.readyState=3,Nm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ap(this):Nm(this),3==this.readyState&&EE(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,ap(this))},ut.Ta=function(n){this.g&&(this.response=n,ap(this))},ut.ha=function(){this.g&&ap(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kP=Vt.JSON.parse;function Br(n){Wr.call(this),this.headers=new Ec,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=IE,this.K=this.L=!1}yi(Br,Wr);var IE="",TE=/^https?$/i,DE=["POST","PUT"];function Qo(n){return"content-type"==n.toLowerCase()}function yS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vS(n),up(n)}function vS(n){n.D||(n.D=!0,bi(n,"complete"),bi(n,"error"))}function Hv(n){if(n.h&&typeof dv<"u"&&(!n.C[1]||4!=mu(n)||2!=n.ba()))if(n.v&&4==mu(n))Kf(n.Fa,0,n);else if(bi(n,"readystatechange"),4==mu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Em)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!TE.test(i?i.toLowerCase():"")}t=r}if(t)bi(n,"complete"),bi(n,"success");else{n.m=6;try{var c=2<mu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",vS(n)}}finally{up(n)}}}function up(n,e){if(n.g){$v(n);const t=n.g,r=n.C[0]?hv:null;n.g=null,n.C=null,e||bi(n,"ready");try{t.onreadystatechange=r}catch{}}}function $v(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function mu(n){return n.g?n.g.readyState:0}function wS(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case IE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function AE(n){let e="";return ul(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function cp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Om(n){this.za=0,this.l=[],this.h=new rh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cp("baseRetryDelayMs",5e3,n),this.$a=cp("retryDelaySeedMs",1e4,n),this.Ya=cp("forwardChannelMaxRetries",2,n),this.ra=cp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new sp(n&&n.concurrentRequestLimit),this.Ca=new gS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Gv(n){if(SE(n),3==n.G){var e=n.V++,t=dl(n.F);Bn(t,"SID",n.J),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),Jo(n,t),(e=new Xf(n,n.h,e,void 0)).K=2,e.v=Dm(dl(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hs(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ep(e)}fl(n)}function Fm(n){n.g&&(Kv(n),n.g.cancel(),n.g=null)}function SE(n){Fm(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Vm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function zv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Lm(n)}function Lm(n){CE(n.i)||n.m||(n.m=!0,uE(n.Ha,n),n.C=0)}function dp(n,e){var t;t=e?e.m:n.V++;const r=dl(n.F);Bn(r,"SID",n.J),Bn(r,"RID",t),Bn(r,"AID",n.U),Jo(n,r),n.o&&n.s&&lp(r,n.o,n.s),t=new Xf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=CS(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Mm(n.i,t),mE(t,r,e)}function Jo(n,e){n.j&&Cm({},function(t,r){Bn(e,r,t)})}function CS(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ii(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const I=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{mS(I,c,"req"+v+"_")}catch{r&&r(I)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function lh(n){n.g||n.u||(n.Y=1,uE(n.Ga,n),n.A=0)}function Wv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Cc(ii(n.Ga,n),ch(n,n.A)),n.A++,0))}function Kv(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Um(n){n.g=new Xf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=dl(n.oa);Bn(e,"RID","rpc"),Bn(e,"SID",n.J),Bn(e,"CI",n.N?"0":"1"),Bn(e,"AID",n.U),Jo(n,e),Bn(e,"TYPE","xmlhttp"),n.o&&n.s&&lp(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Dm(dl(e)),t.s=null,t.U=!0,_E(t,n)}function Vm(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function Xo(n,e){var t=null;if(n.g==e){Vm(n),Kv(n),n.g=null;var r=2}else{if(!op(n.i,e))return;t=e.D,jv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;bi(r=pu(),new Sv(r,t,e,i)),Lm(n)}else lh(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function bS(n,e){return!(pS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Cc(ii(n.Ha,n,e),ch(n,n.C)),n.C++,0)))}(n,e)||2==r&&Wv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:vr(n,5);break;case 4:vr(n,10);break;case 3:vr(n,6);break;default:vr(n,2)}}function ch(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function vr(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ii(n.jb,n);t||(t=new Ic("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||rp(t,"https"),Dm(t)),function _S(n,e){const t=new rh;if(Vt.Image){const r=new Image;r.onload=bc(km,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bc(km,t,r,"TestLoadImage: error",!1,e),r.onabort=bc(km,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bc(km,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else xi(2);n.G=0,n.j&&n.j.va(e),fl(n),SE(n)}function fl(n){n.G=0,n.I=-1,n.j&&((0!=qv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,pv(n.l),n.l.length=0),n.j.ua())}function hp(n,e,t){let r=function hS(n){return n instanceof Ic?dl(n):new Ic(n,void 0)}(t);if(""!=r.i)e&&Im(r,e+"."+r.i),Tm(r,r.m);else{const i=Vt.location;r=function Am(n,e,t,r){var i=new Ic(null,void 0);return n&&rp(i,n),e&&Im(i,e),t&&Tm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&ul(n.aa,function(i,a){Bn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Bn(r,e,t),Bn(r,"VER",n.ma),Jo(n,r),r}function Hs(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Br(t&&n.Ba&&!n.qa?new uh({ib:!0}):n.qa)).L=n.H,e}function Bm(){}function _u(){if(ll&&!(10<=Number(rE)))throw Error("Environmental error: no available transport.")}function oi(n,e){Wr.call(this),this.g=new Om(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!qf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ea(this)}function Ac(n){ym.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Sc(){vm.call(this),this.status=1}function ea(n){this.g=n}(ut=Br.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pv.g(),this.C=function pE(n){return n.h||(n.h=n.i())}(this.u?this.u:Pv),this.g.onreadystatechange=ii(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void yS(this,a)}n=t||"";const i=new Ec(this.headers);r&&Cm(r,function(a,c){i.set(c,a)}),r=function JA(n){e:{var e=Qo;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Vt.FormData&&n instanceof Vt.FormData,!(0<=WC(DE,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$v(this),0<this.B&&((this.K=function RP(n){return ll&&function nE(){return function wP(n){var e=tE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=gv(String(Hf)).split("."),t=gv("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=YC(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||YC(0==i[2].length,0==a[2].length)||YC(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ii(this.pa,this)):this.A=Kf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){yS(this,a)}},ut.pa=function(){typeof dv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bi(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,bi(this,"complete"),bi(this,"abort"),up(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),up(this,!0)),Br.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?Hv(this):this.cb())},ut.cb=function(){Hv(this)},ut.ba=function(){try{return 2<mu(this)?this.g.status:-1}catch{return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kP(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=Om.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Xf(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=mv(a),XC(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=CS(this,i,e),Bn(t=dl(this.F),"RID",n),Bn(t,"CVER",22),this.D&&Bn(t,"X-HTTP-Session-Id",this.D),Jo(this,t),this.o&&a&&lp(t,this.o,a),Mm(this.i,i),this.Ra&&Bn(t,"TYPE","init"),this.ja?(Bn(t,"$req",e),Bn(t,"SID","null"),i.$=!0,mE(i,t,null)):mE(i,t,e),this.G=2}}else 3==this.G&&(n?dp(this,n):0==this.l.length||CE(this.i)||dp(this))},ut.Ga=function(){if(this.u=null,Um(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Cc(ii(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xi(10),Fm(this),Um(this))},ut.ab=function(){null!=this.v&&(this.v=null,Fm(this),Wv(this),xi(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),xi(2)):(this.h.info("Failed to ping google.com"),xi(1))},(ut=Bm.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},_u.prototype.g=function(n,e){return new oi(n,e)},yi(oi,Wr),oi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),uE(ii(n.hb,n,e))),xi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=hp(n,null,n.W),Lm(n)},oi.prototype.close=function(){Gv(this.g)},oi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,zv(this.g,e)}else this.v?((e={}).__data__=aE(n),zv(this.g,e)):zv(this.g,n)},oi.prototype.M=function(){this.g.j=null,delete this.j,Gv(this.g),delete this.g,oi.Z.M.call(this)},yi(Ac,ym),yi(Sc,vm),yi(ea,Bm),ea.prototype.xa=function(){bi(this.g,"a")},ea.prototype.wa=function(n){bi(this.g,new Ac(n))},ea.prototype.va=function(n){bi(this.g,new Sc(n))},ea.prototype.ua=function(){bi(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,oi.prototype.send=oi.prototype.u,oi.prototype.open=oi.prototype.m,oi.prototype.close=oi.prototype.close,oh.NO_ERROR=0,oh.TIMEOUT=8,oh.HTTP_ERROR=6,xv.COMPLETE="complete",Mv.EventType=_m,_m.OPEN="a",_m.CLOSE="b",_m.ERROR="c",_m.MESSAGE="d",Wr.prototype.listen=Wr.prototype.N,Br.prototype.listenOnce=Br.prototype.O,Br.prototype.getLastError=Br.prototype.La,Br.prototype.getLastErrorCode=Br.prototype.Da,Br.prototype.getStatus=Br.prototype.ba,Br.prototype.getResponseJson=Br.prototype.Qa,Br.prototype.getResponseText=Br.prototype.ga,Br.prototype.send=Br.prototype.ea;var dh=Yo.createWebChannelTransport=function(){return new _u},hh=Yo.getStatEventTarget=function(){return pu()},pl=Yo.ErrorCode=oh,fh=Yo.EventType=xv,xE=Yo.Event=vo,Yv=Yo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ME=Yo.FetchXmlHttpFactory=uh,fp=Yo.WebChannel=Mv,PE=Yo.XhrIo=Br;const Qv="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let xc="9.8.3";const yu=new gs.Yd("@firebase/firestore");function Jv(){return yu.logLevel}function Ke(n,...e){if(yu.logLevel<=gs.in.DEBUG){const t=e.map(pp);yu.debug(`Firestore (${xc}): ${n}`,...t)}}function kr(n,...e){if(yu.logLevel<=gs.in.ERROR){const t=e.map(pp);yu.error(`Firestore (${xc}): ${n}`,...t)}}function Mc(n,...e){if(yu.logLevel<=gs.in.WARN){const t=e.map(pp);yu.warn(`Firestore (${xc}): ${n}`,...t)}}function pp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: `+n;throw kr(e),new Error(e)}function Pt(n,e){n||ht()}function rt(n,e){return n}const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class e0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class NE{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new jr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable((0,Se.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new jr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new Xv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new Kr(e)}}class OE{constructor(e,t,r){this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class t0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new OE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ES{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new n0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function FE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class qm{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=FE(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function ph(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function LE(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Kn(0,0))}static max(){return new kt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Pc{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const UE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wr extends Pc{construct(e,t,r){return new wr(e,t,r)}static isValidIdentifier(e){return UE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new He(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new He(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new He(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new He(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wr(t)}static emptyPath(){return new wr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(cn.fromString(e))}static fromName(e){return new Xe(cn.fromString(e).popFirst(5))}static empty(){return new Xe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new cn(e.slice()))}}class gp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Zm(n){return n.fields.find(e=>2===e.kind)}function gl(n){return n.fields.filter(e=>2!==e.kind)}gp.UNKNOWN_ID=-1;class mp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hm(0,bs.min())}}function VE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new bs(i,Xe.empty(),e)}function BE(n){return new bs(n.readTime,n.key,-1)}class bs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bs(kt.min(),Xe.empty(),-1)}static max(){return new bs(kt.max(),Xe.empty(),-1)}}function r0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const qr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ml(n){return o0.apply(this,arguments)}function o0(){return o0=(0,Se.Z)(function*(n){if(n.code!==De.FAILED_PRECONDITION||n.message!==qr)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),o0.apply(this,arguments)}class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ee((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ee?t:Ee.resolve(t)}catch(t){return Ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ee.reject(t)}static resolve(e){return new Ee((t,r)=>{t(e)})}static reject(e){return new Ee((t,r)=>{r(e)})}static waitFor(e){return new Ee((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},m=>r(m))}),c=!0,a===i&&t()})}static or(e){let t=Ee.resolve(!1);for(const r of e)t=t.next(i=>i?Ee.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new Ee((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(I=>{c[v]=I,++f,f===a&&r(c)},I=>i(I))}})}static doWhile(e,t){return new Ee((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class $m{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new jr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Aa(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Gm(r.target.error);this.T.reject(new Aa(e,i))}}static open(e,t,r,i){try{return new $m(t,e.transaction(i,r))}catch(a){throw new Aa(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TS(t)}}class wo{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===wo.v((0,L.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),yl(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,L.hl)())return!1;if(wo.S())return!0;const e=(0,L.z$)(),t=wo.v(e),r=0<t&&t<10,i=wo.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Se.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Aa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new He(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new He(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Aa(e,f))},a.onupgradeneeded=c=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Se.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.k(e);const m=$m.open(a.db,e,c?"readonly":"readwrite",r),v=i(m).next(I=>(m.R(),I)).catch(I=>(m.abort(I),Ee.reject(I))).toPromise();return v.catch(()=>{}),yield m.A,v}catch(m){const v="FirebaseError"!==m.name&&f<3;if(Ke("SimpleDb","Transaction failed with error:",m.message,"Retrying:",v),a.close(),!v)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jE{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return yl(this.$.delete())}}class Aa extends He{constructor(e,t){super(De.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _l(n){return"IndexedDbTransactionError"===n.name}class TS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yl(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),yl(this.store.add(e))}get(e){return yl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),yl(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),yl(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Ee((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ee((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,c,f)=>f.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new Ee((r,i)=>{t.onerror=a=>{const c=Gm(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}G(e,t){const r=[];return new Ee((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const m=new jE(f),v=t(f.primaryKey,f.value,m);if(v instanceof Ee){const I=v.catch(S=>(m.done(),Ee.reject(S)));r.push(I)}m.isDone?i():null===m.U?f.continue():f.continue(m.U)}}).next(()=>Ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yl(n){return new Ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Gm(r.target.error);t(i)}})}let qE=!1;function Gm(n){const e=wo.v((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qE||(qE=!0,setTimeout(()=>{throw r},0)),r}}return n}class NP{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Se.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){_l(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ml(r)}yield t.Z(1)}))}}class ZE{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return Ee.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ke("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,a)).next(f=>(Ke("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=BE(a);r0(c,r)>0&&(r=c)}),new bs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function ta(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Pi.ot=-1;class Cn{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cs(this.root,e,this.comparator,!0)}}class Cs{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Un.RED,this.left=i??Un.EMPTY,this.right=a??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Un(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Un.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1,Un.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Un(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gh(n){return n.hasNext()?n.getNext():void 0}class $s{constructor(e){this.fields=e,e.sort(wr.comparator)}static empty(){return new $s([])}unionWith(e){let t=new kn(wr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ph(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const l0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=l0.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:br(n.seconds),nanos:br(n.nanos)}}function br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vl(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function c0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function d0(n){const e=n.mapValue.fields.__previous_value__;return c0(e)?d0(e):e}function mh(n){const e=bo(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class zm{constructor(e,t,r,i,a,c,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class vu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}function _h(n){return null==n}function yh(n){return 0===n&&1/n==-1/0}function Wm(n){return"number"==typeof n&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const na={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_p={nullValue:"NULL_VALUE"};function wl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?c0(n)?4:GE(n)?9007199254740991:10:ht()}function ra(n,e){if(n===e)return!0;const t=wl(n);if(t!==wl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mh(n).isEqual(mh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=bo(r.timestampValue),c=bo(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,vl(n.bytesValue).isEqual(vl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return br(r.geoPointValue.latitude)===br(i.geoPointValue.latitude)&&br(r.geoPointValue.longitude)===br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return br(r.integerValue)===br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=br(r.doubleValue),c=br(i.doubleValue);return a===c?yh(a)===yh(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return ph(n.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(ta(a)!==ta(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!ra(a[f],c[f])))return!1;return!0}(n,e);default:return ht()}var i}function vh(n,e){return void 0!==(n.values||[]).find(t=>ra(t,e))}function wu(n,e){if(n===e)return 0;const t=wl(n),r=wl(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=br(i.integerValue||i.doubleValue),f=br(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return h0(n.timestampValue,e.timestampValue);case 4:return h0(mh(n),mh(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=vl(i),f=vl(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Bt(c[m],f[m]);if(0!==v)return v}return Bt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Bt(br(i.latitude),br(a.latitude));return 0!==c?c:Bt(br(i.longitude),br(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let m=0;m<c.length&&m<f.length;++m){const v=wu(c[m],f[m]);if(v)return v}return Bt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===na.mapValue&&a===na.mapValue)return 0;if(i===na.mapValue)return 1;if(a===na.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let I=0;I<f.length&&I<v.length;++I){const S=Bt(f[I],v[I]);if(0!==S)return S;const O=wu(c[f[I]],m[v[I]]);if(0!==O)return O}return Bt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw ht()}}function h0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=bo(n),r=bo(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Rc(n){return Km(n)}function Km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=bo(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Km(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${Km(r.fields[f])}`;return a+"}"}(n.mapValue):ht();var e}function Nc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function f0(n){return!!n&&"integerValue"in n}function yp(n){return!!n&&"arrayValue"in n}function HE(n){return!!n&&"nullValue"in n}function $E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ym(n){return!!n&&"mapValue"in n}function vp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function GE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function AS(n){return"nullValue"in n?_p:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nc(vu.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function SS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nc(vu.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?na:ht()}function zE(n,e){const t=wu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function WE(n,e){const t=wu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vp(t)}setAll(e){let t=wr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=vp(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ci(vp(this.value))}}function KE(n){const e=[];return kc(n.fields,(t,r)=>{const i=new wr([t]);if(Ym(r)){const a=KE(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new $s(e)}class jn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new jn(e,0,kt.min(),kt.min(),Ci.empty(),0)}static newFoundDocument(e,t,r){return new jn(e,1,t,kt.min(),r,0)}static newNoDocument(e,t){return new jn(e,2,t,kt.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,kt.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xS{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.ut=null}}function YE(n,e=null,t=[],r=[],i=null,a=null,c=null){return new xS(n,e,t,r,i,a,c)}function Oc(n){const e=rt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Rc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),_h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rc(r)).join(",")),e.ut=t}return e.ut}function wh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!OP(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ra(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y0(n.startAt,e.startAt)&&y0(n.endAt,e.endAt)}function wp(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function bp(n,e){return n.filters.filter(t=>t instanceof ai&&t.field.isEqual(e))}function p0(n,e,t){let r=_p,i=!0;for(const a of bp(n,e)){let c=_p,f=!0;switch(a.op){case"<":case"<=":c=AS(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=_p}zE({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];zE({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function g0(n,e,t){let r=na,i=!0;for(const a of bp(n,e)){let c=na,f=!0;switch(a.op){case">=":case">":c=SS(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=na}WE({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];WE({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ai extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new JE(e,t,r):"array-contains"===t?new Fc(e,r):"in"===t?new MS(e,r):"not-in"===t?new PS(e,r):"array-contains-any"===t?new bh(e,r):new ai(e,t,r)}static ct(e,t,r){return"in"===t?new XE(e,r):new eI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(wu(t,this.value)):null!==t&&wl(this.value)===wl(t)&&this.at(wu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JE extends ai{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.at(t)}}class XE extends ai{constructor(e,t){super(e,"in",t),this.keys=m0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eI extends ai{constructor(e,t){super(e,"not-in",t),this.keys=m0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function m0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class Fc extends ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yp(t)&&vh(t.arrayValue,this.value)}}class MS extends ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vh(this.value.arrayValue,t)}}class PS extends ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vh(this.value.arrayValue,t)}}class bh extends ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vh(this.value.arrayValue,r))}}class Lc{constructor(e,t){this.position=e,this.inclusive=t}}class bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function OP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function _0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),t.key):wu(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function y0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ra(n.position[t],e.position[t]))return!1;return!0}class Cl{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=m,this.lt=null,this.ft=null}}function At(n,e,t,r,i,a,c,f){return new Cl(n,e,t,r,i,a,c,f)}function Ch(n){return new Cl(n)}function v0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function El(n){for(const e of n.filters)if(e.ht())return e.field;return null}function w0(n){return null!==n.collectionGroup}function bu(n){const e=rt(n);if(null===e.lt){e.lt=[];const t=El(e),r=v0(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new bl(t)),e.lt.push(new bl(wr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new bl(wr.keyField(),a))}}}return e.lt}function Qi(n){const e=rt(n);if(!e.ft)if("F"===e.limitType)e.ft=YE(e.path,e.collectionGroup,bu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of bu(e))t.push(new bl(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Lc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Lc(e.startAt.position,e.startAt.inclusive):null;e.ft=YE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function ar(n,e,t){return new Cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qm(n,e){return wh(Qi(n),Qi(e))&&n.limitType===e.limitType}function b0(n){return`${Oc(Qi(n))}|lt:${n.limitType}`}function Jm(n){return`Query(target=${function QE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Rc(r.value)}`;var r}).join(", ")}]`),_h(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Rc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Rc(t)).join(",")),`Target(${e})`}(Qi(n))}; limitType=${n.limitType})`}function C0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=_0(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,bu(t),r)||t.endAt&&!function(i,a,c){const f=_0(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,bu(t),r)));var t,r}function E0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function I0(n){return(e,t)=>{let r=!1;for(const i of bu(n)){const a=tI(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function tI(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),m=c.data.field(i);return null!==f&&null!==m?wu(f,m):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function T0(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function nI(n){return{integerValue:""+n}}function rI(n,e){return Wm(e)?nI(e):T0(n,e)}class Xm{constructor(){this._=void 0}}function Cp(n,e,t){return n instanceof Eh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Sa?D0(n,e):n instanceof Il?A0(n,e):function(r,i){const a=iI(r,i),c=Th(a)+Th(r._t);return f0(a)&&f0(r._t)?nI(c):T0(r.wt,c)}(n,e)}function RS(n,e,t){return n instanceof Sa?D0(n,e):n instanceof Il?A0(n,e):t}function iI(n,e){return n instanceof Ih?f0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Eh extends Xm{}class Sa extends Xm{constructor(e){super(),this.elements=e}}function D0(n,e){const t=Dh(e);for(const r of n.elements)t.some(i=>ra(i,r))||t.push(r);return{arrayValue:{values:t}}}class Il extends Xm{constructor(e){super(),this.elements=e}}function A0(n,e){let t=Dh(e);for(const r of n.elements)t=t.filter(i=>!ra(i,r));return{arrayValue:{values:t}}}class Ih extends Xm{constructor(e,t){super(),this.wt=e,this._t=t}}function Th(n){return br(n.integerValue||n.doubleValue)}function Dh(n){return yp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ep{constructor(e,t){this.field=e,this.transform=t}}class OS{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ip(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Tp{}function sI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ah(n.key,Yn.none()):new Ap(n.key,n.data,Yn.none());{const t=n.data,r=Ci.empty();let i=new kn(wr.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Tl(n.key,r,new $s(i.toArray()),Yn.none())}}function oI(n,e,t){n instanceof Ap?function(r,i,a){const c=r.value.clone(),f=S0(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Tl?function(r,i,a){if(!Ip(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=S0(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(US(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dp(n,e,t,r){return n instanceof Ap?function(i,a,c,f){if(!Ip(i.precondition,a))return c;const m=i.value.clone(),v=Sp(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tl?function(i,a,c,f){if(!Ip(i.precondition,a))return c;const m=Sp(i.fieldTransforms,f,a),v=a.data;return v.setAll(US(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(c=t,Ip(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function FS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=iI(r.transform,i||null);null!=a&&(null===t&&(t=Ci.empty()),t.set(r.field,a))}return t||null}function LS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ph(t,r,(i,a)=>function NS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sa&&r instanceof Sa||t instanceof Il&&r instanceof Il?ph(t.elements,r.elements,ra):t instanceof Ih&&r instanceof Ih?ra(t._t,r._t):t instanceof Eh&&r instanceof Eh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ap extends Tp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tl extends Tp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function US(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function S0(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,RS(c,f,t[i]))}return r}function Sp(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Cp(a,c,e))}return r}class Ah extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x0 extends Tp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aI{constructor(e){this.count=e}}var Qn,dn;function uI(n){switch(n){default:return ht();case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0}}function lI(n){if(void 0===n)return kr("GRPC error has no .code"),De.UNKNOWN;switch(n){case Qn.OK:return De.OK;case Qn.CANCELLED:return De.CANCELLED;case Qn.UNKNOWN:return De.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return De.INTERNAL;case Qn.UNAVAILABLE:return De.UNAVAILABLE;case Qn.UNAUTHENTICATED:return De.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case Qn.NOT_FOUND:return De.NOT_FOUND;case Qn.ALREADY_EXISTS:return De.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return De.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case Qn.ABORTED:return De.ABORTED;case Qn.OUT_OF_RANGE:return De.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return De.UNIMPLEMENTED;case Qn.DATA_LOSS:return De.DATA_LOSS;default:return ht()}}(dn=Qn||(Qn={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class Dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return a0(this.inner)}size(){return this.innerSize}}const VS=new Cn(Xe.comparator);function Ji(){return VS}const cI=new Cn(Xe.comparator);function xp(...n){let e=cI;for(const t of n)e=e.insert(t.key,t);return e}function Uc(n){let e=cI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xa(){return Mp()}function M0(){return Mp()}function Mp(){return new Dl(n=>n.toString(),(n,e)=>n.isEqual(e))}const dI=new Cn(Xe.comparator),BS=new kn(Xe.comparator);function Ht(...n){let e=BS;for(const t of n)e=e.add(t);return e}const jS=new kn(Bt);function Sh(){return jS}class Pp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Pp(kt.min(),r,Sh(),Ji(),Ht())}}class xh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xh(Yr.EMPTY_BYTE_STRING,t,Ht(),Ht(),Ht())}}class kp{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class hI{constructor(e,t){this.targetId=e,this.It=t}}class fI{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class pI{constructor(){this.Tt=0,this.Et=k0(),this.At=Yr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ht(),t=Ht(),r=Ht();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new xh(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=k0()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class P0{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ji(),this.Bt=gI(),this.Lt=new kn(Bt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(wp(a))if(0===r){const c=new Xe(a.path);this.Kt(t,c,jn.newNoDocument(c,kt.min()))}else Pt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,c)=>{const f=this.Ht(c);if(f){if(a.current&&wp(f.target)){const m=new Xe(f.target.path);null!==this.$t.get(m)||this.Xt(c,m)||this.Kt(c,m,jn.newNoDocument(m,e))}a.vt&&(t.set(c,a.St()),a.Dt())}});let r=Ht();this.Bt.forEach((a,c)=>{let f=!0;c.forEachWhile(m=>{const v=this.Ht(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.$t.forEach((a,c)=>c.setReadTime(e));const i=new Pp(e,t,this.Lt,this.$t,r);return this.$t=Ji(),this.Bt=gI(),this.Lt=new kn(Bt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new pI,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new kn(Bt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new pI),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function gI(){return new Cn(Xe.comparator)}function k0(){return new Cn(Xe.comparator)}const qS={asc:"ASCENDING",desc:"DESCENDING"},ZS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class HS{constructor(e,t){this.databaseId=e,this.dt=t}}function Rp(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mI(n,e){return n.dt?e.toBase64():e.toUint8Array()}function $S(n,e){return Rp(n,e.toTimestamp())}function ui(n){return Pt(!!n),kt.fromTimestamp(function(e){const t=bo(e);return new Kn(t.seconds,t.nanos)}(n))}function R0(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function N0(n){const e=cn.fromString(n);return Pt(EI(e)),e}function Mh(n,e){return R0(n.databaseId,e.path)}function Ma(n,e){const t=N0(e);if(t.get(1)!==n.databaseId.projectId)throw new He(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(_I(t))}function O0(n,e){return R0(n.databaseId,e)}function F0(n){const e=N0(n);return 4===e.length?cn.emptyPath():_I(e)}function Np(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _I(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yI(n,e,t){return{name:Mh(n,e),fields:t.value.mapValue.fields}}function e_(n,e,t){const r=Ma(n,e.name),i=ui(e.updateTime),a=new Ci({mapValue:{fields:e.fields}}),c=jn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Vc(n,e){let t;if(e instanceof Ap)t={update:yI(n,e.key,e.value)};else if(e instanceof Ah)t={delete:Mh(n,e.key)};else if(e instanceof Tl)t={update:yI(n,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof x0))return ht();t={verify:Mh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Eh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Il)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ih)return{fieldPath:a.field.canonicalString(),increment:c._t};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:$S(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function U0(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Yn.updateTime(ui(i.updateTime)):void 0!==i.exists?Yn.exists(i.exists):Yn.none():Yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(Pt("REQUEST_TIME"===c.setToServerValue),f=new Eh):"appendMissingElements"in c?f=new Sa(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Il(c.removeAllFromArray.values||[]):"increment"in c?f=new Ih(a,c.increment):ht();const m=wr.fromServerFormat(c.fieldPath);return new Ep(m,f)}(n,i)):[];var i;if(e.update){const i=Ma(n,e.update.name),a=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new $s((e.updateMask.fieldPaths||[]).map(v=>wr.fromServerFormat(v)));return new Tl(i,a,c,t,r)}return new Ap(i,a,t,r)}if(e.delete){const i=Ma(n,e.delete);return new Ah(i,t)}if(e.verify){const i=Ma(n,e.verify);return new x0(i,t)}return ht()}function t_(n,e){return{documents:[O0(n,e.path)]}}function wI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=O0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=O0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(I=>function(S){if("=="===S.op){if($E(S.value))return{unaryFilter:{field:Pa(S.field),op:"IS_NAN"}};if(HE(S.value))return{unaryFilter:{field:Pa(S.field),op:"IS_NULL"}}}else if("!="===S.op){if($E(S.value))return{unaryFilter:{field:Pa(S.field),op:"IS_NOT_NAN"}};if(HE(S.value))return{unaryFilter:{field:Pa(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(S.field),op:WS(S.op),value:S.value}}}(I));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Pa((I=v).field),direction:FP(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(v=e.limit,n.dt||_h(v)?v:{value:v});var v,f,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function V0(n){let e=F0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=B0(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(I=>{return new bl(Co((S=I).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(I){let S;return S="object"==typeof I?I.value:I,_h(S)?null:S}(t.limit));let m=null;var I;t.startAt&&(m=new Lc((I=t.startAt).values||[],!!I.before));let v=null;return t.endAt&&(v=function(I){return new Lc(I.values||[],!I.before)}(t.endAt)),At(e,i,c,a,f,"F",m,v)}function B0(n){return n?void 0!==n.unaryFilter?[KS(n)]:void 0!==n.fieldFilter?[bI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>B0(e)).reduce((e,t)=>e.concat(t)):ht():[]}function FP(n){return qS[n]}function WS(n){return ZS[n]}function Pa(n){return{fieldPath:n.canonicalString()}}function Co(n){return wr.fromServerFormat(n.fieldPath)}function bI(n){return ai.create(Co(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function KS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Co(n.unaryFilter.field);return ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Co(n.unaryFilter.field);return ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Co(n.unaryFilter.field);return ai.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Co(n.unaryFilter.field);return ai.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function CI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function EI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=II(e)),e=Op(n.get(t),e);return II(e)}function Op(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function II(n){return n+"\x01\x01"}function Cu(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ht(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ht()}a=c+2}return new cn(r)}const j0=["userId","batchId"];function n_(n,e){return[n,Zr(e)]}function TI(n,e,t){return[n,Zr(e),t]}const YS={},QS=["prefixPath","collectionGroup","readTime","documentId"],DI=["prefixPath","collectionGroup","documentId"],AI=["collectionGroup","readTime","prefixPath","documentId"],q0=["canonicalId","targetId"],r_=["targetId","path"],Fp=["path","targetId"],JS=["collectionId","parent"],Z0=["indexId","uid"],SI=["uid","sequenceNumber"],XS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],e1=["indexId","uid","orderedDocumentKey"],H0=["userId","collectionPath","documentId"],t1=["userId","collectionPath","largestBatchId"],LP=["userId","collectionGroup","largestBatchId"],xI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],n1=[...xI,"documentOverlays"],$0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],i_=$0,r1=[...i_,"indexConfiguration","indexState","indexEntries"];class Lp extends s0{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function li(n,e){const t=rt(n);return wo.N(t.ee,e)}class G0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&oI(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=M0();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const m=sI(c,f);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&ph(this.mutations,e.mutations,(t,r)=>LS(t,r))&&ph(this.baseMutations,e.baseMutations,(t,r)=>LS(t,r))}}class z0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=dI;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new z0(e,t,r,i)}}class s_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Al{constructor(e,t,r,i,a=kt.min(),c=kt.min(),f=Yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class MI{constructor(e){this.ne=e}}function kI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:o_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mh(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Rp(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bc(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Bc(e.version)}}var i,a;return r}function o_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jc(n){const e=new Kn(n.seconds,n.nanoseconds);return kt.fromTimestamp(e)}function qc(n,e){const t=(e.baseMutations||[]).map(a=>U0(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>U0(n.ne,a)),i=Kn.fromMillis(e.localWriteTimeMs);return new G0(e.batchId,i,t,r)}function Up(n){const e=jc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jc(n.lastLimboFreeSnapshotVersion):kt.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=Qi(Ch(F0(i.documents[0])))):r=Qi(V0(n.query)),new Al(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken))}function Ph(n,e){const t=Bc(e.snapshotVersion),r=Bc(e.lastLimboFreeSnapshotVersion);let i;i=wp(e.target)?t_(n.ne,e.target):wI(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function a_(n){const e=V0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ar(e,e.limit,"L"):e}function u_(n,e){return new s_(e.largestBatchId,U0(n.ne,e.overlayMutation))}function W0(n,e){const t=e.path.lastSegment();return[n,Zr(e.path.popLast()),t]}function K0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bc(r.readTime),documentKey:Zr(r.documentKey.path),largestBatchId:r.largestBatchId}}class RI{getBundleMetadata(e,t){return NI(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:jc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return NI(e).put({bundleId:(r=t).id,createTime:Bc(ui(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return OI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:a_(i.bundledQuery),readTime:jc(i.readTime)};var i})}saveNamedQuery(e,t){return OI(e).put({name:(r=t).name,readTime:Bc(ui(r.readTime)),bundledQuery:r.bundledQuery});var r}}function NI(n){return li(n,"bundles")}function OI(n){return li(n,"namedQueries")}class Y0{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Y0(e,t.uid||"")}getOverlay(e,t){return Vp(e).get(W0(this.userId,t)).next(r=>r?u_(this.wt,r):null)}getOverlays(e,t){const r=xa();return Ee.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new s_(t,c);i.push(this.ie(e,f))}),Ee.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Zr(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Vp(e).W("collectionPathOverlayIndex",f))}),Ee.waitFor(a)}getOverlaysForCollection(e,t,r){const i=xa(),a=Zr(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Vp(e).K("collectionPathOverlayIndex",c).next(f=>{for(const m of f){const v=u_(this.wt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=xa();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vp(e).J({index:"collectionGroupOverlayIndex",range:f},(m,v,I)=>{const S=u_(this.wt,v);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):I.done()}).next(()=>a)}ie(e,t){return Vp(e).put(function(r,i,a){const[c,f,m]=W0(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Vc(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function Vp(n){return li(n,"documentOverlays")}class Zc{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(br(e.integerValue));else if("doubleValue"in e){const r=br(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),yh(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(vl(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?GE(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ht()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Xe.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function i1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function FI(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=i1(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Zc.ye=new Zc;class s1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=FI(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=FI(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Bp{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class o1{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Hc{constructor(){this.Me=new s1,this.Fe=new Bp(this.Me),this.$e=new o1(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class ki{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ki(this.indexId,this.documentKey,this.arrayValue,r)}}function $c(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=l_(n.arrayValue,e.arrayValue),0!==t?t:(t=l_(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function l_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class jp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Zm(e);if(void 0!==t&&!this.Qe(t))return!1;const r=gl(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],c))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class a1{constructor(){this.ze=new Q0}addToCollectionParentIndex(e,t){return this.ze.add(t),Ee.resolve()}getCollectionParents(e,t){return Ee.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Ee.resolve()}deleteFieldIndex(e,t){return Ee.resolve()}getDocumentsMatchingTarget(e,t){return Ee.resolve(null)}getIndexType(e,t){return Ee.resolve(0)}getFieldIndexes(e,t){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,t){return Ee.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return Ee.resolve(bs.min())}updateCollectionGroup(e,t,r){return Ee.resolve()}updateIndexEntries(e,t){return Ee.resolve()}}class Q0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kn(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kn(cn.comparator)).toArray()}}const c_=new Uint8Array(0);class d_{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Q0,this.Je=new Dl(r=>Oc(r),(r,i)=>wh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Zr(i)};return qp(e).put(a)}return Ee.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[LE(t),""],!1,!0);return qp(e).K(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Cu(c.parent))}return r})}addFieldIndex(e,t){const r=h_(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=kh(e);return a.next(f=>{c.put(K0(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=h_(e),i=kh(e),a=Zp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Zp(e);let i=!0;const a=new Map;return Ee.forEach(this.Ye(t),c=>this.Xe(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=Ht();const f=[];return Ee.forEach(a,(m,v)=>{var I;Ke("IndexedDbIndexManager",`Using index ${I=m,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${Oc(t)}`);const S=function(_t,pt){const jt=Zm(pt);if(void 0===jt)return null;for(const un of bp(_t,jt.fieldPath))switch(un.op){case"array-contains-any":return un.value.arrayValue.values||[];case"array-contains":return[un.value]}return null}(v,m),O=function(_t,pt){const jt=new Map;for(const un of gl(pt))for(const hi of bp(_t,un.fieldPath))switch(hi.op){case"==":case"in":jt.set(un.fieldPath.canonicalString(),hi.value);break;case"not-in":case"!=":return jt.set(un.fieldPath.canonicalString(),hi.value),Array.from(jt.values())}return null}(v,m),j=function(_t,pt){const jt=[];let un=!0;for(const hi of gl(pt)){const ku=0===hi.kind?p0(_t,hi.fieldPath,_t.startAt):g0(_t,hi.fieldPath,_t.startAt);jt.push(ku.value),un&&(un=ku.inclusive)}return new Lc(jt,un)}(v,m),Y=function(_t,pt){const jt=[];let un=!0;for(const hi of gl(pt)){const ku=0===hi.kind?g0(_t,hi.fieldPath,_t.endAt):p0(_t,hi.fieldPath,_t.endAt);jt.push(ku.value),un&&(un=ku.inclusive)}return new Lc(jt,un)}(v,m),Ae=this.Ze(m,v,j),Le=this.Ze(m,v,Y),st=this.tn(m,v,O),ft=this.en(m.indexId,S,Ae,j.inclusive,Le,Y.inclusive,st);return Ee.forEach(ft,_t=>r.j(_t,t.limit).next(pt=>{pt.forEach(jt=>{const un=Xe.fromSegments(jt.documentKey);c.has(un)||(c=c.add(un),f.push(un))})}))}).next(()=>f)}return Ee.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,c,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),I=[];for(let S=0;S<m;++S){const O=t?this.nn(t[S/v]):c_,j=this.sn(e,O,r[S%v],i),Y=this.rn(e,O,a[S%v],c),Ae=f.map(Le=>this.sn(e,O,Le,!0));I.push(...this.createRange(j,Y,Ae))}return I}sn(e,t,r,i){const a=new ki(e,Xe.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new ki(e,Xe.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new jp(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.Ge(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return Ee.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let f=new kn(wr.comparator),m=!1;for(const v of c.filters){const I=v;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?m=!0:f=f.add(I.field))}for(const v of c.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Hc;for(const i of gl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Be(i.kind);Zc.ye.re(a,c)}return r.Oe()}nn(e){const t=new Hc;return Zc.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Hc;return Zc.ye.re(Nc(this.databaseId,t),r.Be(function(i){const a=gl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new Hc);let a=0;for(const c of gl(e)){const f=r[a++];for(const m of i)if(this.cn(t,c.fieldPath)&&yp(f))i=this.an(i,c,f);else{const v=m.Be(c.kind);Zc.ye.re(f,v)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const m=new Hc;m.seed(f.Oe()),Zc.ye.re(c,m.Be(t.kind)),a.push(m)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof ai&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=h_(e),i=kh(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const c=[];return Ee.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{c.push(function(v,I){const S=I?new Hm(I.sequenceNumber,new bs(jc(I.readTime),new Xe(Cu(I.documentKey)),I.largestBatchId)):Hm.empty(),O=v.fields.map(([j,Y])=>new mp(wr.fromServerFormat(j),Y));return new gp(v.indexId,v.collectionGroup,O,S)}(f,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=h_(e),a=kh(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>Ee.forEach(f,m=>a.put(K0(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return Ee.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?Ee.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Ee.forEach(f,m=>this.fn(e,i,m).next(v=>{const I=this.dn(a,m);return v.isEqual(I)?Ee.resolve():this._n(e,a,m,v,I)}))))})}wn(e,t,r,i){return Zp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return Zp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=Zp(e);let a=new kn($c);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,f)=>{a=a.add(new ki(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}dn(e,t){let r=new kn($c);const i=this.on(t,e);if(null==i)return r;const a=Zm(t);if(null!=a){const c=e.data.field(a.fieldPath);if(yp(c))for(const f of c.arrayValue.values||[])r=r.add(new ki(t.indexId,e.key,this.nn(f),i))}else r=r.add(new ki(t.indexId,e.key,c_,i));return r}_n(e,t,r,i,a){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,m,v,I,S){const O=f.getIterator(),j=m.getIterator();let Y=gh(O),Ae=gh(j);for(;Y||Ae;){let Le=!1,st=!1;if(Y&&Ae){const ft=v(Y,Ae);ft<0?st=!0:ft>0&&(Le=!0)}else null!=Y?st=!0:Le=!0;Le?(I(Ae),Ae=gh(j)):st?(S(Y),Y=gh(O)):(Y=gh(O),Ae=gh(j))}}(i,a,$c,f=>{c.push(this.wn(e,t,r,f))},f=>{c.push(this.mn(e,t,r,f))}),Ee.waitFor(c)}ln(e){let t=1;return kh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>$c(c,f)).filter((c,f,m)=>!f||0!==$c(c,m[f-1]));const i=[];i.push(e);for(const c of r){const f=$c(c,e),m=$c(c,t);if(0===f)i[0]=e.Le();else if(f>0&&m<0)i.push(c),i.push(c.Le());else if(m>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,c_,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,c_,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(J0)}getMinOffset(e,t){return Ee.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||ht())).next(J0)}}function qp(n){return li(n,"collectionParents")}function Zp(n){return li(n,"indexEntries")}function h_(n){return li(n,"indexConfiguration")}function kh(n){return li(n,"indexState")}function J0(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;r0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}const f_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function LI(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.J({range:c},(I,S,O)=>(f++,O.delete()));a.push(m.next(()=>{Pt(1===f)}));const v=[];for(const I of t.mutations){const S=TI(e,I.key.path,t.batchId);a.push(i.delete(S)),v.push(I.key)}return Ee.waitFor(a).next(()=>v)}function p_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class X0{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new X0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ka(e).J({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Gc(e),c=ka(e);return c.add({}).next(f=>{Pt("number"==typeof f);const m=new G0(f,t,r,i),v=function(O,j,Y){const Ae=Y.baseMutations.map(st=>Vc(O.ne,st)),Le=Y.mutations.map(st=>Vc(O.ne,st));return{userId:j,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:Ae,mutations:Le}}(this.wt,this.userId,m),I=[];let S=new kn((O,j)=>Bt(O.canonicalString(),j.canonicalString()));for(const O of i){const j=TI(this.userId,O.key.path,f);S=S.add(O.key.path.popLast()),I.push(c.put(v)),I.push(a.put(j,YS))}return S.forEach(O=>{I.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.gn[f]=m.keys()}),Ee.waitFor(I).next(()=>m)})}lookupMutationBatch(e,t){return ka(e).get(t).next(r=>r?(Pt(r.userId===this.userId),qc(this.wt,r)):null)}yn(e,t){return this.gn[t]?Ee.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ka(e).J({index:"userMutationsIndex",range:i},(c,f,m)=>{f.userId===this.userId&&(Pt(f.batchId>=r),a=qc(this.wt,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ka(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ka(e).K("userMutationsIndex",t).next(r=>r.map(i=>qc(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=n_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Gc(e).J({range:i},(c,f,m)=>{const[v,I,S]=c,O=Cu(I);if(v===this.userId&&t.path.isEqual(O))return ka(e).get(S).next(j=>{if(!j)throw ht();Pt(j.userId===this.userId),a.push(qc(this.wt,j))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Bt);const i=[];return t.forEach(a=>{const c=n_(this.userId,a.path),f=IDBKeyRange.lowerBound(c),m=Gc(e).J({range:f},(v,I,S)=>{const[O,j,Y]=v,Ae=Cu(j);O===this.userId&&a.path.isEqual(Ae)?r=r.add(Y):S.done()});i.push(m)}),Ee.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=n_(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new kn(Bt);return Gc(e).J({range:c},(m,v,I)=>{const[S,O,j]=m,Y=Cu(O);S===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add(j)):I.done()}).next(()=>this.pn(e,f))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ka(e).get(a).next(c=>{if(null===c)throw ht();Pt(c.userId===this.userId),r.push(qc(this.wt,c))}))}),Ee.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return LI(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Ee.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Gc(e).J({range:r},(a,c,f)=>{if(a[0]===this.userId){const m=Cu(a[1]);i.push(m)}else f.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return g_(e,this.userId,t)}Tn(e){return m_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function g_(n,e,t){const r=n_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Gc(n).J({range:a,H:!0},(f,m,v)=>{const[I,S,O]=f;I===e&&S===i&&(c=!0),v.done()}).next(()=>c)}function ka(n){return li(n,"mutations")}function Gc(n){return li(n,"documentMutations")}function m_(n){return li(n,"mutationQueues")}class Eu{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Eu(0)}static Rn(){return new Eu(-1)}}class u1{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Eu(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>kt.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rh(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Rh(e).J((c,f)=>{const m=Up(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>Ee.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Rh(e).J((r,i)=>{const a=Up(i);t(a)})}bn(e){return UI(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Pn(e,t){return UI(e).put("targetGlobalKey",t)}vn(e,t){return Rh(e).put(Ph(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Oc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Rh(e).J({range:i,index:"queryTargetsIndex"},(c,f,m)=>{const v=Up(f);wh(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Sl(e);return t.forEach(c=>{const f=Zr(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),Ee.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sl(e);return Ee.forEach(t,a=>{const c=Zr(a.path);return Ee.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Sl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sl(e);let a=Ht();return i.J({range:r,H:!0},(c,f,m)=>{const v=Cu(c[1]),I=new Xe(v);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Zr(t.path),i=IDBKeyRange.bound([r],[LE(r)],!1,!0);let a=0;return Sl(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,f],m,v)=>{0!==c&&(a++,v.done())}).next(()=>a>0)}te(e,t){return Rh(e).get(t).next(r=>r?Up(r):null)}}function Rh(n){return li(n,"targets")}function UI(n){return li(n,"targetGlobal")}function Sl(n){return li(n,"targetDocuments")}function ew([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class tw{constructor(e){this.Sn=e,this.buffer=new kn(ew),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ew(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Se.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_l(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ml(r)}yield t.kn(3e5)}))}}class BI{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ee.resolve(Pi.ot);const r=new tw(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(f_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f_):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,c,f,m,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Jv()<=gs.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-I}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-I}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class jI{constructor(e,t){this.db=e,this.garbageCollector=new BI(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return Hp(e,r)}removeReference(e,t,r){return Hp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hp(e,t)}Un(e,t){return function(r,i){let a=!1;return m_(r).Y(c=>g_(r,c,i).next(f=>(f&&(a=!0),Ee.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(c,f)=>{if(f<=t){const m=this.Un(e,c).next(v=>{if(!v)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,kt.min()),Sl(e).delete([0,Zr(c.path)])))});i.push(m)}}).next(()=>Ee.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hp(e,t)}Ln(e,t){const r=Sl(e);let i,a=Pi.ot;return r.J({index:"documentTargetsIndex"},([c,f],{path:m,sequenceNumber:v})=>{0===c?(a!==Pi.ot&&t(new Xe(Cu(i)),a),a=v,i=m):a=Pi.ot}).next(()=>{a!==Pi.ot&&t(new Xe(Cu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hp(n,e){return Sl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Zr(e.path),sequenceNumber:r}));var r}class qI{constructor(){this.changes=new Dl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ZI{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xl(e).put(r)}removeEntry(e,t,r){return xl(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],o_(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return xl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qr(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return xl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qr(t))},(i,a)=>{r={document:this.Kn(t,a),size:p_(a)}}).next(()=>r)}getEntries(e,t){let r=Ji();return this.Qn(e,t,(i,a)=>{const c=this.Kn(i,a);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=Ji(),i=new Cn(Xe.comparator);return this.Qn(e,t,(a,c)=>{const f=this.Kn(a,c);r=r.insert(a,f),i=i.insert(a,p_(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return Ee.resolve();let i=new kn(HI);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(Qr(i.first()),Qr(i.last())),c=i.getIterator();let f=c.getNext();return xl(e).J({index:"documentKeyIndex",range:a},(m,v,I)=>{const S=Xe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&HI(f,S)<0;)r(f,null),f=c.getNext();f&&f.isEqual(S)&&(r(f,v),f=c.hasNext()?c.getNext():null),f?I.q(Qr(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),o_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xl(e).K(IDBKeyRange.bound(i,a,!0)).next(c=>{let f=Ji();for(const m of c){const v=this.Kn(Xe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=Ji();const c=zc(t,r),f=zc(t,bs.max());return xl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(m,v,I)=>{const S=this.Kn(Xe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new l1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rw(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}qn(e,t){return rw(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function PI(n,e){let t;if(e.document)t=e_(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=jc(e.noDocument.readTime);t=jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=Xe.fromSegments(e.unknownDocument.path),i=jc(e.unknownDocument.version);t=jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Kn(r[0],r[1]);return kt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(kt.min()))return r}return jn.newInvalidDocument(e)}}function nw(n){return new ZI(n)}class l1 extends qI{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Dl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new kn((a,c)=>Bt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,f.readTime)),c.isValidDocument()){const m=kI(this.zn.wt,c);i=i.add(a.path.popLast()),r+=p_(m)-f.size,t.push(this.zn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=kI(this.zn.wt,c.convertToNoDocument(kt.min()));t.push(this.zn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),Ee.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,c)=>{this.Hn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function rw(n){return li(n,"remoteDocumentGlobal")}function xl(n){return li(n,"remoteDocumentsV14")}function Qr(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zc(n,e){const t=e.documentKey.path.toArray();return[n,o_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class c1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class d1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Dp(r.mutation,i,$s.empty(),Kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const i=xa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=xp();return a.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=Ji();const c=Mp(),f=Mp();return t.forEach((m,v)=>{const I=r.get(v.key);i.has(v.key)&&(void 0===I||I.mutation instanceof Tl)?a=a.insert(v.key,v):void 0!==I&&(c.set(v.key,I.mutation.getFieldMask()),Dp(I.mutation,v,I.mutation.getFieldMask(),Kn.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,I)=>c.set(v,I)),t.forEach((v,I)=>{var S;return f.set(v,new c1(I,null!==(S=c.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Mp();let i=new Cn((c,f)=>c-f),a=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let I=r.get(m)||$s.empty();I=f.applyToLocalView(v,I),r.set(m,I);const S=(i.get(f.batchId)||Ht()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,I=m.value,S=M0();I.forEach(O=>{if(!a.has(O)){const j=sI(t.get(O),r.get(O));null!==j&&S.set(O,j),a=a.add(O)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,S))}return Ee.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):w0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):Ee.resolve(xa());let f=-1,m=a;return c.next(v=>Ee.forEach(v,(I,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(I)?Ee.resolve():this.getBaseDocument(e,I,S).next(O=>{m=m.insert(I,O)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Ht())).next(I=>({batchId:f,changes:Uc(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=xp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=xp();return this.indexManager.getCollectionParents(e,i).next(c=>Ee.forEach(c,f=>{const m=(v=t,I=f.child(i),new Cl(I,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,I;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((I,S)=>{a=a.insert(I,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,jn.newInvalidDocument(v)))});let c=xp();return i.forEach((f,m)=>{const v=a.get(f);void 0!==v&&Dp(v.mutation,m,$s.empty(),Kn.now()),C0(t,m)&&(c=c.insert(f,m))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ee.resolve(jn.newInvalidDocument(t))}}class UP{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Ee.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:ui(r.createTime)}),Ee.resolve()}getNamedQuery(e,t){return Ee.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:a_(r.bundledQuery),readTime:ui(r.readTime)}),Ee.resolve();var r}}class $I{constructor(){this.overlays=new Cn(Xe.comparator),this.Xn=new Map}getOverlay(e,t){return Ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xa();return Ee.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),Ee.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),Ee.resolve()}getOverlaysForCollection(e,t,r){const i=xa(),a=t.length+1,c=new Xe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Cn((v,I)=>v-I);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let I=a.get(v.largestBatchId);null===I&&(I=xa(),a=a.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const f=xa(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,I)=>f.set(v,I)),!(f.size()>=i)););return Ee.resolve(f)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new s_(t,r));let a=this.Xn.get(t);void 0===a&&(a=Ht(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class __{constructor(){this.Zn=new kn(Cr.ts),this.es=new kn(Cr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Cr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Cr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Xe(new cn([])),r=new Cr(t,e),i=new Cr(t,e+1),a=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),a.push(c.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Xe(new cn([])),r=new Cr(t,e),i=new Cr(t,e+1);let a=Ht();return this.es.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Cr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Cr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Xe.comparator(e.key,t.key)||Bt(e.ls,t.ls)}static ns(e,t){return Bt(e.ls,t.ls)||Xe.comparator(e.key,t.key)}}class h1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new kn(Cr.ts)}checkEmpty(e){return Ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const c=new G0(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.ds=this.ds.add(new Cr(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ee.resolve(c)}lookupMutationBatch(e,t){return Ee.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cr(t,0),i=new Cr(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],c=>{const f=this._s(c.ls);a.push(f)}),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Bt);return t.forEach(i=>{const a=new Cr(i,0),c=new Cr(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,c],f=>{r=r.add(f.ls)})}),Ee.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const c=new Cr(new Xe(a),0);let f=new kn(Bt);return this.ds.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.ls)),!0)},c),Ee.resolve(this.gs(f))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return Ee.forEach(t.mutations,i=>{const a=new Cr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Cr(t,0),i=this.ds.firstAfterOrEqual(r);return Ee.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ee.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class iw{constructor(e){this.ps=e,this.docs=new Cn(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ee.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Ji();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():jn.newInvalidDocument(i))}),Ee.resolve(r)}getAllFromCollection(e,t,r){let i=Ji();const a=new Xe(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||r0(BE(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return Ee.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}Is(e,t){return Ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new f1(this)}getSize(e){return Ee.resolve(this.size)}}class f1 extends qI{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),Ee.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class GI{constructor(e){this.persistence=e,this.Ts=new Dl(t=>Oc(t),wh),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Es=0,this.As=new __,this.targetCount=0,this.Rs=Eu.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),Ee.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Eu(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Ee.resolve()}updateTargetData(e,t){return this.vn(t),Ee.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Ts.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Ee.waitFor(a).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return Ee.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Ee.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Ee.resolve(r)}containsKey(e,t){return Ee.resolve(this.As.containsKey(t))}}class zI{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Pi(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new GI(this),this.indexManager=new a1,this.remoteDocumentCache=new iw(r=>this.referenceDelegate.Ss(r)),this.wt=new MI(t),this.Ds=new UP(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $I,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new h1(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new p1(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return Ee.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class p1 extends s0{constructor(e){super(),this.currentSequenceNumber=e}}class Iu{constructor(e){this.persistence=e,this.ks=new __,this.Os=null}static Ms(e){return new Iu(e)}get Fs(){if(this.Os)return this.Os;throw ht()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),Ee.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Ee.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Fs,r=>{const i=Xe.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,kt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Ee.or([()=>Ee.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class g1{constructor(e){this.wt=e}O(e,t,r,i){const a=new $m("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",j0,{unique:!0}),f.createObjectStore("documentMutations"),y_(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=Ee.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),y_(e)),c=c.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,m){return m.store("mutations").K().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",j0,{unique:!0});const I=m.store("mutations"),S=v.map(O=>I.put(O));return Ee.waitFor(S)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(c=c.next(()=>this.Us(a))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:H0});m.createIndex("collectionPathOverlayIndex",t1,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",LP,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:QS});m.createIndex("documentKeyIndex",DI),m.createIndex("collectionGroupIndex",AI)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Z0}).createIndex("sequenceNumberIndex",SI,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:XS}).createIndex("documentKeyIndex",e1,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=p_(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>Ee.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(f=>Ee.forEach(f,m=>{Pt(m.userId===a.userId);const v=qc(this.wt,m);return LI(e,a.userId,v).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((c,f)=>{const m=new cn(c),v=[0,Zr(m)];a.push(t.get(v).next(I=>I?Ee.resolve():t.put({targetId:0,path:Zr(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ee.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:JS});const r=t.store("collectionParents"),i=new Q0,a=c=>{if(i.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:Zr(m)})}};return t.store("remoteDocuments").J({H:!0},(c,f)=>{const m=new cn(c);return a(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,f,m],v)=>{const I=Cu(f);return a(I.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=Up(i),c=Ph(this.wt,a);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,c)=>{const f=t.store("remoteDocumentsV14"),m=(v=c,v.document?new Xe(cn.fromString(v.document.name).popFirst(5)):v.noDocument?Xe.fromSegments(v.noDocument.path):v.unknownDocument?Xe.fromSegments(v.unknownDocument.path):ht()).path.toArray();var v;const I={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(I))}).next(()=>Ee.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=nw(this.wt),a=new zI(Iu.Ms,this.wt.ne);return r.K().next(c=>{const f=new Map;return c.forEach(m=>{var v;let I=null!==(v=f.get(m.userId))&&void 0!==v?v:Ht();qc(this.wt,m).keys().forEach(S=>I=I.add(S)),f.set(m.userId,I)}),Ee.forEach(f,(m,v)=>{const I=new Kr(v),S=Y0.se(this.wt,I),O=a.getIndexManager(I),j=X0.se(I,this.wt,O,a.referenceDelegate);return new d1(i,j,S,O).recalculateAndSaveOverlaysForDocumentKeys(new Lp(t,Pi.ot),m).next()})})}}function y_(n){n.createObjectStore("targetDocuments",{keyPath:r_}).createIndex("documentTargetsIndex",Fp,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",q0,{unique:!0}),n.createObjectStore("targetGlobal")}const v_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class w_{constructor(e,t,r,i,a,c,f,m,v,I,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=c,this.document=f,this.Ws=v,this.zs=I,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=O=>Promise.resolve(),!w_.V())throw new He(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,i),this.ei=t+"main",this.wt=new MI(m),this.ni=new wo(this.ei,this.Hs,new g1(this.wt)),this.Vs=new u1(this.referenceDelegate,this.wt),this.remoteDocumentCache=nw(this.wt),this.Ds=new RI,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===I&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(De.FAILED_PRECONDITION,v_);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Pi(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Se.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Se.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Se.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(_l(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Ml(e).get("owner").next(t=>Ee.resolve(this.di(t)))}_i(e){return Nh(e).delete(this.clientId)}wi(){var e=this;return(0,Se.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=li(r,"clientMetadata");return i.K().next(a=>{const c=e.gi(a,18e5),f=a.filter(m=>-1===c.indexOf(m));return Ee.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Ee.resolve(!0):Ml(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new He(De.FAILED_PRECONDITION,v_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nh(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Se.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lp(t,Pi.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Nh(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return X0.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d_(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Y0.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Hs)?r1:14===c?i_:13===c?$0:12===c?n1:11===c?xI:void ht();var c;let f;return this.ni.runTransaction(e,i,a,m=>(f=new Lp(m,this.Ps?this.Ps.next():Pi.ot),"readwrite-primary"===t?this.ai(f).next(v=>!!v||this.hi(f)).next(v=>{if(!v)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new He(De.FAILED_PRECONDITION,qr);return r(f)}).next(v=>this.fi(f).next(()=>v)):this.bi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}bi(e){return Ml(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new He(De.FAILED_PRECONDITION,v_)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ml(e).put("owner",t)}static V(){return wo.V()}li(e){const t=Ml(e);return t.get("owner").next(r=>this.di(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ee.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ml(n){return li(n,"owner")}function Nh(n){return li(n,"clientMetadata")}function WI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class b_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Ht(),i=Ht();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new b_(e,t.fromCache,r,i)}}class KI{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return Ee.resolve(null)}xi(e,t,r,i){return function kS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(kt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const c=this.ki(t,a);return this.Oi(t,c,r,i)?this.Ni(e,t):(Jv()<=gs.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jm(t)),this.Mi(e,c,t,VE(i,-1)))})}ki(e,t){let r=new kn(I0(e));return t.forEach((i,a)=>{C0(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Jv()<=gs.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Jm(t)),this.Di.getDocumentsMatchingQuery(e,t,bs.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class YI{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Cn(Bt),this.Bi=new Dl(a=>Oc(a),wh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d1(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Wc(n,e,t,r){return new YI(n,e,t,r)}function QI(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,Se.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let m=Ht();for(const v of i){c.push(v.batchId);for(const I of v.mutations)m=m.add(I.key)}for(const v of a){f.push(v.batchId);for(const I of v.mutations)m=m.add(I.key)}return t.localDocuments.getDocuments(r,m).next(v=>({Ki:v,removedBatchIds:c,addedBatchIds:f}))})})}),C_.apply(this,arguments)}function sw(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,f,m,v){const I=m.batch,S=I.keys();let O=Ee.resolve();return S.forEach(j=>{O=O.next(()=>v.getEntry(f,j)).next(Y=>{const Ae=m.docVersions.get(j);Pt(null!==Ae),Y.version.compareTo(Ae)<0&&(I.applyToRemoteDocument(Y,m),Y.isValidDocument()&&(Y.setReadTime(m.commitVersion),v.addEntry(Y)))})}),O.next(()=>c.mutationQueue.removeMutationBatch(f,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Ht();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function m1(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function _1(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const f=[];e.targetChanges.forEach((I,S)=>{const O=i.get(S);if(!O)return;f.push(t.Vs.removeMatchingKeys(a,I.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,I.addedDocuments,S)));let j=O.withSequenceNumber(a.currentSequenceNumber);var Y,Ae,Le;e.targetMismatches.has(S)?j=j.withResumeToken(Yr.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):I.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(I.resumeToken,r)),i=i.insert(S,j),Ae=j,Le=I,(0===(Y=O).resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&f.push(t.Vs.updateTargetData(a,j))});let m=Ji(),v=Ht();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),f.push(y1(a,c,e.documentUpdates).next(I=>{m=I.Gi,v=I.Qi})),!r.isEqual(kt.min())){const I=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(I)}return Ee.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.$i=i,a))}function y1(n,e,t){let r=Ht(),i=Ht();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Ji();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(kt.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Ke("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Gi:c,Qi:i}})}function v1(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Oh(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,Ee.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new Al(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Fh(n,e,t){return E_.apply(this,arguments)}function E_(){return E_=(0,Se.Z)(function*(n,e,t){const r=rt(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!_l(c))throw c;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),E_.apply(this,arguments)}function $p(n,e,t){const r=rt(n);let i=kt.min(),a=Ht();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,m,v){const I=rt(f),S=I.Bi.get(v);return void 0!==S?Ee.resolve(I.$i.get(S)):I.Vs.getTargetData(m,v)}(r,c,Qi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,f.targetId).next(m=>{a=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:kt.min(),t?a:Ht())).next(f=>(aw(r,E0(e),f),{documents:f,ji:a})))}function JI(n,e){const t=rt(n),r=rt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(c=>c?c.target:null))}function ow(n,e){const t=rt(n),r=t.Li.get(e)||kt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,VE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aw(t,e,i),i))}function aw(n,e,t){let r=kt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function uw(){return uw=(0,Se.Z)(function*(n,e,t,r){const i=rt(n);let a=Ht(),c=Ji();for(const v of t){const I=e.Wi(v.metadata.name);v.document&&(a=a.add(I));const S=e.zi(v);S.setReadTime(e.Hi(v.metadata.readTime)),c=c.insert(I,S)}const f=i.Ui.newChangeBuffer({trackRemovals:!0}),m=yield Oh(i,(v=r,Qi(Ch(cn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>y1(v,f,c).next(I=>(f.apply(v),I)).next(I=>i.Vs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Vs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,I.Gi,I.Qi)).next(()=>I.Gi)))}),uw.apply(this,arguments)}function XI(n,e){return lw.apply(this,arguments)}function lw(){return lw=(0,Se.Z)(function*(n,e,t=Ht()){const r=yield Oh(n,Qi(a_(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=ui(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(a,e);const f=r.withResumeToken(Yr.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(f.targetId,f),i.Vs.updateTargetData(a,f).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),lw.apply(this,arguments)}function cw(n,e){return`firestore_clients_${n}_${e}`}function dw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function I_(n,e){return`firestore_targets_${n}_${e}`}class Gp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new He(i.error.code,i.error.message))),c?new Gp(e,t,i.state,a):(kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new He(r.error.code,r.error.message))),a?new zp(e,r.state,i):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class T_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Sh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Wm(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new T_(e,a):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class eT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eT(t.clientId,t.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class D_{constructor(){this.activeTargetIds=Sh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tT{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Cn(Bt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=cw(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new D_),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Se.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(cw(e.persistenceKey,i));if(a){const c=T_.Ji(i,a);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(I_(this.persistenceKey,e));if(r){const i=zp.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(I_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Se.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let c=Pi.ot;if(null!=a)try{const f=JSON.parse(a);Pt("number"==typeof f),c=f}catch(f){kr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Pi.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new Gp(this.currentUser,e,t,r),a=dw(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=dw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=I_(this.persistenceKey,e),a=new zp(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return T_.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return Gp.Ji(new Kr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return zp.Ji(i,t)}wr(e){return eT.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),c=[],f=[];return a.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Mr(c,f).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Sh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class b1{constructor(){this.Fr=new D_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new D_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VP{Br(e){}shutdown(){}}class C1{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const BP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jP{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class qP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const c=this.oo(e,t);Ke("RestConnection","Sending: ",c,r);const f={};return this.uo(f,i,a),this.co(e,c,f,r).then(m=>(Ke("RestConnection","Received: ",m),m),m=>{throw Mc("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",r),m})}ao(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+xc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${BP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,c)=>{const f=new PE;f.listenOnce(fh.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case pl.NO_ERROR:const v=f.getResponseJson();Ke("Connection","XHR received:",JSON.stringify(v)),a(v);break;case pl.TIMEOUT:Ke("Connection",'RPC "'+e+'" timed out'),c(new He(De.DEADLINE_EXCEEDED,"Request time out"));break;case pl.HTTP_ERROR:const I=f.getStatus();if(Ke("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const O=function(j){const Y=j.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf(Y)>=0?Y:De.UNKNOWN}(S.status);c(new He(O,S.message))}else c(new He(De.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new He(De.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ke("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=dh(),c=hh(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new ME({})),this.uo(f.initMessageHeaders,t,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Ke("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let I=!1,S=!1;const O=new jP({jr:Y=>{S?Ke("Connection","Not sending because WebChannel is closed:",Y):(I||(Ke("Connection","Opening WebChannel transport."),v.open(),I=!0),Ke("Connection","WebChannel sending:",Y),v.send(Y))},Wr:()=>v.close()}),j=(Y,Ae,Le)=>{Y.listen(Ae,st=>{try{Le(st)}catch(ft){setTimeout(()=>{throw ft},0)}})};return j(v,fp.EventType.OPEN,()=>{S||Ke("Connection","WebChannel transport opened.")}),j(v,fp.EventType.CLOSE,()=>{S||(S=!0,Ke("Connection","WebChannel transport closed"),O.eo())}),j(v,fp.EventType.ERROR,Y=>{S||(S=!0,Mc("Connection","WebChannel transport errored:",Y),O.eo(new He(De.UNAVAILABLE,"The operation could not be completed")))}),j(v,fp.EventType.MESSAGE,Y=>{var Ae;if(!S){const Le=Y.data[0];Pt(!!Le);const st=Le,ft=st.error||(null===(Ae=st[0])||void 0===Ae?void 0:Ae.error);if(ft){Ke("Connection","WebChannel received error:",ft);const _t=ft.status;let pt=function(un){const hi=Qn[un];if(void 0!==hi)return lI(hi)}(_t),jt=ft.message;void 0===pt&&(pt=De.INTERNAL,jt="Unknown error status: "+_t+" with message "+ft.message),S=!0,O.eo(new He(pt,jt)),v.close()}else Ke("Connection","WebChannel received:",Le),O.no(Le)}}),j(c,xE.STAT_EVENT,Y=>{Y.stat===Yv.PROXY?Ke("Connection","Detected buffering proxy"):Y.stat===Yv.NOPROXY&&Ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Zr()},0),O}}function E1(){return typeof window<"u"?window:null}function Kc(){return typeof document<"u"?document:null}function A_(n){return new HS(n,!0)}class S_{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Wp{constructor(e,t,r,i,a,c,f,m){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new S_(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Se.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Se.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Se.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===De.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===De.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new He(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Se.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nT extends Wp{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function vI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=e.targetChange.targetIds||[],a=function(m,v){return m.dt?(Pt(void 0===v||"string"==typeof v),Yr.fromBase64String(v||"")):(Pt(void 0===v||v instanceof Uint8Array),Yr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(m){const v=void 0===m.code?De.UNKNOWN:lI(m.code);return new He(v,m.message||"")}(c);t=new fI(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ma(n,r.document.name),a=ui(r.document.updateTime),c=new Ci({mapValue:{fields:r.document.fields}}),f=jn.newFoundDocument(i,a,c);t=new kp(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ma(n,r.document),a=r.readTime?ui(r.readTime):kt.min(),c=jn.newNoDocument(i,a);t=new kp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ma(n,r.document);t=new kp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,a=new aI(r.count||0);t=new hI(r.targetId,a)}}var m;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?ui(a.readTime):kt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Np(this.wt),t.addTarget=function(i,a){let c;const f=a.target;return c=wp(f)?{documents:t_(i,f)}:{query:wI(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=mI(i,a.resumeToken):a.snapshotVersion.compareTo(kt.min())>0&&(c.readTime=Rp(i,a.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function zS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Np(this.wt),t.removeTarget=e,this.Mo(t)}}class rT extends Wp{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function GS(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let a=ui(r.updateTime?r.updateTime:i);return a.isEqual(kt.min())&&(a=ui(i)),new OS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.Jo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Np(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vc(this.wt,r))};this.Mo(t)}}class ZP extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new He(De.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(De.UNKNOWN,i.toString())})}ao(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(De.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class hw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(kr(t),this.su=!1):Ke("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class iT{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(f=>{r.enqueueAndForget((0,Se.Z)(function*(){var m;Yc(c)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Se.Z)(function*(v){const I=rt(v);I.lu.add(4),yield Yp(I),I._u.set("Unknown"),I.lu.delete(4),yield Kp(I)}),function(v){return m.apply(this,arguments)})(c))}))}),this._u=new hw(r,i)}}function Kp(n){return x_.apply(this,arguments)}function x_(){return x_=(0,Se.Z)(function*(n){if(Yc(n))for(const e of n.fu)yield e(!0)}),x_.apply(this,arguments)}function Yp(n){return sT.apply(this,arguments)}function sT(){return sT=(0,Se.Z)(function*(n){for(const e of n.fu)yield e(!1)}),sT.apply(this,arguments)}function M_(n,e){const t=rt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),uT(t)?aT(t):Vh(t).Co()&&Lh(t,e))}function Qp(n,e){const t=rt(n),r=Vh(t);t.hu.delete(e),r.Co()&&oT(t,e),0===t.hu.size&&(r.Co()?r.ko():Yc(t)&&t._u.set("Unknown"))}function Lh(n,e){n.wu.Nt(e.targetId),Vh(n).Qo(e)}function oT(n,e){n.wu.Nt(e),Vh(n).jo(e)}function aT(n){n.wu=new P0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Vh(n).start(),n._u.iu()}function uT(n){return Yc(n)&&!Vh(n).Do()&&n.hu.size>0}function Yc(n){return 0===rt(n).lu.size}function lT(n){n.wu=void 0}function I1(n){return fw.apply(this,arguments)}function fw(){return fw=(0,Se.Z)(function*(n){n.hu.forEach((e,t)=>{Lh(n,e)})}),fw.apply(this,arguments)}function HP(n,e){return pw.apply(this,arguments)}function pw(){return pw=(0,Se.Z)(function*(n,e){lT(n),uT(n)?(n._u.uu(e),aT(n)):n._u.set("Unknown")}),pw.apply(this,arguments)}function gw(n,e,t){return mw.apply(this,arguments)}function mw(){return mw=(0,Se.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof fI&&2===e.state&&e.cause)try{yield(r=(0,Se.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.hu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.hu.delete(f),i.wu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ri(n,r)}else if(e instanceof kp?n.wu.Ut(e):e instanceof hI?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(kt.min()))try{const r=yield m1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.wu.Yt(a);return c.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.hu.get(m);v&&i.hu.set(m,v.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach(f=>{const m=i.hu.get(f);if(!m)return;i.hu.set(f,m.withResumeToken(Yr.EMPTY_BYTE_STRING,m.snapshotVersion)),oT(i,f);const v=new Al(m.target,f,1,m.sequenceNumber);Lh(i,v)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield Ri(n,r)}var r}),mw.apply(this,arguments)}function Ri(n,e,t){return _w.apply(this,arguments)}function _w(){return _w=(0,Se.Z)(function*(n,e,t){if(!_l(e))throw e;n.lu.add(1),yield Yp(n),n._u.set("Offline"),t||(t=()=>m1(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Kp(n)}))}),_w.apply(this,arguments)}function P_(n,e){return e().catch(t=>Ri(n,t,e))}function Uh(n){return yw.apply(this,arguments)}function yw(){return yw=(0,Se.Z)(function*(n){const e=rt(n),t=kl(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;vw(e);)try{const i=yield v1(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,cT(e,i)}catch(i){yield Ri(e,i)}ww(e)&&dT(e)}),yw.apply(this,arguments)}function vw(n){return Yc(n)&&n.au.length<10}function cT(n,e){n.au.push(e);const t=kl(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function ww(n){return Yc(n)&&!kl(n).Do()&&n.au.length>0}function dT(n){kl(n).start()}function hT(n){return k_.apply(this,arguments)}function k_(){return k_=(0,Se.Z)(function*(n){kl(n).Xo()}),k_.apply(this,arguments)}function T1(n){return R_.apply(this,arguments)}function R_(){return R_=(0,Se.Z)(function*(n){const e=kl(n);for(const t of n.au)e.Ho(t.mutations)}),R_.apply(this,arguments)}function D1(n,e,t){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,Se.Z)(function*(n,e,t){const r=n.au.shift(),i=z0.from(r,e,t);yield P_(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uh(n)}),Jp.apply(this,arguments)}function Pl(n,e){return N_.apply(this,arguments)}function N_(){return N_=(0,Se.Z)(function*(n,e){var t;e&&kl(n).zo&&(yield(t=(0,Se.Z)(function*(r,i){if(uI(a=i.code)&&a!==De.ABORTED){const c=r.au.shift();kl(r).No(),yield P_(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Uh(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),ww(n)&&dT(n)}),N_.apply(this,arguments)}function bw(n,e){return Eo.apply(this,arguments)}function Eo(){return Eo=(0,Se.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=Yc(t);t.lu.add(3),yield Yp(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Kp(t)}),Eo.apply(this,arguments)}function Cw(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,Se.Z)(function*(n,e){const t=rt(n);e?(t.lu.delete(2),yield Kp(t)):e||(t.lu.add(2),yield Yp(t),t._u.set("Unknown"))}),fT.apply(this,arguments)}function Vh(n){return n.mu||(n.mu=function(e,t,r){const i=rt(e);return i.tu(),new nT(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:I1.bind(null,n),Jr:HP.bind(null,n),Go:gw.bind(null,n)}),n.fu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.mu.No(),uT(n)?aT(n):n._u.set("Unknown")):(yield n.mu.stop(),lT(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function kl(n){return n.gu||(n.gu=function(e,t,r){const i=rt(e);return i.tu(),new rT(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:hT.bind(null,n),Jr:Pl.bind(null,n),Yo:T1.bind(null,n),Jo:D1.bind(null,n)}),n.fu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.gu.No(),yield Uh(n)):(yield n.gu.stop(),n.au.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Ew{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new Ew(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bh(n,e){if(kr("AsyncQueue",`${e}: ${n}`),_l(n))return new He(De.UNAVAILABLE,`${e}: ${n}`);throw n}class Qc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=xp(),this.sortedSet=new Cn(this.comparator)}static emptySet(e){return new Qc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class A1{constructor(){this.yu=new Cn(Xe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ht():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jc{constructor(e,t,r,i,a,c,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Jc(e,t,Qc.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class S1{constructor(){this.Iu=void 0,this.listeners=[]}}class pT{constructor(){this.queries=new Dl(e=>b0(e),Qm),this.onlineState="Unknown",this.Tu=new Set}}function gT(n,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,Se.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new S1),i)try{a.Iu=yield t.onListen(r)}catch(c){const f=Bh(c,`Initialization of query '${Jm(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&L_(t)}),Xp.apply(this,arguments)}function O_(n,e){return F_.apply(this,arguments)}function F_(){return F_=(0,Se.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),F_.apply(this,arguments)}function x1(n,e){const t=rt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Au(i)&&(r=!0);c.Iu=i}}r&&L_(t)}function mT(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function L_(n){n.Tu.forEach(e=>{e.next()})}class jh{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Jc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class U_{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Iw{constructor(e){this.wt=e}Wi(e){return Ma(this.wt,e)}zi(e){return e.metadata.exists?e_(this.wt,e.document,!1):jn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ui(e)}}class M1{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tw(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Iw(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Ht()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,Se.Z)(function*(){const t=yield function w1(n,e,t,r){return uw.apply(this,arguments)}(e.localStore,new Iw(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield XI(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Tw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Dw{constructor(e){this.key=e}}class _T{constructor(e){this.key=e}}class yT{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ht(),this.mutatedKeys=Ht(),this.Lu=I0(e),this.Uu=new Qc(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new A1,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,S)=>{const O=i.get(I),j=C0(this.query,S)?S:null,Y=!!O&&this.mutatedKeys.has(O.key),Ae=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Le=!1;O&&j?O.data.isEqual(j.data)?Y!==Ae&&(r.track({type:3,doc:j}),Le=!0):this.Qu(O,j)||(r.track({type:2,doc:j}),Le=!0,(m&&this.Lu(j,m)>0||v&&this.Lu(j,v)<0)&&(f=!0)):!O&&j?(r.track({type:0,doc:j}),Le=!0):O&&!j&&(r.track({type:1,doc:O}),Le=!0,(m||v)&&(f=!0)),Le&&(j?(c=c.add(j),a=Ae?a.add(I):a.delete(I)):(c=c.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const I="F"===this.query.limitType?c.last():c.first();c=c.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Uu:c,Gu:r,Oi:f,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((v,I)=>function(S,O){const j=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return j(S)-j(O)}(v.type,I.type)||this.Lu(v.doc,I.doc)),this.ju(r);const c=t?this.Wu():[],f=0===this.Bu.size&&this.current?1:0,m=f!==this.$u;return this.$u=f,0!==a.length||m?{snapshot:new Jc(this.query,e.Uu,i,a,e.mutatedKeys,0===f,m,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new A1,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ht(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new _T(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Dw(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Ht();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Jc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class $P{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GP{constructor(e){this.key=e,this.Xu=!1}}class vT{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Dl(f=>b0(f),Qm),this.ec=new Map,this.nc=new Set,this.sc=new Cn(Xe.comparator),this.ic=new Map,this.rc=new __,this.oc={},this.uc=new Map,this.cc=Eu.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function P1(n,e){return Aw.apply(this,arguments)}function Aw(){return Aw=(0,Se.Z)(function*(n,e){const t=MT(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const c=yield Oh(t.localStore,Qi(e));t.isPrimaryClient&&M_(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Sw(t,e,r,"current"===f)}return i}),Aw.apply(this,arguments)}function Sw(n,e,t,r){return wT.apply(this,arguments)}function wT(){return wT=(0,Se.Z)(function*(n,e,t,r){n.hc=(I,S,O)=>{return(j=(0,Se.Z)(function*(Y,Ae,Le,st){let ft=Ae.view.Ku(Le);ft.Oi&&(ft=yield $p(Y.localStore,Ae.query,!1).then(({documents:jt})=>Ae.view.Ku(jt,ft)));const _t=st&&st.targetChanges.get(Ae.targetId),pt=Ae.view.applyChanges(ft,Y.isPrimaryClient,_t);return TT(Y,Ae.targetId,pt.zu),pt.snapshot}),function(Y,Ae,Le,st){return j.apply(this,arguments)})(n,I,S,O);var j};const i=yield $p(n.localStore,e,!0),a=new yT(e,i.ji),c=a.Ku(i.documents),f=xh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(c,n.isPrimaryClient,f);TT(n,t,m.zu);const v=new $P(e,t,a);return n.tc.set(e,v),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),wT.apply(this,arguments)}function zP(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Se.Z)(function*(n,e){const t=rt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!Qm(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Qp(t.remoteStore,r.targetId),rg(t,r.targetId)}).catch(ml))):(rg(t,r.targetId),yield Fh(t.localStore,r.targetId,!0))}),bT.apply(this,arguments)}function CT(){return CT=(0,Se.Z)(function*(n,e,t){const r=PT(n);try{const i=yield function(a,c){const f=rt(a),m=Kn.now(),v=c.reduce((O,j)=>O.add(j.key),Ht());let I,S;return f.persistence.runTransaction("Locally write mutations","readwrite",O=>{let j=Ji(),Y=Ht();return f.Ui.getEntries(O,v).next(Ae=>{j=Ae,j.forEach((Le,st)=>{st.isValidDocument()||(Y=Y.add(Le))})}).next(()=>f.localDocuments.getOverlayedDocuments(O,j)).next(Ae=>{I=Ae;const Le=[];for(const st of c){const ft=FS(st,I.get(st.key).overlayedDocument);null!=ft&&Le.push(new Tl(st.key,ft,KE(ft.value.mapValue),Yn.exists(!0)))}return f.mutationQueue.addMutationBatch(O,m,Le,c)}).next(Ae=>{S=Ae;const Le=Ae.applyToLocalDocumentSet(I,Y);return f.documentOverlayCache.saveOverlays(O,Ae.batchId,Le)})}).then(()=>({batchId:S.batchId,changes:Uc(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let m=a.oc[a.currentUser.toKey()];m||(m=new Cn(Bt)),m=m.insert(c,f),a.oc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Tu(r,i.changes),yield Uh(r.remoteStore)}catch(i){const a=Bh(i,"Failed to persist write");t.reject(a)}}),CT.apply(this,arguments)}function ET(n,e){return qh.apply(this,arguments)}function qh(){return qh=(0,Se.Z)(function*(n,e){const t=rt(n);try{const r=yield _1(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.ic.get(a);c&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Pt(c.Xu):i.removedDocuments.size>0&&(Pt(c.Xu),c.Xu=!1))}),yield Tu(t,r,e)}catch(r){yield ml(r)}}),qh.apply(this,arguments)}function IT(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,c)=>{const f=c.view.Eu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=rt(a);f.onlineState=c;let m=!1;f.queries.forEach((v,I)=>{for(const S of I.listeners)S.Eu(c)&&(m=!0)}),m&&L_(f)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function k1(n,e,t){return V_.apply(this,arguments)}function V_(){return V_=(0,Se.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let c=new Cn(Xe.comparator);c=c.insert(a,jn.newNoDocument(a,kt.min()));const f=Ht().add(a),m=new Pp(kt.min(),new Map,new kn(Bt),c,f);yield ET(r,m),r.sc=r.sc.remove(a),r.ic.delete(e),j_(r)}else yield Fh(r.localStore,e,!1).then(()=>rg(r,e,t)).catch(ml)}),V_.apply(this,arguments)}function Xc(n,e){return B_.apply(this,arguments)}function B_(){return B_=(0,Se.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield sw(t.localStore,e);Zh(t,r,null),ng(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tu(t,i)}catch(i){yield ml(i)}}),B_.apply(this,arguments)}function xw(n,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,Se.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,c){const f=rt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next(I=>(Pt(null!==I),v=I.keys(),f.mutationQueue.removeMutationBatch(m,I))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);Zh(r,e,t),ng(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tu(r,i)}catch(i){yield ml(i)}}),eg.apply(this,arguments)}function tg(){return tg=(0,Se.Z)(function*(n,e){const t=rt(n);Yc(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=rt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Bh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tg.apply(this,arguments)}function ng(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Zh(n,e,t){const r=rt(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function rg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||N1(n,r)})}function N1(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Qp(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),j_(n))}function TT(n,e,t){for(const r of t)r instanceof Dw?(n.rc.addReference(r.key,e),KP(n,r)):r instanceof _T?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||N1(n,r.key)):ht()}function KP(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.nc.add(r),j_(n))}function j_(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Xe(cn.fromString(e)),r=n.cc.next();n.ic.set(r,new GP(t)),n.sc=n.sc.insert(t,r),M_(n.remoteStore,new Al(Qi(Ch(t.path)),r,2,Pi.ot))}}function Tu(n,e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,Se.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],c=[];var f;r.tc.isEmpty()||(r.tc.forEach((f,m)=>{c.push(r.hc(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const I=b_.Vi(m.targetId,v);a.push(I)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(f=(0,Se.Z)(function*(m,v){const I=rt(m);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Ee.forEach(v,O=>Ee.forEach(O.Pi,j=>I.persistence.referenceDelegate.addReference(S,O.targetId,j)).next(()=>Ee.forEach(O.vi,j=>I.persistence.referenceDelegate.removeReference(S,O.targetId,j)))))}catch(S){if(!_l(S))throw S;Ke("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const O=S.targetId;if(!S.fromCache){const j=I.$i.get(O),Ae=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);I.$i=I.$i.insert(O,Ae)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),Mw.apply(this,arguments)}function O1(n,e){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,Se.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield QI(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(f=>{f.reject(new He(De.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tu(t,r.Ki)}var i}),Pw.apply(this,arguments)}function DT(n,e){const t=rt(n),r=t.ic.get(e);if(r&&r.Xu)return Ht().add(r.key);{let i=Ht();const a=t.ec.get(e);if(!a)return i;for(const c of a){const f=t.tc.get(c);i=i.unionWith(f.view.qu)}return i}}function AT(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,Se.Z)(function*(n,e){const t=rt(n),r=yield $p(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&TT(t,e.targetId,i.zu),i}),q_.apply(this,arguments)}function F1(n,e){return kw.apply(this,arguments)}function kw(){return kw=(0,Se.Z)(function*(n,e){const t=rt(n);return ow(t.localStore,e).then(r=>Tu(t,r))}),kw.apply(this,arguments)}function ST(n,e,t,r){return ig.apply(this,arguments)}function ig(){return ig=(0,Se.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(c,f){const m=rt(c),v=rt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",I=>v.yn(I,f).next(S=>S?m.localDocuments.getDocuments(I,S):Ee.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Uh(i.remoteStore):"acknowledged"===t||"rejected"===t?(Zh(i,e,r||null),ng(i,e),f=e,rt(rt(i.localStore).mutationQueue).In(f)):ht(),yield Tu(i,a)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),ig.apply(this,arguments)}function Z_(){return Z_=(0,Se.Z)(function*(n,e){const t=rt(n);if(MT(t),PT(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield H_(t,r.toArray());t.ac=!0,yield Cw(t.remoteStore,!0);for(const a of i)M_(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(rg(t,c),Fh(t.localStore,c,!0))),Qp(t.remoteStore,c)}),yield i,yield H_(t,r),function(a){const c=rt(a);c.ic.forEach((f,m)=>{Qp(c.remoteStore,m)}),c.rc.cs(),c.ic=new Map,c.sc=new Cn(Xe.comparator)}(t),t.ac=!1,yield Cw(t.remoteStore,!1)}}),Z_.apply(this,arguments)}function H_(n,e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=(0,Se.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const c of e){let f;const m=r.ec.get(c);if(m&&0!==m.length){f=yield Oh(r.localStore,Qi(m[0]));for(const v of m){const I=r.tc.get(v),S=yield AT(r,I);S.snapshot&&a.push(S.snapshot)}}else{const v=yield JI(r.localStore,c);f=yield Oh(r.localStore,v),yield Sw(r,xT(v),c,!1)}i.push(f)}return r.Zu.Go(a),i}),Rw.apply(this,arguments)}function xT(n){return At(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QP(n){const e=rt(n);return rt(rt(e.localStore).persistence).Ri()}function JP(n,e,t,r){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,Se.Z)(function*(n,e,t,r){const i=rt(n);if(i.ac)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield ow(i.localStore,E0(a[0])),f=Pp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Tu(i,c,f);break}case"rejected":yield Fh(i.localStore,e,!0),rg(i,e,r);break;default:ht()}}),Nw.apply(this,arguments)}function L1(n,e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,Se.Z)(function*(n,e,t){const r=MT(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Ke("SyncEngine","Adding an already active target "+i);continue}const a=yield JI(r.localStore,i),c=yield Oh(r.localStore,a);yield Sw(r,xT(a),c.targetId,!1),M_(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield Fh(r.localStore,i,!1).then(()=>{Qp(r.remoteStore,i),rg(r,i)}).catch(ml))}}),Ow.apply(this,arguments)}function MT(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k1.bind(null,e),e.Zu.Go=x1.bind(null,e.eventManager),e.Zu.lc=mT.bind(null,e.eventManager),e}function PT(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xc.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xw.bind(null,e),e}class U1{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Se.Z)(function*(){t.wt=A_(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Wc(this.persistence,new KI,e.initialUser,this.wt)}_c(e){return new zI(Iu.Ms,this.wt)}dc(e){return new b1}terminate(){var e=this;return(0,Se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class V1 extends U1{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Se.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield PT(r.yc.syncEngine),yield Uh(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Wc(this.persistence,new KI,e.initialUser,this.wt)}mc(e,t){return new VI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new ZE(t,this.persistence);return new NP(e.asyncQueue,r)}_c(e){const t=WI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new w_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,E1(),Kc(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new b1}}class B1 extends V1{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Se.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof tT&&(r.sharedClientState.syncEngine={kr:ST.bind(null,i),Or:JP.bind(null,i),Mr:L1.bind(null,i),Ri:QP.bind(null,i),Nr:F1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,Se.Z)(function*(c){yield function YP(n,e){return Z_.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}dc(e){const t=E1();if(!tT.V(t))throw new He(De.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kT{initialize(e,t){var r=this;return(0,Se.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>IT(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=O1.bind(null,r.syncEngine),yield Cw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pT}createDatastore(e){const t=A_(e.databaseInfo.databaseId),r=new qP(e.databaseInfo);return new ZP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>IT(this.syncEngine,f,0),c=C1.V()?new C1:new VP,new iT(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,m,v){const I=new vT(r,i,a,c,f,m);return v&&(I.ac=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Se.Z)(function*(t){const r=rt(t);Ke("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Yp(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function j1(n,e=10240){let t=0;return{read:()=>(0,Se.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ek{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new jr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Se.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Se.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new U_(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Se.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class s{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new He(De.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Se.Z)(function*(a,c){const f=rt(a),m=Np(f.wt)+"/documents",v={documents:c.map(j=>Mh(f.wt,j))},I=yield f.ao("BatchGetDocuments",m,v),S=new Map;I.forEach(j=>{const Y=function L0(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Ma(t,r.found.name),a=ui(r.found.updateTime),c=new Ci({mapValue:{fields:r.found.fields}});return jn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Ma(t,r.missing),a=ui(r.readTime);return jn.newNoDocument(i,a)}(n,e):ht()}(f.wt,j);S.set(Y.key.toString(),Y)});const O=[];return c.forEach(j=>{const Y=S.get(j.toString());Pt(!!Y),O.push(Y)}),O}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ah(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new x0(a,e.precondition(a)))}),yield(r=(0,Se.Z)(function*(i,a){const c=rt(i),f=Np(c.wt)+"/documents",m={writes:a.map(v=>Vc(c.wt,v))};yield c.ro("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new He(De.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Yn.updateTime(t):Yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kt.min()))throw new He(De.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class o{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new S_(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Se.Z)(function*(){const t=new s(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!_h(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!uI(t)}return!1}}class l{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Kr.UNAUTHENTICATED,this.clientId=qm.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Se.Z)(function*(f){Ke("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(De.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Bh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function d(n,e){return h.apply(this,arguments)}function h(){return h=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Se.Z)(function*(a){r.isEqual(a)||(yield QI(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),h.apply(this,arguments)}function p(n,e){return y.apply(this,arguments)}function y(){return y=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield b(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>bw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>bw(e.remoteStore,a)),n.onlineComponents=e}),y.apply(this,arguments)}function b(n){return E.apply(this,arguments)}function E(){return E=(0,Se.Z)(function*(n){return n.offlineComponents||(Ke("FirestoreClient","Using default OfflineComponentProvider"),yield d(n,new U1)),n.offlineComponents}),E.apply(this,arguments)}function x(n){return N.apply(this,arguments)}function N(){return N=(0,Se.Z)(function*(n){return n.onlineComponents||(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield p(n,new kT)),n.onlineComponents}),N.apply(this,arguments)}function B(n){return b(n).then(e=>e.persistence)}function re(n){return b(n).then(e=>e.localStore)}function ye(n){return x(n).then(e=>e.remoteStore)}function Fe(n){return x(n).then(e=>e.syncEngine)}function We(n){return et.apply(this,arguments)}function et(){return et=(0,Se.Z)(function*(n){const e=yield x(n),t=e.eventManager;return t.onListen=P1.bind(null,e.syncEngine),t.onUnlisten=zP.bind(null,e.syncEngine),t}),et.apply(this,arguments)}function bt(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,a,c,f,m){const v=new Fw({next:S=>{a.enqueueAndForget(()=>O_(i,I));const O=S.docs.has(c);!O&&S.fromCache?m.reject(new He(De.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&f&&"server"===f.source?m.reject(new He(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),I=new jh(Ch(c.path),v,{includeMetadataChanges:!0,Du:!0});return gT(i,I)}(yield We(n),n.asyncQueue,e,t,r)})),r.promise}function qn(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,a,c,f,m){const v=new Fw({next:S=>{a.enqueueAndForget(()=>O_(i,I)),S.fromCache&&"server"===f.source?m.reject(new He(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),I=new jh(c,v,{includeMetadataChanges:!0,Du:!0});return gT(i,I)}(yield We(n),n.asyncQueue,e,t,r)})),r.promise}const $_=new Map;function sg(n,e,t){if(!t)throw new He(De.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function G_(n,e,t,r){if(!0===e&&!0===r)throw new He(De.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function z_(n){if(!Xe.isDocumentKey(n))throw new He(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function W_(n){if(Xe.isDocumentKey(n))throw new He(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hh(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hh(n);throw new He(De.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tk(n,e){if(e<=0)throw new He(De.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new He(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,G_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nk({}),this._settingsFrozen=!1,e instanceof vu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new He(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(i.options.projectId)}(e))}get app(){if(!this._app)throw new He(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new RE;switch(t.type){case"gapi":const r=t.client;return Pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new t0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new He(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$_.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),$_.delete(e),t.terminate())}(this),Promise.resolve()}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class Es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class Rl extends Es{constructor(e,t,r){super(e,t,Ch(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new Xe(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function rk(n,e,...t){if(n=(0,L.m9)(n),sg("collection","path",e),n instanceof Bw){const r=cn.fromString(e,...t);return W_(r),new Rl(n,null,r)}{if(!(n instanceof ur||n instanceof Rl))throw new He(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return W_(r),new Rl(n.firestore,null,r)}}function RT(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=qm.I()),sg("doc","path",e),n instanceof Bw){const r=cn.fromString(e,...t);return z_(r),new ur(n,null,new Xe(r))}{if(!(n instanceof ur||n instanceof Rl))throw new He(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return z_(r),new ur(n.firestore,n instanceof Rl?n.converter:null,new Xe(r))}}function ik(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof ur||n instanceof Rl)&&(e instanceof ur||e instanceof Rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sk(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Es&&e instanceof Es&&n.firestore===e.firestore&&Qm(n._query,e._query)&&n.converter===e.converter}class GL{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new S_(this,"async_queue_retry"),this.Kc=()=>{const t=Kc();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Kc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Kc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new jr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Se.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!_l(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,kr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=Ew.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&ht()}verifyOperationInProgress(){}zc(){var e=this;return(0,Se.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function q1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class zL{constructor(){this._progressObserver={},this._taskCompletionResolver=new jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Er extends Bw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new GL,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ok(this),this._firestoreClient.terminate()}}function ci(n){return n._firestoreClient||ok(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ok(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zm(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new l(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ak(n,e,t){const r=new jr;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield d(n,t),yield p(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===De.FAILED_PRECONDITION||a.code===De.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function uk(n){if(n._initialized||n._terminated)throw new He(De.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(Yr.fromBase64String(e))}catch(t){throw new He(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nl(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class og{constructor(e){this._methodName=e}}class NT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const rU=/^__.*__$/;class iU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Tl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ap(e,this.data,t,this.fieldTransforms)}}class lk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ck(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class OT{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new OT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return UT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(ck(this.Zc)&&rU.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class sU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||A_(e)}aa(e,t,r,i=!1){return new OT({Zc:e,methodName:t,ca:r,path:wr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ag(n){const e=n._freezeSettings(),t=A_(n._databaseId);return new sU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FT(n,e,t,r,i,a={}){const c=n.aa(a.merge||a.mergeFields?2:0,e,t,i);G1("Data must be an object, but it was:",c,r);const f=fk(r,c);let m,v;if(a.merge)m=new $s(c.fieldMask),v=c.fieldTransforms;else if(a.mergeFields){const I=[];for(const S of a.mergeFields){const O=z1(e,S,t);if(!c.contains(O))throw new He(De.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);gk(I,O)||I.push(O)}m=new $s(I),v=c.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=c.fieldTransforms;return new iU(new Ci(f),m,v)}class jw extends og{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jw}}function dk(n,e,t){return new OT({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Z1 extends og{_toFieldTransform(e){return new Ep(e.path,new Eh)}isEqual(e){return e instanceof Z1}}class oU extends og{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=dk(this,e,!0),r=this.ha.map(a=>ug(a,t)),i=new Sa(r);return new Ep(e.path,i)}isEqual(e){return this===e}}class aU extends og{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=dk(this,e,!0),r=this.ha.map(a=>ug(a,t)),i=new Il(r);return new Ep(e.path,i)}isEqual(e){return this===e}}class uU extends og{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Ih(e.wt,rI(e.wt,this.la));return new Ep(e.path,t)}isEqual(e){return this===e}}function H1(n,e,t,r){const i=n.aa(1,e,t);G1("Data must be an object, but it was:",i,r);const a=[],c=Ci.empty();kc(r,(m,v)=>{const I=LT(e,m,t);v=(0,L.m9)(v);const S=i.ia(I);if(v instanceof jw)a.push(I);else{const O=ug(v,S);null!=O&&(a.push(I),c.set(I,O))}});const f=new $s(a);return new lk(c,f,i.fieldTransforms)}function $1(n,e,t,r,i,a){const c=n.aa(1,e,t),f=[z1(e,r,t)],m=[i];if(a.length%2!=0)throw new He(De.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)f.push(z1(e,a[O])),m.push(a[O+1]);const v=[],I=Ci.empty();for(let O=f.length-1;O>=0;--O)if(!gk(v,f[O])){const j=f[O];let Y=m[O];Y=(0,L.m9)(Y);const Ae=c.ia(j);if(Y instanceof jw)v.push(j);else{const Le=ug(Y,Ae);null!=Le&&(v.push(j),I.set(j,Le))}}const S=new $s(v);return new lk(I,S,c.fieldTransforms)}function hk(n,e,t,r=!1){return ug(t,n.aa(r?4:3,e))}function ug(n,e){if(pk(n=(0,L.m9)(n)))return G1("Unsupported field value:",e,n),fk(n,e);if(n instanceof og)return function(t,r){if(!ck(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=ug(c,r.ra(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rI(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Kn.fromDate(t);return{timestampValue:Rp(r.wt,i)}}if(t instanceof Kn){const i=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rp(r.wt,i)}}if(t instanceof NT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nl)return{bytesValue:mI(r.wt,t._byteString)};if(t instanceof ur){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:R0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${Hh(t)}`)}(n,e)}function fk(n,e){const t={};return a0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kc(n,(r,i)=>{const a=ug(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function pk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof NT||n instanceof Nl||n instanceof ur||n instanceof og)}function G1(n,e,t){if(!pk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Hh(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function z1(n,e,t){if((e=(0,L.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return LT(n,e);throw UT("Field path arguments must be of type string or ",n,!1,void 0,t)}const lU=new RegExp("[~\\*/\\[\\]]");function LT(n,e,t){if(e.search(lU)>=0)throw UT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch{throw UT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function UT(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new He(De.INVALID_ARGUMENT,f+n+m)}function gk(n,e){return n.some(t=>t.isEqual(e))}class qw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cU extends qw{data(){return super.data()}}function VT(n,e){return"string"==typeof e?LT(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}class lg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends qw{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(VT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zw extends nd{data(e={}){return super.data(e)}}class $h{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zw(this._firestore,this._userDataWriter,r.key,r,new lg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Zw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Zw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),v=a.indexOf(c.doc.key)),{type:dU(c.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function mk(n,e){return n instanceof nd&&e instanceof nd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $h&&e instanceof $h&&n._firestore===e._firestore&&sk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _k(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hw{}function Gh(n,...e){for(const t of e)n=t._apply(n);return n}class hU extends Hw{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=ag(e.firestore),r=function(i,a,c,f,m,v,I){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new He(De.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){Ek(I,v);const j=[];for(const Y of I)j.push(Ck(f,i,Y));S={arrayValue:{values:j}}}else S=Ck(f,i,I)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||Ek(I,v),S=hk(c,"where",I,"in"===v||"not-in"===v);const O=ai.create(m,v,S);return function(j,Y){if(Y.ht()){const Le=El(j);if(null!==Le&&!Le.isEqual(Y.field))throw new He(De.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${Y.field.toString()}'`);const st=v0(j);null!==st&&Ik(0,Y.field,st)}const Ae=function(Le,st){for(const ft of Le.filters)if(st.indexOf(ft.op)>=0)return ft.op;return null}(j,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==Ae)throw new He(De.INVALID_ARGUMENT,Ae===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${Ae.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Es(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class pU extends Hw{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new He(De.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new He(De.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new bl(i,a);return function(f,m){if(null===v0(f)){const v=El(f);null!==v&&Ik(0,v,m.field)}}(r,c),c}(e._query,this.fa,this.wa);return new Es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Cl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class yk extends Hw{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Es(e.firestore,e.converter,ar(e._query,this.ma,this.ga))}}class vk extends Hw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=bk(e,this.type,this.ya,this.pa);return new Es(e.firestore,e.converter,(i=t,new Cl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class wk extends Hw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=bk(e,this.type,this.ya,this.pa);return new Es(e.firestore,e.converter,(i=t,new Cl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function bk(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof qw)return function(i,a,c,f,m){if(!f)throw new He(De.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const I of bu(i))if(I.field.isKeyField())v.push(Nc(a,f.key));else{const S=f.data.field(I.field);if(c0(S))throw new He(De.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const O=I.field.canonicalString();throw new He(De.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}v.push(S)}return new Lc(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ag(n.firestore);return function(a,c,f,m,v,I){const S=a.explicitOrderBy;if(v.length>S.length)throw new He(De.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let j=0;j<v.length;j++){const Y=v[j];if(S[j].field.isKeyField()){if("string"!=typeof Y)throw new He(De.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Y}`);if(!w0(a)&&-1!==Y.indexOf("/"))throw new He(De.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Y}' contains a slash.`);const Ae=a.path.child(cn.fromString(Y));if(!Xe.isDocumentKey(Ae))throw new He(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const Le=new Xe(Ae);O.push(Nc(c,Le))}else{const Ae=hk(f,m,Y);O.push(Ae)}}return new Lc(O,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Ck(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new He(De.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w0(e)&&-1!==t.indexOf("/"))throw new He(De.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Xe.isDocumentKey(r))throw new He(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nc(n,new Xe(r))}if(t instanceof ur)return Nc(n,t._key);throw new He(De.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(t)}.`)}function Ek(n,e){if(!Array.isArray(n)||0===n.length)throw new He(De.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new He(De.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ik(n,e,t){if(!t.isEqual(e))throw new He(De.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const CU={maxAttempts:5};class W1{convertValue(e,t="none"){switch(wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return kc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new NT(br(e.latitude),br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mh(e));default:return null}}convertTimestamp(e){const t=bo(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Pt(EI(r));const i=new vu(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||kr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function BT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class EU extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class Tk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ag(e)}set(e,t,r){this._verifyNotCommitted();const i=zh(e,this._firestore),a=BT(i.converter,t,r),c=FT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=zh(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof td?$1(this._dataReader,"WriteBatch.update",a._key,t,r,i):H1(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zh(e,this._firestore);return this._mutations=this._mutations.concat(new Ah(t._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(De.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new He(De.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cg extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function Dk(n,e,t){n=mn(n,ur);const r=mn(n.firestore,Er),i=BT(n.converter,e,t);return K_(r,[FT(ag(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Yn.none())])}function Ak(n,e,t,...r){n=mn(n,ur);const i=mn(n.firestore,Er),a=ag(i);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof td?$1(a,"updateDoc",n._key,e,t,r):H1(a,"updateDoc",n._key,e),K_(i,[c.toMutation(n._key,Yn.exists(!0))])}function Sk(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||q1(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(q1(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,I;if(n instanceof ur)v=mn(n.firestore,Er),I=Ch(n._key.path),m={next:S=>{e[c]&&e[c](K1(v,n,S))},error:e[c+1],complete:e[c+2]};else{const S=mn(n,Es);v=mn(S.firestore,Er),I=S._query;const O=new cg(v);m={next:j=>{e[c]&&e[c](new $h(v,O,S,j))},error:e[c+1],complete:e[c+2]},_k(n._query)}return function(S,O,j,Y){const Ae=new Fw(Y),Le=new jh(O,Ae,j);return S.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return gT(yield We(S),Le)})),()=>{Ae.Tc(),S.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return O_(yield We(S),Le)}))}}(ci(v),I,f,m)}function K_(n,e){return function(t,r){const i=new jr;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function WP(n,e,t){return CT.apply(this,arguments)}(yield Fe(t),r,i)})),i.promise}(ci(n),e)}function K1(n,e,t){const r=t.docs.get(e._key),i=new cg(n);return new nd(n,i,e._key,r,new lg(t.hasPendingWrites,t.fromCache),e.converter)}class RU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ag(e)}get(e){const t=zh(e,this._firestore),r=new EU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new qw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new qw(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=zh(e,this._firestore),a=BT(i.converter,t,r),c=FT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=zh(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof td?$1(this._dataReader,"Transaction.update",a._key,t,r,i):H1(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=zh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zh(e,this._firestore),r=new cg(this._firestore);return super.get(e).then(i=>new nd(this._firestore,r,t._key,i._document,new lg(!1,!1),t.converter))}}function Y1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Mk(){if(typeof Uint8Array>"u")throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function Pk(){if(!function DS(){return typeof atob<"u"}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xc=Ur.SDK_VERSION,(0,Ur._registerComponent)(new ps.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Er(i,new NE(t.getProvider("auth-internal")),new ES(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Ur.registerVersion)(Qv,"3.4.10",n),(0,Ur.registerVersion)(Qv,"3.4.10","esm2017")}();class $w{constructor(e){this._delegate=e}static fromBase64String(e){return Pk(),new $w(Nl.fromBase64String(e))}static fromUint8Array(e){return Mk(),new $w(Nl.fromUint8Array(e))}toBase64(){return Pk(),this._delegate.toBase64()}toUint8Array(){return Mk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Q1(n){return function qU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ZU{enableIndexedDbPersistence(e,t){return function KL(n,e){uk(n=mn(n,Er));const t=ci(n),r=n._freezeSettings(),i=new kT;return ak(t,i,new V1(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function YL(n){uk(n=mn(n,Er));const e=ci(n),t=n._freezeSettings(),r=new kT;return ak(e,r,new B1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function QL(n){if(n._initialized&&!n._terminated)throw new He(De.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(t=(0,Se.Z)(function*(r){if(!wo.V())return Promise.resolve();const i=r+"main";yield wo.delete(i)}),function(r){return t.apply(this,arguments)})(WI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class kk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function HL(n,e,t,r={}){var i;const a=(n=mn(n,Bw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Mc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Kr.MOCK_USER;else{c=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new He(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Kr(m)}n._authCredentials=new e0(new Xv(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function XL(n){return function lt(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield B(n),t=yield ye(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.lu.delete(0),Kp(i)}(t)}))}(ci(n=mn(n,Er)))}(this._delegate)}disableNetwork(){return function eU(n){return function Mt(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield B(n),t=yield ye(n);return e.setNetworkEnabled(!1),(r=(0,Se.Z)(function*(i){const a=rt(i);a.lu.add(0),yield Yp(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ci(n=mn(n,Er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,G_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function JL(n){return function(e){const t=new jr;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function R1(n,e){return tg.apply(this,arguments)}(yield Fe(e),t)})),t.promise}(ci(n=mn(n,Er)))}(this._delegate)}onSnapshotsInSync(e){return function kU(n,e){return function ed(n,e){const t=new Fw(e);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return r=yield We(n),i=t,rt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return r=yield We(n),i=t,void rt(r).Tu.delete(i);var r,i}))}}(ci(n=mn(n,Er)),q1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Y_(this,rk(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ra(this,RT(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zs(this,function $L(n,e){if(n=mn(n,Bw),sg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(De.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(t=e,new Cl(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function NU(n,e,t){n=mn(n,Er);const r=Object.assign(Object.assign({},CU),t);return function(i){if(i.maxAttempts<1)throw new He(De.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Lw(n,e,t){const r=new jr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const i=yield(a=n,x(a).then(c=>c.datastore));var a;new o(n.asyncQueue,i,t,e,r).run()})),r.promise}(ci(n),i=>e(new RU(n,i)),r)}(this._delegate,t=>e(new Rk(this,t)))}batch(){return ci(this._delegate),new Nk(new Tk(this._delegate,e=>K_(this._delegate,e)))}loadBundle(e){return function tU(n,e){const t=ci(n=mn(n,Er)),r=new zL;return function Uw(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return j1(m,v);if(m instanceof ArrayBuffer)return j1(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new ek(m,c);var m}(t,A_(e));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function XP(n,e,t){const r=rt(n);var i;(i=(0,Se.Z)(function*(a,c,f){try{const m=yield c.getMetadata();if(yield function(O,j){const Y=rt(O),Ae=ui(j.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Le=>Y.Ds.getBundleMetadata(Le,j.id)).then(Le=>!!Le&&Le.createTime.compareTo(Ae)>=0)}(a.localStore,m))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(O=m).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);f._updateProgress(Tw(m));const v=new M1(m,a.localStore,c.wt);let I=yield c.fc();for(;I;){const O=yield v.Nu(I);O&&f._updateProgress(O),I=yield c.fc()}const S=yield v.complete();return yield Tu(a,S.Mu,void 0),yield function(O,j){const Y=rt(O);return Y.persistence.runTransaction("Save bundle","readwrite",Ae=>Y.Ds.saveBundleMetadata(Ae,j))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.Ou)}catch(m){return Mc("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var O}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Fe(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function nU(n,e){return function Vw(n,e){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield re(n),e)}))}(ci(n=mn(n,Er)),e).then(t=>t?new Es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zs(this,t):null)}}class jT extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new $w(new Nl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ra.forKey(t,this.firestore,null)}}class Rk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jT(e)}get(e){const t=hg(e);return this._delegate.get(t).then(r=>new Gw(this._firestore,new nd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=hg(e);return r?(Y1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=hg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=hg(e);return this._delegate.delete(t),this}}class Nk{constructor(e){this._delegate=e}set(e,t,r){const i=hg(e);return r?(Y1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=hg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=hg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=dg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new dg(e,new jT(e),t),i.set(t,a)),a}}dg.INSTANCES=new WeakMap;class Ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ra(t,new ur(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new Ra(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Y_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Y_(this.firestore,rk(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof ur&&ik(this._delegate,e)}set(e,t){t=Y1("DocumentReference.set",t);try{return t?Dk(this._delegate,e,t):Dk(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ak(this._delegate,e):Ak(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function MU(n){return K_(mn(n.firestore,Er),[new Ah(n._key,Yn.none())])}(this._delegate)}onSnapshot(...e){const t=Ok(e),r=Fk(e,i=>new Gw(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Sk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function TU(n){n=mn(n,ur);const e=mn(n.firestore,Er),t=ci(e),r=new cg(e);return function $e(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(r=(0,Se.Z)(function*(i,a,c){try{const f=yield function(m,v){const I=rt(m);return I.persistence.runTransaction("read document","readonly",S=>I.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new He(De.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Bh(f,`Failed to get document '${a} from cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield re(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nd(e,r,n._key,i,new lg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function DU(n){n=mn(n,ur);const e=mn(n.firestore,Er);return bt(ci(e),n._key,{source:"server"}).then(t=>K1(e,n,t))}(this._delegate):function IU(n){n=mn(n,ur);const e=mn(n.firestore,Er);return bt(ci(e),n._key).then(t=>K1(e,n,t))}(this._delegate),t.then(r=>new Gw(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ra(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function Ok(n){for(const e of n)if("object"==typeof e&&!Q1(e))return e;return{}}function Fk(n,e){var t,r;let i;return i=Q1(n[0])?n[0]:Q1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Gw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mk(this._delegate,e._delegate)}}class zw extends Gw{data(e){const t=this._delegate.data(e);return function jm(n,e){n||ht()}(void 0!==t),t}}class zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jT(e)}where(e,t,r){try{return new zs(this.firestore,Gh(this._delegate,function fU(n,e,t){const r=e,i=VT("where",n);return new hU(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zs(this.firestore,Gh(this._delegate,function gU(n,e="asc"){const t=e,r=VT("orderBy",n);return new pU(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zs(this.firestore,Gh(this._delegate,function mU(n){return tk("limit",n),new yk("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zs(this.firestore,Gh(this._delegate,function _U(n){return tk("limitToLast",n),new yk("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zs(this.firestore,Gh(this._delegate,function yU(...n){return new vk("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zs(this.firestore,Gh(this._delegate,function vU(...n){return new vk("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zs(this.firestore,Gh(this._delegate,function wU(...n){return new wk("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zs(this.firestore,Gh(this._delegate,function bU(...n){return new wk("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return sk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function SU(n){n=mn(n,Es);const e=mn(n.firestore,Er),t=ci(e),r=new cg(e);return function hn(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(r=(0,Se.Z)(function*(i,a,c){try{const f=yield $p(i,a,!0),m=new yT(a,f.ji),v=m.Ku(f.documents),I=m.applyChanges(v,!1);c.resolve(I.snapshot)}catch(f){const m=Bh(f,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield re(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $h(e,r,n,i))}(this._delegate):"server"===e?.source?function xU(n){n=mn(n,Es);const e=mn(n.firestore,Er),t=ci(e),r=new cg(e);return qn(t,n._query,{source:"server"}).then(i=>new $h(e,r,n,i))}(this._delegate):function AU(n){n=mn(n,Es);const e=mn(n.firestore,Er),t=ci(e),r=new cg(e);return _k(n._query),qn(t,n._query).then(i=>new $h(e,r,n,i))}(this._delegate),t.then(r=>new J1(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ok(e),r=Fk(e,i=>new J1(this.firestore,new $h(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Sk(this._delegate,t,r)}withConverter(e){return new zs(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}class $U{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class J1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $U(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zw(this._firestore,r))})}isEqual(e){return mk(this._delegate,e._delegate)}}class Y_ extends zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ra(this.firestore,e):null}doc(e){try{return new Ra(this.firestore,void 0===e?RT(this._delegate):RT(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function PU(n,e){const t=mn(n.firestore,Er),r=RT(n),i=BT(n.converter,e);return K_(t,[FT(ag(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ra(this.firestore,t))}isEqual(e){return ik(this._delegate,e._delegate)}withConverter(e){return new Y_(this.firestore,this._delegate.withConverter(e?dg.getInstance(this.firestore,e):null))}}function hg(n){return mn(n,ur)}class X1{constructor(...e){this._delegate=new td(...e)}static documentId(){return new X1(wr.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof td&&this._delegate._internalPath.isEqual(e._internalPath)}}class fg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function FU(){return new Z1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fg(e)}static delete(){const e=function OU(){return new jw("deleteField")}();return e._methodName="FieldValue.delete",new fg(e)}static arrayUnion(...e){const t=function LU(...n){return new oU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fg(t)}static arrayRemove(...e){const t=function UU(...n){return new aU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fg(t)}static increment(e){const t=function VU(n){return new uU("increment",n)}(e);return t._methodName="FieldValue.increment",new fg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const GU={Firestore:kk,GeoPoint:NT,Timestamp:Kn,Blob:$w,Transaction:Rk,WriteBatch:Nk,DocumentReference:Ra,DocumentSnapshot:Gw,Query:zs,QueryDocumentSnapshot:zw,QuerySnapshot:J1,CollectionReference:Y_,FieldPath:X1,FieldValue:fg,setLogLevel:function HU(n){!function kE(n){yu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Lk(n,e){return function KU(n,e=Ia.z){return new zn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ex(n,e){return Lk(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function qT(n,e){return ex(n,e).pipe(cm(void 0),lv(),(0,dt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const m=i.find(I=>I.doc.ref.isEqual(c.ref)),v=t?.payload.docs.find(I=>I.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function Uk(n,e,t){return qT(n,t).pipe(lu((r,i)=>function QU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function JU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return tx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),cv(),(0,dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function tx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Vk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function WU(n){(function zU(n,e){n.INTERNAL.registerComponent(new ps.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},GU)))})(n,(e,t)=>new kk(e,t,new ZU)),n.registerVersion("@firebase/firestore-compat","0.1.19")}(jd.Z);class Bk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(cm(void 0),lv(),mr(([r,i])=>i.length>0||!r),(0,dt.U)(([r,i])=>i),Yt.iC)}auditTrail(e){return this.stateChanges(e).pipe(lu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Vk(e);return Uk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(e={}){return ex(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Yt.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(Yt.iC)}add(e){return this.ref.add(e)}doc(e){return new jk(this.ref.doc(e),this.afs)}}class jk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Hk(r,t);return new Bk(i,a,this.afs)}snapshotChanges(){return function YU(n,e){return Lk(n,e).pipe(cm(void 0),lv(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tn.D)(this.ref.get(e)).pipe(Yt.iC)}}class XU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qT(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),mr(t=>t.length>0),Yt.iC):qT(this.query,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}auditTrail(e){return this.stateChanges(e).pipe(lu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Vk(e);return Uk(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yt.iC)}valueChanges(e={}){return ex(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Yt.iC)}get(e){return(0,tn.D)(this.query.get(e)).pipe(Yt.iC)}}const qk=new u.OlP("angularfire2.enableFirestorePersistence"),Zk=new u.OlP("angularfire2.firestore.persistenceSettings"),e2=new u.OlP("angularfire2.firestore.settings"),t2=new u.OlP("angularfire2.firestore.use-emulator");function Hk(n,e=(t=>t)){return{query:e(n),ref:n}}let Ww=(()=>{class n{constructor(t,r,i,a,c,f,m,v,I,S,O,j,Y,Ae,Le,st,ft){this.schedulers=m;const _t=(0,Fn.on)(t,f,r),pt=I;S&&Pf(_t,f,O,Y,Ae,Le,j,st),[this.firestore,this.persistenceEnabled$]=(0,Fn.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const jt=f.runOutsideAngular(()=>_t.firestore());if(a&&jt.settings(a),pt&&jt.useEmulator(...pt),i&&!Bu(c)){const un=()=>{try{return(0,tn.D)(jt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(hi){return typeof console<"u"&&console.warn(hi),ct(!1)}};return[jt,f.runOutsideAngular(un)]}return[jt,ct(!1)]},[a,pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=Hk(i,r),f=this.schedulers.ngZone.run(()=>a);return new Bk(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new XU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new jk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fn.Dh),u.LFG(Fn.xv,8),u.LFG(qk,8),u.LFG(e2,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Yt.HU),u.LFG(Zk,8),u.LFG(t2,8),u.LFG(Ea,8),u.LFG(go,8),u.LFG(hc,8),u.LFG(sl,8),u.LFG(fc,8),u.LFG(Mf,8),u.LFG(Bd,8),u.LFG(Ki,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n2=(()=>{class n{constructor(){Wn.Z.registerVersion("angularfire",Yt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:qk,useValue:!0},{provide:Zk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ww]}),n})();var nx=M(5032);const $k="@firebase/database";let rx="";function zk(n){rx=n}class s2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class o2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Wk=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new s2(e)}}catch{}return new o2},pg=Wk("localStorage"),ix=Wk("sessionStorage"),Q_=new gs.Yd("@firebase/database"),Kk=function(){let n=1;return function(){return n++}}(),Yk=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Kw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Kw.apply(null,r):e+="object"==typeof r?(0,L.Pz)(r):r,e+=" "}return e};let gg=null,Qk=!0;const Jk=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Q_.logLevel=gs.in.VERBOSE,gg=Q_.log.bind(Q_),e&&ix.set("logging_enabled",!0)):"function"==typeof n?gg=n:(gg=null,ix.remove("logging_enabled"))},Ni=function(...n){if(!0===Qk&&(Qk=!1,null===gg&&!0===ix.get("logging_enabled")&&Jk(!0)),gg){const e=Kw.apply(null,n);gg(e)}},Yw=function(n){return function(...e){Ni(n,...e)}},sx=function(...n){const e="FIREBASE INTERNAL ERROR: "+Kw(...n);Q_.error(e)},Ol=function(...n){const e=`FIREBASE FATAL ERROR: ${Kw(...n)}`;throw Q_.error(e),new Error(e)},Is=function(...n){const e="FIREBASE WARNING: "+Kw(...n);Q_.warn(e)},ZT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},rd="[MIN_NAME]",Fl="[MAX_NAME]",mg=function(n,e){if(n===e)return 0;if(n===rd||e===Fl)return-1;if(e===rd||n===Fl)return 1;{const t=HT(n),r=HT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},l2=function(n,e){return n===e?0:n<e?-1:1},Qw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(e))},ox=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Pz)(e[r]),t+=":",t+=ox(n[e[r]]);return t+="}",t},Xk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const eR=function(n){(0,L.hu)(!ZT(n),"Invalid JSON number");const r=1023;let i,a,c,f,m;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const I=v.join("");let S="";for(m=0;m<64;m+=8){let O=parseInt(I.substr(m,8),2).toString(16);1===O.length&&(O="0"+O),S+=O}return S.toLowerCase()},f2=new RegExp("^-?(0*)\\d{1,10}$"),tR=-2147483648,ax=2147483647,HT=function(n){if(f2.test(n)){const e=Number(n);if(e>=tR&&e<=ax)return e}return null},J_=function(n){try{n()}catch(e){setTimeout(()=>{throw Is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Jw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class g2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class m2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ni("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}let Xw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const oR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lR="websocket",cR="long_polling";class lx{constructor(e,t,r,i,a=!1,c="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function dR(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===lR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==cR)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function _2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class y2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const cx={},dx={};function hx(n){const e=n.toString();return cx[e]||(cx[e]=new y2),cx[e]}class w2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&J_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Wh{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yw(e),this.stats_=hx(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),dR(t,cR,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new w2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fx((...a)=>{const[c,f,m,v,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&oR.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wh.forceAllow_=!0}static forceDisallow(){Wh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Wh.forceAllow_&&(Wh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=Xk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class fx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Kk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=fx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){Ni("frame writing exception"),f.stack&&Ni(f.stack),Ni(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ni("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ni("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let GT=null;typeof MozWebSocket<"u"?GT=MozWebSocket:typeof WebSocket<"u"&&(GT=WebSocket);let X_=(()=>{class n{constructor(t,r,i,a,c,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yw(this.connId),this.stats_=hx(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const f={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&oR.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),c&&(f.p=c),dR(t,lR,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pg.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${rx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const f=process.env,m=0===this.connURL.indexOf("wss://")?f.HTTPS_PROXY||f.https_proxy:f.HTTP_PROXY||f.http_proxy;m&&(c.proxy={origin:m})}this.mySock=new GT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==GT&&!n.forceDisallow_}static previouslyFailed(){return pg.isInMemoryStorage||!0===pg.get("previous_websocket_failure")}markConnectionHealthy(){pg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Xk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),yR=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Wh,X_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=X_&&X_.isAvailable();let i=r&&!X_.previouslyFailed();if(t.webSocketOnly&&(r||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[X_];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class TR{constructor(e,t,r,i,a,c,f,m,v,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yw("c:"+this.id+":"),this.transportManager_=new yR(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Jw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Qw("t",e),r=Qw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Qw("t",e),r=Qw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Qw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?sx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Jw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class DR{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class AR{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class zT extends AR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zT}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ln{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Dn(){return new Ln("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Kh(n){return n.pieces_.length-n.pieceNum_}function $n(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ln(n.pieces_,e)}function gx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function eb(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function MR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ln(e,0)}function Ir(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ln)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ln(t,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Ws(n,e){const t=nn(n),r=nn(e);if(null===t)return e;if(t===r)return Ws($n(n),$n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function q2(n,e){const t=eb(n,0),r=eb(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=mg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function mx(n,e){if(Kh(n)!==Kh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Kh(n)>Kh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Z2{constructor(e,t){this.errorPrefix_=t,this.parts_=eb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);PR(this)}}function PR(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_g(n))}function _g(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class _x extends AR{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new _x}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tb=1e3;let KT,yg=(()=>{class n extends DR{constructor(t,r,i,a,c,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Yw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_x.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&zT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,L.Pz)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[c];void 0===f||a!==f||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const v=m.d,I=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):sx("Unrecognized action received from server: "+(0,L.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=tb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Se.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const I=function(){v?v.close():(m=!0,a())};t.realtime_={close:I,sendRequest:function(j){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(j)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,Y]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);m?Ni("getToken() completed but was canceled"):(Ni("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=Y&&Y.token,v=new TR(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ae=>{Is(Ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),m||(t.repoInfo_.nodeAdmin&&Is(j),I())}}})()}interrupt(t){Ni("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ni("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=tb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>ox(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Ln(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ni("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ni("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+rx.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=zT.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class WT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(rd,e),i=new an(rd,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class NR extends WT{static get __EMPTY_NODE(){return KT}static set __EMPTY_NODE(e){KT=e}compare(e,t){return mg(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(Fl,KT)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,KT)}toString(){return".key"}}const Ll=new NR;class YT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let vx,Du=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Io.EMPTY_NODE,this.right=c??Io.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Io.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Io.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Io{constructor(e,t=Io.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Io(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Du.BLACK,null,null))}remove(e){return new Io(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Du.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new YT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new YT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new YT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new YT(this.root_,null,this.comparator_,!0,e)}}function J2(n,e){return mg(n.name,e.name)}function yx(n,e){return mg(n,e)}Io.EMPTY_NODE=new class Q2{copy(e,t,r,i,a){return this}insert(e,t,r){return new Du(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const OR=function(n){return"number"==typeof n?"number:"+eR(n):"string:"+n},FR=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===vx||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===vx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let LR,UR,VR,ey=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),FR(this.priorityNode_)}static set __childrenNodeConstructor(t){LR=t}static get __childrenNodeConstructor(){return LR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return rn(t)?this:".priority"===nn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=nn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===Kh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+OR(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?eR(this.value_):this.value_,this.lazyHash_=Yk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Jn=new class nV extends WT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?mg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(Fl,new ey("[PRIORITY-POST]",VR))}makePost(e,t){const r=UR(e);return new an(t,new ey("[PRIORITY-POST]",r))}toString(){return".priority"}},rV=Math.log(2);class iV{constructor(e){this.count=parseInt(Math.log(e+1)/rV,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const QT=function(n,e,t,r){n.sort(e);const i=function(m,v){const I=v-m;let S,O;if(0===I)return null;if(1===I)return S=n[m],O=t?t(S):S,new Du(O,S.node,Du.BLACK,null,null);{const j=parseInt(I/2,10)+m,Y=i(m,j),Ae=i(j+1,v);return S=n[j],O=t?t(S):S,new Du(O,S.node,Du.BLACK,Y,Ae)}},f=function(m){let v=null,I=null,S=n.length;const O=function(Y,Ae){const Le=S-Y,st=S;S-=Y;const ft=i(Le+1,st),_t=n[Le],pt=t?t(_t):_t;j(new Du(pt,_t.node,Ae,null,ft))},j=function(Y){v?(v.left=Y,v=Y):(I=Y,v=Y)};for(let Y=0;Y<m.count;++Y){const Ae=m.nextBitIsOne(),Le=Math.pow(2,m.count-(Y+1));Ae?O(Le,Du.BLACK):(O(Le,Du.BLACK),O(Le,Du.RED))}return I}(new iV(n.length));return new Io(r||e,f)};let wx;const ty={};class id{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(ty&&Jn,"ChildrenNode.ts has not been loaded"),wx=wx||new id({".priority":ty},{".priority":Jn}),wx}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Io?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Ll,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(an.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?QT(r,e.getCompare()):ty;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const I=Object.assign({},this.indexes_);return I[m]=f,new id(I,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const c=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(c,"Missing index implementation for "+a),i===ty){if(c.isDefinedOn(e.node)){const f=[],m=t.getIterator(an.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),QT(f,c.getCompare())}return ty}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new an(e.name,f))),m.insert(e,e.node)}});return new id(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===ty)return i;{const a=t.get(e.name);return a?i.remove(new an(e.name,a)):i}});return new id(r,this.indexSet_)}}let nb,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&FR(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return nb||(nb=new n(new Io(yx),null,id.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?nb:r}}getChild(t){const r=nn(t);return null===r?this:this.getImmediateChild(r).getChild($n(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?nb:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=nn(t);if(null===i)return r;{(0,L.hu)(".priority"!==nn(t)||1===Kh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild($n(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Jn,(f,m)=>{r[f]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+OR(this.getPriority().val())+":"),this.forEachChild(Jn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Yk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new an(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,an.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rb?-1:0}withIndex(t){if(t===Ll||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ll||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Jn),a=r.getIterator(Jn);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===Ll?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const rb=new class sV extends Wt{constructor(){super(new Io(yx),Wt.EMPTY_NODE,id.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function Rr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ey(n,Rr(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=Rr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Rr(e))}{const t=[];let r=!1;if(Oi(n,(c,f)=>{if("."!==c.substring(0,1)){const m=Rr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new an(c,m)))}}),0===t.length)return Wt.EMPTY_NODE;const a=QT(t,J2,c=>c.name,yx);if(r){const c=QT(t,Jn.getCompare());return new Wt(a,Rr(e),new id({".priority":c},{".priority":Jn}))}return new Wt(a,Rr(e),id.Default)}}Object.defineProperties(an,{MIN:{value:new an(rd,Wt.EMPTY_NODE)},MAX:{value:new an(Fl,rb)}}),NR.__EMPTY_NODE=Wt.EMPTY_NODE,ey.__childrenNodeConstructor=Wt,function X2(n){vx=n}(rb),function tV(n){VR=n}(rb),function eV(n){UR=n}(Rr);class bx extends WT{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!rn(e)&&".priority"!==nn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?mg(e.name,t.name):a}makePost(e,t){const r=Rr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,rb);return new an(Fl,e)}toString(){return eb(this.indexPath_,0).join("/")}}const Cx=new class aV extends WT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?mg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=Rr(e);return new an(t,r)}toString(){return".value"}},ny="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",uV=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=ny.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=ny.charAt(e[i]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),qR=function(n){if(n===""+ax)return"-";const e=HT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Fl;const a=ny.charAt(ny.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},ZR=function(n){if(n===""+tR)return rd;const e=HT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ax:(delete t[t.length-1],t.join("")):(t[t.length-1]=ny.charAt(ny.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function HR(n){return{type:"value",snapshotNode:n}}function ry(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ib(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ix{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(ib(t,f)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(ry(t,r)):c.trackChildChange(sb(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Jn,(i,a)=>{t.hasChild(i)||r.trackChildChange(ib(i,a))}),t.isLeafNode()||t.forEachChild(Jn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(sb(i,a,c))}else r.trackChildChange(ry(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ob{constructor(e){this.indexedFilter_=new Ix(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ob.getStartPost_(e),this.endPost_=ob.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new an(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Jn,(c,f)=>{a.matches(new an(c,f))||(i=i.updateImmediateChild(c,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class cV{constructor(e){this.rangedFilter_=new ob(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new an(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),c++}}else{let a,c,f,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(O,j)=>S(j,O)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let v=0,I=!1;for(;m.hasNext();){const S=m.getNext();!I&&f(a,S)<=0&&(I=!0),I&&v<this.limit_&&f(S,c)<=0?v++:i=i.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const S=this.index_.getCompare();c=(O,j)=>S(j,O)}else c=this.index_.getCompare();const f=e;(0,L.hu)(f.numChildren()===this.limit_,"");const m=new an(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),I=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=O&&(O.name===t||f.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const j=null==O?1:c(O,m);if(I&&!r.isEmpty()&&j>=0)return a?.trackChildChange(sb(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(ib(t,S));const Ae=f.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(a?.trackChildChange(ry(O.name,O.node)),Ae.updateImmediateChild(O.name,O.node)):Ae}}return r.isEmpty()?e:I&&c(v,m)>=0?(null!=a&&(a.trackChildChange(ib(v.name,v.node)),a.trackChildChange(ry(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Wt.EMPTY_NODE)):e}}class JT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const e=new JT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Dx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function XT(n,e){const t=n.copy();return t.index_=e,t}function $R(n){const e={};if(n.isDefault())return e;let t;return n.index_===Jn?t="$priority":n.index_===Cx?t="$value":n.index_===Ll?t="$key":((0,L.hu)(n.index_ instanceof bx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Pz)(t),n.startSet_&&(e.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function GR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Jn&&(e.i=n.index_.toString()),e}class eD extends DR{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Yw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=eD.getListenId_(e,r),f={};this.listens_[c]=f;const m=$R(e._queryParams);this.restRequest_(a+".json",m,(v,I)=>{let S=I;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,L.DV)(this.listens_,c)===f){let O;O=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(O,null)}})}unlisten(e,t){const r=eD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=$R(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,L.cI)(f.responseText)}catch{Is("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Is("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class mV{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function tD(){return{value:null,children:new Map}}function iy(n,e,t){if(rn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=nn(e);n.children.has(r)||n.children.set(r,tD()),iy(n.children.get(r),e=$n(e),t)}}function Ax(n,e){if(rn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Jn,(r,i)=>{iy(n,new Ln(r),i)}),Ax(n,e)}}if(n.children.size>0){const t=nn(e);return e=$n(e),n.children.has(t)&&Ax(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Sx(n,e,t){null!==n.value?t(e,n.value):function _V(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Sx(i,new Ln(e.toString()+"/"+r),t)})}class yV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class bV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new yV(e);const r=1e4+2e4*Math.random();Jw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Jw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Oa||(Oa={})),Oa))();function Px(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class nD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Oa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ln(e));return new nD(Dn(),t,this.revert)}}return(0,L.hu)(nn(this.path)===e,"operationForChild called for unrelated child."),new nD($n(this.path),this.affectedTree,this.revert)}}class ab{constructor(e,t){this.source=e,this.path=t,this.type=Oa.LISTEN_COMPLETE}operationForChild(e){return rn(this.path)?new ab(this.source,Dn()):new ab(this.source,$n(this.path))}}class vg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Oa.OVERWRITE}operationForChild(e){return rn(this.path)?new vg(this.source,Dn(),this.snap.getImmediateChild(e)):new vg(this.source,$n(this.path),this.snap)}}class sy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Oa.MERGE}operationForChild(e){if(rn(this.path)){const t=this.children.subtree(new Ln(e));return t.isEmpty()?null:t.value?new vg(this.source,Dn(),t.value):new sy(this.source,Dn(),t)}return(0,L.hu)(nn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sy(this.source,$n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rn(e))return this.isFullyInitialized()&&!this.filtered_;const t=nn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class CV{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ub(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,m)=>function TV(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),c.forEach(f=>{const m=function IV(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function rD(n,e){return{eventCache:n,serverCache:e}}function lb(n,e,t,r){return rD(new Yh(e,t,r),n.serverCache)}function WR(n,e,t,r){return rD(n.eventCache,new Yh(e,t,r))}function iD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kx;class Xn{constructor(e,t=(()=>(kx||(kx=new Io(l2)),kx))()){this.value=e,this.children=t}static fromObject(e){let t=new Xn(null);return Oi(e,(r,i)=>{t=t.set(new Ln(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Dn(),value:this.value};if(rn(e))return null;{const r=nn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue($n(e),t);return null!=a?{path:Ir(new Ln(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rn(e))return this;{const t=nn(e),r=this.children.get(t);return null!==r?r.subtree($n(e)):new Xn(null)}}set(e,t){if(rn(e))return new Xn(t,this.children);{const r=nn(e),a=(this.children.get(r)||new Xn(null)).set($n(e),t),c=this.children.insert(r,a);return new Xn(this.value,c)}}remove(e){if(rn(e))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const t=nn(e),r=this.children.get(t);if(r){const i=r.remove($n(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Xn(null):new Xn(this.value,a)}return this}}get(e){if(rn(e))return this.value;{const t=nn(e),r=this.children.get(t);return r?r.get($n(e)):null}}setTree(e,t){if(rn(e))return t;{const r=nn(e),a=(this.children.get(r)||new Xn(null)).setTree($n(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Xn(this.value,c)}}fold(e){return this.fold_(Dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ir(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(rn(e))return null;{const a=nn(e),c=this.children.get(a);return c?c.findOnPath_($n(e),Ir(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Dn(),t)}foreachOnPath_(e,t,r){if(rn(e))return this;{this.value&&r(t,this.value);const i=nn(e),a=this.children.get(i);return a?a.foreachOnPath_($n(e),Ir(t,i),r):new Xn(null)}}foreach(e){this.foreach_(Dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ir(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Au{constructor(e){this.writeTree_=e}static empty(){return new Au(new Xn(null))}}function cb(n,e,t){if(rn(e))return new Au(new Xn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Ws(i,e);return a=a.updateChild(c,t),new Au(n.writeTree_.set(i,a))}{const i=new Xn(t),a=n.writeTree_.setTree(e,i);return new Au(a)}}}function Rx(n,e,t){let r=n;return Oi(t,(i,a)=>{r=cb(r,Ir(e,i),a)}),r}function KR(n,e){if(rn(e))return Au.empty();{const t=n.writeTree_.setTree(e,new Xn(null));return new Au(t)}}function Nx(n,e){return null!=bg(n,e)}function bg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ws(t.path,e)):null}function YR(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Jn,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function Qh(n,e){if(rn(e))return n;{const t=bg(n,e);return new Au(null!=t?new Xn(t):n.writeTree_.subtree(e))}}function Ox(n){return n.writeTree_.isEmpty()}function oy(n,e){return QR(Dn(),n.writeTree_,e)}function QR(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=QR(Ir(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ir(n,".priority"),r)),t}}function sD(n,e){return nN(e,n)}function PV(n,e){if(n.snap)return Na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Na(Ir(n.path,t),e))return!0;return!1}function RV(n){return n.visible}function JR(n,e,t){let r=Au.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)Na(t,c)?(f=Ws(t,c),r=cb(r,f,a.snap)):Na(c,t)&&(f=Ws(c,t),r=cb(r,Dn(),a.snap.getChild(f)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Na(t,c))f=Ws(t,c),r=Rx(r,f,a.children);else if(Na(c,t))if(f=Ws(c,t),rn(f))r=Rx(r,Dn(),a.children);else{const m=(0,L.DV)(a.children,nn(f));if(m){const v=m.getChild($n(f));r=cb(r,Dn(),v)}}}}}return r}function XR(n,e,t,r,i){if(r||i){const a=Qh(n.visibleWrites,e);return!i&&Ox(a)?t:i||null!=t||Nx(a,Dn())?oy(JR(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Na(v.path,e)||Na(e,v.path))},e),t||Wt.EMPTY_NODE):null}{const a=bg(n.visibleWrites,e);if(null!=a)return a;{const c=Qh(n.visibleWrites,e);return Ox(c)?t:null!=t||Nx(c,Dn())?oy(c,t||Wt.EMPTY_NODE):null}}}function oD(n,e,t,r){return XR(n.writeTree,n.treePath,e,t,r)}function Fx(n,e){return function NV(n,e,t){let r=Wt.EMPTY_NODE;const i=bg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Qh(n.visibleWrites,e);return t.forEachChild(Jn,(c,f)=>{const m=oy(Qh(a,new Ln(c)),f);r=r.updateImmediateChild(c,m)}),YR(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return YR(Qh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function eN(n,e,t,r){return function OV(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ir(e,t);if(Nx(n.visibleWrites,a))return null;{const c=Qh(n.visibleWrites,a);return Ox(c)?i.getChild(t):oy(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function aD(n,e){return function LV(n,e){return bg(n.visibleWrites,e)}(n.writeTree,Ir(n.treePath,e))}function Lx(n,e,t){return function FV(n,e,t,r){const i=Ir(e,t),a=bg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?oy(Qh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function tN(n,e){return nN(Ir(n.treePath,e),n.writeTree)}function nN(n,e){return{treePath:n,writeTree:e}}class jV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,sb(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,ib(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ry(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,sb(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const rN=new class qV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Ux{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Yh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wg(this.viewCache_),a=function BV(n,e,t,r,i,a){return function UV(n,e,t,r,i,a,c){let f;const m=Qh(n.visibleWrites,e),v=bg(m,Dn());if(null!=v)f=v;else{if(null==t)return[];f=oy(m,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const I=[],S=c.getCompare(),O=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let j=O.getNext();for(;j&&I.length<i;)0!==S(j,r)&&I.push(j),j=O.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function iN(n,e,t,r,i,a){const c=e.eventCache;if(null!=aD(r,t))return e;{let f,m;if(rn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=wg(e),S=Fx(r,v instanceof Wt?v:Wt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=oD(r,wg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=nn(t);if(".priority"===v){(0,L.hu)(1===Kh(t),"Can't have a priority with additional path components");const I=c.getNode();m=e.serverCache.getNode();const S=eN(r,t,I,m);f=null!=S?n.filter.updatePriority(I,S):c.getNode()}else{const I=$n(t);let S;if(c.isCompleteForChild(v)){m=e.serverCache.getNode();const O=eN(r,t,c.getNode(),m);S=null!=O?c.getNode().getImmediateChild(v).updateChild(I,O):c.getNode().getImmediateChild(v)}else S=Lx(r,v,e.serverCache);f=null!=S?n.filter.updateChild(c.getNode(),v,S,I,i,a):c.getNode()}}return lb(e,f,c.isFullyInitialized()||rn(t),n.filter.filtersNodes())}}function uD(n,e,t,r,i,a,c,f){const m=e.serverCache;let v;const I=c?n.filter:n.filter.getIndexedFilter();if(rn(t))v=I.updateFullNode(m.getNode(),r,null);else if(I.filtersNodes()&&!m.isFiltered()){const j=m.getNode().updateChild(t,r);v=I.updateFullNode(m.getNode(),j,null)}else{const j=nn(t);if(!m.isCompleteForPath(t)&&Kh(t)>1)return e;const Y=$n(t),Le=m.getNode().getImmediateChild(j).updateChild(Y,r);v=".priority"===j?I.updatePriority(m.getNode(),Le):I.updateChild(m.getNode(),j,Le,Y,rN,null)}const S=WR(e,v,m.isFullyInitialized()||rn(t),I.filtersNodes());return iN(n,S,t,i,new Ux(i,S,a),f)}function Vx(n,e,t,r,i,a,c){const f=e.eventCache;let m,v;const I=new Ux(i,e,a);if(rn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=lb(e,v,!0,n.filter.filtersNodes());else{const S=nn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=lb(e,v,f.isFullyInitialized(),f.isFiltered());else{const O=$n(t),j=f.getNode().getImmediateChild(S);let Y;if(rn(O))Y=r;else{const Ae=I.getCompleteChild(S);Y=null!=Ae?".priority"===gx(O)&&Ae.getChild(MR(O)).isEmpty()?Ae:Ae.updateChild(O,r):Wt.EMPTY_NODE}m=j.equals(Y)?e:lb(e,n.filter.updateChild(f.getNode(),S,Y,O,I,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function sN(n,e){return n.eventCache.isCompleteForChild(e)}function oN(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bx(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=rn(t)?r:new Xn(null).setTree(t,r);const I=e.serverCache.getNode();return v.children.inorderTraversal((S,O)=>{if(I.hasChild(S)){const Y=oN(0,e.serverCache.getNode().getImmediateChild(S),O);m=uD(n,m,new Ln(S),Y,i,a,c,f)}}),v.children.inorderTraversal((S,O)=>{const j=!e.serverCache.isCompleteForChild(S)&&void 0===O.value;if(!I.hasChild(S)&&!j){const Ae=oN(0,e.serverCache.getNode().getImmediateChild(S),O);m=uD(n,m,new Ln(S),Ae,i,a,c,f)}}),m}class QV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Ix(r.getIndex()),a=function dV(n){return n.loadsAllData()?new Ix(n.getIndex()):n.hasLimit()?new cV(n):new ob(n)}(r);this.processor_=function ZV(n){return{filter:n}}(a);const c=t.serverCache,f=t.eventCache,m=i.updateFullNode(Wt.EMPTY_NODE,c.getNode(),null),v=a.updateFullNode(Wt.EMPTY_NODE,f.getNode(),null),I=new Yh(m,c.isFullyInitialized(),i.filtersNodes()),S=new Yh(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=rD(S,I),this.eventGenerator_=new CV(this.query_)}get query(){return this.query_}}function eB(n,e){const t=wg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rn(e)&&!t.getImmediateChild(nn(e)).isEmpty())?t.getChild(e):null}function aN(n){return 0===n.eventRegistrations_.length}function uN(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function lN(n,e,t,r){e.type===Oa.MERGE&&null!==e.source.queryId&&((0,L.hu)(wg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(iD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function $V(n,e,t,r,i){const a=new jV;let c,f;if(t.type===Oa.OVERWRITE){const v=t;v.source.fromUser?c=Vx(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!rn(v.path),c=uD(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===Oa.MERGE){const v=t;v.source.fromUser?c=function zV(n,e,t,r,i,a,c){let f=e;return r.foreach((m,v)=>{const I=Ir(t,m);sN(e,nn(I))&&(f=Vx(n,f,I,v,i,a,c))}),r.foreach((m,v)=>{const I=Ir(t,m);sN(e,nn(I))||(f=Vx(n,f,I,v,i,a,c))}),f}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),c=Bx(n,e,v.path,v.children,r,i,f,a))}else if(t.type===Oa.ACK_USER_WRITE){const v=t;c=v.revert?function YV(n,e,t,r,i,a){let c;if(null!=aD(r,t))return e;{const f=new Ux(r,e,i),m=e.eventCache.getNode();let v;if(rn(t)||".priority"===nn(t)){let I;if(e.serverCache.isFullyInitialized())I=oD(r,wg(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),I=Fx(r,S)}v=n.filter.updateFullNode(m,I,a)}else{const I=nn(t);let S=Lx(r,I,e.serverCache);null==S&&e.serverCache.isCompleteForChild(I)&&(S=m.getImmediateChild(I)),v=null!=S?n.filter.updateChild(m,I,S,$n(t),f,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(m,I,Wt.EMPTY_NODE,$n(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=oD(r,wg(e)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=aD(r,Dn()),lb(e,v,c,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function WV(n,e,t,r,i,a,c){if(null!=aD(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(rn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return uD(n,e,t,m.getNode().getChild(t),i,a,f,c);if(rn(t)){let v=new Xn(null);return m.getNode().forEachChild(Ll,(I,S)=>{v=v.set(new Ln(I),S)}),Bx(n,e,t,v,i,a,f,c)}return e}{let v=new Xn(null);return r.foreach((I,S)=>{const O=Ir(t,I);m.isCompleteForPath(O)&&(v=v.set(I,m.getNode().getChild(O)))}),Bx(n,e,t,v,i,a,f,c)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Oa.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);c=function KV(n,e,t,r,i){const a=e.serverCache;return iN(n,WR(e,a.getNode(),a.isFullyInitialized()||rn(t),a.isFiltered()),t,r,rN,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function GV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=iD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(HR(iD(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function HV(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,cN(n,a.changes,a.viewCache.eventCache.getNode(),null)}function cN(n,e,t,r){return function EV(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function lV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),ub(n,i,"child_removed",e,r,t),ub(n,i,"child_added",e,r,t),ub(n,i,"child_moved",a,r,t),ub(n,i,"child_changed",e,r,t),ub(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let lD,dD;class dN{constructor(){this.views=new Map}}function jx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),lN(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(lN(c,e,t,r));return a}}function hN(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=oD(t,i?r:null),m=!1;f?m=!0:r instanceof Wt?(f=Fx(t,r),m=!1):(f=Wt.EMPTY_NODE,m=!1);const v=rD(new Yh(f,m,!1),new Yh(r,i,!1));return new QV(e,v)}return c}function fN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jh(n,e){let t=null;for(const r of n.views.values())t=t||eB(r,e);return t}function pN(n,e){return e._queryParams.loadsAllData()?cD(n):n.views.get(e._queryIdentifier)}function gN(n,e){return null!=pN(n,e)}function Xh(n){return null!=cD(n)}function cD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let cB=1;class mN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=function VV(){return{visibleWrites:Au.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qx(n,e,t,r,i){return function AV(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=cb(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ay(n,new vg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ef(n,e,t=!1){const r=function xV(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function MV(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&PV(f,r.path)?i=!1:Na(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function kV(n){n.visibleWrites=JR(n.allWrites,RV,Dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=KR(n.visibleWrites,r.path):Oi(r.children,m=>{n.visibleWrites=KR(n.visibleWrites,Ir(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Xn(null);return null!=r.snap?a=a.set(Dn(),!0):Oi(r.children,c=>{a=a.set(new Ln(c),!0)}),ay(n,new nD(r.path,a,t))}return[]}function db(n,e,t){return ay(n,new vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Zx(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||gN(a,e))){const f=function aB(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const f=Xh(n);if("default"===i)for(const[m,v]of n.views.entries())c=c.concat(uN(v,t,r)),aN(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(c=c.concat(uN(m,t,r)),aN(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!Xh(n)&&a.push(new(function iB(){return(0,L.hu)(lD,"Reference.ts has not been loaded"),lD}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function sB(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;c=f.events;const v=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(i,(S,O)=>Xh(O));if(v&&!I){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const O=function yB(n){return n.fold((e,t,r)=>{if(t&&Xh(t))return[cD(t)];{let i=[];return t&&(i=fN(t)),Oi(r,(a,c)=>{i=i.concat(c)}),i}})}(S);for(let j=0;j<O.length;++j){const Y=O[j],Ae=Y.query,Le=wN(n,Y);n.listenProvider_.startListening(hb(Ae),fD(n,Ae),Le.hashFn,Le.onComplete)}}}!I&&m.length>0&&!r&&(v?n.listenProvider_.stopListening(hb(e),null):m.forEach(S=>{const O=n.queryToTagMap.get(pD(S));n.listenProvider_.stopListening(hb(S),O)})),function vB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=pD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return c}function _N(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,O)=>{const j=Ws(S,r);i=i||Jh(O,j),a=a||Xh(O)});let f,c=n.syncPointTree_.get(r);c?(a=a||Xh(c),i=i||Jh(c,Dn())):(c=new dN,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?f=!0:(f=!1,i=Wt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,j)=>{const Y=Jh(j,Dn());Y&&(i=i.updateImmediateChild(O,Y))}));const m=gN(c,e);if(!m&&!e._queryParams.loadsAllData()){const S=pD(e);(0,L.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const O=function wB(){return cB++}();n.queryToTagMap.set(S,O),n.tagToQueryMap.set(O,S)}let I=function oB(n,e,t,r,i,a){const c=hN(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function tB(n,e){n.eventRegistrations_.push(e)}(c,t),function nB(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Jn,(a,c)=>{r.push(ry(a,c))}),t.isFullyInitialized()&&r.push(HR(t.getNode())),cN(n,r,t.getNode(),e)}(c,t)}(c,e,t,sD(n.pendingWriteTree_,r),i,f);if(!m&&!a){const S=pN(c,e);I=I.concat(function bB(n,e,t){const r=e._path,i=fD(n,e),a=wN(n,t),c=n.listenProvider_.startListening(hb(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Xh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,I,S)=>{if(!rn(v)&&I&&Xh(I))return[cD(I).query];{let O=[];return I&&(O=O.concat(fN(I).map(j=>j.query))),Oi(S,(j,Y)=>{O=O.concat(Y)}),O}});for(let v=0;v<m.length;++v){const I=m[v];n.listenProvider_.stopListening(hb(I),fD(n,I))}}return c}(n,e,S))}return I}function hD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const v=Jh(f,Ws(c,e));if(v)return v});return XR(i,e,a,t,!0)}function ay(n,e){return yN(e,n.syncPointTree_,null,sD(n.pendingWriteTree_,Dn()))}function yN(n,e,t,r){if(rn(n.path))return vN(n,e,t,r);{const i=e.get(Dn());null==t&&null!=i&&(t=Jh(i,Dn()));let a=[];const c=nn(n.path),f=n.operationForChild(c),m=e.children.get(c);if(m&&f){const v=t?t.getImmediateChild(c):null,I=tN(r,c);a=a.concat(yN(f,m,v,I))}return i&&(a=a.concat(jx(i,n,r,t))),a}}function vN(n,e,t,r){const i=e.get(Dn());null==t&&null!=i&&(t=Jh(i,Dn()));let a=[];return e.children.inorderTraversal((c,f)=>{const m=t?t.getImmediateChild(c):null,v=tN(r,c),I=n.operationForChild(c);I&&(a=a.concat(vN(I,f,m,v)))}),i&&(a=a.concat(jx(i,n,r,t))),a}function wN(n,e){const t=e.query,r=fD(n,t);return{hashFn:()=>(function JV(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function pB(n,e,t){const r=Hx(n,t);if(r){const i=$x(r),a=i.path,c=i.queryId,f=Ws(a,e);return Gx(n,a,new ab(Px(c),f))}return[]}(n,t._path,r):function fB(n,e){return ay(n,new ab({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function h2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Zx(n,t,null,a)}}}}function fD(n,e){const t=pD(e);return n.queryToTagMap.get(t)}function pD(n){return n._path.toString()+"$"+n._queryIdentifier}function Hx(n,e){return n.tagToQueryMap.get(e)}function $x(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ln(n.substr(0,e))}}function Gx(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),jx(r,t,sD(n.pendingWriteTree_,e),null)}function hb(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function lB(){return(0,L.hu)(dD,"Reference.ts has not been loaded"),dD}())(n._repo,n._path):n}class zx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new zx(t)}node(){return this.node_}}class Wx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ir(this.path_,e);return new Wx(this.syncTree_,t)}node(){return hD(this.syncTree_,this.path_)}}const bN=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?EB(n[".sv"],e,t):"object"==typeof n[".sv"]?IB(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},EB=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},IB=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},CN=function(n,e,t,r){return Yx(e,new Wx(t,n),r)},Kx=function(n,e,t){return Yx(n,new zx(e),t)};function Yx(n,e,t){const r=n.getPriority().val(),i=bN(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=bN(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new ey(f,Rr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new ey(i))),c.forEachChild(Jn,(f,m)=>{const v=Yx(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class Qx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function gD(n,e){let t=e instanceof Ln?e:new Ln(e),r=n,i=nn(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new Qx(i,r,a),t=$n(t),i=nn(t)}return r}function Cg(n){return n.node.value}function Jx(n,e){n.node.value=e,Xx(n)}function EN(n){return n.node.childCount>0}function mD(n,e){Oi(n.node.children,(t,r)=>{e(new Qx(t,n,r))})}function IN(n,e,t,r){t&&!r&&e(n),mD(n,i=>{IN(i,e,!0,r)}),t&&r&&e(n)}function fb(n){return new Ln(null===n.parent?n.name:fb(n.parent)+"/"+n.name)}function Xx(n){null!==n.parent&&function AB(n,e,t){const r=function TB(n){return void 0===Cg(n)&&!EN(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Xx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Xx(n))}(n.parent,n.name,n)}const SB=/[\[\].#$\/\u0000-\u001F\u007F]/,xB=/[\[\].#$\u0000-\u001F\u007F]/,eM=10485760,_D=function(n){return"string"==typeof n&&0!==n.length&&!SB.test(n)},TN=function(n){return"string"==typeof n&&0!==n.length&&!xB.test(n)},pb=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ZT(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Ul=function(n,e,t,r){r&&void 0===e||gb((0,L.gK)(n,"value"),e,t)},gb=function(n,e,t){const r=t instanceof Ln?new Z2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+_g(r));if("function"==typeof e)throw new Error(n+"contains a function "+_g(r)+" with contents = "+e.toString());if(ZT(e))throw new Error(n+"contains "+e.toString()+" "+_g(r));if("string"==typeof e&&e.length>eM/3&&(0,L.ug)(e)>eM)throw new Error(n+"contains a string greater than "+eM+" utf8 bytes "+_g(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Oi(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!_D(c)))throw new Error(n+" contains an invalid key ("+c+") "+_g(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function H2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),PR(n)})(r,c),gb(n,f,r),function $2(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+_g(r)+" in addition to actual children.")}},DN=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Oi(e,(c,f)=>{const m=new Ln(c);if(gb(i,f,Ir(t,m)),".priority"===gx(m)&&!pb(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=eb(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!_D(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(q2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Na(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},tM=function(n,e,t){if(!t||void 0!==e){if(ZT(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pb(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mb=function(n,e,t,r){if(!(r&&void 0===t||_D(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_b=function(n,e,t,r){if(!(r&&void 0===t||TN(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fa=function(n,e){if(".info"===nn(e))throw new Error(n+" failed = Can't modify data under /.info/")},AN=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!_D(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TN(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class RB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!mx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function nM(n,e,t){yD(n,t),SN(n,r=>mx(r,e))}function La(n,e,t){yD(n,t),SN(n,r=>Na(r,e)||Na(e,r))}function SN(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(NB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function NB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();gg&&Ni("event: "+t.toString()),J_(r)}}}const xN="repo_interrupt";class FB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new RB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tD(),this.transactionQueueTree_=new Qx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function MN(n){const t=n.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:MN(n)})}function PN(n,e,t,r,i){n.dataUpdateCount++;const a=new Ln(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,L.UI)(t,v=>Rr(v));c=function mB(n,e,t,r){const i=Hx(n,r);if(i){const a=$x(i),c=a.path,f=a.queryId,m=Ws(c,e),v=Xn.fromObject(t);return Gx(n,c,new sy(Px(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Rr(t);c=function gB(n,e,t,r){const i=Hx(n,r);if(null!=i){const a=$x(i),c=a.path,f=a.queryId,m=Ws(c,e);return Gx(n,c,new vg(Px(f),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>Rr(v));c=function hB(n,e,t){const r=Xn.fromObject(t);return ay(n,new sy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Rr(t);c=db(n.serverSyncTree_,a,m)}let f=a;c.length>0&&(f=ly(n,a)),La(n.eventQueue_,f,c)}function kN(n,e){rM(n,"connected",e),!1===e&&function jB(n){uy(n,"onDisconnectEvents");const e=yb(n),t=tD();Sx(n.onDisconnect_,Dn(),(i,a)=>{const c=CN(i,a,n.serverSyncTree_,e);iy(t,i,c)});let r=[];Sx(t,Dn(),(i,a)=>{r=r.concat(db(n.serverSyncTree_,i,a));const c=aM(n,i);ly(n,c)}),n.onDisconnect_=tD(),La(n.eventQueue_,Dn(),r)}(n)}function rM(n,e,t){const r=new Ln("/.info/"+e),i=Rr(t);n.infoData_.updateSnapshot(r,i);const a=db(n.infoSyncTree_,r,i);La(n.eventQueue_,r,a)}function vD(n){return n.nextWriteId_++}function iM(n,e,t,r,i){uy(n,"set",{path:e.toString(),value:t,priority:r});const a=yb(n),c=Rr(t,r),f=hD(n.serverSyncTree_,e),m=Kx(c,f,a),v=vD(n),I=qx(n.serverSyncTree_,e,m,v,!0);yD(n.eventQueue_,I),n.server_.put(e.toString(),c.val(!0),(O,j)=>{const Y="ok"===O;Y||Is("set at "+e+" failed: "+O);const Ae=ef(n.serverSyncTree_,v,!Y);La(n.eventQueue_,e,Ae),tf(0,i,O,j)});const S=aM(n,e);ly(n,S),La(n.eventQueue_,S,[])}function qB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ax(n.onDisconnect_,e),tf(0,t,r,i)})}function RN(n,e,t,r){const i=Rr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&iy(n.onDisconnect_,e,i),tf(0,r,a,c)})}function sM(n,e,t){let r;r=".info"===nn(e._path)?Zx(n.infoSyncTree_,e,t):Zx(n.serverSyncTree_,e,t),nM(n.eventQueue_,e._path,r)}function NN(n){n.persistentConnection_&&n.persistentConnection_.interrupt(xN)}function uy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ni(t,...e)}function tf(n,e,t,r){e&&J_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function oM(n,e,t){return hD(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function wD(n,e=n.transactionQueueTree_){if(e||bD(n,e),Cg(e)){const t=FN(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function WB(n,e,t){const r=t.map(v=>v.currentWriteId),i=oM(n,e,r);let a=i;const c=i.hash();for(let v=0;v<t.length;v++){const I=t[v];(0,L.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const S=Ws(e,I.path);a=a.updateChild(S,I.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{uy(n,"transaction put response",{path:m.toString(),status:v});let I=[];if("ok"===v){const S=[];for(let O=0;O<t.length;O++)t[O].status=2,I=I.concat(ef(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&S.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();bD(n,gD(n.transactionQueueTree_,e)),wD(n,n.transactionQueueTree_),La(n.eventQueue_,e,I);for(let O=0;O<S.length;O++)J_(S[O])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Is("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}ly(n,e)}},c)}(n,fb(e),t)}else EN(e)&&mD(e,t=>{wD(n,t)})}function ly(n,e){const t=ON(n,e),r=fb(t);return function KB(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=Ws(t,m.path);let S,I=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)I=!0,S=m.abortReason,i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)I=!0,S="maxretry",i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0));else{const O=oM(n,m.path,c);m.currentInputSnapshot=O;const j=e[f].update(O.val());if(void 0!==j){gb("transaction failed: Data returned ",j,m.path);let Y=Rr(j);"object"==typeof j&&null!=j&&(0,L.r3)(j,".priority")||(Y=Y.updatePriority(O.getPriority()));const Le=m.currentWriteId,st=yb(n),ft=Kx(Y,O,st);m.currentOutputSnapshotRaw=Y,m.currentOutputSnapshotResolved=ft,m.currentWriteId=vD(n),c.splice(c.indexOf(Le),1),i=i.concat(qx(n.serverSyncTree_,m.path,ft,m.currentWriteId,m.applyLocally)),i=i.concat(ef(n.serverSyncTree_,Le,!0))}else I=!0,S="nodata",i=i.concat(ef(n.serverSyncTree_,m.currentWriteId,!0))}La(n.eventQueue_,t,i),i=[],I&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}bD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)J_(r[f]);wD(n,n.transactionQueueTree_)}(n,FN(n,t),r),r}function ON(n,e){let t,r=n.transactionQueueTree_;for(t=nn(e);null!==t&&void 0===Cg(r);)r=gD(r,t),t=nn(e=$n(e));return r}function FN(n,e){const t=[];return LN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function LN(n,e,t){const r=Cg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);mD(e,i=>{LN(n,i,t)})}function bD(n,e){const t=Cg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Jx(e,t.length>0?t:void 0)}mD(e,r=>{bD(n,r)})}function aM(n,e){const t=fb(ON(n,e)),r=gD(n.transactionQueueTree_,e);return function DB(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{uM(n,i)}),uM(n,r),IN(r,i=>{uM(n,i)}),t}function uM(n,e){const t=Cg(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,L.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,L.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(ef(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Jx(e,void 0):t.length=a+1,La(n.eventQueue_,fb(e),i);for(let c=0;c<r.length;c++)J_(r[c])}}const lM=function(n,e){const t=JB(n),r=t.namespace;return"firebase.com"===t.domain&&Ol(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ol("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ln(t.pathString)}},JB=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let I=n.indexOf("/");-1===I&&(I=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(I,S)),I<S&&(i=function YB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,S)));const O=function QB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(c="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const j=e.slice(0,v);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),a=r}"ns"in O&&(a=O.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}};class UN{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class VN{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class BN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class jN{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return qB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Fa("OnDisconnect.remove",this._path);const e=new L.BH;return RN(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Fa("OnDisconnect.set",this._path),Ul("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return RN(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Fa("OnDisconnect.setWithPriority",this._path),Ul("OnDisconnect.setWithPriority",e,this._path,!1),tM("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function ZB(n,e,t,r,i){const a=Rr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,f)=>{"ok"===c&&iy(n.onDisconnect_,e,a),tf(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Fa("OnDisconnect.update",this._path),DN("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function HB(n,e,t,r){if((0,L.xb)(t))return Ni("onDisconnect().update() called with empty data.  Don't do anything."),void tf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Oi(t,(c,f)=>{const m=Rr(f);iy(n.onDisconnect_,Ir(e,c),m)}),tf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class To{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:gx(this._path)}get ref(){return new Ua(this._repo,this._path)}get _queryIdentifier(){const e=GR(this._queryParams),t=ox(e);return"{}"===t?"default":t}get _queryObject(){return GR(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof To))return!1;const t=this._repo===e._repo,r=mx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function j2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function CD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function nf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ll){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==rd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Fl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Jn){if(null!=e&&!pb(e)||null!=t&&!pb(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof bx||n.getIndex()===Cx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ED(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ua extends To{constructor(e,t){super(e,t,new JT,!1)}get parent(){const e=MR(this._path);return null===e?null:new Ua(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Eg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ln(e),r=Ig(this.ref,e);return new Eg(this._node.getChild(t),r,Jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Eg(i,Ig(this.ref,r),Jn)))}hasChild(e){const t=new Ln(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function qN(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ig(n._root,e):n._root}function ZN(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=lM(e,n._repo.repoInfo_.nodeAdmin);AN("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ol("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),qN(n,t.path.toString())}function Ig(n,e){return null===nn((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_b("child","path",t,!1)):_b("child","path",e,!1),new Ua(n._repo,Ir(n._path,e));var t}function cM(n,e){n=(0,L.m9)(n),Fa("set",n._path),Ul("set",e,n._path,!1);const t=new L.BH;return iM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function rj(n,e){DN("update",e,n._path,!1);const t=new L.BH;return function BB(n,e,t,r){uy(n,"update",{path:e.toString(),value:t});let i=!0;const a=yb(n),c={};if(Oi(t,(f,m)=>{i=!1,c[f]=CN(Ir(e,f),Rr(m),n.serverSyncTree_,a)}),i)Ni("update() called with empty data.  Don't do anything."),tf(0,r,"ok",void 0);else{const f=vD(n),m=function dB(n,e,t,r){!function SV(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Rx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Xn.fromObject(t);return ay(n,new sy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);yD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,I)=>{const S="ok"===v;S||Is("update at "+e+" failed: "+v);const O=ef(n.serverSyncTree_,f,!S),j=O.length>0?ly(n,e):e;La(n.eventQueue_,j,O),tf(0,r,v,I)}),Oi(t,v=>{const I=aM(n,Ir(e,v));ly(n,I)}),La(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ij(n){return function VB(n,e){const t=function _B(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,I)=>{const S=Ws(v,t);r=r||Jh(I,S)});let i=n.syncPointTree_.get(t);i?r=r||Jh(i,Dn()):(i=new dN,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Yh(r,!0,!1):null;return function XV(n){return iD(n.viewCache_)}(hN(i,e,sD(n.pendingWriteTree_,e._path),a?c.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Rr(r).withIndex(e._queryParams.getIndex()),a=db(n.serverSyncTree_,e._path,i);return nM(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(uy(n,"get for query "+(0,L.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,L.m9)(n))._repo,n).then(e=>new Eg(e,new Ua(n._repo,n._path),n._queryParams.getIndex()))}class ID{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new UN("value",this,new Eg(e.snapshotNode,new Ua(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new VN(this,e,t):null}matches(e){return e instanceof ID&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class TD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new VN(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=Ig(new Ua(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new UN(e.type,this,new Eg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof TD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function vb(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(I,S)=>{sM(n._repo,n,f),m(I,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const c=new BN(t,a||void 0),f="value"===e?new ID(c):new TD(e,c);return function $B(n,e,t){let r;r=".info"===nn(e._path)?_N(n.infoSyncTree_,e,t):_N(n.serverSyncTree_,e,t),nM(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>sM(n._repo,n,f)}function dM(n,e,t,r){return vb(n,"value",e,t,r)}function HN(n,e,t,r){return vb(n,"child_added",e,t,r)}function $N(n,e,t,r){return vb(n,"child_changed",e,t,r)}function GN(n,e,t,r){return vb(n,"child_moved",e,t,r)}function zN(n,e,t,r){return vb(n,"child_removed",e,t,r)}function WN(n,e,t){let r=null;const i=t?new BN(t):null;"value"===e?r=new ID(i):e&&(r=new TD(e,i)),sM(n._repo,n,r)}class Su{}class KN extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("endAt",this._value,e._path,!0);const t=Dx(e._queryParams,this._value,this._key);if(ED(t),nf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class oj extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("endBefore",this._value,e._path,!1);const t=function gV(n,e,t){let r,i;return n.index_===Ll?("string"==typeof e&&(e=ZR(e)),i=Dx(n,e,t)):(r=null==t?rd:ZR(t),i=Dx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(ED(t),nf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class YN extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("startAt",this._value,e._path,!0);const t=Tx(e._queryParams,this._value,this._key);if(ED(t),nf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class lj extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ul("startAfter",this._value,e._path,!1);const t=function pV(n,e,t){let r;if(n.index_===Ll)"string"==typeof e&&(e=qR(e)),r=Tx(n,e,t);else{let i;i=null==t?Fl:qR(t),r=Tx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ED(t),nf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new To(e._repo,e._path,t,e._orderByCalled)}}class dj extends Su{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(e._repo,e._path,function hV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class fj extends Su{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new To(e._repo,e._path,function fV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class gj extends Su{constructor(e){super(),this._path=e}_apply(e){CD(e,"orderByChild");const t=new Ln(this._path);if(rn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new bx(t),i=XT(e._queryParams,r);return nf(i),new To(e._repo,e._path,i,!0)}}class _j extends Su{_apply(e){CD(e,"orderByKey");const t=XT(e._queryParams,Ll);return nf(t),new To(e._repo,e._path,t,!0)}}class vj extends Su{_apply(e){CD(e,"orderByPriority");const t=XT(e._queryParams,Jn);return nf(t),new To(e._repo,e._path,t,!0)}}class bj extends Su{_apply(e){CD(e,"orderByValue");const t=XT(e._queryParams,Cx);return nf(t),new To(e._repo,e._path,t,!0)}}class Ej extends Su{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ul("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new KN(this._value,this._key)._apply(new YN(this._value,this._key)._apply(e))}}function xu(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function rB(n){(0,L.hu)(!lD,"__referenceConstructor has already been defined"),lD=n})(Ua),function uB(n){(0,L.hu)(!dD,"__referenceConstructor has already been defined"),dD=n}(Ua);const hM={};function JN(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ol("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ni("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,c=lM(a,i),f=c.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,c=lM(a,i),f=c.repoInfo):m=!c.repoInfo.secure;const I=i&&m?new Xw(Xw.OWNER):new m2(n.name,n.options,e);AN("Invalid Firebase Database URL",c),rn(c.path)||Ol("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Sj(n,e,t,r){let i=hM[e.name];i||(i={},hM[e.name]=i);let a=i[n.toURLString()];return a&&Ol("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new FB(n,false,t,r),i[n.toURLString()]=a,a}(f,n,I,new g2(n.name,t));return new Mj(S,n)}class Mj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function LB(n,e,t){if(n.stats_=hx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new eD(n.repoInfo_,(r,i,a,c)=>{PN(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kN(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new yg(n.repoInfo_,e,(r,i,a,c)=>{PN(n,r,i,a,c)},r=>{kN(n,r)},r=>{!function UB(n,e){Oi(e,(t,r)=>{rM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function v2(n,e){const t=n.toString();return dx[t]||(dx[t]=e()),dx[t]}(n.repoInfo_,()=>new bV(n.stats_,n.server_)),n.infoData_=new mV,n.infoSyncTree_=new mN({startListening:(r,i,a,c)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=db(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),rM(n,"connected",!1),n.serverSyncTree_=new mN({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,m)=>{const v=c(f,m);La(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ua(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Aj(n,e){const t=hM[e];(!t||t[n.key]!==n)&&Ol(`Database ${e}(${n.repoInfo_}) has already been deleted.`),NN(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ol("Cannot call "+e+" on a deleted database.")}}function XN(){yR.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Pj(){XN(),Wh.forceDisallow()}function kj(){XN(),X_.forceDisallow(),Wh.forceAllow()}function Fj(n,e){Jk(n,e)}const Uj={".sv":"timestamp"};class jj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}yg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},yg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Lj(n){zk(Ur.SDK_VERSION),(0,Ur._registerComponent)(new ps.wA("database",(e,{instanceIdentifier:t})=>JN(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ur.registerVersion)($k,"0.13.1",n),(0,Ur.registerVersion)($k,"0.13.1","esm2017")}();const $j=new gs.Yd("@firebase/database-compat"),eO=function(n){$j.warn("FIREBASE WARNING: "+n)};class Wj{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,eO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Kj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class rf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),_b("DataSnapshot.child","path",e,!1),new rf(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_b("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new rf(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class es{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const c=es.getCancelAndContextArgs_("Query.on",r,i),f=(v,I)=>{t.call(c.context,new rf(this.database,v),I)};f.userCallback=t,f.context=c.context;const m=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return dM(this._delegate,f,m),t;case"child_added":return HN(this._delegate,f,m),t;case"child_removed":return zN(this._delegate,f,m),t;case"child_changed":return $N(this._delegate,f,m),t;case"child_moved":return GN(this._delegate,f,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,WN(this._delegate,e,i)}else WN(this._delegate,e)}get(){return ij(this._delegate).then(e=>new rf(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=es.getCancelAndContextArgs_("Query.once",r,i),c=new L.BH,f=(v,I)=>{const S=new rf(this.database,v);t&&t.call(a.context,S,I),c.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),c.reject(v)};switch(e){case"value":dM(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":HN(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":zN(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":$N(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":GN(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new es(this.database,xu(this._delegate,function hj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new dj(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new es(this.database,xu(this._delegate,function pj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new fj(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new es(this.database,xu(this._delegate,function mj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _b("orderByChild","path",n,!1),new gj(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new es(this.database,xu(this._delegate,function yj(){return new _j}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new es(this.database,xu(this._delegate,function wj(){return new vj}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new es(this.database,xu(this._delegate,function Cj(){return new bj}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new es(this.database,xu(this._delegate,function uj(n=null,e){return mb("startAt","key",e,!0),new YN(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new es(this.database,xu(this._delegate,function cj(n,e){return mb("startAfter","key",e,!0),new lj(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new es(this.database,xu(this._delegate,function sj(n,e){return mb("endAt","key",e,!0),new KN(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new es(this.database,xu(this._delegate,function aj(n,e){return mb("endBefore","key",e,!0),new oj(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new es(this.database,xu(this._delegate,function Ij(n,e){return mb("equalTo","key",e,!0),new Ej(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof es))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ia(this.database,new Ua(this._delegate._repo,this._delegate._path))}}class ia extends es{constructor(e,t){super(e,new To(t._repo,t._path,new JT,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ia(this.database,Ig(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ia(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ia(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=cM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,eO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fa("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=rj(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function nj(n,e,t){if(Fa("setWithPriority",n._path),Ul("setWithPriority",e,n._path,!1),tM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return iM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function ej(n){return Fa("remove",n._path),cM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function qj(n,e,t){var r;if(n=(0,L.m9)(n),Fa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,f=dM(n,()=>{});return function zB(n,e,t,r,i,a){uy(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:Kk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=oM(n,e,void 0);c.currentInputSnapshot=f;const m=c.update(f.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{gb("transaction failed: Data returned ",m,c.path),c.status=0;const v=gD(n.transactionQueueTree_,e),I=Cg(v)||[];let S;I.push(c),Jx(v,I),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(S=(0,L.DV)(m,".priority"),(0,L.hu)(pb(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(hD(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const O=yb(n),j=Rr(m,S),Y=Kx(j,f,O);c.currentOutputSnapshotRaw=j,c.currentOutputSnapshotResolved=Y,c.currentWriteId=vD(n);const Ae=qx(n.serverSyncTree_,e,Y,c.currentWriteId,c.applyLocally);La(n.eventQueue_,e,Ae),wD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,I)=>{let S=null;m?a.reject(m):(S=new Eg(I,new Ua(n._repo,n._path),Jn),a.resolve(new jj(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Kj(a.committed,new rf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function tj(n,e){n=(0,L.m9)(n),Fa("setPriority",n._path),tM("setPriority",e,!1);const t=new L.BH;return iM(n._repo,Ir(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function XB(n,e){n=(0,L.m9)(n),Fa("push",n._path),Ul("push",e,n._path,!0);const t=MN(n._repo),r=uV(t),i=Ig(n,r),a=Ig(n,r);let c;return c=null!=e?cM(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new ia(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new ia(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Fa("Reference.onDisconnect",this._delegate._path),new Wj(new jN(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wb{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Pj,forceLongPolling:kj}}useEmulator(e,t,r={}){!function Rj(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ol("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ol('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Xw(Xw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new Xw(c)}!function Dj(n,e,t,r){n.repoInfo_=new lx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof ia){const t=ZN(this._delegate,e.toString());return new ia(this,t)}{const t=qN(this._delegate,e);return new ia(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=ZN(this._delegate,e);return new ia(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function Nj(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),NN(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function Oj(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function GB(n){n.persistentConnection_&&n.persistentConnection_.resume(xN)}(n._repo)}(this._delegate)}}wb.ServerValue={TIMESTAMP:function Vj(){return Uj}(),increment:n=>function Bj(n){return{".sv":{increment:n}}}(n)};var Qj=Object.freeze({__proto__:null,initStandalone:function Yj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){zk(t);const c=new ps.zt("auth-internal",new ps.H0("database-standalone"));return c.setComponent(new ps.wA("auth-internal",()=>r,"PRIVATE")),{instance:new wb(JN(n,c,void 0,e,a),n),namespace:i}}});const Jj=wb.ServerValue;function tO(n){return null==n}function nO(n){return"function"==typeof n.set}function rO(n,e){return nO(e)?e:n.ref(e)}function iO(n,e){if(function e3(n){return"string"==typeof n}(n))return e.stringCase();if(nO(n))return e.firebaseCase();if(function t3(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function bb(n,e,t="on",r=Ia.z){return new zn.y(i=>{let a=null;return a=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,dt.U)(i=>{const{snapshot:a,prevKey:c}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:c,key:f}}),(0,pi.B)())}function sO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function i3(n,e){const{payload:t,prevKey:r,key:i}=e,a=sO(n,i),c=function r3(n,e){if(tO(e))return 0;{const t=sO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function oO(n){return(tO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function aO(n,e,t){return function n3(n,e,t){return bb(n,"value","once",t).pipe(bn(r=>{const i=[ct(r)];return e.forEach(a=>i.push(bb(n,a,"on",t))),(0,oo.T)(...i).pipe(lu(i3,[]))}),cv())}(n,e=oO(e),t)}function uO(n,e,t){const r=(e=oO(e)).map(i=>bb(n,i,"on",t));return(0,oo.T)(...r)}function lO(n,e){return function(r,i){return iO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function u3(n){return function(t){return t?iO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function cO(n,e){return function(){return bb(n,"value","on",e)}}!function Xj(n){n.INTERNAL.registerComponent(new ps.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new wb(i,r)},"PUBLIC").setServiceProps({Reference:ia,Query:es,Database:wb,DataSnapshot:rf,enableLogging:Fj,INTERNAL:Qj,ServerValue:Jj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.1")}(jd.Z);const d3=new u.OlP("angularfire2.realtimeDatabaseURL"),h3=new u.OlP("angularfire2.database.use-emulator");let f3=(()=>{class n{constructor(t,r,i,a,c,f,m,v,I,S,O,j,Y,Ae,Le){this.schedulers=f;const st=m,ft=(0,Fn.on)(t,c,r);v&&Pf(ft,c,I,O,j,Y,S,Ae),this.database=(0,Fn.cc)(`${ft.name}.database.${i}`,"AngularFireDatabase",ft.name,()=>{const _t=c.runOutsideAngular(()=>ft.database(i||void 0));return st&&_t.useEmulator(...st),_t},[st])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>rO(this.database,t));let a=i;return r&&(a=r(i)),function l3(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:lO(r,"update"),set:lO(r,"set"),push:i=>r.push(i),remove:u3(r),snapshotChanges:i=>aO(n,i,t).pipe(Yt.iC),stateChanges:i=>uO(n,i,t).pipe(Yt.iC),auditTrail:i=>function s3(n,e,t){return function a3(n,e,t){return function o3(n,e){return bb(n,"value","on",e).pipe((0,dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function r2(...n){const e=(0,wn.jO)(n);return(0,ir.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,Ho.Xf)(n[m]).subscribe((0,yn.x)(r,v=>{a[m]=v,!f&&!c[m]&&(c[m]=!0,(f=c.every(Os.y))&&(c=null))},nx.Z));t.subscribe((0,yn.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,dt.U)(([i,a])=>{const c=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:c,loadedKeys:f}}),function i2(n){return(0,ir.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,yn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dt.U)(i=>i.actions))}(n,uO(n,e).pipe(lu((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Yt.iC),valueChanges:(i,a)=>aO(n,i,t).pipe((0,dt.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Yt.iC)}}(a,this)}object(t){return function c3(n,e){return{query:n,snapshotChanges:()=>cO(n,e.schedulers.outsideAngular)().pipe(Yt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>cO(n,e.schedulers.outsideAngular)().pipe(Yt.iC,(0,dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>rO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fn.Dh),u.LFG(Fn.xv,8),u.LFG(d3,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Yt.HU),u.LFG(h3,8),u.LFG(Ea,8),u.LFG(go,8),u.LFG(hc,8),u.LFG(sl,8),u.LFG(fc,8),u.LFG(Mf,8),u.LFG(Bd,8),u.LFG(Ki,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),p3=(()=>{class n{constructor(){Wn.Z.registerVersion("angularfire",Yt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[f3]}),n})();const DD_firebaseConfig={apiKey:"AIzaSyDou8fFXO4ewYZNnlltcZ18PhomHD852xA",authDomain:"pokepedia-1509f.firebaseapp.com",projectId:"pokepedia-1509f",storageBucket:"pokepedia-1509f.appspot.com",messagingSenderId:"780770093383",appId:"1:780770093383:web:350b0579b1566262bb0462"};class Mu extends Mr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:g3}=Array,{getPrototypeOf:m3,prototype:_3,keys:y3}=Object;function dO(n){if(1===n.length){const e=n[0];if(g3(e))return{args:e,keys:null};if(function v3(n){return n&&"object"==typeof n&&m3(n)===_3}(e)){const t=y3(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:w3}=Array;function fM(n){return(0,dt.U)(e=>function b3(n,e){return w3(e)?n(...e):n(e)}(n,e))}function hO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var C3=M(9672);function fO(...n){const e=(0,wn.yG)(n),t=(0,wn.jO)(n),{args:r,keys:i}=dO(n);if(0===r.length)return(0,tn.D)([],e);const a=new zn.y(function E3(n,e,t=Os.y){return r=>{pO(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let m=0;m<i;m++)pO(e,()=>{const v=(0,tn.D)(n[m],e);let I=!1;v.subscribe((0,yn.x)(r,S=>{a[m]=S,I||(I=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>hO(i,c):Os.y));return t?a.pipe(fM(t)):a}function pO(n,e,t){n?(0,C3.f)(t,n,e):e()}function cy(n,e){const t=(0,gi.m)(n)?n:()=>n,r=i=>i.error(t());return new zn.y(e?i=>e.schedule(r,0,i):r)}function AD(n){return new zn.y(e=>{(0,Ho.Xf)(n()).subscribe(e)})}var dy=M(515),gO=M(727);function pM(){return(0,ir.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class gM extends zn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ir.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gO.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gO.w0.EMPTY)}return e}refCount(){return pM()(this)}}function sf(n){return(0,ir.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,c=>{a=(0,Ho.Xf)(n(c,sf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var ts=M(5577);function hy(n,e){return(0,gi.m)(e)?(0,ts.z)(n,e,1):(0,ts.z)(n,1)}function mM(n){return n<=0?()=>dy.E:(0,ir.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var ns=M(8505);function mO(n){return(0,dt.U)(()=>n)}function _M(n){return(0,ir.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class sd{constructor(e,t){this.id=e,this.url=t}}class yM extends sd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cb extends sd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _O extends sd{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class T3 extends sd{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class D3 extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class A3 extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S3 extends sd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x3 extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M3 extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P3{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class k3{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class R3{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N3{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O3{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F3{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const sn="primary";class L3{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fy(n){return new L3(n)}const vO="ngNavigationCancelingError";function vM(n){const e=Error("NavigationCancelingError: "+n);return e[vO]=!0,e}function V3(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!wO(n[i],e[i]))return!1;return!0}function wO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function bO(n){return Array.prototype.concat.apply([],n)}function CO(n){return n.length>0?n[n.length-1]:null}function rs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Pu(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,tn.D)(Promise.resolve(n)):ct(n)}const q3={exact:function TO(n,e,t){if(!Dg(n.segments,e.segments)||!SD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!TO(n.children[r],e.children[r],t))return!1;return!0},subset:DO},EO={exact:function Z3(n,e){return Vl(n,e)},subset:function H3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wO(n[t],e[t]))},ignored:()=>!0};function IO(n,e,t){return q3[t.paths](n.root,e.root,t.matrixParams)&&EO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function DO(n,e,t){return AO(n,e,e.segments,t)}function AO(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Dg(i,t)||e.hasChildren()||!SD(i,t,r))}if(n.segments.length===t.length){if(!Dg(n.segments,t)||!SD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!DO(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Dg(n.segments,i)&&SD(n.segments,i,r)&&n.children[sn])&&AO(n.children[sn],e,a,r)}}function SD(n,e,t){return e.every((r,i)=>EO[t](n[i].parameters,r.parameters))}class Tg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fy(this.queryParams)),this._queryParamMap}toString(){return z3.serialize(this)}}class fn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,rs(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xD(this)}}class Eb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fy(this.parameters)),this._parameterMap}toString(){return kO(this)}}function Dg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class SO{}class xO{parse(e){const t=new nq(e);return new Tg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ib(e.root,!0)}`,r=function Y3(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${MD(t)}=${MD(i)}`).join("&"):`${MD(t)}=${MD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function W3(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const z3=new xO;function xD(n){return n.segments.map(e=>kO(e)).join("/")}function Ib(n,e){if(!n.hasChildren())return xD(n);if(e){const t=n.children[sn]?Ib(n.children[sn],!1):"",r=[];return rs(n.children,(i,a)=>{a!==sn&&r.push(`${a}:${Ib(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function G3(n,e){let t=[];return rs(n.children,(r,i)=>{i===sn&&(t=t.concat(e(r,i)))}),rs(n.children,(r,i)=>{i!==sn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===sn?[Ib(n.children[sn],!1)]:[`${i}:${Ib(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[sn]?`${xD(n)}/${t[0]}`:`${xD(n)}/(${t.join("//")})`}}function MO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function MD(n){return MO(n).replace(/%3B/gi,";")}function wM(n){return MO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PD(n){return decodeURIComponent(n)}function PO(n){return PD(n.replace(/\+/g,"%20"))}function kO(n){return`${wM(n.path)}${function K3(n){return Object.keys(n).map(e=>`;${wM(e)}=${wM(n[e])}`).join("")}(n.parameters)}`}const Q3=/^[^\/()?;=#]+/;function kD(n){const e=n.match(Q3);return e?e[0]:""}const J3=/^[^=?&#]+/,eq=/^[^&#]+/;class nq{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[sn]=new fn(e,t)),r}parseSegment(){const e=kD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Eb(PD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=kD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=kD(this.remaining);i&&(r=i,this.capture(r))}e[PD(t)]=PD(r)}parseQueryParam(e){const t=function X3(n){const e=n.match(J3);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function tq(n){const e=n.match(eq);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=PO(t),a=PO(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=kD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=sn);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[sn]:new fn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class RO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=bM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=bM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=CM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return CM(e,this._root).map(t=>t.value)}}function bM(n,e){if(n===e.value)return e;for(const t of e.children){const r=bM(n,t);if(r)return r}return null}function CM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=CM(n,t);if(r.length)return r.unshift(e),r}return[]}class od{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function py(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NO extends RO{constructor(e,t){super(e),this.snapshot=t,EM(this,e)}toString(){return this.snapshot.toString()}}function OO(n,e){const t=function rq(n,e){const c=new RD([],{},{},"",{},sn,e,null,n.root,-1,{});return new LO("",new od(c,[]))}(n,e),r=new Mu([new Eb("",{})]),i=new Mu({}),a=new Mu({}),c=new Mu({}),f=new Mu(""),m=new Ag(r,i,c,f,a,sn,e,t.root);return m.snapshot=t.root,new NO(new od(m,[]),t)}class Ag{constructor(e,t,r,i,a,c,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>fy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>fy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function iq(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class RD{constructor(e,t,r,i,a,c,f,m,v,I,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=I,this._correctedLastPathIndex=O??I,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LO extends RO{constructor(e,t){super(t),this.url=e,EM(this,t)}toString(){return UO(this._root)}}function EM(n,e){e.value._routerState=n,e.children.forEach(t=>EM(n,t))}function UO(n){const e=n.children.length>0?` { ${n.children.map(UO).join(", ")} } `:"";return`${n.value}${e}`}function IM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vl(e.params,t.params)||n.params.next(t.params),function B3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function TM(n,e){const t=Vl(n.params,e.params)&&function $3(n,e){return Dg(n,e)&&n.every((t,r)=>Vl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||TM(n.parent,e.parent))}function Tb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function oq(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tb(n,r,i);return Tb(n,r)})}(n,e,t);return new od(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Tb(n,f)),c}}const r=function aq(n){return new Ag(new Mu(n.url),new Mu(n.params),new Mu(n.queryParams),new Mu(n.fragment),new Mu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Tb(n,a));return new od(r,i)}}function ND(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Db(n){return"object"==typeof n&&null!=n&&n.outlets}function DM(n,e,t,r,i){let a={};if(r&&rs(r,(f,m)=>{a[m]=Array.isArray(f)?f.map(v=>`${v}`):`${f}`}),n===e)return new Tg(t,a,i);const c=VO(n,e,t);return new Tg(c,a,i)}function VO(n,e,t){const r={};return rs(n.children,(i,a)=>{r[a]=i===e?t:VO(i,e,t)}),new fn(n.segments,r)}class BO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ND(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Db);if(i&&i!==CO(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class AM{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jO(n,e,t){if(n||(n=new fn([],{})),0===n.segments.length&&n.hasChildren())return OD(n,e,t);const r=function fq(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(Db(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!ZO(m,v,c))return a;r+=2}else{if(!ZO(m,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new fn(n.segments.slice(0,r.pathIndex),{});return a.children[sn]=new fn(n.segments.slice(r.pathIndex),n.children),OD(a,0,i)}return r.match&&0===i.length?new fn(n.segments,{}):r.match&&!n.hasChildren()?SM(n,e,t):r.match?OD(n,0,i):SM(n,e,t)}function OD(n,e,t){if(0===t.length)return new fn(n.segments,{});{const r=function hq(n){return Db(n[0])?n[0].outlets:{[sn]:n}}(t),i={};return rs(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=jO(n.children[c],e,a))}),rs(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new fn(n.segments,i)}}function SM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Db(a)){const m=pq(a.outlets);return new fn(r,m)}if(0===i&&ND(t[0])){r.push(new Eb(n.segments[e].path,qO(t[0]))),i++;continue}const c=Db(a)?a.outlets[sn]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&ND(f)?(r.push(new Eb(c,qO(f))),i+=2):(r.push(new Eb(c,{})),i++)}return new fn(r,{})}function pq(n){const e={};return rs(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=SM(new fn([],{}),0,t))}),e}function qO(n){const e={};return rs(n,(t,r)=>e[r]=`${t}`),e}function ZO(n,e,t){return n==t.path&&Vl(e,t.parameters)}class gq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ab,this.attachRef=null}}class Ab{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new gq,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let xM=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=i||sn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new mq(t,f,i.injector);if(r&&function _q(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(c);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(c,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ab),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class mq{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ag?this.route:e===Ab?this.childContexts:this.parent.get(e,t)}}let HO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[xM],encapsulation:2}),n})();function $O(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function PM(n){const e=n.children&&n.children.map(PM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==sn&&(t.component=HO),t}function Va(n){return n.outlet||sn}function GO(n,e){const t=n.filter(r=>Va(r)===e);return t.push(...n.filter(r=>Va(r)!==e)),t}function zO(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Cq{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),IM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=py(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),rs(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=py(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=py(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=py(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new F3(a.value.snapshot))}),e.children.length&&this.forwardEvent(new N3(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(IM(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),IM(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=zO(i.snapshot),m=f?.get(u._Vd)??null;c.attachRef=null,c.route=i,c.resolver=m,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function af(n){return"function"==typeof n}function Sg(n){return n instanceof Tg}const Sb=Symbol("INITIAL_VALUE");function xb(){return bn(n=>fO(n.map(e=>e.pipe((0,Lr.q)(1),cm(Sb)))).pipe(lu((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==Sb?i:(a===Sb&&(r=!0),r||!1!==a&&c!==t.length-1&&!Sg(a)?i:a),e)},Sb),mr(e=>e!==Sb),(0,dt.U)(e=>Sg(e)?e:!0===e),(0,Lr.q)(1)))}const WO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...WO}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||V3)(t,n,e);if(!i)return{...WO};const a={};rs(i.posParams,(f,m)=>{a[m]=f.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function LD(n,e,t,r,i="corrected"){if(t.length>0&&function Mq(n,e,t){return t.some(r=>UD(n,e,r)&&Va(r)!==sn)}(n,t,r)){const c=new fn(e,function xq(n,e,t,r){const i={};i[sn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Va(a)!==sn){const c=new fn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Va(a)]=c}return i}(n,e,r,new fn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Pq(n,e,t){return t.some(r=>UD(n,e,r))}(n,t,r)){const c=new fn(n.segments,function Sq(n,e,t,r,i,a){const c={};for(const f of r)if(UD(n,t,f)&&!i[Va(f)]){const m=new fn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[Va(f)]=m}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new fn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function UD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function KO(n,e,t,r){return!!(Va(n)===r||r!==sn&&UD(e,t,n))&&("**"===n.path||FD(e,n,t).matched)}function YO(n,e,t){return 0===e.length&&!n.children[t]}class VD{constructor(e){this.segmentGroup=e||null}}class QO{constructor(e){this.urlTree=e}}function Mb(n){return cy(new VD(n))}function JO(n){return cy(new QO(n))}function kq(n){return cy(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class Oq{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=LD(this.urlTree.root,[],[],this.config).segmentGroup,t=new fn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,sn).pipe((0,dt.U)(a=>this.createUrlTree(kM(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sf(a=>{if(a instanceof QO)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof VD?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,sn).pipe((0,dt.U)(i=>this.createUrlTree(kM(i),e.queryParams,e.fragment))).pipe(sf(i=>{throw i instanceof VD?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new fn([],{[sn]:e}):e;return new Tg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(a=>new fn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,tn.D)(i).pipe(hy(a=>{const c=r.children[a],f=GO(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,dt.U)(m=>({segment:m,outlet:a})))}),lu((a,c)=>(a[c.outlet]=c.segment,a),{}),function I3(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mr((i,a)=>n(i,a,r)):Os.y,mM(1),t?Ns(e):Qu(()=>new Zi))}())}expandSegment(e,t,r,i,a,c){return(0,tn.D)(r).pipe(hy(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(sf(v=>{if(v instanceof VD)return ct(null);throw v}))),Fs(f=>!!f),sf((f,m)=>{if(f instanceof Zi||"EmptyError"===f.name)return YO(t,i,a)?ct(new fn([],{})):Mb(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return KO(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Mb(t):Mb(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?JO(a):this.lineralizeSegments(r,a).pipe((0,ts.z)(c=>{const f=new fn(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:I}=FD(t,i,a);if(!f)return Mb(t);const S=this.applyRedirectCommands(m,i.redirectTo,I);return i.redirectTo.startsWith("/")?JO(S):this.lineralizeSegments(i,S).pipe((0,ts.z)(O=>this.expandSegment(e,t,r,O.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return e=$O(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(S=>(r._loadedRoutes=S.routes,r._loadedInjector=S.injector,new fn(i,{})))):ct(new fn(i,{}));const{matched:c,consumedSegments:f,remainingSegments:m}=FD(t,r,i);return c?(e=$O(r,e),this.getChildConfig(e,r,i).pipe((0,ts.z)(I=>{const S=I.injector??e,O=I.routes,{segmentGroup:j,slicedSegments:Y}=LD(t,f,m,O),Ae=new fn(j.segments,j.children);if(0===Y.length&&Ae.hasChildren())return this.expandChildren(S,O,Ae).pipe((0,dt.U)(_t=>new fn(f,_t)));if(0===O.length&&0===Y.length)return ct(new fn(f,{}));const Le=Va(r)===a;return this.expandSegment(S,Ae,O,Y,Le?sn:a,!0).pipe((0,dt.U)(ft=>new fn(f.concat(ft.segments),ft.children)))}))):Mb(t)}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe((0,ts.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ns.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Rq(n){return cy(vM(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ct({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return ct(!0);const a=i.map(c=>{const f=e.get(c);let m;if(function Iq(n){return n&&af(n.canLoad)}(f))m=f.canLoad(t,r);else{if(!af(f))throw new Error("Invalid CanLoad guard");m=f(t,r)}return Pu(m)});return ct(a).pipe(xb(),(0,ns.b)(c=>{if(!Sg(c))return;const f=vM(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,dt.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ct(r);if(i.numberOfChildren>1||!i.children[sn])return kq(e.redirectTo);i=i.children[sn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Tg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return rs(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return rs(t.children,(f,m)=>{c[m]=this.createSegmentGroup(e,f,r,i)}),new fn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function kM(n){const e={};for(const r of Object.keys(n.children)){const a=kM(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Fq(n){if(1===n.numberOfChildren&&n.children[sn]){const e=n.children[sn];return new fn(n.segments.concat(e.segments),e.children)}return n}(new fn(n.segments,e))}class XO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class BD{constructor(e,t){this.component=e,this.route=t}}function Uq(n,e,t){const r=n._root;return Pb(r,e?e._root:null,t,[r.value])}function jD(n,e,t){return(zO(e)??t).get(n)}function Pb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=py(e);return n.children.forEach(c=>{(function Bq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function jq(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dg(n.url,e.url)||!Vl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TM(n,e)||!Vl(n.queryParams,e.queryParams);default:return!TM(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new XO(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Pb(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new BD(f.outlet.component,c))}else c&&kb(e,f,i),i.canActivateChecks.push(new XO(r)),Pb(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),rs(a,(c,f)=>kb(c,t.getContext(f),i)),i}function kb(n,e,t){const r=py(n),i=n.value;rs(r,(a,c)=>{kb(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new BD(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Yq{}function tF(n){return new zn.y(e=>e.error(n))}class Jq{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=LD(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,sn);if(null===t)return null;const r=new RD([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},sn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new od(r,t),a=new LO(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=FO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],f=GO(e,a),m=this.processSegmentGroup(f,c,a);if(null===m)return null;r.push(...m)}const i=nF(r);return function Xq(n){n.sort((e,t)=>e.value.outlet===sn?-1:t.value.outlet===sn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return YO(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!KO(e,t,r,i))return null;let a,c=[],f=[];if("**"===e.path){const j=r.length>0?CO(r).parameters:{},Y=iF(t)+r.length;a=new RD(r,j,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oF(e),Va(e),e.component??e._loadedComponent??null,e,rF(t),Y,aF(e),Y)}else{const j=FD(t,e,r);if(!j.matched)return null;c=j.consumedSegments,f=j.remainingSegments;const Y=iF(t)+c.length;a=new RD(c,j.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oF(e),Va(e),e.component??e._loadedComponent??null,e,rF(t),Y,aF(e),Y)}const m=function e6(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:v,slicedSegments:I}=LD(t,c,f,m.filter(j=>void 0===j.redirectTo),this.relativeLinkResolution);if(0===I.length&&v.hasChildren()){const j=this.processChildren(m,v);return null===j?null:[new od(a,j)]}if(0===m.length&&0===I.length)return[new od(a,[])];const S=Va(e)===i,O=this.processSegment(m,v,I,S?sn:i);return null===O?null:[new od(a,O)]}}function t6(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nF(n){const e=[],t=new Set;for(const r of n){if(!t6(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=nF(r.children);e.push(new od(r.value,i))}return e.filter(r=>!t.has(r))}function rF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function iF(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function oF(n){return n.data||{}}function aF(n){return n.resolve||{}}const RM=Symbol("RouteTitle");function uF(n){return"string"==typeof n.title||null===n.title}function NM(n){return bn(e=>{const t=n(e);return t?(0,tn.D)(t).pipe((0,dt.U)(()=>e)):ct(e)})}class c6 extends class l6{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const OM=new u.OlP("ROUTES");let FM=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Pu(t.loadComponent()).pipe((0,ns.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),_M(()=>{this.componentLoaders.delete(t)})),i=new gM(r,()=>new Mr.x).pipe(pM());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,I=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=bO(m.get(OM,[],u.XFs.Self|u.XFs.Optional)));return{routes:v.map(PM),injector:m}}),_M(()=>{this.childrenLoaders.delete(r)})),c=new gM(a,()=>new Mr.x).pipe(pM());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Pu(t()).pipe((0,ts.z)(r=>r instanceof u.YKP||Array.isArray(r)?ct(r):(0,tn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class h6{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function p6(n){throw n}function g6(n,e,t){return e.parse("/")}const m6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fi=(()=>{class n{constructor(t,r,i,a,c,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mr.x,this.errorHandler=p6,this.malformedUriErrorHandler=g6,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new h6,this.routeReuseStrategy=new c6,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(FM),this.configLoader.onLoadEndListener=O=>this.triggerEvent(new k3(O)),this.configLoader.onLoadStartListener=O=>this.triggerEvent(new P3(O)),this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const S=c.get(u.R0b);this.isNgZoneEnabled=S instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function j3(){return new Tg(new fn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=OO(this.currentUrlTree,this.rootComponentType),this.transitions=new Mu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(mr(i=>0!==i.id),(0,dt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),bn(i=>{let a=!1,c=!1;return ct(i).pipe((0,ns.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),bn(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return cF(f.source)&&(this.browserUrlTree=f.extractedUrl),ct(f).pipe(bn(S=>{const O=this.transitions.getValue();return r.next(new yM(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),O!==this.transitions.getValue()?dy.E:Promise.resolve(S)}),function Lq(n,e,t,r){return bn(i=>function Nq(n,e,t,r,i){return new Oq(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,dt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ns.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects}}),function n6(n,e,t,r,i){return(0,ts.z)(a=>function Qq(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new Jq(n,e,t,r,i,a).recognize();return null===c?tF(new Yq):ct(c)}catch(c){return tF(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,dt.U)(c=>({...a,targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ns.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(j,S)}this.browserUrlTree=S.urlAfterRedirects}const O=new D3(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(O)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:j,source:Y,restoredState:Ae,extras:Le}=f,st=new yM(O,this.serializeUrl(j),Y,Ae);r.next(st);const ft=OO(j,this.rootComponentType).snapshot;return ct({...f,targetSnapshot:ft,urlAfterRedirects:j,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),dy.E}),(0,ns.b)(f=>{const m=new A3(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,dt.U)(f=>({...f,guards:Uq(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function qq(n,e){return(0,ts.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?ct({...t,guardsResult:!0}):function Zq(n,e,t,r){return(0,tn.D)(n).pipe((0,ts.z)(i=>function Kq(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ct(a.map(f=>{const m=jD(f,e,i);let v;if(function Aq(n){return n&&af(n.canDeactivate)}(m))v=Pu(m.canDeactivate(n,e,t,r));else{if(!af(m))throw new Error("Invalid CanDeactivate guard");v=Pu(m(n,e,t,r))}return v.pipe(Fs())})).pipe(xb()):ct(!0)}(i.component,i.route,t,e,r)),Fs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ts.z)(f=>f&&function Eq(n){return"boolean"==typeof n}(f)?function Hq(n,e,t,r){return(0,tn.D)(e).pipe(hy(i=>Bf(function Gq(n,e){return null!==n&&e&&e(new R3(n)),ct(!0)}(i.route.parent,r),function $q(n,e){return null!==n&&e&&e(new O3(n)),ct(!0)}(i.route,r),function Wq(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Vq(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>AD(()=>ct(c.guards.map(m=>{const v=jD(m,c.node,t);let I;if(function Dq(n){return n&&af(n.canActivateChild)}(v))I=Pu(v.canActivateChild(r,n));else{if(!af(v))throw new Error("Invalid CanActivateChild guard");I=Pu(v(r,n))}return I.pipe(Fs())})).pipe(xb())));return ct(a).pipe(xb())}(n,i.path,t),function zq(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const i=r.map(a=>AD(()=>{const c=jD(a,e,t);let f;if(function Tq(n){return n&&af(n.canActivate)}(c))f=Pu(c.canActivate(e,n));else{if(!af(c))throw new Error("Invalid CanActivate guard");f=Pu(c(e,n))}return f.pipe(Fs())}));return ct(i).pipe(xb())}(n,i.route,t))),Fs(i=>!0!==i,!0))}(r,a,n,e):ct(f)),(0,dt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,ns.b)(f=>{if(Sg(f.guardsResult)){const v=vM(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw v.url=f.guardsResult,v}const m=new S3(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),mr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),NM(f=>{if(f.guards.canActivateChecks.length)return ct(f).pipe((0,ns.b)(m=>{const v=new x3(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),bn(m=>{let v=!1;return ct(m).pipe(function r6(n,e){return(0,ts.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ct(t);let a=0;return(0,tn.D)(i).pipe(hy(c=>function i6(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!uF(i)&&(a[RM]=i.title),function s6(n,e,t,r){const i=function o6(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ct({});const a={};return(0,tn.D)(i).pipe((0,ts.z)(c=>function a6(n,e,t,r){const i=jD(n,e,r);return Pu(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe(Fs(),(0,ns.b)(f=>{a[c]=f}))),mM(1),mO(a),sf(c=>c instanceof Zi?dy.E:cy(c)))}(a,n,e,r).pipe((0,dt.U)(c=>(n._resolvedData=c,n.data=FO(n,t).resolve,i&&uF(i)&&(n.data[RM]=i.title),null)))}(c.route,r,n,e)),(0,ns.b)(()=>a++),mM(1),(0,ts.z)(c=>a===i.length?ct(t):dy.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ns.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,ns.b)(m=>{const v=new M3(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),NM(()=>this.afterPreactivation()),NM(f=>{const m=v=>{const I=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,ns.b)(S=>{v.component=S}),(0,dt.U)(()=>{})));for(const S of v.children)I.push(...m(S));return I};return fO(m(f.targetSnapshot.root)).pipe(Ns(),(0,Lr.q)(1))}),(0,dt.U)(f=>{const m=function sq(n,e,t){const r=Tb(n,e._root,t?t._root:void 0);return new NO(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return{...f,targetRouterState:m}}),(0,ns.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new Cq(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,ns.b)({next(){a=!0},complete(){a=!0}}),_M(()=>{a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),sf(f=>{if(c=!0,function U3(n){return n&&n[vO]}(f)){const m=Sg(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new _O(i.id,this.serializeUrl(i.extractedUrl),f.message);if(r.next(v),m){const I=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cF(i.source)};this.scheduleNavigation(I,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new T3(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return dy.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(PM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,I=m?this.currentUrlTree.fragment:c;let S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function uq(n,e,t,r,i){if(0===t.length)return DM(e.root,e.root,e.root,r,i);const a=function lq(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new BO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return rs(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new BO(t,e,r)}(t);return a.toRoot()?DM(e.root,e.root,new fn([],{}),r,i):function c(m){const v=function cq(n,e,t,r){return n.isAbsolute?new AM(e.root,!0,0):-1===r?new AM(t,t===e.root,0):function dq(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new AM(r,!1,i-a)}(t,r+(ND(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),I=v.processChildren?OD(v.segmentGroup,v.index,a.commands):jO(v.segmentGroup,v.index,a.commands);return DM(e.root,v.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}(v,this.currentUrlTree,t,S,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function y6(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...m6}:!1===r?{..._6}:r,Sg(t))return IO(this.currentUrlTree,t,i);const a=this.parseUrl(t);return IO(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Cb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,m,v;c?(f=c.resolve,m=c.reject,v=c.promise):v=new Promise((O,j)=>{f=O,m=j});const I=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:I,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new _O(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function cF(n){return"imperative"!==n}let Rb=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Mr.x,this.subscription=t.events.subscribe(a=>{a instanceof Cb&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:(0,u.D6c)(this.skipLocationChange),replaceUrl:(0,u.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,u.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Fi),u.Y36(Ag),u.Y36(he))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();class dF{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===sn);return t}getResolvedTitleForRoute(e){return e.data[RM]}}let b6=(()=>{class n extends dF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bd))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hF{}class fF{preload(e,t){return ct(null)}}let pF=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(mr(t=>t instanceof Cb),hy(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,u.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,tn.D)(i).pipe((0,Kd.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const a=i.pipe((0,ts.z)(c=>null===c?ct(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,tn.D)([a,c]).pipe((0,Kd.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fi),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(hF),u.LFG(FM))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),UM=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cb&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new yO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const xg=new u.OlP("ROUTER_CONFIGURATION"),gF=new u.OlP("ROUTER_FORROOT_GUARD"),E6=[Ne,{provide:SO,useClass:xO},{provide:Fi,useFactory:function S6(n,e,t,r,i,a,c={},f,m,v,I){const S=new Fi(null,n,e,t,r,i,bO(a));return v&&(S.urlHandlingStrategy=v),I&&(S.routeReuseStrategy=I),S.titleStrategy=m??f,function x6(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,S),S},deps:[SO,Ab,Ne,u.zs3,u.Sil,OM,xg,b6,[dF,new u.FiY],[class d6{},new u.FiY],[class u6{},new u.FiY]]},Ab,{provide:Ag,useFactory:function M6(n){return n.routerState.root},deps:[Fi]},pF,fF,class C6{preload(e,t){return t().pipe(sf(()=>ct(null)))}},{provide:xg,useValue:{enableTracing:!1}},FM];function I6(){return new u.PXZ("Router",Fi)}let mF=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[E6,_F(t),{provide:gF,useFactory:A6,deps:[[Fi,new u.FiY,new u.tp0]]},{provide:xg,useValue:r||{}},{provide:he,useFactory:D6,deps:[H,[new u.tBr(Re),new u.FiY],xg]},{provide:UM,useFactory:T6,deps:[Fi,ju,xg]},{provide:hF,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:fF},{provide:u.PXZ,multi:!0,useFactory:I6},[VM,{provide:u.ip1,multi:!0,useFactory:P6,deps:[VM]},{provide:yF,useFactory:k6,deps:[VM]},{provide:u.tb,multi:!0,useExisting:yF}]]}}static forChild(t){return{ngModule:n,providers:[_F(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gF,8),u.LFG(Fi,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function T6(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new UM(n,e,t)}function D6(n,e,t={}){return t.useHash?new xe(n,e):new Me(n,e)}function A6(n){return"guarded"}function _F(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:OM,multi:!0,useValue:n}]}let VM=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mr.x}appInitializer(){return this.injector.get(Z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(Fi),c=this.injector.get(xg);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===c.initialNavigation?(a.afterPreactivation=()=>this.initNavigation?ct(void 0):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(xg),i=this.injector.get(pF),a=this.injector.get(UM),c=this.injector.get(Fi),f=this.injector.get(u.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(void 0),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function P6(n){return n.appInitializer.bind(n)}function k6(n){return n.bootstrapListener.bind(n)}const yF=new u.OlP("Router Initializer");class vF{}class wF{}class ad{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ad?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ad;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ad?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===a.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class N6{encodeKey(e){return bF(e)}encodeValue(e){return bF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const F6=/%(\d[a-f0-9])/gi,L6={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bF(n){return encodeURIComponent(n).replace(F6,(e,t)=>L6[t]??e)}function qD(n){return`${n}`}class uf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new N6,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function O6(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(c)||[];m.push(f),t.set(c,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(qD):[qD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new uf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(qD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class U6{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function CF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function EF(n){return typeof Blob<"u"&&n instanceof Blob}function IF(n){return typeof FormData<"u"&&n instanceof FormData}class Nb{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function V6(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ad),this.context||(this.context=new U6),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new uf,this.urlWithParams=t}serializeBody(){return null===this.body?null:CF(this.body)||EF(this.body)||IF(this.body)||function B6(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof uf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IF(this.body)?null:EF(this.body)?this.body.type||null:CF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof uf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,O)=>S.set(O,e.setHeaders[O]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,O)=>S.set(O,e.setParams[O]),v)),new Nb(t,r,a,{params:v,headers:m,context:I,reportProgress:f,responseType:i,withCredentials:c})}}var di=(()=>((di=di||{})[di.Sent=0]="Sent",di[di.UploadProgress=1]="UploadProgress",di[di.ResponseHeader=2]="ResponseHeader",di[di.DownloadProgress=3]="DownloadProgress",di[di.Response=4]="Response",di[di.User=5]="User",di))();class BM{constructor(e,t=200,r="OK"){this.headers=e.headers||new ad,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class jM extends BM{constructor(e={}){super(e),this.type=di.ResponseHeader}clone(e={}){return new jM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ZD extends BM{constructor(e={}){super(e),this.type=di.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ZD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class TF extends BM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function qM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let DF=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Nb)a=t;else{let m,v;m=i.headers instanceof ad?i.headers:new ad(i.headers),i.params&&(v=i.params instanceof uf?i.params:new uf({fromObject:i.params})),a=new Nb(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=ct(a).pipe(hy(m=>this.handler.handle(m)));if(t instanceof Nb||"events"===i.observe)return c;const f=c.pipe(mr(m=>m instanceof ZD));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,dt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,dt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,dt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,dt.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new uf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,qM(i,r))}post(t,r,i={}){return this.request("POST",t,qM(i,r))}put(t,r,i={}){return this.request("PUT",t,qM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vF))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class AF{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const SF=new u.OlP("HTTP_INTERCEPTORS");let j6=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const q6=/^\)\]\}',?\n/;let xF=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((j,Y)=>i.setRequestHeader(j,Y.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const j=t.detectContentTypeHeader();null!==j&&i.setRequestHeader("Content-Type",j)}if(t.responseType){const j=t.responseType.toLowerCase();i.responseType="json"!==j?j:"text"}const a=t.serializeBody();let c=null;const f=()=>{if(null!==c)return c;const j=i.statusText||"OK",Y=new ad(i.getAllResponseHeaders()),Ae=function Z6(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new jM({headers:Y,status:i.status,statusText:j,url:Ae}),c},m=()=>{let{headers:j,status:Y,statusText:Ae,url:Le}=f(),st=null;204!==Y&&(st=typeof i.response>"u"?i.responseText:i.response),0===Y&&(Y=st?200:0);let ft=Y>=200&&Y<300;if("json"===t.responseType&&"string"==typeof st){const _t=st;st=st.replace(q6,"");try{st=""!==st?JSON.parse(st):null}catch(pt){st=_t,ft&&(ft=!1,st={error:pt,text:st})}}ft?(r.next(new ZD({body:st,headers:j,status:Y,statusText:Ae,url:Le||void 0})),r.complete()):r.error(new TF({error:st,headers:j,status:Y,statusText:Ae,url:Le||void 0}))},v=j=>{const{url:Y}=f(),Ae=new TF({error:j,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Y||void 0});r.error(Ae)};let I=!1;const S=j=>{I||(r.next(f()),I=!0);let Y={type:di.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(Y.total=j.total),"text"===t.responseType&&!!i.responseText&&(Y.partialText=i.responseText),r.next(Y)},O=j=>{let Y={type:di.UploadProgress,loaded:j.loaded};j.lengthComputable&&(Y.total=j.total),r.next(Y)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",O)),i.send(a),r.next({type:di.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",O)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(On))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ZM=new u.OlP("XSRF_COOKIE_NAME"),HM=new u.OlP("XSRF_HEADER_NAME");class MF{}let H6=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ru(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(W),u.LFG(u.Lbi),u.LFG(ZM))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),$M=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(MF),u.LFG(HM))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),$6=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(SF,[]);this.chain=r.reduceRight((i,a)=>new AF(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wF),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),G6=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:$M,useClass:j6}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ZM,useValue:t.cookieName}:[],t.headerName?{provide:HM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[$M,{provide:SF,useExisting:$M,multi:!0},{provide:MF,useClass:H6},{provide:ZM,useValue:"XSRF-TOKEN"},{provide:HM,useValue:"X-XSRF-TOKEN"}]}),n})(),z6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[DF,{provide:vF,useClass:$6},xF,{provide:wF,useExisting:xF}],imports:[G6.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),W6=(()=>{class n{constructor(t){this.httpClient=t,this.url="http://localhost:3000/send"}send(t){return this.httpClient.post(this.url,{name:t.name,lastname:t.lastname,address:t.address,email:t.email,phone:t.phone,message:t.message})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(DF))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Mg=(()=>{class n extends PF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Bl=new u.OlP("NgValueAccessor"),Q6={provide:Bl,useExisting:(0,u.Gpc)(()=>lf),multi:!0},X6=new u.OlP("CompositionEventMode");let lf=(()=>{class n extends PF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function J6(){const n=D()?D().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(X6,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([Q6]),u.qOj]}),n})();function cf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function RF(n){return null!=n&&"number"==typeof n.length}const Ts=new u.OlP("NgValidators"),df=new u.OlP("NgAsyncValidators"),eZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class is{static min(e){return NF(e)}static max(e){return OF(e)}static required(e){return FF(e)}static requiredTrue(e){return function LF(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function UF(n){return cf(n.value)||eZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function VF(n){return e=>cf(e.value)||!RF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return BF(e)}static pattern(e){return function jF(n){if(!n)return HD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(cf(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return zF(e)}static composeAsync(e){return WF(e)}}function NF(n){return e=>{if(cf(e.value)||cf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function OF(n){return e=>{if(cf(e.value)||cf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function FF(n){return cf(n.value)?{required:!0}:null}function BF(n){return e=>RF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function HD(n){return null}function qF(n){return null!=n}function ZF(n){const e=(0,u.QGY)(n)?(0,tn.D)(n):n;return(0,u.CqO)(e),e}function HF(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function $F(n,e){return e.map(t=>t(n))}function GF(n){return n.map(e=>function tZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function zF(n){if(!n)return null;const e=n.filter(qF);return 0==e.length?null:function(t){return HF($F(t,e))}}function GM(n){return null!=n?zF(GF(n)):null}function WF(n){if(!n)return null;const e=n.filter(qF);return 0==e.length?null:function(t){return function K6(...n){const e=(0,wn.jO)(n),{args:t,keys:r}=dO(n),i=new zn.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let m=c,v=c;for(let I=0;I<c;I++){let S=!1;(0,Ho.Xf)(t[I]).subscribe((0,yn.x)(a,O=>{S||(S=!0,v--),f[I]=O},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?hO(r,f):f),a.complete())}))}});return e?i.pipe(fM(e)):i}($F(t,e).map(ZF)).pipe((0,dt.U)(HF))}}function zM(n){return null!=n?WF(GF(n)):null}function KF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function YF(n){return n._rawValidators}function QF(n){return n._rawAsyncValidators}function WM(n){return n?Array.isArray(n)?n:[n]:[]}function $D(n,e){return Array.isArray(n)?n.includes(e):n===e}function JF(n,e){const t=WM(e);return WM(n).forEach(i=>{$D(t,i)||t.push(i)}),t}function XF(n,e){return WM(e).filter(t=>!$D(n,t))}class eL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ks extends eL{get formDirective(){return null}get path(){return null}}class hf extends eL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let gy=(()=>{class n extends tL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hf,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]}),n})(),Ob=(()=>{class n extends tL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ks,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]}),n})();const Fb="VALID",zD="INVALID",my="PENDING",Lb="DISABLED";function JM(n){return(WD(n)?n.validators:n)||null}function rL(n){return Array.isArray(n)?GM(n):n||null}function XM(n,e){return(WD(e)?e.asyncValidators:n)||null}function iL(n){return Array.isArray(n)?zM(n):n||null}function WD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class aL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=rL(this._rawValidators),this._composedAsyncValidatorFn=iL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fb}get invalid(){return this.status===zD}get pending(){return this.status==my}get disabled(){return this.status===Lb}get enabled(){return this.status!==Lb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=rL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=iL(e)}addValidators(e){this.setValidators(JF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XF(e,this._rawAsyncValidators))}hasValidator(e){return $D(this._rawValidators,e)}hasAsyncValidator(e){return $D(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=my,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lb,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fb||this.status===my)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lb:Fb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=my,this._hasOwnPendingAsyncValidator=!0;const t=ZF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Lb:this.errors?zD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(my)?my:this._anyControlsHaveStatus(zD)?zD:Fb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){WD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ub extends aL{constructor(e,t,r){super(JM(t),XM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function oL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function sL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function KD(n,e){return[...e.path,n]}function Vb(n,e){eP(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function cZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&uL(n,e)})}(n,e),function hZ(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&uL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lZ(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function YD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),JD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function QD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function eP(n,e){const t=YF(n);null!==e.validator?n.setValidators(KF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=QF(n);null!==e.asyncValidator?n.setAsyncValidators(KF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();QD(e._rawValidators,i),QD(e._rawAsyncValidators,i)}function JD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=YF(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=QF(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return QD(e._rawValidators,r),QD(e._rawAsyncValidators,r),t}function uL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function lL(n,e){eP(n,e)}function tP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function dL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===lf?t=a:function gZ(n){return Object.getPrototypeOf(n.constructor)===Mg}(a)?r=a:i=a}),i||r||t||null}const _Z={provide:Ks,useExisting:(0,u.Gpc)(()=>jb)},Bb=(()=>Promise.resolve(null))();let jb=(()=>{class n extends Ks{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Ub({},GM(t),zM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bb.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Vb(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bb.then(()=>{const r=this._findContainer(t.path),i=new Ub({});lL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bb.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bb.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,dL(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ts,10),u.Y36(df,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([_Z]),u.qOj]}),n})();function hL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function fL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ds=class extends aL{constructor(e=null,t,r){super(JM(t),XM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),WD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=fL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},wZ={provide:hf,useExisting:(0,u.Gpc)(()=>qb)},mL=(()=>Promise.resolve(null))();let qb=(()=>{class n extends hf{constructor(t,r,i,a,c){super(),this._changeDetectorRef=c,this.control=new Ds,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nP(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tP(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.D6c)(r);mL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?KD(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ks,9),u.Y36(Ts,10),u.Y36(df,10),u.Y36(Bl,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([wZ]),u.qOj,u.TTD]}),n})(),Zb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const bZ={provide:Bl,useExisting:(0,u.Gpc)(()=>rP),multi:!0};let rP=(()=>{class n extends Mg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([bZ]),u.qOj]}),n})(),_L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const iP=new u.OlP("NgModelWithFormControlWarning"),DZ={provide:Ks,useExisting:(0,u.Gpc)(()=>Hb)};let Hb=(()=>{class n extends Ks{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(JD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Vb(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){YD(t.control||null,t,!1),function mZ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,dL(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(YD(r||null,t),(n=>n instanceof Ds)(i)&&(Vb(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);lL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function fZ(n,e){return JD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eP(this.form,this),this._oldForm&&JD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ts,10),u.Y36(df,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([DZ]),u.qOj,u.TTD]}),n})();const xZ={provide:hf,useExisting:(0,u.Gpc)(()=>XD)};let XD=(()=>{class n extends hf{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nP(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),tP(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return KD(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(Ks,13),u.Y36(Ts,10),u.Y36(df,10),u.Y36(Bl,10),u.Y36(iP,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([xZ]),u.qOj,u.TTD]}),n})();const MZ={provide:Bl,useExisting:(0,u.Gpc)(()=>eA),multi:!0};function CL(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let eA=(()=>{class n extends Mg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=CL(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function PZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([MZ]),u.qOj]}),n})(),EL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(CL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(eA,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const kZ={provide:Bl,useExisting:(0,u.Gpc)(()=>aP),multi:!0};function IL(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let aP=(()=>{class n extends Mg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,c)=>{a._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const c=a;for(let f=0;f<c.length;f++){const v=this._getOptionValue(c[f].value);i.push(v)}}else{const c=r.options;for(let f=0;f<c.length;f++){const m=c[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function RZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([kZ]),u.qOj]}),n})(),TL=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(IL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(IL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(aP,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function AL(n){return"number"==typeof n?n:parseFloat(n)}let Pg=(()=>{class n{constructor(){this._validator=HD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):HD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const NZ={provide:Ts,useExisting:(0,u.Gpc)(()=>uP),multi:!0};let uP=(()=>{class n extends Pg{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>AL(t),this.createValidator=t=>OF(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[u._Bn([NZ]),u.qOj]}),n})();const OZ={provide:Ts,useExisting:(0,u.Gpc)(()=>lP),multi:!0};let lP=(()=>{class n extends Pg{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>AL(t),this.createValidator=t=>NF(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[u._Bn([OZ]),u.qOj]}),n})();const FZ={provide:Ts,useExisting:(0,u.Gpc)(()=>tA),multi:!0};let tA=(()=>{class n extends Pg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.D6c,this.createValidator=t=>FF}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([FZ]),u.qOj]}),n})();const BZ={provide:Ts,useExisting:(0,u.Gpc)(()=>nA),multi:!0};let nA=(()=>{class n extends Pg{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function DL(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>BF(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[u._Bn([BZ]),u.qOj]}),n})(),kL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[_L]}),n})(),qZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[kL]}),n})(),ZZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iP,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[kL]}),n})(),GZ=(()=>{class n{constructor(t){this.envioCorreo=t,this.objuser={name:"",lastname:"",email:"",phone:"",message:"",address:""},this.nombre="holaholahola"}ngOnInit(){}onSubmit(){this.envioCorreo.send(this.objuser).subscribe(t=>{console.log("response from POST API is ",t)},t=>{console.log("error during post is ",t)}),this.objuser.name="",this.objuser.lastname="",this.objuser.email="",this.objuser.phone="",this.objuser.message="El mensaje ha sido enviado, gracias por comunicarse con nosotros!",this.objuser.address=""}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(W6))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-contacto"]],decls:38,vars:5,consts:[[1,"container"],[1,"brand"],[1,"wrapper","animated","bounceInLeft"],[1,"company-info"],["src","/assets/img/wigglypuff.png","alt","",1,"bola"],[1,"contact"],[3,"ngSubmit"],["useForm","ngForm"],[1,"form-group"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","text","name","lastname",3,"ngModel","ngModelChange"],["type","email","name","email",3,"ngModel","ngModelChange"],["type","text","name","phone",3,"ngModel","ngModelChange"],[1,"full","form-group"],["name","message","rows","5",3,"ngModel","ngModelChange"],[1,"full"],["type","submit",1,"submit"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"h1",1)(2,"span"),u._uU(3,"Pok\xe9"),u.qZA(),u._uU(4,"mon Unite"),u.qZA(),u.TgZ(5,"div",2)(6,"div",3)(7,"h3"),u._uU(8,"Comparte con nosotros tus comentarios, dudas y sugerencias!"),u.qZA(),u._UZ(9,"img",4),u.qZA(),u.TgZ(10,"div",5)(11,"h3"),u._uU(12,"Cont\xe1ctanos"),u.qZA(),u.TgZ(13,"form",6,7),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(15,"div",8)(16,"label"),u._uU(17,"Nombre"),u.qZA(),u.TgZ(18,"input",9),u.NdJ("ngModelChange",function(a){return r.objuser.name=a}),u.qZA()(),u.TgZ(19,"div",8)(20,"label"),u._uU(21,"Apellido"),u.qZA(),u.TgZ(22,"input",10),u.NdJ("ngModelChange",function(a){return r.objuser.lastname=a}),u.qZA()(),u.TgZ(23,"div",8)(24,"label"),u._uU(25,"Correo Electronico"),u.qZA(),u.TgZ(26,"input",11),u.NdJ("ngModelChange",function(a){return r.objuser.email=a}),u.qZA()(),u.TgZ(27,"div",8)(28,"label"),u._uU(29,"Numero telefonico"),u.qZA(),u.TgZ(30,"input",12),u.NdJ("ngModelChange",function(a){return r.objuser.phone=a}),u.qZA()(),u.TgZ(31,"div",13)(32,"label"),u._uU(33,"Mensaje"),u.qZA(),u.TgZ(34,"textarea",14),u.NdJ("ngModelChange",function(a){return r.objuser.message=a}),u.qZA()(),u.TgZ(35,"div",15)(36,"button",16),u._uU(37,"Enviar"),u.qZA()()()()()()),2&t&&(u.xp6(18),u.Q6J("ngModel",r.objuser.name),u.xp6(4),u.Q6J("ngModel",r.objuser.lastname),u.xp6(4),u.Q6J("ngModel",r.objuser.email),u.xp6(4),u.Q6J("ngModel",r.objuser.phone),u.xp6(4),u.Q6J("ngModel",r.objuser.message))},dependencies:[Zb,lf,gy,Ob,qb,jb],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background:#8136e5;color:#534874;line-height:1.6;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;padding:1em}.container[_ngcontent-%COMP%]{max-width:1170px;margin-left:auto;margin-right:auto;padding:1em}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.brand[_ngcontent-%COMP%]{text-align:center;color:pink;text-shadow:2px 2px 3px black}.brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.wrapper[_ngcontent-%COMP%]{box-shadow:0 0 20px #5a4874b3}.wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:1em}.company-info[_ngcontent-%COMP%]{background:#e3c9ff}.company-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .company-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-align:center;margin:0 0 1rem}.contact[_ngcontent-%COMP%]{background:#fcf9ff}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:20px}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{grid-column:1 / 3}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1em;border:1px solid #e3c9ff}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#dac9ff;border:0;text-transform:uppercase}.contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .contact[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:#b092e7;color:#fff;outline:0;transition:background-color 2s ease-out}@media (min-width:1000px){.wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr}.wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:2em}.company-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .company-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .brand[_ngcontent-%COMP%]{text-align:justify}.bola[_ngcontent-%COMP%]{width:250px}}@media (max-width:1000px){.bola[_ngcontent-%COMP%]{width:130px}.company-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .company-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .brand[_ngcontent-%COMP%]{text-align:center}.company-info[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}}"]}),n})();var RL=M(2309);let kg=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.aviso="",this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{localStorage.setItem("failLogin",""),this.router.navigate(["/home"]).then(()=>{window.location.reload()})}),this.SetUserData(i.user)}).catch(i=>{localStorage.setItem("failLogin","Datos incorrectos"),console.log(i.message)})}SignUp(t,r,i,a){return this.afAuth.createUserWithEmailAndPassword(r,i).then(c=>{this.SetUserData(c.user),this.usuario=(0,RL.n)(),(0,RL.af)(this.usuario.currentUser,{displayName:t,photoURL:a}),this.router.navigate(["home"])}).catch(c=>{console.log(c.message)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ww),u.LFG(Ea),u.LFG(Fi),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var cP=M(5876);const zZ=["qrcElement"];let WZ=(()=>{class n{constructor(t,r){this.renderer=t,this.sanitizer=r,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new u.vpe,this.context=null}ngOnChanges(){var t=this;return(0,Se.Z)(function*(){yield t.createQRCode()})()}isValidQrCodeText(t){return!1===this.allowEmptyString?!(typeof t>"u"||""===t||"null"===t||null===t):!(typeof t>"u")}toDataURL(t){return new Promise((r,i)=>{cP.hz(this.qrdata,t,(a,c)=>{a?i(a):r(c)})})}toCanvas(t,r){return new Promise((i,a)=>{cP.rT(t,this.qrdata,r,c=>{c?a(c):i("success")})})}toSVG(t){return new Promise((r,i)=>{cP.toString(this.qrdata,t,(a,c)=>{a?i(a):r(c)})})}renderElement(t){for(const r of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,r);this.renderer.appendChild(this.qrcElement.nativeElement,t)}createQRCode(){var t=this;return(0,Se.Z)(function*(){t.version&&t.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),t.version=40):t.version&&t.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),t.version=1):void 0!==t.version&&isNaN(t.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),t.version=void 0);try{if(!t.isValidQrCodeText(t.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");t.isValidQrCodeText(t.qrdata)&&""===t.qrdata&&(t.qrdata=" ");const r={color:{dark:t.colorDark,light:t.colorLight},errorCorrectionLevel:t.errorCorrectionLevel,margin:t.margin,scale:t.scale,type:t.elementType,version:t.version,width:t.width},i=t.imageSrc,a=t.imageHeight||40,c=t.imageWidth||40;switch(t.elementType){case"canvas":const f=t.renderer.createElement("canvas");t.context=f.getContext("2d"),t.toCanvas(f,r).then(()=>{if(t.ariaLabel&&t.renderer.setAttribute(f,"aria-label",`${t.ariaLabel}`),t.title&&t.renderer.setAttribute(f,"title",`${t.title}`),i&&t.context){t.centerImage=new Image(c,a),i!==t.centerImage.src&&(t.centerImage.src=i),a!==t.centerImage.height&&(t.centerImage.height=a),c!==t.centerImage.width&&(t.centerImage.width=c);const I=t.centerImage;I&&(I.onload=()=>{t.context?.drawImage(I,f.width/2-c/2,f.height/2-a/2,c,a)})}t.renderElement(f),t.emitQRCodeURL(f)}).catch(I=>{console.error("[angularx-qrcode] canvas error:",I)});break;case"svg":const m=t.renderer.createElement("div");t.toSVG(r).then(I=>{t.renderer.setProperty(m,"innerHTML",I);const S=m.firstChild;t.renderer.setAttribute(S,"height",`${t.width}`),t.renderer.setAttribute(S,"width",`${t.width}`),t.renderElement(S),t.emitQRCodeURL(S)}).catch(I=>{console.error("[angularx-qrcode] svg error:",I)});break;default:const v=t.renderer.createElement("img");t.toDataURL(r).then(I=>{t.alt&&v.setAttribute("alt",t.alt),t.ariaLabel&&v.setAttribute("aria-label",t.ariaLabel),v.setAttribute("src",I),t.title&&v.setAttribute("title",t.title),t.renderElement(v),t.emitQRCodeURL(v)}).catch(I=>{console.error("[angularx-qrcode] img/url error:",I)})}}catch(r){console.error("[angularx-qrcode] Error generating QR Code:",r.message)}})()}emitQRCodeURL(t){const r=t.constructor.name;if(r===SVGSVGElement.name){const c=new Blob([t.outerHTML],{type:"image/svg+xml"}),f=URL.createObjectURL(c),m=this.sanitizer.bypassSecurityTrustUrl(f);return void this.qrCodeURL.emit(m)}let i="";r===HTMLCanvasElement.name&&(i=t.toDataURL("image/png")),r===HTMLImageElement.name&&(i=t.src),fetch(i).then(a=>a.blob()).then(a=>URL.createObjectURL(a)).then(a=>this.sanitizer.bypassSecurityTrustUrl(a)).then(a=>{this.qrCodeURL.emit(a)}).catch(a=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+a)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(Td))},n.\u0275cmp=u.Xpm({type:n,selectors:[["qrcode"]],viewQuery:function(t,r){if(1&t&&u.Gf(zZ,7),2&t){let i;u.iGM(i=u.CRH())&&(r.qrcElement=i.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[u.TTD],decls:2,vars:2,consts:[["qrcElement",""]],template:function(t,r){1&t&&u._UZ(0,"div",null,0),2&t&&u.Tol(r.cssClass)},encapsulation:2,changeDetection:0}),n})(),KZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[]}),n})(),ff=(()=>{class n{constructor(t){this.firestore=t}getPokemones(){return this.firestore.collection("pokemones").snapshotChanges()}getPokemon(t){return this.firestore.collection("pokemones").doc(t).snapshotChanges()}getColeccion(){return this.firestore.collection("pokemones")}getUsuarios(){return this.firestore.collection("users").snapshotChanges()}getUsuario(t){return this.firestore.collection("users").doc(t).snapshotChanges()}createPokemon(t){return this.firestore.collection("pokemones").add(t)}updatePokemon(t,r){return this.firestore.collection("pokemones").doc(t).set(r)}deletePokemon(t){return this.firestore.collection("pokemones").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ww))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YZ=(()=>{class n{constructor(t){this.firestoreService=t,this.Pnombre="",this.Purl="",this.Patq=0,this.Pspa=0,this.Pdef=0,this.Pspe=0,this.Ptip="",this.advice="",this.pokemones=[],this.existente=!1,this.newPokemonForm=new Ub({nombre:new Ds("",is.required),tipo:new Ds("",is.required),foto:new Ds("",is.required),info:new Ds("",is.required),ataque:new Ds("",is.required),especial:new Ds("",is.required),defensa:new Ds("",is.required),velocidad:new Ds("",is.required),id:new Ds("")})}ngOnInit(){this.newPokemonForm.setValue({id:"",nombre:"",tipo:"",info:"",foto:"",ataque:"",especial:"",defensa:"",velocidad:""}),this.advice="",document.getElementById("aviso").hidden=!0,this.firestoreService.getPokemones().subscribe(t=>{this.pokemones=[],t.forEach(r=>{this.pokemones.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}newPokemon(t){for(let r of this.pokemones)this.Pnombre="",this.Pnombre=r.data.nombre,this.Pnombre==t.nombre&&(this.existente=!0);1!=this.existente?this.firestoreService.createPokemon({nombre:t.nombre,tipo:t.tipo,info:t.info,foto:t.foto,ataque:t.ataque,especial:t.especial,defensa:t.defensa,velocidad:t.velocidad}).then(()=>{this.advice="Pokem\xf3n registrado exitosamente!",document.getElementById("aviso").hidden=!1,document.getElementById("aviso").value=this.advice,console.log("Documento creado exitosamente!"),this.newPokemonForm.setValue({id:"",nombre:"",tipo:"",info:"",foto:"",ataque:"",especial:"",defensa:"",velocidad:""}),setTimeout(()=>window.location.reload(),3e3)},i=>{console.error(i)}):(this.advice="Ya existe un pokemon con ese nombre",document.getElementById("aviso").hidden=!1,document.getElementById("aviso").value=this.advice,setTimeout(()=>window.location.reload(),3e3),this.existente=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-pokemon-form"]],decls:62,vars:4,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#ModalPokemon",1,"btn","btn-warning"],["id","ModalPokemon","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","cerrar","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["align","center",1,"col-xs-1",3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],[1,"formh5"],["formControlName","nombre","id","nombref","type","text",1,"form-control"],[1,"d-flex","justify-content-evenly"],["formControlName","ataque","type","number","id","atqf","name","points","step","1","min","0","max","100","value","0",1,"form-control"],["formControlName","especial","type","number","id","spaf","name","points","step","1","min","0","max","100","value","0",1,"form-control"],["formControlName","defensa","type","number","id","deff","name","points","step","1","min","0","max","100","value","0",1,"form-control"],["formControlName","velocidad","type","number","id","spef","name","points","step","1","min","0","max","100","value","0",1,"form-control"],["formControlName","tipo","id","tipof","aria-label","Default select example",1,"form-select"],["value","Ofensivo"],["value","Defensivo"],["value","Apoyo"],["value","Agil"],["value","Equilibrado"],["rows","5","cols","70","type","text","formControlName","info","id","infof",1,"form-control"],["type","url","formControlName","foto","id","urlf",1,"form-control"],["role","alert","id","aviso","hidden","",1,"formh5","alert","alert-primary"],["type","submit","id","addBtn",1,"btn","btn-outline-info",3,"disabled","value"],[1,"modal-footer"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1," A\xf1adir Pokemon\n"),u.qZA(),u.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h5",5),u._uU(7,"Registrar Nuevo Pokemon"),u.qZA(),u._UZ(8,"button",6),u.qZA(),u.TgZ(9,"div",7)(10,"form",8),u.NdJ("ngSubmit",function(){return r.newPokemon(r.newPokemonForm.value)}),u._UZ(11,"input",9),u.TgZ(12,"div",10)(13,"h5"),u._uU(14,"Nombre del pokem\xf3n"),u.qZA(),u._UZ(15,"input",11),u.qZA(),u.TgZ(16,"div",12)(17,"div")(18,"h5"),u._uU(19,"Attack"),u.qZA(),u._UZ(20,"input",13),u.qZA(),u.TgZ(21,"div")(22,"h5"),u._uU(23,"Special"),u.qZA(),u._UZ(24,"input",14),u.qZA(),u.TgZ(25,"div")(26,"h5"),u._uU(27,"Defense"),u.qZA(),u._UZ(28,"input",15),u.qZA(),u.TgZ(29,"div")(30,"h5"),u._uU(31,"Speed"),u.qZA(),u._UZ(32,"input",16),u.qZA()(),u.TgZ(33,"h5"),u._uU(34,"Ingresa tipo del Pokem\xf3n"),u.qZA(),u.TgZ(35,"select",17)(36,"option",18),u._uU(37,"Ofensivo"),u.qZA(),u.TgZ(38,"option",19),u._uU(39,"Defensivo"),u.qZA(),u.TgZ(40,"option",20),u._uU(41,"Apoyo"),u.qZA(),u.TgZ(42,"option",21),u._uU(43,"Agil"),u.qZA(),u.TgZ(44,"option",22),u._uU(45,"Equilibrado"),u.qZA()(),u.TgZ(46,"div",10)(47,"h5"),u._uU(48,"Informaci\xf3n del Pokem\xf3n"),u.qZA(),u._UZ(49,"textarea",23),u.qZA(),u.TgZ(50,"div",10)(51,"h5"),u._uU(52,"Image"),u.qZA(),u._UZ(53,"input",24),u.qZA(),u._UZ(54,"br"),u.TgZ(55,"div",25),u._uU(56),u.qZA(),u._UZ(57,"br")(58,"input",26)(59,"br"),u.qZA(),u._UZ(60,"br")(61,"div",27),u.qZA()()()()),2&t&&(u.xp6(10),u.Q6J("formGroup",r.newPokemonForm),u.xp6(46),u.hij(" ",r.advice," "),u.xp6(2),u.Q6J("disabled",!r.newPokemonForm.valid)("value","Registrar"))},dependencies:[Zb,EL,TL,lf,rP,eA,gy,Ob,lP,uP,Hb,XD],styles:[".modal-content[_ngcontent-%COMP%]{background-color:#474747;color:#f0f8ff}.btn-warning[_ngcontent-%COMP%]{outline:none!important;background:rgb(124,25,157);border:rgb(72,15,91) 1px!important;color:#f0f8ff}.btn[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.btn-warning[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none;background:rgb(88,18,111)}"]}),n})();function QZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"h5"),u._uU(2,"Ingresa el Pokemon Id"),u.qZA(),u._UZ(3,"input",14)(4,"br")(5,"br"),u.TgZ(6,"button",10),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.BuscaID())}),u._uU(7," Buscar "),u.qZA(),u._UZ(8,"br"),u.qZA()}}function JZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"h5"),u._uU(2,"Ingresa el nombre del Pokem\xf3n"),u.qZA(),u._UZ(3,"input",15)(4,"br")(5,"br"),u.TgZ(6,"button",10),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.BuscaNombre())}),u._uU(7," Buscar "),u.qZA(),u._UZ(8,"br"),u.qZA()}}function XZ(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"h5"),u._uU(2,"Ingresa stats del Pokem\xf3n"),u.qZA(),u.TgZ(3,"div",9)(4,"div")(5,"h5"),u._uU(6,"Attack"),u.qZA(),u._UZ(7,"input",16),u.qZA(),u.TgZ(8,"div")(9,"h5"),u._uU(10,"Special"),u.qZA(),u._UZ(11,"input",17),u.qZA(),u.TgZ(12,"div")(13,"h5"),u._uU(14,"Defense"),u.qZA(),u._UZ(15,"input",18),u.qZA(),u.TgZ(16,"div")(17,"h5"),u._uU(18,"Speed"),u.qZA(),u._UZ(19,"input",19),u.qZA()(),u.TgZ(20,"div",20),u._uU(21),u.qZA(),u._UZ(22,"br")(23,"br"),u.TgZ(24,"button",10),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.BuscaStats())}),u._uU(25," Buscar "),u.qZA(),u.TgZ(26,"button",10),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.PasarInfo())}),u._uU(27," Pasar info "),u.qZA(),u._UZ(28,"br"),u.qZA()}if(2&n){const t=u.oxw();u.xp6(21),u.hij(" ",t.advice," ")}}let eH=(()=>{class n{constructor(t,r){this.firestoreService=t,this.firestore=r,this.Datos="",this.PasarDatos=new u.vpe,this.ArrUsuarios=[],this.Pid="",this.Pnombre="",this.Ptipo="",this.Pinfo="",this.Pfoto="",this.Patq=0,this.Pspa=0,this.Pdef=0,this.Pspe=0,this.buscId=!1,this.buscType=!1,this.buscName=!1,this.buscStat=!1,this.pokemones=[],this.busqueda=[],this.result={id:"",pk_info:"",pk_name:"",pk_type:"",pk_atq:0,pk_spa:0,pk_def:0,pk_spe:0,imgUrl:""},this.general="",this.advice=""}ngOnInit(){this.firestoreService.getPokemones().subscribe(t=>{this.pokemones=[],t.forEach(r=>{this.pokemones.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}PasarInfo(){}SeleccionarMetodo(t){switch(this.buscId=!1,this.buscName=!1,this.buscStat=!1,this.buscType=!1,t){case 1:this.buscId=!0;break;case 2:this.buscName=!0;break;case 3:this.buscStat=!0;break;case 4:this.buscType=!0}}BuscaID(){let t="";t=document.getElementById("idf").value,this.firestore.collection("pokemones").doc(t).get().subscribe(r=>{r.exists?(console.log("Document data:",r.data()),this.result.id=t,this.result.pk_name=r.data().nombre,this.result.pk_type=r.data().tipo,this.result.imgUrl=r.data().foto,this.result.pk_info=r.data().info,this.result.pk_atq=r.data().ataque,this.result.pk_def=r.data().defensa,this.result.pk_spa=r.data().especial,this.result.pk_spe=r.data().velocidad,this.PasarDatos.emit(this.result)):(this.advice="No se encontr\xf3 al Pokem\xf3n",document.getElementById("aviso").hidden=!1,document.getElementById("aviso").value=this.advice)})}BuscaNombre(){let t="";t=document.getElementById("Unamef").value;for(let r of this.pokemones)this.Pnombre="",this.Pnombre=r.data.nombre,this.Pnombre==t&&(this.result.id=r.id,this.result.pk_name=t,this.result.pk_type=r.data.tipo,this.result.imgUrl=r.data.foto,this.result.pk_info=r.data.info,this.result.pk_atq=r.data.ataque,this.result.pk_def=r.data.defensa,this.result.pk_spa=r.data.especial,this.result.pk_spe=r.data.velocidad,this.PasarDatos.emit(this.result))}BuscaStats(){this.Patq=parseInt(document.getElementById("atqf").value),this.Pspa=parseInt(document.getElementById("spaf").value),this.Pdef=parseInt(document.getElementById("deff").value),this.Pspe=parseInt(document.getElementById("spef").value),alert(this.Patq);for(let t of this.pokemones){this.Pnombre="";let i=t.data.especial,a=t.data.defensa,c=t.data.velocidad;this.Patq==t.data.ataque&&this.Pspa==i&&this.Pdef==a&&this.Pspe==c&&this.busqueda.push({id:t.data.id,data:t.data})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff),u.Y36(Ww))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-search-poke-form"]],inputs:{Datos:"Datos"},outputs:{PasarDatos:"PasarDatos"},decls:24,vars:3,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#SearchPoke",1,"btn","btn-warning"],["id","SearchPoke","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","formulario"],["align","center",1,"col-xs-1"],[1,"d-flex","justify-content-evenly"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["class","container",4,"ngIf"],[1,"modal-footer"],[1,"container"],["id","idf","type","text"],["id","Unamef","type","text"],["type","number","id","atqf","name","points","step","1","min","0","max","100","value","0"],["type","number","id","spaf","name","points","step","1","min","0","max","100","value","0"],["type","number","id","deff","name","points","step","1","min","0","max","100","value","0"],["type","number","id","spef","name","points","step","1","min","0","max","100","value","0"],["role","alert","id","aviso","hidden","",1,"formh5","alert","alert-primary"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1," Search Pokemon "),u.qZA(),u.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h5",5),u._uU(7,"Buscar Pokemon"),u.qZA(),u._UZ(8,"button",6),u.qZA(),u.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"button",10),u.NdJ("click",function(){return r.SeleccionarMetodo(1)}),u._uU(13," Id "),u.qZA(),u.TgZ(14,"button",10),u.NdJ("click",function(){return r.SeleccionarMetodo(2)}),u._uU(15," Nombre "),u.qZA(),u.TgZ(16,"button",10),u.NdJ("click",function(){return r.SeleccionarMetodo(3)}),u._uU(17," Stats "),u.qZA()(),u._UZ(18,"br"),u.YNc(19,QZ,9,0,"div",11),u.YNc(20,JZ,9,0,"div",11),u.YNc(21,XZ,29,1,"div",11),u._UZ(22,"br"),u.qZA(),u._UZ(23,"div",12),u.qZA()()()()),2&t&&(u.xp6(19),u.Q6J("ngIf",r.buscId),u.xp6(1),u.Q6J("ngIf",r.buscName),u.xp6(1),u.Q6J("ngIf",r.buscStat))},dependencies:[Vi],styles:[".formulario[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px}.modal-content[_ngcontent-%COMP%]{background-color:#474747;color:#f0f8ff}.btn-warning[_ngcontent-%COMP%]{outline:none!important;background:rgb(124,25,157);border:rgb(72,15,91) 1px!important;color:#f0f8ff}.btn[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.btn-warning[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none;background:rgb(88,18,111)}"]}),n})();function tH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",14)(1,"h5"),u._uU(2,"Ingresa id"),u.qZA(),u._UZ(3,"input",15)(4,"br")(5,"br"),u.TgZ(6,"button",16),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.BuscaID())}),u._uU(7," Buscar "),u.qZA(),u._UZ(8,"br"),u.qZA()}}function nH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",14)(1,"h5"),u._uU(2,"Ingresa username"),u.qZA(),u._UZ(3,"input",17)(4,"br")(5,"br"),u.TgZ(6,"button",16),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.BuscaNombre())}),u._uU(7," Buscar "),u.qZA(),u._UZ(8,"br"),u.qZA()}}function rH(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"br"),u.TgZ(2,"h6"),u._uU(3,"Se encontr\xf3 el siguiente usuario"),u.qZA(),u.TgZ(4,"p"),u._uU(5),u.qZA(),u.TgZ(6,"p"),u._uU(7),u.qZA(),u.TgZ(8,"p"),u._uU(9),u.qZA(),u.TgZ(10,"p"),u._uU(11),u.qZA()()),2&n){const t=u.oxw();u.xp6(5),u.Oqu(t.Unombre),u.xp6(2),u.Oqu(t.Uusername),u.xp6(2),u.Oqu(t.Uemail),u.xp6(2),u.Oqu(t.Uid)}}function iH(n,e){if(1&n&&(u.TgZ(0,"div")(1,"p"),u._uU(2),u.qZA(),u.TgZ(3,"p"),u._uU(4),u.qZA(),u.TgZ(5,"p"),u._uU(6),u.qZA(),u.TgZ(7,"p"),u._uU(8),u.qZA()()),2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t.Unombre),u.xp6(2),u.Oqu(t.Uusername),u.xp6(2),u.Oqu(t.Uemail),u.xp6(2),u.Oqu(t.Uid)}}function sH(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"br"),u.TgZ(2,"h6"),u._uU(3,"Se encontr\xf3 el siguiente usuario"),u.qZA(),u.YNc(4,iH,9,4,"div",18),u.qZA()),2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngForOf",t.resultados)}}let oH=(()=>{class n{constructor(t){this.firestoreService=t,this.UsuarioEncontrado=!1,this.Uid="",this.Unombre="",this.Uusername="",this.Uemail="",this.buscId=!1,this.buscName=!1,this.usuarios=[],this.resultados=[]}ngOnInit(){this.firestoreService.getUsuarios().subscribe(t=>{this.usuarios=[],t.forEach(r=>{this.usuarios.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}SeleccionarMetodo(t){switch(this.buscId=!1,this.buscName=!1,t){case 1:this.buscId=!0;break;case 2:this.buscName=!0}}BuscaID(){this.Uid="",this.Unombre="",this.Uusername="",this.Uemail="";let t="";t=document.getElementById("idf").value;for(let r of this.usuarios)this.Uid="",this.Uid=r.id,this.Uid==t&&(this.Unombre=r.data.displayName,this.Uusername=r.data.photoURL,this.Uemail=r.data.email,this.UsuarioEncontrado=!0);setTimeout(()=>{this.Uid="",this.Unombre="",this.Uusername="",this.Uemail=""},7e3)}BuscaNombre(){this.resultados=[];let t="";t=document.getElementById("Unamef").value;for(let r of this.usuarios)this.Uusername="",this.Uusername=r.data.displayName,this.Uusername==t&&(this.resultados.push({Unombre:r.data.displayName,Uusername:r.data.photoURL,Uemail:r.data.email,Uid:r.id}),console.log(this.resultados),this.UsuarioEncontrado=!0);setTimeout(()=>{this.resultados=[]},7e3)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-search-user-form"]],decls:23,vars:4,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#ModalSearchUser",1,"btn","btn-warning"],["id","ModalSearchUser","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["align","center",1,"col-xs-1"],[1,"d-flex","justify-content-evenly"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["class","container",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],[1,"container"],["id","idf","type","text"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["id","Unamef","type","text"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u._uU(1," Buscar Usuario\n"),u.qZA(),u.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h5",5),u._uU(7,"Buscar Usuario"),u.qZA(),u._UZ(8,"button",6),u.qZA(),u.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"button",10),u.NdJ("click",function(){return r.SeleccionarMetodo(1)}),u._uU(13," ID "),u.qZA(),u.TgZ(14,"button",10),u.NdJ("click",function(){return r.SeleccionarMetodo(2)}),u._uU(15," Nombre Usuario "),u.qZA()(),u._UZ(16,"br"),u.YNc(17,tH,9,0,"div",11),u.YNc(18,nH,9,0,"div",11),u.YNc(19,rH,12,4,"div",12),u.YNc(20,sH,5,1,"div",12),u.qZA(),u._UZ(21,"br")(22,"div",13),u.qZA()()()()),2&t&&(u.xp6(17),u.Q6J("ngIf",r.buscId),u.xp6(1),u.Q6J("ngIf",r.buscName),u.xp6(1),u.Q6J("ngIf",1==r.UsuarioEncontrado&&1==r.buscId),u.xp6(1),u.Q6J("ngIf",1==r.UsuarioEncontrado&&1==r.buscName))},dependencies:[xs,Vi],styles:[".modal-content[_ngcontent-%COMP%]{background-color:#474747;color:#f0f8ff}.btn-warning[_ngcontent-%COMP%]{outline:none!important;background:rgb(124,25,157);border:rgb(72,15,91) 1px!important;color:#f0f8ff}.btn[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.btn-warning[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none;background:rgb(88,18,111)}"]}),n})(),NL=(()=>{class n{constructor(t){this.firestoreService=t,this.tipo=!0,this.pokemones=[]}CambiaGrafica(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function t(){var r=google.visualization.arrayToDataTable([["Stat","Points",{role:"style"}],["Attack",8.94,"color: #F34024"],["Special",10.49,"color: #A35CE9"],["Defense",19.3,"color: #55C974"],["Speed",21.45,"color:  #3D9BEE"]]),i=new google.visualization.DataView(r);i.setColumns([0,1,{calc:"stringify",sourceColumn:1,type:"string",role:"annotation"},2]),new google.visualization.BarChart(document.getElementById("barchart_values")).draw(i,{Color:{color:"white"},backgroundColor:{fill:"transparent"},title:"",width:500,height:200,chartArea:{width:"100%",height:"80%"},bar:{groupWidth:"75%"},legend:{position:"none"},hAxis:{textStyle:{color:"white"},titleTextStyle:{color:"white"},gridlines:{color:"transparent"}},vAxis:{textStyle:{color:"white"},titleTextStyle:{color:"white"},gridlines:{color:"transparent"}}})})}ngOnInit(){this.firestoreService.getPokemones().subscribe(i=>{this.pokemones=[],i.forEach(a=>{this.pokemones.push({id:a.payload.doc.id,data:a.payload.doc.data()})})}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function r(){var i=google.visualization.arrayToDataTable([["Stat","Points",{role:"style"}],["Attack",8.94,"color: #F34024"],["Special",10.49,"color: #A35CE9"],["Defense",19.3,"color: #55C974"],["Speed",21.45,"color:  #3D9BEE"]]),a=new google.visualization.DataView(i);a.setColumns([0,1,{calc:"stringify",sourceColumn:1,type:"string",role:"annotation"},2]),new google.visualization.ColumnChart(document.getElementById("columnchart_values")).draw(a,{Color:{color:"white"},backgroundColor:{fill:"transparent"},title:"",width:300,height:350,chartArea:{width:"100%",height:"80%"},bar:{groupWidth:"85%"},legend:{position:"none"},hAxis:{textStyle:{color:"white"},titleTextStyle:{color:"white"}},vAxis:{textStyle:{color:"white"},titleTextStyle:{color:"white"},gridlines:{color:"transparent"}}})}),this.CambiaGrafica()}Cambio(){var t;1==this.tipo?((t=document.getElementById("columnchart_values")).style.display="none"===t.style.display?"block":"none",this.tipo=!1):this.tipo=!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-poke-graphs"]],decls:15,vars:0,consts:[[1,"PokemonInfo1","container"],[1,"PokemonInfo2"],[1,"PokemonInfo3"],[1,"d-flex","statmenu"],["src","../../../assets/img/Cinderace.png","width","350","height","320"],["id","columnchart_values"],[1,"pokedexEntry"],["id","barchart_values"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u._UZ(3,"br"),u.TgZ(4,"h2"),u._uU(5,"Cinderace"),u.qZA(),u.TgZ(6,"div",3),u._UZ(7,"img",4)(8,"div",5),u.qZA(),u.TgZ(9,"div",6)(10,"h3"),u._uU(11,"Pokedex Entry"),u.qZA(),u.TgZ(12,"p"),u._uU(13,"It's skilled at both offense and defense, and it gets pumped up when cheered on. But if it starts showboating, it could put itself in a tough spot.It juggles a pebble with its feet, turning it into a burning soccer ball. Its shots strike opponents hard and leave them scorched."),u.qZA(),u._UZ(14,"div",7),u.qZA()()()())},styles:[".PokemonInfo1[_ngcontent-%COMP%]{background:#d97a22;border-radius:10px;height:800px;width:800px}.PokemonInfo2[_ngcontent-%COMP%]{box-sizing:border-box;padding-left:10px;padding-right:10px;height:800px;background:rgb(144,52,230)}.PokemonInfo3[_ngcontent-%COMP%]{box-sizing:border-box;padding-left:10px;padding-right:10px;height:800px;background:rgb(97,35,144)}.statmenu[_ngcontent-%COMP%]{background-color:#8851af;border-radius:5px;margin-top:15px}.statmenu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:5px}h2[_ngcontent-%COMP%]{text-align:center;margin-top:10px;color:#f0f8ff}.pokedexEntry[_ngcontent-%COMP%]{color:#f0f8ff;padding-left:5px;text-align:justify}"]}),n})(),aH=(()=>{class n{constructor(t,r){this.firestoreService=t,this.firestore=r,this.Pnombre="",this.Pentry="",this.Patq=0,this.Pspa=0,this.Pdef=0,this.Pspe=0,this.Ptip="",this.obj={id:"",pk_info:"",pk_name:"",pk_type:"",pk_atq:0,pk_spa:0,pk_def:0,pk_spe:0,imgUrl:""}}ngOnInit(){}Eliminar(){this.firestore.collection("pokemones").doc(this.obj.id).delete().then(()=>{console.log("Pokemon eliminado!"),this.obj.id="",this.obj.pk_info="",this.obj.pk_name="",this.obj.pk_type="",this.obj.pk_atq=0,this.obj.pk_spa=0,this.obj.pk_def=0,this.obj.pk_spe=0,this.obj.imgUrl=""},t=>{console.error(t)})}Modificar(){this.obj.pk_info=document.getElementById("entryf").value,this.obj.pk_name=document.getElementById("nombref").value,this.obj.pk_type=document.getElementById("tipof").value,this.obj.pk_atq=Number(document.getElementById("atqe").value),this.obj.pk_spa=Number(document.getElementById("spaf").value),this.obj.pk_def=Number(document.getElementById("deff").value),this.obj.pk_spe=Number(document.getElementById("spef").value),this.obj.imgUrl=document.getElementById("fotof").value;let t={id:this.obj.id,info:this.obj.pk_info,nombre:this.obj.pk_name,tipo:this.obj.pk_type,ataque:this.obj.pk_atq,especial:this.obj.pk_spa,defensa:this.obj.pk_def,velocidad:this.obj.pk_spe,foto:this.obj.imgUrl};this.firestore.collection("pokemones").doc(this.obj.id).set(t).then(()=>{document.getElementById("entryf").value="",document.getElementById("nombref").value="",document.getElementById("tipof").value="",document.getElementById("atqe").value="0",document.getElementById("spaf").value="0",document.getElementById("deff").value="0",document.getElementById("spef").value="0",document.getElementById("fotof").value="",console.log("Pokemon editado exitosamente")},r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff),u.Y36(Ww))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-pokemon-solo-page"]],inputs:{obj:"obj"},decls:54,vars:10,consts:[[1,"PokeProfile"],[1,""],[1,"pokeMarc"],[3,"src"],[1,"pokeform"],["id","nombref","type","text",1,"form-control","inputs",3,"value"],["id","fotof","type","text",1,"form-control","inputs",3,"value"],["id","entryf","id","exampleFormControlTextarea1","rows","3",1,"form-control","inputs",3,"value"],["id","tipof","type","text",1,"form-control","inputs",3,"value"],[1,"d-flex","justify-content-evenly"],["type","number","id","atqe","name","points","step","1","min","0","max","100",3,"value"],["type","number","id","spaf","name","points","step","1","min","0","max","100",3,"value"],["type","number","id","deff","name","points","step","1","min","0","max","100",3,"value"],["type","number","id","spef","name","points","step","1","min","0","max","100",3,"value"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u._UZ(3,"img",3),u.qZA(),u.TgZ(4,"div"),u._UZ(5,"br"),u.TgZ(6,"h2"),u._uU(7),u.qZA(),u.TgZ(8,"div",4)(9,"label"),u._uU(10,"Nombre del Pokemon"),u.qZA(),u._UZ(11,"input",5)(12,"br"),u.TgZ(13,"label"),u._uU(14,"URL de la imagen"),u.qZA(),u._UZ(15,"input",6)(16,"br"),u.TgZ(17,"label"),u._uU(18,"Entrada Pokedex"),u.qZA(),u._UZ(19,"textarea",7)(20,"br"),u.TgZ(21,"label"),u._uU(22,"Tipo Pokemon"),u.qZA(),u._UZ(23,"input",8)(24,"br"),u.TgZ(25,"div",9)(26,"div")(27,"label"),u._uU(28,"Attack "),u.qZA(),u._UZ(29,"br")(30,"input",10),u.qZA(),u.TgZ(31,"div")(32,"label"),u._uU(33,"Special "),u.qZA(),u._UZ(34,"br")(35,"input",11),u.qZA(),u.TgZ(36,"div")(37,"label"),u._uU(38,"Defense "),u.qZA(),u._UZ(39,"br")(40,"input",12),u.qZA(),u.TgZ(41,"div")(42,"label"),u._uU(43,"Speed "),u.qZA(),u._UZ(44,"br")(45,"input",13),u.qZA()(),u._UZ(46,"br"),u.TgZ(47,"div",9)(48,"button",14),u.NdJ("click",function(){return r.Modificar()}),u._uU(49," Modificar "),u.qZA(),u.TgZ(50,"button",15),u.NdJ("click",function(){return r.Eliminar()}),u._uU(51," Eliminar "),u.qZA()(),u._UZ(52,"br"),u.qZA(),u._UZ(53,"br"),u.qZA()()()),2&t&&(u.xp6(3),u.Q6J("src",r.obj.imgUrl,u.LSH),u.xp6(4),u.Oqu(r.obj.pk_name),u.xp6(4),u.Q6J("value",r.obj.pk_name),u.xp6(4),u.Q6J("value",r.obj.imgUrl),u.xp6(4),u.Q6J("value",r.obj.pk_info),u.xp6(4),u.Q6J("value",r.obj.pk_type),u.xp6(7),u.Q6J("value",r.obj.pk_atq),u.xp6(5),u.Q6J("value",r.obj.pk_spa),u.xp6(5),u.Q6J("value",r.obj.pk_def),u.xp6(5),u.Q6J("value",r.obj.pk_spe))},styles:["img[_ngcontent-%COMP%]{height:250px;border:5px solid rgb(199,147,242);border-radius:5px;background-color:#f7f2fc;box-shadow:2px 2px #821bab;padding:5px}.pokeform[_ngcontent-%COMP%]{align-items:center;text-align:center}.pokeform[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:400px;margin-left:31%}"]}),n})();function uH(n,e){if(1&n&&(u.TgZ(0,"div",11)(1,"div",12),u._UZ(2,"img",13),u.TgZ(3,"div",14),u._UZ(4,"br"),u.TgZ(5,"h4"),u._uU(6,"Bienvenido "),u.TgZ(7,"strong"),u._uU(8),u.qZA()(),u.TgZ(9,"p"),u._uU(10,"User ID: "),u._UZ(11,"br"),u.TgZ(12,"strong"),u._uU(13),u.qZA()(),u.TgZ(14,"p"),u._uU(15,"Nombre Completo: "),u._UZ(16,"br"),u.TgZ(17,"strong"),u._uU(18),u.qZA()(),u.TgZ(19,"p"),u._uU(20,"Correo: "),u._UZ(21,"br"),u.TgZ(22,"strong"),u._uU(23),u.qZA()(),u.TgZ(24,"h4"),u._uU(25,"Guarda tus datos escaneando el c\xf3digo!"),u.qZA(),u._UZ(26,"qrcode",15),u.qZA()()()),2&n){const t=u.oxw().ngIf;u.xp6(8),u.Oqu(t.displayName?t.displayName:"User"),u.xp6(5),u.Oqu(t.uid),u.xp6(5),u.Oqu(t.photoURL),u.xp6(5),u.Oqu(t.email),u.xp6(3),u.Q6J("qrdata","Nombre: "+t.displayName+"\nUID: "+t.uid+"\nEmail: "+t.email)("width",256)("errorCorrectionLevel","M")}}function lH(n,e){if(1&n&&(u.TgZ(0,"div",11)(1,"div",12),u._UZ(2,"img",13),u.TgZ(3,"div",14),u._UZ(4,"br"),u.TgZ(5,"h4"),u._uU(6,"Bienvenido"),u.qZA(),u.TgZ(7,"p"),u._uU(8,"User ID: "),u._UZ(9,"br"),u.TgZ(10,"strong"),u._uU(11),u.qZA()(),u.TgZ(12,"p"),u._uU(13,"N\xfamero de tel\xe9fono: "),u._UZ(14,"br"),u.TgZ(15,"strong"),u._uU(16),u.qZA()(),u.TgZ(17,"h4"),u._uU(18,"Guarda tus datos escaneando el c\xf3digo!"),u.qZA(),u._UZ(19,"qrcode",15),u.qZA()()()),2&n){const t=u.oxw().ngIf;u.xp6(11),u.Oqu(t.uid),u.xp6(5),u.Oqu(t.phoneNumber),u.xp6(3),u.Q6J("qrdata","Telefono: "+t.phoneNumber+"\nUID: "+t.uid)("width",256)("errorCorrectionLevel","M")}}function cH(n,e){if(1&n&&(u.TgZ(0,"div"),u.YNc(1,uH,27,7,"div",10),u.YNc(2,lH,20,5,"div",10),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",null!=t.authService.userData.displayName),u.xp6(1),u.Q6J("ngIf",null==t.authService.userData.displayName)}}function dH(n,e){if(1&n&&(u.TgZ(0,"div",7)(1,"div",8),u._UZ(2,"br"),u.TgZ(3,"h1",9),u._uU(4,"Perfil de usuario"),u.qZA(),u.YNc(5,cH,3,2,"div",5),u.qZA()()),2&n){const t=u.oxw();u.xp6(5),u.Q6J("ngIf",t.authService.userData)}}function hH(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"app-pokemon-solo-page",16),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("obj",t.traspass)}}function fH(n,e){1&n&&u._UZ(0,"div")}function pH(n,e){}let gH=(()=>{class n{constructor(t){this.authService=t,this.EncontradoPoke=!0,this.EncontradoUser=!0,this.traspass={id:"",pk_info:"",pk_name:"",pk_type:"",pk_atq:0,pk_spa:0,pk_def:0,pk_spe:0,imgUrl:""}}ngOnInit(){}RecibirDatos(t){this.traspass.id=t.id,this.traspass.imgUrl=t.imgUrl,this.traspass.pk_atq=t.pk_atq,this.traspass.pk_def=t.pk_def,this.traspass.pk_info=t.pk_info,this.traspass.pk_name=t.pk_name,this.traspass.pk_spa=t.pk_spa,this.traspass.pk_spe=t.pk_spe,this.traspass.pk_type=t.pk_type}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kg))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-cuenta"]],decls:19,vars:4,consts:[[1,"container","accmenu"],["class","container",4,"ngIf","ngIfElse"],[1,"ModoAdmin"],[1,"d-flex","justify-content-around"],[3,"PasarDatos"],[4,"ngIf"],["contenidoAdmin",""],[1,"container"],[1,"ModoUser"],[1,"h2"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"media"],["src","../../assets/img/poke-user.jpg","alt","","height","250px","width","250px",1,"align-self-start","mr-5","img-thumbnail","rounded-circle"],[1,"media-body"],[3,"qrdata","width","errorCorrectionLevel"],[3,"obj"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0),u.YNc(1,dH,6,1,"div",1),u.TgZ(2,"div",2),u._UZ(3,"br"),u.TgZ(4,"h5"),u._uU(5,"Herramientas de administrador"),u.qZA(),u.TgZ(6,"section")(7,"div",3),u._UZ(8,"app-pokemon-form"),u.TgZ(9,"app-search-poke-form",4),u.NdJ("PasarDatos",function(a){return r.RecibirDatos(a)}),u.qZA(),u._UZ(10,"app-search-user-form"),u.qZA(),u._UZ(11,"br"),u.qZA(),u._UZ(12,"br"),u.YNc(13,hH,2,1,"div",5),u.YNc(14,fH,1,0,"div",5),u._UZ(15,"app-poke-graphs"),u.qZA(),u.YNc(16,pH,0,0,"ng-template",null,6,u.W1O),u._UZ(18,"br"),u.qZA()),2&t){const i=u.MAs(17);u.xp6(1),u.Q6J("ngIf","admin"!=r.authService.userData.displayName)("ngIfElse",i),u.xp6(12),u.Q6J("ngIf",1==r.EncontradoPoke),u.xp6(1),u.Q6J("ngIf",1==r.EncontradoUser)}},dependencies:[Vi,WZ,YZ,eH,oH,NL,aH],styles:[".accmenu[_ngcontent-%COMP%]{background:rgb(255,255,255);box-shadow:5px 5px #530c6a9e;border-radius:5px}.media-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:small}.ModoUser[_ngcontent-%COMP%]{text-align:center;align-items:center}.ModoAdmin[_ngcontent-%COMP%]{text-align:center;background:rgb(233,232,232);border-radius:5px}"]}),n})(),mH=(()=>{class n{constructor(){this.auxButtons=100,this.textos=["\xbfCu\xe1nto cuesta jugar a Pok\xe9mon UNITE?. Puedes disfrutar de Pok\xe9mon UNITE sin coste alguno, pero existen algunos elementos de pago, como las gemas \xc6os, una de las monedas del juego","\xbfC\xf3mo puedo transferir el acceso a mis datos de guardado de Pok\xe9mon UNITE de un dispositivo iOS a uno Android?. Para poder transferir el acceso a tus datos de guardado de un dispositivo iOS a uno Android, primero tendr\xe1s que vincular tu cuenta de Pok\xe9mon UNITE en iOS con una de estas plataformas. Cuenta Nintendo. Cuenta del Club de Entrenadores Pok\xe9mon. Cuenta de Google. Cuenta de Facebook. Una vez vinculado el juego con una de ellas, puedes descargar Pok\xe9mon UNITE en tu dispositivo Android y seguir los pasos que encontrar\xe1s en este art\xedculo.","\xbfC\xf3mo funciona el Desaf\xedo para principiantes en Pok\xe9mon UNITE? \xbfC\xf3mo reclamo mis recompensas?. Para obtener las recompensas del Desaf\xedo para principiantes (como la Licencia Crustle Unite), debes completar todos los Desaf\xedos elegibles. Despu\xe9s de completar los Desaf\xedos, puedes recibir las recompensas seleccionando Reclamar. Aseg\xfarate de reclamar tus recompensas antes de que termine el Desaf\xedo para principiantes, de lo contrario, no podr\xe1s recibir las recompensas.","\xbfC\xf3mo se usan las gemas \xc6os en Pok\xe9mon UNITE?. Las gemas \xc6os de Pok\xe9mon UNITE no se pueden usar sin el permiso del jugador. Estas pueden emplearse para conseguir algunos objetos directamente. Adem\xe1s, las gemas \xc6os pueden utilizarse de la siguiente manera. Para conseguir objetos intercambiando cupones \xc6os en el Bazar \xc6os. Si un jugador no tiene suficientes cupones \xc6os para completar la transacci\xf3n, se le dar\xe1 la opci\xf3n de cubrir la diferencia con gemas \xc6os. Si el jugador tiene un pase de combate pr\xe9mium o un pase de combate pr\xe9mium plus, tendr\xe1 la opci\xf3n de usar gemas \xc6os para subir el nivel de pase de combate.","\xbfPor qu\xe9 no puedo conseguir m\xe1s monedas \xc6os en Pok\xe9mon UNITE?. Las monedas \xc6os son una de las monedas del juego en Pok\xe9mon UNITE. Ten en cuenta la siguiente informaci\xf3n sobre las monedas \xc6os. Se puede obtener un m\xe1ximo de 2100 monedas \xc6os a la semana por participar en combates. No hay ning\xfan objeto que permita aumentar el l\xedmite de monedas \xc6os que se puede conseguir por semana. La cantidad de monedas \xc6os se restablece cada lunes a las 00:00 UTC.","\xbfC\xf3mo puedo activar el chat de voz en la versi\xf3n de Pok\xe9mon UNITE para Nintendo Switch?. Para poder usar el chat de voz en Pok\xe9mon UNITE, debes alcanzar el Nv. 6 de Entrenador y participar en un combate con otros jugadores. Sigue estos pasos para activar el chat de voz. Usa unos auriculares que sean compatibles con tu consola Nintendo Switch. Abre Pok\xe9mon UNITE e inicia un combate. Una vez que comience el encuentro, pulsa el bot\xf3n + para abrir el men\xfa del juego. Despu\xe9s, pulsa el bot\xf3n - para acceder a los ajustes. Busca la opci\xf3n Ajustes del chat de voz. Para poder o\xedr a los otros jugadores, selecciona S\xed para la opci\xf3n Recepci\xf3n. Para poder usar la funci\xf3n del chat de voz, deber\xe1s aceptar los t\xe9rminos de uso para el chat antes de activarlo por primera vez. Pulsa el bot\xf3n X para aceptar y continuar. Si quieres o\xedr solo a jugadores a los que has invitado, selecciona Conocidos en la opci\xf3n Rango receptor. Si seleccionas Todos, podr\xe1s o\xedr a todo el equipo. Si quieres que los otros jugadores puedan o\xedrte, selecciona S\xed para la opci\xf3n Emisi\xf3n. Si quieres que te oigan solo jugadores a los que has invitado, selecciona Conocidos en la opci\xf3n Rango emisor. Si seleccionas Todos, todos los jugadores del equipo podr\xe1n o\xedrte.","\xbfCu\xe1les son los requisitos de sistema para jugar a Pok\xe9mon UNITE?. Android.  Android 5.0 (API nivel 21) o posterior. Procesador: Octa-core 1.8 GHz o superior. Memoria: 3 GB RAM. Gr\xe1ficos: Adreno 506 o superior. iOS. iOS 12.0 o posterior. Procesador: A9 o superior. Memoria: 2 GB RAM","\xbfHay diferencias entre las versiones de Pok\xe9mon UNITE para Nintendo Switch y para dispositivos m\xf3viles?. No. En lo que respecta al sistema de juego, no hay diferencias entre ambas versiones. Sin embargo, el tipo de cuenta que se puede vincular con cada una es distinto.","\xbfCu\xe1nto dura una membres\xeda Unite?. La membres\xeda Unite dura un mes a partir del d\xeda en que se activa."]}ngOnInit(){}habla(t){speechSynthesis.cancel();let r=new SpeechSynthesisUtterance(this.textos[t]);speechSynthesis.speak(r),this.auxButtons=t}pausa(t){t==this.auxButtons?speechSynthesis.pause():speechSynthesis.cancel()}resumir(t){t==this.auxButtons?speechSynthesis.resume():speechSynthesis.cancel()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-faq"]],decls:218,vars:0,consts:[[1,"seccion","animated","bounceInLeft"],[1,"arriba","rojo"],[1,"abajo","arojo"],[1,"izquierda"],[1,"row"],[1,"btn","btn-outline-danger","col-sm",3,"click"],[1,"derecha"],["src","https://imagensemoldes.com.br/wp-content/uploads/2020/04/Pokebola-Pok%C3%A9mon-PNG-1024x1022.png",1,"imagenderecha"],[1,"seccioni","animated","bounceInRight"],[1,"arribai","verde"],[1,"abajo","averde"],["src","https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/1f619ed0-b566-4538-8392-bf02ca7a76cd/dck5gvr-d1a822f4-cb27-46b3-a0ad-5538b486b6f5.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzFmNjE5ZWQwLWI1NjYtNDUzOC04MzkyLWJmMDJjYTdhNzZjZFwvZGNrNWd2ci1kMWE4MjJmNC1jYjI3LTQ2YjMtYTBhZC01NTM4YjQ4NmI2ZjUucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.9BrIks7SssFXJqO3zrbCWwfOPzVuui9_Q89iV9uwP2Y",1,"imagenderechai"],[1,"btn","btn-outline-success","col-sm",3,"click"],[1,"arriba","azul"],[1,"abajo","aazul"],[1,"btn","btn-outline-primary","col-sm",3,"click"],["src","/assets/img/pingu.png",1,"imagenderecha"],[1,"arribai","morado"],[1,"abajo","amorado"],["src","https://unite.pokemon.com/images/pokemon/aegislash/stat/stat-aegislash.png",1,"imagenderechai"],[1,"btn","btn-outline-dark","col-sm",3,"click"],[1,"arriba","amarillo"],[1,"abajo","aamarillo"],[1,"btn","btn-outline-warning","col-sm",3,"click"],["src","https://pngroyale.com/wp-content/uploads/2021/11/Download-pikachu-transparent-pokemon-png-11.png",1,"imagenderecha"],[1,"arribai","rosa"],[1,"abajo","arosa"],["src","https://www.buscopng.com/wp-content/uploads/2021/02/Jigglypuff-Pokemon.png",1,"imagenderechai"],[1,"arriba","naranja"],[1,"abajo","anaranja"],["src","https://fs-prod-cdn.nintendo-europe.com/media/images/08_content_images/games_6/nintendo_switch_7/nswitch_pokemonmysterydungeonrescueteamdx/charmander.png",1,"imagenderecha"],[1,"arribai","cian"],[1,"abajo","acian"],["src","https://imagenpng.com/wp-content/uploads/2017/02/007Squirtle_Pokem.png",1,"imagenderechai"],[1,"btn","btn-outline-info","col-sm",3,"click"],[1,"arriba","gris"],[1,"abajo","agris"],[1,"btn","btn-outline-secondary","col-sm",3,"click"],["src","https://images.wikidexcdn.net/mwuploads/wikidex/thumb/d/db/latest/20210617194129/Artwork_Gengar_UNITE.png/250px-Artwork_Gengar_UNITE.png",1,"imagenderecha"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h1"),u._uU(3,"\xbfCu\xe1nto cuesta jugar a Pok\xe9mon UNITE?"),u.qZA()(),u.TgZ(4,"div",2)(5,"div",3),u._UZ(6,"br")(7,"br"),u.TgZ(8,"h2"),u._uU(9,"Puedes disfrutar del mejor contenido de Pok\xe9mon UNITE sin coste alguno, pero existen algunos elementos de pago, como las gemas \xc6os, una de las monedas del juego"),u.qZA(),u.TgZ(10,"div",4)(11,"button",5),u.NdJ("click",function(){return r.habla(0)}),u._uU(12," INICIAR "),u.qZA(),u.TgZ(13,"button",5),u.NdJ("click",function(){return r.pausa(0)}),u._uU(14," PAUSAR "),u.qZA(),u.TgZ(15,"button",5),u.NdJ("click",function(){return r.resumir(0)}),u._uU(16," RESUMIR "),u.qZA()()(),u.TgZ(17,"div",6),u._UZ(18,"img",7),u.qZA()()(),u.TgZ(19,"div",8)(20,"div",9)(21,"h1"),u._uU(22,"\xbfC\xf3mo puedo transferir el acceso a mis datos de guardado de Pok\xe9mon UNITE de un dispositivo iOS a uno Android?"),u.qZA()(),u.TgZ(23,"div",10)(24,"div",6),u._UZ(25,"img",11),u.qZA(),u.TgZ(26,"div",3)(27,"h2"),u._uU(28,"Para poder transferir el acceso a tus datos de guardado de un dispositivo iOS a uno Android, primero tendr\xe1s que vincular tu cuenta de Pok\xe9mon UNITE en iOS con una de estas plataformas."),u.qZA(),u.TgZ(29,"ol")(30,"li"),u._uU(31,"Cuenta Nintendo"),u.qZA(),u.TgZ(32,"li"),u._uU(33,"Cuenta del Club de Entrenadores Pok\xe9mon"),u.qZA(),u.TgZ(34,"li"),u._uU(35,"Cuenta de Google"),u.qZA(),u.TgZ(36,"li"),u._uU(37,"Cuenta de Facebook"),u.qZA()(),u.TgZ(38,"h2"),u._uU(39,"Una vez vinculado el juego con una de ellas, puedes descargar Pok\xe9mon UNITE en tu dispositivo Android y seguir los pasos que encontrar\xe1s en este art\xedculo."),u.qZA(),u.TgZ(40,"div",4)(41,"button",12),u.NdJ("click",function(){return r.habla(1)}),u._uU(42," INICIAR "),u.qZA(),u.TgZ(43,"button",12),u.NdJ("click",function(){return r.pausa(1)}),u._uU(44," PAUSAR "),u.qZA(),u.TgZ(45,"button",12),u.NdJ("click",function(){return r.resumir(1)}),u._uU(46," RESUMIR "),u.qZA()()()()(),u.TgZ(47,"div",0)(48,"div",13)(49,"h1"),u._uU(50,"\xbfC\xf3mo funciona el Desaf\xedo para principiantes en Pok\xe9mon UNITE? \xbfC\xf3mo reclamo mis recompensas?"),u.qZA()(),u.TgZ(51,"div",14)(52,"div",3)(53,"h2"),u._uU(54,"Para obtener las recompensas del Desaf\xedo para principiantes (como la Licencia Crustle Unite), debes completar todos los Desaf\xedos elegibles. Despu\xe9s de completar los Desaf\xedos, puedes recibir las recompensas seleccionando Reclamar. Aseg\xfarate de reclamar tus recompensas antes de que termine el Desaf\xedo para principiantes, de lo contrario, no podr\xe1s recibir las recompensas."),u.qZA(),u.TgZ(55,"div",4)(56,"button",15),u.NdJ("click",function(){return r.habla(2)}),u._uU(57," INICIAR "),u.qZA(),u.TgZ(58,"button",15),u.NdJ("click",function(){return r.pausa(2)}),u._uU(59," PAUSAR "),u.qZA(),u.TgZ(60,"button",15),u.NdJ("click",function(){return r.resumir(2)}),u._uU(61," RESUMIR "),u.qZA()()(),u.TgZ(62,"div",6),u._UZ(63,"img",16),u.qZA()()(),u.TgZ(64,"div",8)(65,"div",17)(66,"h1"),u._uU(67,"\xbfC\xf3mo se usan las gemas \xc6os en Pok\xe9mon UNITE?"),u.qZA()(),u.TgZ(68,"div",18)(69,"div",6),u._UZ(70,"img",19),u.qZA(),u.TgZ(71,"div",3)(72,"h2"),u._uU(73,"Las gemas \xc6os de Pok\xe9mon UNITE no se pueden usar sin el permiso del jugador. Estas pueden emplearse para conseguir algunos objetos directamente. Adem\xe1s, las gemas \xc6os pueden utilizarse de la siguiente manera:"),u.qZA(),u.TgZ(74,"li"),u._uU(75,"Para conseguir objetos intercambiando cupones \xc6os en el Bazar \xc6os. Si un jugador no tiene suficientes cupones \xc6os para completar la transacci\xf3n, se le dar\xe1 la opci\xf3n de cubrir la diferencia con gemas \xc6os."),u.qZA(),u.TgZ(76,"li"),u._uU(77,"Si el jugador tiene un pase de combate pr\xe9mium o un pase de combate pr\xe9mium plus, tendr\xe1 la opci\xf3n de usar gemas \xc6os para subir el nivel de pase de combate."),u.qZA(),u.TgZ(78,"div",4)(79,"button",20),u.NdJ("click",function(){return r.habla(3)}),u._uU(80," INICIAR "),u.qZA(),u.TgZ(81,"button",20),u.NdJ("click",function(){return r.pausa(3)}),u._uU(82," PAUSAR "),u.qZA(),u.TgZ(83,"button",20),u.NdJ("click",function(){return r.resumir(3)}),u._uU(84," RESUMIR "),u.qZA()()()()(),u.TgZ(85,"div",0)(86,"div",21)(87,"h1"),u._uU(88,"\xbfPor qu\xe9 no puedo conseguir m\xe1s monedas \xc6os en Pok\xe9mon UNITE?"),u.qZA()(),u.TgZ(89,"div",22)(90,"div",3)(91,"h2"),u._uU(92,"Las monedas \xc6os son una de las monedas del juego en Pok\xe9mon UNITE. Ten en cuenta la siguiente informaci\xf3n sobre las monedas \xc6os:"),u.qZA(),u.TgZ(93,"li"),u._uU(94,"Se puede obtener un m\xe1ximo de 2100 monedas \xc6os a la semana por participar en combates."),u.qZA(),u.TgZ(95,"li"),u._uU(96,"No hay ning\xfan objeto que permita aumentar el l\xedmite de monedas \xc6os que se puede conseguir por semana."),u.qZA(),u.TgZ(97,"li"),u._uU(98,"La cantidad de monedas \xc6os se restablece cada lunes a las 00:00 UTC."),u.qZA(),u.TgZ(99,"div",4)(100,"button",23),u.NdJ("click",function(){return r.habla(4)}),u._uU(101," INICIAR "),u.qZA(),u.TgZ(102,"button",23),u.NdJ("click",function(){return r.pausa(4)}),u._uU(103," PAUSAR "),u.qZA(),u.TgZ(104,"button",23),u.NdJ("click",function(){return r.resumir(4)}),u._uU(105," RESUMIR "),u.qZA()()(),u.TgZ(106,"div",6),u._UZ(107,"img",24),u.qZA()()(),u.TgZ(108,"div",8)(109,"div",25)(110,"h1"),u._uU(111,"\xbfC\xf3mo puedo activar el chat de voz en la versi\xf3n de Pok\xe9mon UNITE para Nintendo Switch?"),u.qZA()(),u.TgZ(112,"div",26)(113,"div",6),u._UZ(114,"img",27),u.qZA(),u.TgZ(115,"div",3)(116,"h2"),u._uU(117,"Para poder usar el chat de voz en Pok\xe9mon UNITE, debes alcanzar el Nv. 6 de Entrenador y participar en un combate con otros jugadores. Sigue estos pasos para activar el chat de voz:"),u.qZA(),u.TgZ(118,"li"),u._uU(119,"Usa unos auriculares que sean compatibles con tu consola Nintendo Switch."),u.qZA(),u.TgZ(120,"li"),u._uU(121,"Abre Pok\xe9mon UNITE e inicia un combate."),u.qZA(),u.TgZ(122,"li"),u._uU(123,"Una vez que comience el encuentro, pulsa el bot\xf3n + para abrir el men\xfa del juego."),u.qZA(),u.TgZ(124,"li"),u._uU(125,"Despu\xe9s, pulsa el bot\xf3n - para acceder a los ajustes."),u.qZA(),u.TgZ(126,"li"),u._uU(127,"Busca la opci\xf3n Ajustes del chat de voz."),u.qZA(),u.TgZ(128,"li"),u._uU(129,"Para poder o\xedr a los otros jugadores, selecciona S\xed para la opci\xf3n Recepci\xf3n."),u.qZA(),u.TgZ(130,"li"),u._uU(131,"Para poder usar la funci\xf3n del chat de voz, deber\xe1s aceptar los t\xe9rminos de uso para el chat antes de activarlo por primera vez. Pulsa el bot\xf3n X para aceptar y continuar."),u.qZA(),u.TgZ(132,"li"),u._uU(133,"Si quieres o\xedr solo a jugadores a los que has invitado, selecciona Conocidos en la opci\xf3n Rango receptor. Si seleccionas Todos, podr\xe1s o\xedr a todo el equipo."),u.qZA(),u.TgZ(134,"li"),u._uU(135,"Si quieres que los otros jugadores puedan o\xedrte, selecciona S\xed para la opci\xf3n Emisi\xf3n."),u.qZA(),u.TgZ(136,"li"),u._uU(137,"Si quieres que te oigan solo jugadores a los que has invitado, selecciona Conocidos en la opci\xf3n Rango emisor. Si seleccionas Todos, todos los jugadores del equipo podr\xe1n o\xedrte."),u.qZA(),u.TgZ(138,"div",4)(139,"button",5),u.NdJ("click",function(){return r.habla(5)}),u._uU(140," INICIAR "),u.qZA(),u.TgZ(141,"button",5),u.NdJ("click",function(){return r.pausa(5)}),u._uU(142," PAUSAR "),u.qZA(),u.TgZ(143,"button",5),u.NdJ("click",function(){return r.resumir(5)}),u._uU(144," RESUMIR "),u.qZA()()()()(),u.TgZ(145,"div",0)(146,"div",28)(147,"h1"),u._uU(148,"\xbfCu\xe1les son los requisitos de sistema para jugar a Pok\xe9mon UNITE?"),u.qZA()(),u.TgZ(149,"div",29)(150,"div",3)(151,"h2")(152,"strong"),u._uU(153,"Android"),u.qZA()(),u.TgZ(154,"li"),u._uU(155,"Android 5.0 (API nivel 21) o posterior"),u.qZA(),u.TgZ(156,"li"),u._uU(157,"Procesador: Octa-core 1.8 GHz o superior"),u.qZA(),u.TgZ(158,"li"),u._uU(159,"Memoria: 3 GB RAM"),u.qZA(),u.TgZ(160,"li"),u._uU(161,"Gr\xe1ficos: Adreno 506 o superior"),u.qZA(),u.TgZ(162,"h2")(163,"strong"),u._uU(164,"iOS"),u.qZA()(),u.TgZ(165,"li"),u._uU(166,"iOS 12.0 o posterior"),u.qZA(),u.TgZ(167,"li"),u._uU(168,"Procesador: A9 o superior"),u.qZA(),u.TgZ(169,"li"),u._uU(170,"Memoria Minima: 2 GB RAM"),u.qZA(),u.TgZ(171,"div",4)(172,"button",23),u.NdJ("click",function(){return r.habla(6)}),u._uU(173," INICIAR "),u.qZA(),u.TgZ(174,"button",23),u.NdJ("click",function(){return r.pausa(6)}),u._uU(175," PAUSAR "),u.qZA(),u.TgZ(176,"button",23),u.NdJ("click",function(){return r.resumir(6)}),u._uU(177," RESUMIR "),u.qZA()()(),u.TgZ(178,"div",6),u._UZ(179,"img",30),u.qZA()()(),u.TgZ(180,"div",8)(181,"div",31)(182,"h1"),u._uU(183,"\xbfHay diferencias entre las versiones de Pok\xe9mon UNITE para Nintendo Switch y para dispositivos m\xf3viles?"),u.qZA()(),u.TgZ(184,"div",32)(185,"div",6),u._UZ(186,"img",33),u.qZA(),u.TgZ(187,"div",3),u._UZ(188,"br")(189,"br"),u.TgZ(190,"h2"),u._uU(191,"No. En lo que respecta al sistema de juego, no hay diferencias entre ambas versiones. Sin embargo, el tipo de cuenta que se puede vincular con cada una es distinto."),u.qZA(),u.TgZ(192,"div",4)(193,"button",34),u.NdJ("click",function(){return r.habla(7)}),u._uU(194," INICIAR "),u.qZA(),u.TgZ(195,"button",34),u.NdJ("click",function(){return r.pausa(7)}),u._uU(196," PAUSAR "),u.qZA(),u.TgZ(197,"button",34),u.NdJ("click",function(){return r.resumir(7)}),u._uU(198," RESUMIR "),u.qZA()()()()(),u.TgZ(199,"div",0)(200,"div",35)(201,"h1"),u._uU(202,"\xbfCu\xe1nto dura una membres\xeda Unite?"),u.qZA()(),u.TgZ(203,"div",36)(204,"div",3),u._UZ(205,"br")(206,"br"),u.TgZ(207,"h2"),u._uU(208,"La membres\xeda Unite dura un mes a partir del d\xeda en que se activa."),u.qZA(),u.TgZ(209,"div",4)(210,"button",37),u.NdJ("click",function(){return r.habla(8)}),u._uU(211," INICIAR "),u.qZA(),u.TgZ(212,"button",37),u.NdJ("click",function(){return r.pausa(8)}),u._uU(213," PAUSAR "),u.qZA(),u.TgZ(214,"button",37),u.NdJ("click",function(){return r.resumir(8)}),u._uU(215," RESUMIR "),u.qZA()()(),u.TgZ(216,"div",6),u._UZ(217,"img",38),u.qZA()()())},styles:[".seccion[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(255,0,0,0) 0%,rgb(255,255,255,1) 20%);width:100%;height:auto;border-radius:50px 0 0;display:flex;flex-wrap:wrap;margin-bottom:70px}.seccioni[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgba(255,0,0,0) 0%,rgb(255,255,255,1) 20%);width:100%;height:auto;border-radius:0 50px 0 0;display:flex;flex-wrap:wrap;margin-bottom:70px}.arriba[_ngcontent-%COMP%]{width:100%;padding-left:50px;border-radius:50px 0 0;margin-right:100px}.arribai[_ngcontent-%COMP%]{width:100%;padding-right:50px;border-radius:0 50px 0 0;margin-left:100px}.rojo[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(255,0,0,0)0%,rgba(255,0,0,1)20%)}.verde[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgba(255,0,0,0)0%,rgb(0,255,0)20%)}.azul[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(255,0,0,0)0%,rgb(93,93,255)20%)}.morado[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgba(255,0,0,0)0%,rgb(200,0,255)20%)}.amarillo[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(255,0,0,0)0%,rgb(255,255,0)20%)}.rosa[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgba(255,0,0,0)0%,rgb(255,0,255)20%)}.naranja[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(255,0,0,0)0%,rgb(255,150,0)20%)}.cian[_ngcontent-%COMP%]{background-image:linear-gradient(to right,rgba(255,0,0,0)0%,rgb(0,255,255)20%)}.gris[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgba(255,0,0,0)0%,rgb(116,116,116)20%)}.abajo[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.arojo[_ngcontent-%COMP%]{border-left:2px solid red;border-bottom:2px solid red}.averde[_ngcontent-%COMP%]{border-right:2px solid rgb(0,255,0);border-bottom:2px solid rgb(0,255,0)}.aazul[_ngcontent-%COMP%]{border-left:2px solid rgb(61,61,255);border-bottom:2px solid rgb(93,93,255)}.amorado[_ngcontent-%COMP%]{border-right:2px solid rgb(200,0,255);border-bottom:2px solid rgb(200,0,255)}.aamarillo[_ngcontent-%COMP%]{border-left:2px solid rgb(255,255,0);border-bottom:2px solid rgb(255,255,0)}.arosa[_ngcontent-%COMP%]{border-right:2px solid rgb(255,0,255);border-bottom:2px solid rgb(255,0,255)}.anaranja[_ngcontent-%COMP%]{border-left:2px solid rgb(255,150,0);border-bottom:2px solid rgb(255,150,0)}.acian[_ngcontent-%COMP%]{border-right:2px solid rgb(0,255,255);border-bottom:2px solid rgb(0,255,255)}.agris[_ngcontent-%COMP%]{border-left:2px solid rgb(116,116,116);border-bottom:2px solid rgb(116,116,116)}.izquierda[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;width:80%;height:auto}.derecha[_ngcontent-%COMP%]{width:20%}.imagenderecha[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(1.2) translateY(-15px) translate(60px)}.imagenderechai[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(1.2) translateY(25px) translate(-60px)}.carrusel[_ngcontent-%COMP%]{width:100%;height:100%}li[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:15px}h1[_ngcontent-%COMP%]{font-size:25px}.row[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}button[_ngcontent-%COMP%]{margin-left:30px;margin-right:30px}img[_ngcontent-%COMP%]{width:40%;height:40%}@media (min-width:1000px){li[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:justify;font-size:20px}h1[_ngcontent-%COMP%]{text-align:justify;font-size:28px}.imagenderecha[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(.9) translateY(-15px) translate(60px)}.imagenderechai[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(1.1) translateY(25px) translate(-60px)}}@media (max-width:1000px){li[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:justify;font-size:19px}h1[_ngcontent-%COMP%]{text-align:justify;font-size:27px}.imagenderecha[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(.8) translateY(-15px) translate(60px)}.imagenderechai[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(1) translateY(25px) translate(-80px)}}@media (max-width:800px){li[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center;font-size:12px}h1[_ngcontent-%COMP%]{text-align:center;font-size:20px}.imagenderechai[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(.8) translateY(25px) translate(-10px)}.imagenderecha[_ngcontent-%COMP%]{width:100%;height:auto;transform:scale(.8) translateY(-15px) translate(-10px)}}"]}),n})();function _H(n,e){if(1&n&&(u.TgZ(0,"div",52),u._UZ(1,"img",53),u.qZA()),2&n){const t=e.$implicit,r=e.first;u.s9C("id",t.data.tipo),u.Q6J("ngClass",r?"carousel-item active":"carousel-item"),u.xp6(1),u.s9C("src",t.data.foto,u.LSH)}}let yH=(()=>{class n{constructor(t){this.firestoreService=t,this.pokemones=[]}ngOnInit(){this.firestoreService.getPokemones().subscribe(t=>{this.pokemones=[],t.forEach(r=>{this.pokemones.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:95,vars:1,consts:[[1,"headerimg"],[1,"textoheader"],[1,"tituloheader"],[1,"cuerpoheader"],[1,"equipo"],[1,"equipobotones"],[1,"botonequipo"],[1,"roster"],[1,"textoroster"],[1,"tarjetaroster"],[1,"arriba"],[1,"abajo"],[1,"carrusel"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide","carruselfotos"],[1,"carousel-inner"],[3,"id","ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"],[1,"infoHome"],[1,"infSuperior"],[1,"contactos"],[1,"redes"],["href","https://www.facebook.com/PokemonUniteOfficial/",1,"fa","fa-facebook"],["href","https://twitter.com/PokemonUnite",1,"fa","fa-twitter"],["href","https://www.youtube.com/PokemonUnite",1,"fa","fa-youtube"],["href","https://www.instagram.com/pokemon/",1,"fa","fa-instagram"],[1,"noticias"],["onclick","location.href='https://unite.pokemon.com/es-mx/news/'",1,"botonequipo"],[1,"infoUnite"],[1,"centrar"],["src","https://unite.pokemon.com/images/footer/unite-logo.png","alt","",1,"reres"],["src","https://unite.pokemon.com/images/footer/logo-tpc.svg","alt",""],["src","https://unite.pokemon.com/images/footer/logo-nintendo-switch.svg","alt",""],[1,"etiquetas"],[1,"derechas"],["onclick","location.href='https://unite.pokemon.com/es-mx/'",1,"botonequipo"],["src","https://unite.pokemon.com/images/footer/privacy.png","alt",""],["src","https://unite.pokemon.com/images/footer/ratings/rating-en-us.jpg","alt","","width","180"],[1,"infoInferior"],[1,"registrosLegales"],["href","https://www.pokemon.com/us/terms-of-use/"],[1,"lineorange"],["href","https://www.pokemon.com/us/privacy-notice/"],["href","http://www.pokemon.com/us/legal/"],["href","https://support.pokemon.com/hc/en-us/categories/360003065772-Pok%C3%A9mon-UNITE"],[1,"registrosDatos"],[1,"contenSnor"],["src","/assets/img/snorlax.png","alt","",1,"snor"],[3,"id","ngClass"],["alt","...",1,"d-block","w-100","foto",3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"p",2),u._uU(3,"Unete a la aventura"),u.qZA(),u.TgZ(4,"p",3),u._uU(5,"En pokemon unite hay lugar para todos"),u.qZA()()(),u.TgZ(6,"div",4)(7,"div",5)(8,"button",6),u._uU(9,"Descargar Pokemon Unite"),u.qZA()()(),u.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"h2",10),u._uU(14,"Nuestro roster"),u.qZA(),u.TgZ(15,"p",11),u._uU(16," Pokemon unite ofrece una gran seleccion de pokemon para jugar. \xa1Encuenctra! "),u.qZA()()(),u.TgZ(17,"div",12)(18,"div",13)(19,"div",14),u.YNc(20,_H,2,3,"div",15),u.qZA(),u.TgZ(21,"button",16),u._UZ(22,"span",17),u.TgZ(23,"span",18),u._uU(24,"Previous"),u.qZA()(),u.TgZ(25,"button",19),u._UZ(26,"span",20),u.TgZ(27,"span",18),u._uU(28,"Next"),u.qZA()()()()(),u._UZ(29,"link",21),u.TgZ(30,"div",22)(31,"div",23)(32,"div",24)(33,"div",25),u._UZ(34,"a",26)(35,"a",27)(36,"a",28)(37,"a",29),u.qZA(),u.TgZ(38,"div",30)(39,"p"),u._uU(40,"Las mejores noticias de pokemon"),u.qZA(),u.TgZ(41,"button",31),u._uU(42," Noticias "),u.qZA()()(),u.TgZ(43,"div",32)(44,"div",33),u._UZ(45,"img",34),u.qZA(),u.TgZ(46,"div",33),u._UZ(47,"img",35),u.qZA(),u.TgZ(48,"div",33),u._UZ(49,"img",36),u.qZA()(),u.TgZ(50,"div",37)(51,"div",38)(52,"button",39),u._uU(53," Mexico "),u.qZA()(),u.TgZ(54,"div",38),u._UZ(55,"img",40),u.qZA(),u.TgZ(56,"div",38),u._UZ(57,"img",41),u.qZA()()(),u.TgZ(58,"div",42)(59,"div",43)(60,"a",44),u._uU(61,"Terms of Use"),u.qZA(),u.TgZ(62,"p",45),u._uU(63,"|"),u.qZA(),u.TgZ(64,"a",46),u._uU(65,"Privacy Notice"),u.qZA(),u.TgZ(66,"p",45),u._uU(67,"|"),u.qZA(),u.TgZ(68,"a",47),u._uU(69,"Legal Info"),u.qZA(),u.TgZ(70,"p",45),u._uU(71,"|"),u.qZA(),u.TgZ(72,"a",48),u._uU(73,"Customer service "),u.qZA()(),u.TgZ(74,"div",49)(75,"p"),u._uU(76," \xa92021 Pok\xe9mon. \xa91995\u20132021 Nintendo / Creatures Inc. / GAME FREAK inc. "),u.qZA(),u.TgZ(77,"p"),u._uU(78,"\xa92021 Tencent."),u.qZA(),u.TgZ(79,"p"),u._uU(80,"TM, \xae Nintendo."),u.qZA(),u.TgZ(81,"p"),u._uU(82,"Terminology is not final."),u.qZA(),u.TgZ(83,"p"),u._uU(84,"Screenshots and game footage are from a title under development."),u.qZA(),u.TgZ(85,"p"),u._uU(86," This is a free-to-start game; optional in-game purchases available. Data charges may apply. "),u.qZA(),u.TgZ(87,"p"),u._uU(88,"Nintendo Switch is a trademark of Nintendo"),u.qZA(),u.TgZ(89,"p"),u._uU(90," Apple and the Apple logo are trademarks of Apple Inc., registered in the U.S. and other countries. App Store is a service mark of Apple Inc. "),u.qZA(),u.TgZ(91,"p"),u._uU(92," Android, Google Play, and the Google Play logo are trademarks of Google, LLC. "),u.qZA()()(),u.TgZ(93,"div",50),u._UZ(94,"img",51),u.qZA()()),2&t&&(u.xp6(20),u.Q6J("ngForOf",r.pokemones))},dependencies:[ud,xs],styles:[".headerimg[_ngcontent-%COMP%]{height:600px;background-image:url(PokemonallBackground.39b037542d0f1017.jpg);margin-left:-11%;margin-right:-11%;margin-top:-3%;background-size:cover;display:flex;justify-content:center;align-items:flex-end}.textoheader[_ngcontent-%COMP%]{margin-bottom:50px;height:100px;display:flex;flex-wrap:wrap;justify-content:center;border-bottom:100px solid rgba(0,0,0,.712);border-left:25px solid transparent;border-right:25px solid transparent;height:0;width:500px;border-radius:10px}.tituloheader[_ngcontent-%COMP%]{background-color:orange;border:1px solid brown;width:200px;height:50px;transform:translateY(-20px);text-align:center;padding-top:10px;border-radius:20px 0}.cuerpoheader[_ngcontent-%COMP%]{width:100%;text-align:center;color:#fff;font-size:25px;transform:translateY(-35px)}.equipo[_ngcontent-%COMP%]{height:600px;background-image:url(poketeam.d9869532b74f55c3.jpg);margin-left:-11%;margin-right:-11%;margin-top:-3%;background-size:cover;display:flex;justify-content:center;align-items:center}.equipobotones[_ngcontent-%COMP%]{width:300px;height:100px;transform:skew(20deg);background:rgba(0,0,0,.719);display:flex;justify-content:center;align-items:center}.botonequipo[_ngcontent-%COMP%]{border-radius:10px;background-color:orange;border:1px solid brown;height:40px;width:220px;transform:skew(-20deg)}.infoHome[_ngcontent-%COMP%]{background-color:#8b008b;margin-left:-11%;margin-right:-11%}.infoHome[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.infSuperior[_ngcontent-%COMP%]{padding-top:40px;display:flex;justify-content:space-around;padding-left:90px;padding-right:90px}.contactos[_ngcontent-%COMP%]{width:400px}.redes[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.fa[_ngcontent-%COMP%]{padding:20px;font-size:40px;width:80px;text-align:center;text-decoration:none;border-radius:50%}.fa[_ngcontent-%COMP%]:hover{opacity:.7}.fa-facebook[_ngcontent-%COMP%]{background:#3B5998;color:#fff}.fa-twitter[_ngcontent-%COMP%]{background:#55ACEE;color:#fff}.fa-youtube[_ngcontent-%COMP%]{background:#bb0000;color:#fff}.fa-instagram[_ngcontent-%COMP%]{background:#125688;color:#fff}.noticias[_ngcontent-%COMP%]{padding-top:20px}.infoUnite[_ngcontent-%COMP%]{padding-top:20px;display:flex;flex-direction:column;margin:10;width:400px}.etiquetas[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10;padding:auto;width:400px}.roster[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;margin-top:20px;margin-bottom:20px}.textoroster[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center;align-items:center}.tarjetaroster[_ngcontent-%COMP%]{background-image:linear-gradient(to left,rgb(56,1,80),rgb(255,255,255,1));width:100%;height:150px;border-radius:50px 0 0;display:flex;flex-wrap:wrap;margin-bottom:70px;border-left:2px solid orange;border-bottom:2px solid rgb(56,1,80);transform:translate(94px)}.arriba[_ngcontent-%COMP%]{width:100%;padding-left:50px;border-radius:50px 0 0;background-image:linear-gradient(to left,rgba(255,0,0,0)0%,rgba(255,165,0,1)20%);margin-right:100px}.abajo[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;padding-left:20px;padding-right:120px}.carrusel[_ngcontent-%COMP%]{width:50%;display:flex;justify-content:center;transform:translate(-20px)}.carousel[_ngcontent-%COMP%]{width:60%;border:10px solid rgb(56,1,80);background-color:#380150;border-radius:20px}.foto[_ngcontent-%COMP%]{width:100%;border-radius:20px}#Defensivo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#0f0;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Ofensivo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#fd7a00;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Apoyo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#9dff00;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Agil[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#00ffea;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Equilibrado[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:purple;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}.infoInferior[_ngcontent-%COMP%], .contenSnor[_ngcontent-%COMP%]{display:flex;flex-direction:column}.registrosLegales[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:row;justify-content:center}.lineorange[_ngcontent-%COMP%]{color:#ff8c00;font-size:30px}.registrosLegales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:active{text-decoration:none;color:#ff8c00;font-size:30px}.registrosLegales[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:orange}.registrosDatos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:15px;padding-left:50px;padding-right:50px}img[_ngcontent-%COMP%]{display:block}.centrar[_ngcontent-%COMP%]{padding-top:20px;align-self:center}.derechas[_ngcontent-%COMP%]{padding-top:20px;align-self:flex-end}.snor[_ngcontent-%COMP%]{width:60%;height:60%;align-self:center}@media screen and (max-width: 1200PX){.infSuperior[_ngcontent-%COMP%]{flex-direction:column;align-self:flex-end}.infoUnite[_ngcontent-%COMP%], .contactos[_ngcontent-%COMP%], .etiquetas[_ngcontent-%COMP%], .derechas[_ngcontent-%COMP%], .noticias[_ngcontent-%COMP%]{align-self:center;text-align:center}}@media screen and (max-width: 800PX){.registrosLegales[_ngcontent-%COMP%]{flex-direction:column;align-self:flex-end;align-self:center}.tarjetaroster[_ngcontent-%COMP%]{height:auto}}@media screen and (max-width: 700px){.roster[_ngcontent-%COMP%]{flex-direction:column}.tarjetaroster[_ngcontent-%COMP%]{border-radius:24px 0 0;margin-bottom:0;transform:translate(.1px)}.textoroster[_ngcontent-%COMP%]{width:80%;align-self:center}.arriba[_ngcontent-%COMP%]{border-radius:20px 0 0}.carrusel[_ngcontent-%COMP%]{align-self:center}}@media screen and (max-width: 400px){.redes[_ngcontent-%COMP%]{flex-direction:column;padding-top:-20px}.redes[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:20px;align-self:center}.reres[_ngcontent-%COMP%], .textoheader[_ngcontent-%COMP%], .tituloheader[_ngcontent-%COMP%], .cuerpoheader[_ngcontent-%COMP%], .equipobotones[_ngcontent-%COMP%], .botonequipor[_ngcontent-%COMP%]{transform:scale(.6)}.infoUnite[_ngcontent-%COMP%], .etiquetas[_ngcontent-%COMP%], .contactos[_ngcontent-%COMP%]{width:200px}}@media screen and (max-width: 1550PX){.headerimg[_ngcontent-%COMP%], .equipo[_ngcontent-%COMP%]{height:500px}.infoHome[_ngcontent-%COMP%]{background-color:#8b008b}}"]}),n})();const vH=function(n,e,t){return["/pokemonPage",n,e,t]};function wH(n,e){if(1&n&&(u.TgZ(0,"div",7)(1,"div",8)(2,"a",9),u._UZ(3,"img",10),u.qZA()(),u.TgZ(4,"div",11)(5,"p",12),u._uU(6),u.qZA()()()),2&n){const t=e.$implicit;u.s9C("id",t.data.tipo),u.xp6(2),u.Q6J("routerLink",u.kEZ(4,vH,t.data.nombre,t.data.foto,t.data.info)),u.xp6(1),u.s9C("src",t.data.foto,u.LSH),u.xp6(3),u.Oqu(t.data.nombre)}}let bH=(()=>{class n{constructor(t){this.firestoreService=t,this.pokemones=[]}ngOnInit(){this.filtro("all"),this.firestoreService.getPokemones().subscribe(t=>{this.pokemones=[],t.forEach(r=>{this.pokemones.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}anadirclase(t,r){var i,a,c;for(a=t.className.split(" "),c=r.split(" "),i=0;i<c.length;i++)-1==a.indexOf(c[i])&&(t.className+=" "+c[i])}quitarclase(t,r){var i,a,c;for(a=t.className.split(" "),c=r.split(" "),i=0;i<c.length;i++)for(;a.indexOf(c[i])>-1;)a.splice(a.indexOf(c[i]),1);t.className=a.join(" ")}filtro(t){var r,i;for(r=document.getElementsByClassName("card"),"all"==t&&(t=""),i=0;i<r.length;i++)this.quitarclase(r[i],"show"),r[i].id.indexOf(t)>-1&&this.anadirclase(r[i],"show")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ff))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-pokemones"]],decls:23,vars:1,consts:[[1,"container"],[1,"menutipos"],[1,"displayfiltros"],[1,"lifiltro"],[1,"filtro",3,"click"],[1,"pokecards"],["class","card carta show",3,"id",4,"ngFor","ngForOf"],[1,"card","carta","show",3,"id"],[1,"foto"],[3,"routerLink"],["alt","...",1,"card-img-top","imgcard",3,"src"],[1,"card-body"],[1,"card-text","cardtexto"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),u.NdJ("click",function(){return r.filtro("all")}),u._uU(5,"Todos los roles"),u.qZA()(),u.TgZ(6,"div",3)(7,"button",4),u.NdJ("click",function(){return r.filtro("Ofensivo")}),u._uU(8,"Ofensivo"),u.qZA()(),u.TgZ(9,"div",3)(10,"button",4),u.NdJ("click",function(){return r.filtro("Defensivo")}),u._uU(11,"Defensivo"),u.qZA()(),u.TgZ(12,"div",3)(13,"button",4),u.NdJ("click",function(){return r.filtro("Apoyo")}),u._uU(14,"Apoyo"),u.qZA()(),u.TgZ(15,"div",3)(16,"button",4),u.NdJ("click",function(){return r.filtro("Agil")}),u._uU(17,"Agil"),u.qZA()(),u.TgZ(18,"div",3)(19,"button",4),u.NdJ("click",function(){return r.filtro("Equilibrado")}),u._uU(20,"Equilibrado"),u.qZA()()()(),u.TgZ(21,"div",5),u.YNc(22,wH,7,8,"div",6),u.qZA()()),2&t&&(u.xp6(22),u.Q6J("ngForOf",r.pokemones))},dependencies:[xs,Rb],styles:[".filtro[_ngcontent-%COMP%]{border-radius:20px;height:45px;padding:7px;margin:10px;border-style:none;background-color:#8a2be2;color:#fff;font-weight:bolder}.displayfiltros[_ngcontent-%COMP%]{list-style-type:none;display:flex}.pokecards[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.carta[_ngcontent-%COMP%]{width:200px;height:auto;display:none;padding:5px;background-color:#380150;margin:10px;border-radius:20px;transition:all .1s}.imgcard[_ngcontent-%COMP%]{border-radius:20px;width:100%;height:100%}.cardtexto[_ngcontent-%COMP%]{text-align:center;color:#fff;font-weight:bolder;font-size:30px}.show[_ngcontent-%COMP%]{display:block}.foto[_ngcontent-%COMP%]{border-radius:20px}#Defensivo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#0f0;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Ofensivo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#fd7a00;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Apoyo[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#9dff00;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Agil[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:#00ffea;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}#Equilibrado[_ngcontent-%COMP%] > .foto[_ngcontent-%COMP%]{background-color:purple;background-image:url(https://unite.pokemon.com/images/footer/background.jpg);background-size:50%;background-blend-mode:hard-light}.carta[_ngcontent-%COMP%]:hover{transform:scale(1.15)}@media (min-width:1000px){.displayfiltros[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}}@media (max-width:1000px){.filtro[_ngcontent-%COMP%]{width:130px}.container[_ngcontent-%COMP%], .menutipos[_ngcontent-%COMP%]{width:100%}.displayfiltros[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}}"]}),n})(),OL=(()=>{class n{get windowRef(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u._UZ(1,"hr"),u.TgZ(2,"label",22),u._uU(3,"Ingrese el c\xf3digo de verificaci\xf3n"),u.qZA(),u.TgZ(4,"input",23),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw(2);return u.KtG(a.verificationCode=i)}),u.qZA(),u.TgZ(5,"div",24),u._uU(6),u.qZA(),u.TgZ(7,"div",25)(8,"button",26),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.verifyLoginCode())}),u._uU(9,"Verificar"),u.qZA()()()}if(2&n){const t=u.oxw(2);u.xp6(4),u.Q6J("ngModel",t.verificationCode),u.xp6(2),u.hij(" ",t.advice," ")}}function EH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"h5"),u._uU(2,"Iniciar sesi\xf3n con n\xfamero de celular"),u.qZA(),u.TgZ(3,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.MetodoLogin())}),u._uU(4," Login con email "),u.qZA(),u.TgZ(5,"div",13)(6,"label",14),u._uU(7,"N\xfamero de tel\xe9fono"),u.qZA(),u.TgZ(8,"div",15)(9,"input",16),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.phoneNumber.country=i)}),u.qZA(),u.TgZ(10,"input",17),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.phoneNumber.area=i)}),u.qZA(),u.TgZ(11,"input",18),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.phoneNumber.prefix=i)}),u.qZA(),u.TgZ(12,"input",19),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.phoneNumber.line=i)}),u.qZA()(),u._UZ(13,"div",20)(14,"br"),u.TgZ(15,"button",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.sendLoginCode())}),u._uU(16,"Enviar c\xf3digo de login por SMS"),u.qZA(),u._UZ(17,"br"),u.YNc(18,CH,10,2,"div",10),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(9),u.Q6J("ngModel",t.phoneNumber.country),u.xp6(1),u.Q6J("ngModel",t.phoneNumber.area),u.xp6(1),u.Q6J("ngModel",t.phoneNumber.prefix),u.xp6(1),u.Q6J("ngModel",t.phoneNumber.line),u.xp6(6),u.Q6J("ngIf",t.windowRef.confirmationResult)}}function IH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"div",13)(2,"h5"),u._uU(3,"Email"),u.qZA(),u._UZ(4,"input",27,28)(6,"br")(7,"br"),u.qZA(),u.TgZ(8,"div",13)(9,"h5"),u._uU(10,"Password"),u.qZA(),u._UZ(11,"input",29,30)(13,"br")(14,"br"),u.TgZ(15,"div",25)(16,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.cambiarSMS())}),u._uU(17," Login por SMS "),u.qZA(),u.TgZ(18,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.MAs(5),a=u.MAs(12),c=u.oxw();return u.KtG(c.authService.SignIn(i.value,a.value))}),u._uU(19," Ingresar "),u.qZA()(),u._UZ(20,"br"),u.qZA()()}}class TH{constructor(){this.country="",this.area="",this.prefix="",this.line=""}get e164(){return`+${this.country+this.area+this.prefix+this.line}`}}let DH=(()=>{class n{constructor(t,r,i){this.authService=t,this.win=r,this.router=i,this.Uname="",this.Password="",this.Metodo=!0,this.advice="",this.phoneNumber=new TH,this.verificationCode=""}ngOnInit(){this.windowRef=this.win.windowRef,this.windowRef.recaptchaVerifier=new Wn.Z.auth.RecaptchaVerifier("recaptcha-container"),this.windowRef.recaptchaVerifier.render()}sendLoginCode(){const t=this.windowRef.recaptchaVerifier,r=this.phoneNumber.e164;Wn.Z.auth().signInWithPhoneNumber(r,t).then(i=>{this.windowRef.confirmationResult=i}).catch(i=>console.log(i))}verifyLoginCode(){this.advice="",this.windowRef.confirmationResult.confirm(this.verificationCode).then(t=>{this.user=t.user,localStorage.setItem("sesion","sms")}).catch(t=>{this.advice="C\xf3digo incorrecto"})}logOut(){Wn.Z.auth().signOut().catch(t=>console.log(t))}cambiarSMS(){this.router.navigate(["/sms"]).then(()=>{window.location.reload()})}MetodoLogin(){this.Metodo=1!=this.Metodo}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kg),u.Y36(OL),u.Y36(Fi))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login-form"]],decls:15,vars:2,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#Login",1,"button-default","button-slanted","loginb"],[1,"button-slanted-content"],["id","Login","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["align","center",1,"col-xs-1"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],[1,"container"],["for","phone","id","lbNum"],["id","cajaNum"],["type","text","id","num","placeholder","52","maxlength","2",1,"input",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","449","maxlength","3",1,"input",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","555","maxlength","3",1,"input",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","5555","maxlength","4",1,"input",3,"ngModel","ngModelChange"],["id","recaptcha-container"],[1,"btn","btn-warning",3,"click"],["for","code","id","lbNum"],["type","text","name","code","id","num",3,"ngModel","ngModelChange"],["role","alert","id","errorDatos","hidden","",1,"formh5","alert","alert-warning"],[1,"d-flex","justify-content-around"],[1,"btn","btn-outline-danger",3,"click"],["id","Unamef","type","text","required",""],["userEmail",""],["id","Passwordf","type","text","required",""],["userPwd",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"span",1),u._uU(2,"Loguearse"),u.qZA()(),u.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"h5",6),u._uU(8,"Login"),u.qZA(),u._UZ(9,"button",7),u.qZA(),u.TgZ(10,"div",8)(11,"div",9),u.YNc(12,EH,19,5,"div",10),u.qZA(),u.YNc(13,IH,21,0,"div",10),u.qZA(),u._UZ(14,"div",11),u.qZA()()()),2&t&&(u.xp6(12),u.Q6J("ngIf",0==r.Metodo),u.xp6(1),u.Q6J("ngIf",1==r.Metodo))},dependencies:[Vi,lf,gy,nA,qb],styles:[".modal-content[_ngcontent-%COMP%]{background-color:#474747;color:#f0f8ff}.btn-warning[_ngcontent-%COMP%]{outline:none!important;background:rgb(124,25,157);border:rgb(72,15,91) 1px!important;color:#f0f8ff;margin-bottom:10px}.btn[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.btn-warning[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none;background:rgb(88,18,111)}.button-default[_ngcontent-%COMP%]{color:#fff;background-color:#da9816;text-align:center;text-transform:uppercase;padding:5px;margin:10px;display:inline-block;transition:all .5s ease}.button-slanted[_ngcontent-%COMP%]{transform:skew(-10deg)}.button-slanted-content[_ngcontent-%COMP%]{transform:skew(10deg);display:inline-block;padding:10px 30px;font-family:Fugaz One,cursive}.button-slanted[_ngcontent-%COMP%]:hover{display:inline-block;transform:skew(-10deg);box-shadow:10px 0 #90c;padding-left:8px;cursor:pointer}.button-default[_ngcontent-%COMP%]   .loginb[_ngcontent-%COMP%]{width:500px!important}#num[_ngcontent-%COMP%]{margin:10px;width:90px}#cajaNum[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}#recaptcha-container[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px;margin-right:20px}"]}),n})();function AH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (El nombre no puede quedar vac\xedo) "),u.qZA())}function SH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (El usuario no puede quedar vac\xedo) "),u.qZA())}function xH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (Debe tener como m\xe1ximo 10 caracteres) "),u.qZA())}function MH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (El email no puede quedar vac\xedo) "),u.qZA())}function PH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (El email no es v\xe1lido) "),u.qZA())}function kH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (Este campo no puede quedar vac\xedo) "),u.qZA())}function RH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (Debe tener como m\xednimo 6 caracteres) "),u.qZA())}function NH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (Este campo no puede quedar vac\xedo) "),u.qZA())}function OH(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1," (Debe tener como m\xednimo 6 caracteres) "),u.qZA())}let FH=(()=>{class n{constructor(t){this.authService=t,this.UnombreC="",this.Uname="",this.Uemail="",this.Udate="",this.Upassw1="",this.Upassw2="",this.advice="",this.password="",this.password_repeat="",this.formularioContacto=new Ub({nombre:new Ds("",is.required),userName:new Ds("",[is.required,is.maxLength(10)]),mail:new Ds("",[is.required,is.email]),passwordf1:new Ds("",[is.required,is.minLength(6)]),passwordf2:new Ds("",[is.required,is.minLength(6)])})}ngOnInit(){}submit(){this.formularioContacto.valid?(this.advice="",document.getElementById("errorDatos").hidden=!0,this.password=this.formularioContacto.value.passwordf1,this.password_repeat=this.formularioContacto.value.passwordf2,this.password==this.password_repeat?(this.UnombreC=this.formularioContacto.value.nombre,this.Uname=this.formularioContacto.value.userName,this.Uemail=this.formularioContacto.value.mail):(document.getElementById("errorDatos").hidden=!1,this.advice="Las contrase\xf1as ingresadas deben de coincidir",document.getElementById("passwordf1").value="",document.getElementById("passwordf2").value=""),"admin"!=this.Uname&&"Administrador"!=this.UnombreC&&"admin"!=this.Uname&&"Administrador"!=this.UnombreC?(this.authService.SignUp(this.Uname,this.Uemail,this.password,this.UnombreC),document.getElementById("nombrecompletof").value="",this.limpiaInputs()):(document.getElementById("errorDatos").hidden=!1,this.limpiaInputs(),this.advice="Nombre de usuario no v\xe1lido")):(document.getElementById("errorDatos").hidden=!1,this.advice="Se ingresaron datos inv\xe1lidos, intente de nuevo",this.limpiaInputs())}limpiaInputs(){document.getElementById("nombrecompletof").value="",document.getElementById("unamef").value="",document.getElementById("emailf").value="",document.getElementById("passwordf1").value="",document.getElementById("passwordf2").value=""}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kg))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-register-form"]],decls:59,vars:11,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"button-default","button-slanted","loginb","button-slanted-content"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["align","center",1,"col-xs-1"],["id","formulario",3,"formGroup","ngSubmit"],[1,"formh5"],["type","text","formControlName","nombre","id","nombrecompletof","required",""],[4,"ngIf"],["type","text","formControlName","userName","id","unamef","required",""],["type","text","formControlName","mail","id","emailf"],["type","text","formControlName","passwordf1","id","passwordf1","required",""],["type","text","formControlName","passwordf2","id","passwordf2","required",""],["role","alert","id","errorDatos","hidden","",1,"formh5","alert","alert-primary"],["type","submit",1,"btn","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,r){if(1&t&&(u.TgZ(0,"button",0),u._uU(1," Registrar\n"),u.qZA(),u.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h6",5),u._uU(7,"Registrar Nuevo Usuario"),u.qZA(),u._UZ(8,"button",6),u.qZA(),u.TgZ(9,"div",7)(10,"div",8),u._UZ(11,"br"),u.TgZ(12,"form",9),u.NdJ("ngSubmit",function(){return r.submit()}),u.TgZ(13,"div",10)(14,"h5"),u._uU(15,"Nombre completo:"),u.qZA(),u._UZ(16,"input",11),u.TgZ(17,"div",10)(18,"p"),u.YNc(19,AH,2,0,"span",12),u.qZA()()(),u.TgZ(20,"div",10)(21,"h5"),u._uU(22,"Usuario:"),u.qZA(),u._UZ(23,"input",13),u.TgZ(24,"div",10)(25,"p"),u.YNc(26,SH,2,0,"span",12),u.YNc(27,xH,2,0,"span",12),u.qZA()()(),u.TgZ(28,"div",10)(29,"h5"),u._uU(30,"Email:"),u.qZA(),u._UZ(31,"input",14),u.TgZ(32,"div",10)(33,"p"),u.YNc(34,MH,2,0,"span",12),u.YNc(35,PH,2,0,"span",12),u.qZA()()(),u.TgZ(36,"div",10)(37,"h5"),u._uU(38,"Password:"),u.qZA(),u._UZ(39,"input",15),u.TgZ(40,"div",10)(41,"p"),u.YNc(42,kH,2,0,"span",12),u.YNc(43,RH,2,0,"span",12),u.qZA()()(),u.TgZ(44,"div",10)(45,"h5"),u._uU(46,"Confirm password:"),u.qZA(),u._UZ(47,"input",16),u.TgZ(48,"div",10)(49,"p"),u.YNc(50,NH,2,0,"span",12),u.YNc(51,OH,2,0,"span",12),u.qZA()()(),u.TgZ(52,"div",17),u._uU(53),u.qZA(),u.TgZ(54,"button",18),u._uU(55,"Guardar Usuario"),u.qZA()()(),u.TgZ(56,"div",19)(57,"button",20),u._uU(58," Salir "),u.qZA()()()()()()),2&t){let i,a,c,f,m,v,I,S,O;u.xp6(12),u.Q6J("formGroup",r.formularioContacto),u.xp6(7),u.Q6J("ngIf",null==(i=r.formularioContacto.get("nombre"))||null==i.errors?null:i.errors.required),u.xp6(7),u.Q6J("ngIf",null==(a=r.formularioContacto.get("userName"))||null==a.errors?null:a.errors.required),u.xp6(1),u.Q6J("ngIf",null==(c=r.formularioContacto.get("userName"))||null==c.errors?null:c.errors.maxlength),u.xp6(7),u.Q6J("ngIf",null==(f=r.formularioContacto.get("mail"))||null==f.errors?null:f.errors.required),u.xp6(1),u.Q6J("ngIf",null==(m=r.formularioContacto.get("mail"))||null==m.errors?null:m.errors.email),u.xp6(7),u.Q6J("ngIf",null==(v=r.formularioContacto.get("passwordf1"))||null==v.errors?null:v.errors.required),u.xp6(1),u.Q6J("ngIf",null==(I=r.formularioContacto.get("passwordf1"))||null==I.errors?null:I.errors.minlength),u.xp6(7),u.Q6J("ngIf",null==(S=r.formularioContacto.get("passwordf2"))||null==S.errors?null:S.errors.required),u.xp6(1),u.Q6J("ngIf",null==(O=r.formularioContacto.get("passwordf2"))||null==O.errors?null:O.errors.minlength),u.xp6(2),u.hij(" ",r.advice," ")}},dependencies:[Vi,Zb,lf,gy,Ob,tA,Hb,XD],styles:["h6[_ngcontent-%COMP%]{text-align:center;margin-left:37.5%;font-size:large}h5[_ngcontent-%COMP%]{font-size:15px}p[_ngcontent-%COMP%]{font-size:12px;color:#fcbbbb}input[_ngcontent-%COMP%]{width:400px}#unamef[_ngcontent-%COMP%], #passwordf1[_ngcontent-%COMP%], #passwordf2[_ngcontent-%COMP%], #emailf[_ngcontent-%COMP%], #nombrecompletof[_ngcontent-%COMP%], alert[_ngcontent-%COMP%]{width:300px}.formh5[_ngcontent-%COMP%]{margin-bottom:5px}.modal-content[_ngcontent-%COMP%]{background-color:#434343;color:#fff}.btn-primary[_ngcontent-%COMP%]{background-color:#8a2be2;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]{background-color:#474747;color:#f0f8ff}.btn-warning[_ngcontent-%COMP%]{outline:none!important;background:rgb(124,25,157);border:rgb(72,15,91) 1px!important;color:#f0f8ff}.btn[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.btn-warning[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none;background:rgb(88,18,111)}.button-default[_ngcontent-%COMP%]{color:#fff;background-color:#da9816;text-align:center;text-transform:uppercase;padding:12px 25px!important;margin:10px;display:inline-block;transition:all .5s ease}.button-slanted[_ngcontent-%COMP%]{font-family:Fugaz One,cursive;transform:skew(-10deg)}.button-slanted-content[_ngcontent-%COMP%]{transform:skew(-10deg);display:inline-block;padding:10px 30px;font-family:Fugaz One,cursive}.button-slanted[_ngcontent-%COMP%]:hover{display:inline-block;transform:skew(-10deg);box-shadow:10px 0 #90c;padding-left:8px;cursor:pointer}.button-default[_ngcontent-%COMP%]   .loginb[_ngcontent-%COMP%]{width:500px!important}"]}),n})(),LH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login-page"]],decls:26,vars:0,consts:[["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Fugaz+One&display=swap","rel","stylesheet"],[1,"marco_1"],[1,"marco_2"],[1,"marco_3"],[1,"contenedor"],[1,"logimage"],[1,"logform"]],template:function(t,r){1&t&&(u._UZ(0,"link",0)(1,"link",1)(2,"link",2),u.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),u._uU(8," e "),u.qZA(),u.TgZ(9,"div",8),u._UZ(10,"br")(11,"br")(12,"br")(13,"br")(14,"br"),u.TgZ(15,"h4"),u._uU(16,"UNETE A LA DIVERSION"),u.qZA(),u.TgZ(17,"h6"),u._uU(18,"ES GRATIS"),u.qZA(),u._UZ(19,"br")(20,"br")(21,"app-register-form")(22,"br")(23,"br")(24,"br")(25,"app-login-form"),u.qZA()()()()())},dependencies:[DH,FH],styles:['@import"https://fonts.googleapis.com/css2?family=Fugaz+One&display=swap";.marco_1[_ngcontent-%COMP%]{margin-left:-10%;margin-right:-10%;margin-top:-2%;background:#9900cc}.marco_2[_ngcontent-%COMP%]{margin-left:1%;margin-right:1%;background:#731f86}.marco_3[_ngcontent-%COMP%]{margin-left:1%;margin-right:1%;margin-top:0%;background-image:linear-gradient(#212121,#1b1a1a)}.contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-content:flex-start;align-items:flex-start}.logimage[_ngcontent-%COMP%]{order:0;flex:2.5 1 auto;align-self:auto;background-repeat:no-repeat;background-image:url(unite1.94b10ed370180650.jpg);height:600px;background-size:900px 100%}.logform[_ngcontent-%COMP%]{order:0;flex:1 1 auto;align-self:auto;text-align:center}.logform[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-family:Fugaz One,cursive;font-size:20px;animation:changeBg .5s infinite}.logform[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Fugaz One,cursive;font-size:25px;color:#fff}@keyframes changeBg{0%,to{text-shadow:1px 1px 5px rgba(255,255,255,.782);color:#ffbb01}50%{text-shadow:1px 1px 0px rgba(255,255,255,.726);color:#c500e8}}.button-default[_ngcontent-%COMP%]{color:#fff;background-color:#da9816;text-align:center;text-transform:uppercase;padding:5px;margin:10px;display:inline-block;transition:all .5s ease}.button-slanted[_ngcontent-%COMP%]{transform:skew(-10deg)}.button-slanted-content[_ngcontent-%COMP%]{transform:skew(10deg);display:inline-block;padding:10px 30px;font-family:Fugaz One,cursive}.button-slanted[_ngcontent-%COMP%]:hover{display:inline-block;transform:skew(-10deg);box-shadow:10px 0 #90c;padding-left:8px;cursor:pointer}.button-default[_ngcontent-%COMP%]   .loginb[_ngcontent-%COMP%]{width:500px!important}']}),n})();function UH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),u._uU(4),u.qZA()(),u.TgZ(5,"div",5)(6,"div",6),u._UZ(7,"img",7),u.qZA(),u.TgZ(8,"div",8)(9,"p"),u._uU(10),u.qZA()()()(),u.TgZ(11,"div",9),u._UZ(12,"div",10),u.TgZ(13,"div",11)(14,"button",12)(15,"div",13),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.pausa())}),u.qZA()(),u.TgZ(16,"button",12)(17,"div",14),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.habla())}),u.qZA()(),u.TgZ(18,"button",12)(19,"div",15),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.resumir())}),u.qZA()()()()()}if(2&n){const t=u.oxw();u.xp6(4),u.Oqu(t.nombre),u.xp6(3),u.s9C("src",t.foto,u.LSH),u.xp6(3),u.Oqu(t.info)}}function VH(n,e){if(1&n&&(u.TgZ(0,"div",16)(1,"div",17),u._UZ(2,"img",18),u.qZA(),u.TgZ(3,"div",19)(4,"h2"),u._uU(5),u.qZA()()()),2&n){const t=u.oxw();u.xp6(5),u.hij('Lo sentimos, nuestros Pok\xe9mones no encontraron a "',t.nombre,'" en el pokedex de nuestra p\xe1gina.')}}let BH=(()=>{class n{constructor(t){this.rutaActiva=t}ngOnInit(){this.nombre=this.rutaActiva.snapshot.paramMap.get("nombre"),this.foto=this.rutaActiva.snapshot.paramMap.get("foto"),this.info=this.rutaActiva.snapshot.paramMap.get("info")}habla(){speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(this.info);speechSynthesis.speak(t)}pausa(){speechSynthesis.pause()}resumir(){speechSynthesis.resume()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ag))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-pokemon-page"]],decls:2,vars:2,consts:[["class","carcasa",4,"ngIf"],["class","contenedor rounded",4,"ngIf"],[1,"carcasa"],[1,"pantalla"],[1,"nombre"],[1,"imagenentrada"],[1,"imagenpoke"],["alt","",3,"src"],[1,"entrada"],[1,"accesorios"],[1,"cross"],[1,"circulos"],[1,"circle"],[1,"pausa",3,"click"],[1,"play",3,"click"],[1,"stop",3,"click"],[1,"contenedor","rounded"],["id","msjImagen"],["src","../../assets/img/snorlax.png","alt","","height","350px"],["id","msjBusqueda",1,"rounded"]],template:function(t,r){1&t&&(u.YNc(0,UH,20,3,"div",0),u.YNc(1,VH,6,1,"div",1)),2&t&&(u.Q6J("ngIf",-1!=r.info),u.xp6(1),u.Q6J("ngIf",-1==r.info))},dependencies:[Vi],styles:['.carcasa[_ngcontent-%COMP%]{background-color:#e00000;padding:20px;border:1px solid black;border-radius:20px;width:60%;box-shadow:10px 10px 8px #000;margin-left:20%}.pantalla[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#7fffd4;padding:30px;border:1px solid black}.nombre[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-bottom:15px;background-color:#00000081;color:#7fffd4;transform:skew(20deg)}h1[_ngcontent-%COMP%]{transform:skew(-20deg)}.imagenentrada[_ngcontent-%COMP%]{display:flex;justify-content:center}.entrada[_ngcontent-%COMP%]{background-color:#fdfd82;border:1px solid black;border-radius:30px;width:50%;display:flex;justify-content:center;padding:30px}.imagenpoke[_ngcontent-%COMP%]{background-image:url(/assets/img/portal.png);background-size:cover;width:50%;display:flex;justify-content:center;border-bottom:1px solid blue}.accesorios[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-around}.cross[_ngcontent-%COMP%]{background:rgb(37,37,37);height:100px;position:relative;width:40px;border:1px solid black;box-shadow:10px 10px 8px #000}.cross[_ngcontent-%COMP%]:after{background:rgb(37,37,37);content:"";height:40px;left:-30px;position:absolute;top:30px;width:100px;border:1px solid black;box-shadow:10px 0 8px #000}.circle[_ngcontent-%COMP%]{width:100px;height:100px;background:rgb(37,37,37);border-radius:50%;margin-right:20px;box-shadow:10px 10px 8px #000;border:1px solid black;display:flex;justify-content:center;align-items:center}.circulos[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:space-around;transform:translate(50px)}.play[_ngcontent-%COMP%]{width:0;height:0;border-top:25px solid transparent;border-left:50px solid black;border-bottom:25px solid transparent}.stop[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#000}.pausa[_ngcontent-%COMP%]{width:50%;height:50%;border-left:10px solid black;border-right:10px solid black}#msjImagen[_ngcontent-%COMP%]{flex:0 1 auto}.contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;height:400px;margin-top:100px}#msjBusqueda[_ngcontent-%COMP%]{background-color:#000;background-color:#18171766;color:#fff;letter-spacing:1px;text-align:center;padding:30px;margin:10px;width:60%;flex:3 1 auto}@media screen and (max-width: 990px){#msjImagen[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:200px}.contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center;align-items:center;height:400px}#msjBusqueda[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-size:18px}#msjBusqueda[_ngcontent-%COMP%]{width:100%;margin:0;padding:20px;flex:0 0 auto;align-self:stretch}#msjImagen[_ngcontent-%COMP%]{margin:5px;flex:0 0 auto}}@media screen and (max-width: 550px){#msjBusqueda[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-size:15px}}']}),n})();function jH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"div",2)(2,"label",14),u._uU(3,"Ingrese el c\xf3digo de verificaci\xf3n"),u.qZA(),u.TgZ(4,"input",15),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.verificationCode=i)}),u.qZA(),u.TgZ(5,"div",16),u._uU(6),u.qZA()(),u.TgZ(7,"div",17)(8,"button",18),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.verifyLoginCode())}),u._uU(9,"Verificar"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngModel",t.verificationCode),u.xp6(2),u.hij(" ",t.advice," ")}}class qH{constructor(){this.country="",this.area="",this.prefix="",this.line=""}get e164(){return`+${this.country+this.area+this.prefix+this.line}`}}const ZH=[{path:"home",component:yH},{path:"contacto",component:GZ},{path:"faq",component:mH},{path:"cuenta",component:gH,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(kg),u.LFG(Fi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"pokemon",component:bH},{path:"login",component:LH},{path:"graphs",component:NL},{path:"pokemonPage/:nombre/:foto/:info",component:BH},{path:"sms",component:(()=>{class n{constructor(t,r,i){this.authService=t,this.win=r,this.router=i,this.Uname="",this.Password="",this.Metodo=!0,this.advice="",this.phoneNumber=new qH,this.verificationCode=""}ngOnInit(){this.windowRef=this.win.windowRef,this.windowRef.recaptchaVerifier=new Wn.Z.auth.RecaptchaVerifier("recaptcha-container"),this.windowRef.recaptchaVerifier.render()}sendLoginCode(){const t=this.windowRef.recaptchaVerifier,r=this.phoneNumber.e164;Wn.Z.auth().signInWithPhoneNumber(r,t).then(i=>{this.windowRef.confirmationResult=i}).catch(i=>console.log(i))}verifyLoginCode(){this.advice="",this.windowRef.confirmationResult.confirm(this.verificationCode).then(t=>{this.user=t.user,localStorage.setItem("sesion","sms"),this.router.navigate(["/home"])}).catch(t=>{this.advice="C\xf3digo incorrecto"})}logOut(){Wn.Z.auth().signOut().catch(t=>console.log(t))}MetodoLogin(){this.Metodo=1!=this.Metodo}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kg),u.Y36(OL),u.Y36(Fi))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-smslogin"]],decls:19,vars:5,consts:[[1,"centrar"],[1,"centroflex","textito"],[1,"centroboton"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],[1,"container"],["for","phone","id","lbNum",1,"centroo","textito"],["id","cajaNum",1,"telefono"],["type","text","id","num","placeholder","52","maxlength","2",1,"input","inputs",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","449","maxlength","3",1,"input","inputs",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","555","maxlength","3",1,"input","inputs",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","5555","maxlength","4",1,"input","inputs",3,"ngModel","ngModelChange"],["id","recaptcha-container",1,"centroflex"],[1,"btn","btn-warning",3,"click"],[4,"ngIf"],["for","code","id","lbNum"],["type","text","name","code","id","num",3,"ngModel","ngModelChange"],["role","alert","id","errorDatos","hidden","",1,"formh5","alert","alert-warning"],[1,"d-flex","justify-content-around"],[1,"btn","btn-outline-danger","centroboton",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"h5",1),u._uU(2,"Iniciar sesi\xf3n con n\xfamero de celular"),u.qZA(),u.TgZ(3,"div",2)(4,"button",3),u.NdJ("click",function(){return r.MetodoLogin()}),u._uU(5," Login con email "),u.qZA()(),u.TgZ(6,"div",4)(7,"label",5),u._uU(8,"N\xfamero de tel\xe9fono"),u.qZA(),u.TgZ(9,"div",6)(10,"input",7),u.NdJ("ngModelChange",function(a){return r.phoneNumber.country=a}),u.qZA(),u.TgZ(11,"input",8),u.NdJ("ngModelChange",function(a){return r.phoneNumber.area=a}),u.qZA(),u.TgZ(12,"input",9),u.NdJ("ngModelChange",function(a){return r.phoneNumber.prefix=a}),u.qZA(),u.TgZ(13,"input",10),u.NdJ("ngModelChange",function(a){return r.phoneNumber.line=a}),u.qZA()(),u._UZ(14,"div",11),u.TgZ(15,"div",2)(16,"button",12),u.NdJ("click",function(){return r.sendLoginCode()}),u._uU(17,"Enviar c\xf3digo de login por SMS"),u.qZA()(),u.YNc(18,jH,10,2,"div",13),u.qZA()()),2&t&&(u.xp6(10),u.Q6J("ngModel",r.phoneNumber.country),u.xp6(1),u.Q6J("ngModel",r.phoneNumber.area),u.xp6(1),u.Q6J("ngModel",r.phoneNumber.prefix),u.xp6(1),u.Q6J("ngModel",r.phoneNumber.line),u.xp6(5),u.Q6J("ngIf",r.windowRef.confirmationResult))},dependencies:[Vi,lf,gy,nA,qb],styles:["*[_ngcontent-%COMP%]{margin-top:10px}.centrar[_ngcontent-%COMP%]{background-color:#0007;border-radius:20px;padding:50px}.centroo[_ngcontent-%COMP%]{width:100%;text-align:center}.centroflex[_ngcontent-%COMP%], .telefono[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.centroboton[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-left:30%;padding-right:30%}.textito[_ngcontent-%COMP%]{font-size:30px;color:#8a2be2}.inputs[_ngcontent-%COMP%]{border:2px solid #ccc;border-radius:4px;background-color:#2e0024;color:#fff}"]}),n})()},{path:"**",pathMatch:"full",redirectTo:"home"}];let HH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[mF.forRoot(ZH),mF]}),n})();const $H=function(){return["/login"]};function GH(n,e){1&n&&(u.TgZ(0,"li")(1,"a",14),u._uU(2,"Iniciar Sesion"),u.qZA()()),2&n&&(u.xp6(1),u.Q6J("routerLink",u.DdM(1,$H)))}function zH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",21),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.cerrarSesion())}),u._uU(1,"Cerrar Sesi\xf3n"),u.qZA()}}const FL=function(){return["/home"]},WH=function(){return["/pokemon"]},KH=function(){return["/faq"]},YH=function(){return["/contacto"]},QH=function(){return["/cuenta"]};let JH=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.firestoreService=i,this.aux="",this.pokemones=[],this.chec=!0,this.firestoreService.getPokemones().subscribe(a=>{this.pokemones=[],a.forEach(c=>{this.pokemones.push({id:c.payload.doc.id,data:c.payload.doc.data()})})})}ngOnInit(){}buscarUnPoke(t){this.router.navigate(["/home"]),this.nombre=t,this.searchUnPoke(this.nombre)}searchUnPoke(t){this.chec=!0,this.pokemones.forEach(r=>{r.data.nombre==t&&(this.router.navigate(["/pokemonPage",r.data.nombre,r.data.foto,r.data.info]).then(()=>{window.location.reload()}),this.chec=!1)}),this.chec&&this.router.navigate(["/pokemonPage",t,-1,-1]).then(()=>{window.location.reload()})}cerrarSesion(){this.aux=localStorage.getItem("sesion"),"SMS"!=this.aux?this.authService.SignOut():Wn.Z.auth().signOut().then(()=>{this.router.navigate(["login"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kg),u.Y36(Fi),u.Y36(ff))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-menu"]],decls:36,vars:14,consts:[[1,"navbar","navbar-expand-lg","navbar-dark",2,"background-color","#6523b6"],[1,"container-fluid"],["src","assets/img/unite-logo.png","height","60","alt",""],[1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",3,"routerLink"],[1,"nav-link",3,"routerLink"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdownMenuLink","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[4,"ngIf"],["class","nav-link",3,"click",4,"ngIf"],[1,"d-flex"],["type","search","placeholder","Buscar Pok\xe9mon","aria-label","Search",1,"form-control","me-2"],["buscarTexto",""],["type","submit",1,"btn","btn-outline-warning",3,"click"],[1,"nav-link",3,"click"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"nav",0)(1,"div",1),u._UZ(2,"img",2),u.TgZ(3,"a",3),u._uU(4,"Pok\xe9mon Unite"),u.qZA(),u.TgZ(5,"button",4),u._UZ(6,"span",5),u.qZA(),u.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"a",9),u._uU(11,"Inicio"),u.qZA()(),u.TgZ(12,"li",8)(13,"a",10),u._uU(14,"Pok\xe9mon"),u.qZA()(),u.TgZ(15,"li",8)(16,"a",10),u._uU(17,"FAQ"),u.qZA()(),u.TgZ(18,"li",8)(19,"a",10),u._uU(20,"Contacto"),u.qZA()(),u.TgZ(21,"li",11)(22,"a",12),u._uU(23," Cuenta "),u.qZA(),u.TgZ(24,"ul",13)(25,"li")(26,"a",14),u._uU(27,"Sesion Actual"),u.qZA()(),u.YNc(28,GH,3,2,"li",15),u.qZA()(),u.TgZ(29,"li",8),u.YNc(30,zH,2,0,"a",16),u.qZA()()(),u.TgZ(31,"form",17),u._UZ(32,"input",18,19),u.TgZ(34,"button",20),u.NdJ("click",function(){u.CHM(i);const c=u.MAs(33);return u.KtG(r.buscarUnPoke(c.value))}),u._uU(35,"Buscar"),u.qZA()()()()}2&t&&(u.xp6(3),u.Q6J("routerLink",u.DdM(8,FL)),u.xp6(7),u.Q6J("routerLink",u.DdM(9,FL)),u.xp6(3),u.Q6J("routerLink",u.DdM(10,WH)),u.xp6(3),u.Q6J("routerLink",u.DdM(11,KH)),u.xp6(3),u.Q6J("routerLink",u.DdM(12,YH)),u.xp6(7),u.Q6J("routerLink",u.DdM(13,QH)),u.xp6(2),u.Q6J("ngIf",!0!==r.authService.isLoggedIn),u.xp6(2),u.Q6J("ngIf",1==r.authService.isLoggedIn))},dependencies:[Vi,Rb,Zb,Ob,jb],styles:["@media (max-width:1000px){.d-flex[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}}"]}),n})(),XH=(()=>{class n{constructor(){this.title="ProyectoFinal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container","mt-3"]],template:function(t,r){1&t&&(u._UZ(0,"app-menu"),u.TgZ(1,"div",0),u._UZ(2,"router-outlet"),u.qZA())},dependencies:[xM,JH]}),n})();var e$=M(1144);const t$=["addListener","removeListener"],n$=["addEventListener","removeEventListener"],r$=["on","off"];function rA(n,e,t,r){if((0,gi.m)(t)&&(r=t,t=void 0),r)return rA(n,e,t).pipe(fM(r));const[i,a]=function o$(n){return(0,gi.m)(n.addEventListener)&&(0,gi.m)(n.removeEventListener)}(n)?n$.map(c=>f=>n[c](e,f,t)):function i$(n){return(0,gi.m)(n.addListener)&&(0,gi.m)(n.removeListener)}(n)?t$.map(LL(n,e)):function s$(n){return(0,gi.m)(n.on)&&(0,gi.m)(n.off)}(n)?r$.map(LL(n,e)):[];if(!i&&(0,e$.z)(n))return(0,ts.z)(c=>rA(c,e,t))((0,Ho.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new zn.y(c=>{const f=(...m)=>c.next(1<m.length?m:m[0]);return i(f),()=>a(f)})}function LL(n,e){return t=>r=>n[t](e,r)}const pf=new zn.y(nx.Z),u$={connector:()=>new Mr.x};function UL(n,e=u$){const{connector:t}=e;return(0,ir.e)((r,i)=>{const a=t();(0,tn.D)(n(function a$(n){return new zn.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}function VL(n,e){return e?t=>Bf(e.pipe((0,Lr.q)(1),function d$(){return(0,ir.e)((n,e)=>{n.subscribe((0,yn.x)(e,nx.Z))})}()),t.pipe(VL(n))):(0,ts.z)((t,r)=>n(t,r).pipe((0,Lr.q)(1),mO(t)))}var h$=M(3532);const $b="Service workers are disabled or not supported by this browser";class iA{constructor(e){if(this.serviceWorker=e,e){const r=rA(e,"controllerchange").pipe((0,dt.U)(()=>e.controller)),a=Bf(AD(()=>ct(e.controller)),r);this.worker=a.pipe(mr(I=>!!I)),this.registration=this.worker.pipe(bn(()=>e.getRegistration()));const v=rA(e,"message").pipe((0,dt.U)(I=>I.data)).pipe(mr(I=>I&&I.type)).pipe(function c$(n){return n?e=>UL(n)(e):e=>function l$(n,e){const t=(0,gi.m)(n)?n:()=>n;return(0,gi.m)(e)?UL(e,{connector:t}):r=>new gM(r,t)}(new Mr.x)(e)}());v.connect(),this.events=v}else this.worker=this.events=this.registration=function m$(n){return AD(()=>cy(new Error(n)))}($b)}postMessage(e,t){return this.worker.pipe((0,Lr.q)(1),(0,ns.b)(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,c])=>c)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(mr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,Lr.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(mr(t=>t.nonce===e),(0,Lr.q)(1),(0,dt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let _$=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Mr.x,!t.isEnabled)return this.messages=pf,this.notificationClicks=pf,void(this.subscription=pf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,dt.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,dt.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,dt.U)(i=>i.pushManager));const r=this.pushManager.pipe(bn(i=>i.getSubscription()));this.subscription=(0,oo.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error($b));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let c=0;c<i.length;c++)a[c]=i.charCodeAt(c);return r.applicationServerKey=a,this.pushManager.pipe(bn(c=>c.subscribe(r)),(0,Lr.q)(1)).toPromise().then(c=>(this.subscriptionChanges.next(c),c))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Lr.q)(1),bn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error($b))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(iA))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),y$=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=pf,this.available=pf,this.activated=pf,void(this.unrecoverable=pf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(mr(r=>"VERSION_READY"===r.type),(0,dt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($b));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($b));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(iA))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class dP{}const BL=new u.OlP("NGSW_REGISTER_SCRIPT");function v$(n,e,t,r){return()=>{if(!Hr(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let a;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)a=t.registrationStrategy();else{const[f,...m]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(f){case"registerImmediately":a=ct(null);break;case"registerWithDelay":a=jL(+m[0]||0);break;case"registerWhenStable":a=m[0]?(0,oo.T)(qL(n),jL(+m[0])):qL(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(u.R0b).runOutsideAngular(()=>a.pipe((0,Lr.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(f=>console.error("Service worker registration failed with:",f))))}}function jL(n){return ct(null).pipe(function g$(n,e=Ia.z){const t=function p$(n=0,e,t=Ia.P){let r=-1;return null!=e&&((0,h$.K)(e)?t=e:r=e),new zn.y(i=>{let a=function f$(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,e);return VL(()=>t)}(n))}function qL(n){return n.get(u.z2F).isStable.pipe(mr(t=>t))}function w$(n,e){return new iA(Hr(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let b$=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:BL,useValue:t},{provide:dP,useValue:r},{provide:iA,useFactory:w$,deps:[dP,u.Lbi]},{provide:u.ip1,useFactory:v$,deps:[u.zs3,BL,dP,u.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[_$,y$]}),n})();Wn.Z.initializeApp(DD_firebaseConfig);let C$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[XH]}),n.\u0275inj=u.cJS({providers:[kg],imports:[jo,HH,Fn.hO.initializeApp(DD_firebaseConfig),pc,n2,$A,p3,z6,qZ,ZZ,KZ,b$.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),n})();(0,u.G48)(),bf().bootstrapModule(C$).catch(n=>console.error(n))},4901:ze=>{"use strict";var G={single_source_shortest_paths:function(M,u,P){var D={},F={};F[u]=0;var q,W,H,ae,Z,J,U=G.PriorityQueue.make();for(U.push(u,0);!U.empty();)for(H in ae=(q=U.pop()).cost,Z=M[W=q.value]||{})Z.hasOwnProperty(H)&&(J=ae+Z[H],(typeof F[H]>"u"||F[H]>J)&&(F[H]=J,U.push(H,J),D[H]=W));if(typeof P<"u"&&typeof F[P]>"u"){var Ie=["Could not find a path from ",u," to ",P,"."].join("");throw new Error(Ie)}return D},extract_shortest_path_from_predecessor_list:function(M,u){for(var P=[],D=u;D;)P.push(D),D=M[D];return P.reverse(),P},find_path:function(M,u,P){var D=G.single_source_shortest_paths(M,u,P);return G.extract_shortest_path_from_predecessor_list(D,P)},PriorityQueue:{make:function(M){var D,u=G.PriorityQueue,P={};for(D in M=M||{},u)u.hasOwnProperty(D)&&(P[D]=u[D]);return P.queue=[],P.sorter=M.sorter||u.default_sorter,P},default_sorter:function(M,u){return M.cost-u.cost},push:function(M,u){this.queue.push({value:M,cost:u}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};ze.exports=G},8419:ze=>{"use strict";ze.exports=function(M){for(var u=[],P=M.length,D=0;D<P;D++){var F=M.charCodeAt(D);if(F>=55296&&F<=56319&&P>D+1){var U=M.charCodeAt(D+1);U>=56320&&U<=57343&&(F=1024*(F-55296)+U-56320+65536,D+=1)}F<128?u.push(F):F<2048?(u.push(F>>6|192),u.push(63&F|128)):F<55296||F>=57344&&F<65536?(u.push(F>>12|224),u.push(F>>6&63|128),u.push(63&F|128)):F>=65536&&F<=1114111?(u.push(F>>18|240),u.push(F>>12&63|128),u.push(F>>6&63|128),u.push(63&F|128)):u.push(239,191,189)}return new Uint8Array(u).buffer}},5867:(ze,G,M)=>{"use strict";M.d(G,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=M(9681);(0,u.registerVersion)("firebase","9.8.3","app")},127:(ze,G,M)=>{"use strict";M.d(G,{Z:()=>u.Z});var u=M(3942);u.Z.registerVersion("firebase","9.8.3","app-compat")},5881:(ze,G,M)=>{"use strict";M.r(G);var u=M(5861),P=M(3942),D=M(2309),F=M(2090),W=(M(9681),M(1877),M(4859));function H(){return window}function $(){return($=(0,u.Z)(function*(Ce,Q,X){var Pe;const{BuildInfo:Ye}=H();(0,D.aq)(Q.sessionId,"AuthEvent did not contain a session ID");const vt=yield fe(Q.sessionId),Be={};return(0,D.ar)()?Be.ibi=Ye.packageName:(0,D.as)()?Be.apn=Ye.packageName:(0,D.at)(Ce,"operation-not-supported-in-this-environment"),Ye.displayName&&(Be.appDisplayName=Ye.displayName),Be.sessionId=vt,(0,D.au)(Ce,X,Q.type,void 0,null!==(Pe=Q.eventId)&&void 0!==Pe?Pe:void 0,Be)})).apply(this,arguments)}function Te(){return(Te=(0,u.Z)(function*(Ce){const{BuildInfo:Q}=H(),X={};(0,D.ar)()?X.iosBundleId=Q.packageName:(0,D.as)()?X.androidPackageName=Q.packageName:(0,D.at)(Ce,"operation-not-supported-in-this-environment"),yield(0,D.av)(Ce,X)})).apply(this,arguments)}function Ze(){return(Ze=(0,u.Z)(function*(Ce,Q,X){const{cordova:Pe}=H();let Ye=()=>{};try{yield new Promise((vt,Be)=>{let it=null;function Dt(){var It;vt();const hr=null===(It=Pe.plugins.browsertab)||void 0===It?void 0:It.close;"function"==typeof hr&&hr(),"function"==typeof X?.close&&X.close()}function pn(){it||(it=window.setTimeout(()=>{Be((0,D.aw)(Ce,"redirect-cancelled-by-user"))},2e3))}function Tr(){"visible"===document?.visibilityState&&pn()}Q.addPassiveListener(Dt),document.addEventListener("resume",pn,!1),(0,D.as)()&&document.addEventListener("visibilitychange",Tr,!1),Ye=()=>{Q.removePassiveListener(Dt),document.removeEventListener("resume",pn,!1),document.removeEventListener("visibilitychange",Tr,!1),it&&window.clearTimeout(it)}})}finally{Ye()}})).apply(this,arguments)}function fe(Ce){return Re.apply(this,arguments)}function Re(){return(Re=(0,u.Z)(function*(Ce){const Q=Me(Ce),X=yield crypto.subtle.digest("SHA-256",Q);return Array.from(new Uint8Array(X)).map(Ye=>Ye.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Me(Ce){if((0,D.aq)(/[0-9a-zA-Z]+/.test(Ce),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Ce);const Q=new ArrayBuffer(Ce.length),X=new Uint8Array(Q);for(let Pe=0;Pe<Ce.length;Pe++)X[Pe]=Ce.charCodeAt(Pe);return X}class Ne extends D.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Q=>{this.resolveInialized=Q})}addPassiveListener(Q){this.passiveListeners.add(Q)}removePassiveListener(Q){this.passiveListeners.delete(Q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Q){return this.resolveInialized(),this.passiveListeners.forEach(X=>X(Q)),super.onEvent(Q)}initialized(){var Q=this;return(0,u.Z)(function*(){yield Q.initPromise})()}}function ie(Ce){return ue.apply(this,arguments)}function ue(){return(ue=(0,u.Z)(function*(Ce){const Q=yield ne()._get(le(Ce));return Q&&(yield ne()._remove(le(Ce))),Q})).apply(this,arguments)}function K(){const Ce=[],Q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let X=0;X<20;X++){const Pe=Math.floor(Math.random()*Q.length);Ce.push(Q.charAt(Pe))}return Ce.join("")}function ne(){return(0,D.ay)(D.b)}function le(Ce){return(0,D.az)("authEvent",Ce.config.apiKey,Ce.name)}function Ge(Ce){if(!Ce?.includes("?"))return{};const[Q,...X]=Ce.split("?");return(0,F.zd)(X.join("?"))}function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,D.aw)("no-auth-event")}}function Ot(){var Ce;return(null===(Ce=self?.location)||void 0===Ce?void 0:Ce.protocol)||null}function Jt(Ce=(0,F.z$)()){return!("file:"!==Ot()&&"ionic:"!==Ot()&&"capacitor:"!==Ot()||!Ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ei(){try{const Ce=self.localStorage,Q=D.aI();if(Ce)return Ce.setItem(Q,"1"),Ce.removeItem(Q),!function ss(Ce=(0,F.z$)()){return function Vn(){return(0,F.w1)()&&11===document?.documentMode}()||function vn(Ce=(0,F.z$)()){return/Edge\/\d+/.test(Ce)}(Ce)}()||(0,F.hl)()}catch{return Li()&&(0,F.hl)()}return!1}function Li(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function Kt(){return"http:"===Ot()||"https:"===Ot()}()||(0,F.ru)()||Jt())&&!function Zn(){return(0,F.b$)()||(0,F.UG)()}()&&Ei()&&!Li()}function os(){return Jt()&&typeof document<"u"}function Jr(){return(Jr=(0,u.Z)(function*(){return!!os()&&new Promise(Ce=>{const Q=setTimeout(()=>{Ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Q),Ce(!0)})})})).apply(this,arguments)}const Xt={LOCAL:"local",NONE:"none",SESSION:"session"},Nr=D.ax,lr="persistence";function Sn(Ce){return cr.apply(this,arguments)}function cr(){return(cr=(0,u.Z)(function*(Ce){yield Ce._initializationPromise;const Q=Gt(),X=D.az(lr,Ce.config.apiKey,Ce.name);Q&&Q.setItem(X,Ce._getPersistence())})).apply(this,arguments)}function Gt(){var Ce;try{return(null===(Ce=function An(){return typeof window<"u"?window:null}())||void 0===Ce?void 0:Ce.sessionStorage)||null}catch{return null}}const Je=D.ax;class at{constructor(){this.browserResolver=D.ay(D.k),this.cordovaResolver=D.ay(class $t{constructor(){this._redirectPersistence=D.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=D.aB,this._overrideRedirectResult=D.aC}_initialize(Q){var X=this;return(0,u.Z)(function*(){const Pe=Q._key();let Ye=X.eventManagers.get(Pe);return Ye||(Ye=new Ne(Q),X.eventManagers.set(Pe,Ye),X.attachCallbackListeners(Q,Ye)),Ye})()}_openPopup(Q){(0,D.at)(Q,"operation-not-supported-in-this-environment")}_openRedirect(Q,X,Pe,Ye){var vt=this;return(0,u.Z)(function*(){!function he(Ce){var Q,X,Pe,Ye,vt,Be,it,Dt,pn,Tr;const It=H();(0,D.ax)("function"==typeof(null===(Q=It?.universalLinks)||void 0===Q?void 0:Q.subscribe),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,D.ax)(typeof(null===(X=It?.BuildInfo)||void 0===X?void 0:X.packageName)<"u",Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,D.ax)("function"==typeof(null===(vt=null===(Ye=null===(Pe=It?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===vt?void 0:vt.openUrl),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.ax)("function"==typeof(null===(Dt=null===(it=null===(Be=It?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===it?void 0:it.browsertab)||void 0===Dt?void 0:Dt.isAvailable),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,D.ax)("function"==typeof(null===(Tr=null===(pn=It?.cordova)||void 0===pn?void 0:pn.InAppBrowser)||void 0===Tr?void 0:Tr.open),Ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Q);const Be=yield vt._initialize(Q);yield Be.initialized(),Be.resetRedirect(),(0,D.aD)(),yield vt._originValidation(Q);const it=function de(Ce,Q,X=null){return{type:Q,eventId:X,urlResponse:null,sessionId:K(),postBody:null,tenantId:Ce.tenantId,error:(0,D.aw)(Ce,"no-auth-event")}}(Q,Pe,Ye);yield function Oe(Ce,Q){return ne()._set(le(Ce),Q)}(Q,it);const Dt=yield function Z(Ce,Q,X){return $.apply(this,arguments)}(Q,it,X),pn=yield function be(Ce){const{cordova:Q}=H();return new Promise(X=>{Q.plugins.browsertab.isAvailable(Pe=>{let Ye=null;Pe?Q.plugins.browsertab.openUrl(Ce):Ye=Q.InAppBrowser.open(Ce,(0,D.ap)()?"_blank":"_system","location=yes"),X(Ye)})})}(Dt);return function Ie(Ce,Q,X){return Ze.apply(this,arguments)}(Q,Be,pn)})()}_isIframeWebStorageSupported(Q,X){throw new Error("Method not implemented.")}_originValidation(Q){const X=Q._key();return this.originValidationPromises[X]||(this.originValidationPromises[X]=function J(Ce){return Te.apply(this,arguments)}(Q)),this.originValidationPromises[X]}attachCallbackListeners(Q,X){const{universalLinks:Pe,handleOpenURL:Ye,BuildInfo:vt}=H(),Be=setTimeout((0,u.Z)(function*(){yield ie(Q),X.onEvent(Qe())}),500),it=function(){var Tr=(0,u.Z)(function*(It){clearTimeout(Be);const hr=yield ie(Q);let En=null;hr&&It?.url&&(En=function me(Ce,Q){var X,Pe;const Ye=function we(Ce){const Q=Ge(Ce),X=Q.link?decodeURIComponent(Q.link):void 0,Pe=Ge(X).link,Ye=Q.deep_link_id?decodeURIComponent(Q.deep_link_id):void 0;return Ge(Ye).link||Ye||Pe||X||Ce}(Q);if(Ye.includes("/__/auth/callback")){const vt=Ge(Ye),Be=vt.firebaseError?function pe(Ce){try{return JSON.parse(Ce)}catch{return null}}(decodeURIComponent(vt.firebaseError)):null,it=null===(Pe=null===(X=Be?.code)||void 0===X?void 0:X.split("auth/"))||void 0===Pe?void 0:Pe[1],Dt=it?(0,D.aw)(it):null;return Dt?{type:Ce.type,eventId:Ce.eventId,tenantId:Ce.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:Ce.type,eventId:Ce.eventId,tenantId:Ce.tenantId,sessionId:Ce.sessionId,urlResponse:Ye,postBody:null}}return null}(hr,It.url)),X.onEvent(En||Qe())});return function(hr){return Tr.apply(this,arguments)}}();typeof Pe<"u"&&"function"==typeof Pe.subscribe&&Pe.subscribe(null,it);const Dt=Ye,pn=`${vt.packageName.toLowerCase()}://`;H().handleOpenURL=function(){var Tr=(0,u.Z)(function*(It){if(It.toLowerCase().startsWith(pn)&&it({url:It}),"function"==typeof Dt)try{Dt(It)}catch(hr){console.error(hr)}});return function(It){return Tr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=D.a,this._completeRedirectFn=D.aB,this._overrideRedirectResult=D.aC}_initialize(Q){var X=this;return(0,u.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._initialize(Q)})()}_openPopup(Q,X,Pe,Ye){var vt=this;return(0,u.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup(Q,X,Pe,Ye)})()}_openRedirect(Q,X,Pe,Ye){var vt=this;return(0,u.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect(Q,X,Pe,Ye)})()}_isIframeWebStorageSupported(Q,X){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Q,X)}_originValidation(Q){return this.assertedUnderlyingResolver._originValidation(Q)}get _shouldInitProactively(){return os()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Je(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Q=this;return(0,u.Z)(function*(){if(Q.underlyingResolver)return;const X=yield function gt(){return Jr.apply(this,arguments)}();Q.underlyingResolver=X?Q.cordovaResolver:Q.browserResolver})()}}function Ui(Ce){return Ce.unwrap()}function Rt(Ce){return Nn(Ce)}function Nn(Ce){const{_tokenResponse:Q}=Ce instanceof F.ZR?Ce.customData:Ce;if(!Q)return null;if(!(Ce instanceof F.ZR)&&"temporaryProof"in Q&&"phoneNumber"in Q)return D.P.credentialFromResult(Ce);const X=Q.providerId;if(!X||X===D.o.PASSWORD)return null;let Pe;switch(X){case D.o.GOOGLE:Pe=D.Q;break;case D.o.FACEBOOK:Pe=D.N;break;case D.o.GITHUB:Pe=D.T;break;case D.o.TWITTER:Pe=D.W;break;default:const{oauthIdToken:Ye,oauthAccessToken:vt,oauthTokenSecret:Be,pendingToken:it,nonce:Dt}=Q;return vt||Be||Ye||it?it?X.startsWith("saml.")?D.aL._create(X,it):D.J._fromParams({providerId:X,signInMethod:X,pendingToken:it,idToken:Ye,accessToken:vt}):new D.U(X).credential({idToken:Ye,accessToken:vt,rawNonce:Dt}):null}return Ce instanceof F.ZR?Pe.credentialFromError(Ce):Pe.credentialFromResult(Ce)}function xn(Ce,Q){return Q.catch(X=>{throw X instanceof F.ZR&&function ei(Ce,Q){var X;const Pe=null===(X=Q.customData)||void 0===X?void 0:X._tokenResponse;if("auth/multi-factor-auth-required"===Q.code)Q.resolver=new oe(Ce,D.an(Ce,Q));else if(Pe){const Ye=Nn(Q),vt=Q;Ye&&(vt.credential=Ye,vt.tenantId=Pe.tenantId||void 0,vt.email=Pe.email||void 0,vt.phoneNumber=Pe.phoneNumber||void 0)}}(Ce,X),X}).then(X=>{const Ye=X.user;return{operationType:X.operationType,credential:Rt(X),additionalUserInfo:D.al(X),user:ke.getOrCreate(Ye)}})}function se(Ce,Q){return te.apply(this,arguments)}function te(){return(te=(0,u.Z)(function*(Ce,Q){const X=yield Q;return{verificationId:X.verificationId,confirm:Pe=>xn(Ce,X.confirm(Pe))}})).apply(this,arguments)}class oe{constructor(Q,X){this.resolver=X,this.auth=function dr(Ce){return Ce.wrapped()}(Q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Q){return xn(Ui(this.auth),this.resolver.resolveSignIn(Q))}}class ke{constructor(Q){this._delegate=Q,this.multiFactor=D.ao(Q)}static getOrCreate(Q){return ke.USER_MAP.has(Q)||ke.USER_MAP.set(Q,new ke(Q)),ke.USER_MAP.get(Q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Q){return this._delegate.getIdTokenResult(Q)}getIdToken(Q){return this._delegate.getIdToken(Q)}linkAndRetrieveDataWithCredential(Q){return this.linkWithCredential(Q)}linkWithCredential(Q){var X=this;return(0,u.Z)(function*(){return xn(X.auth,D.Z(X._delegate,Q))})()}linkWithPhoneNumber(Q,X){var Pe=this;return(0,u.Z)(function*(){return se(Pe.auth,D.l(Pe._delegate,Q,X))})()}linkWithPopup(Q){var X=this;return(0,u.Z)(function*(){return xn(X.auth,D.d(X._delegate,Q,at))})()}linkWithRedirect(Q){var X=this;return(0,u.Z)(function*(){return yield Sn(D.aE(X.auth)),D.g(X._delegate,Q,at)})()}reauthenticateAndRetrieveDataWithCredential(Q){return this.reauthenticateWithCredential(Q)}reauthenticateWithCredential(Q){var X=this;return(0,u.Z)(function*(){return xn(X.auth,D._(X._delegate,Q))})()}reauthenticateWithPhoneNumber(Q,X){return se(this.auth,D.r(this._delegate,Q,X))}reauthenticateWithPopup(Q){return xn(this.auth,D.e(this._delegate,Q,at))}reauthenticateWithRedirect(Q){var X=this;return(0,u.Z)(function*(){return yield Sn(D.aE(X.auth)),D.h(X._delegate,Q,at)})()}sendEmailVerification(Q){return D.ab(this._delegate,Q)}unlink(Q){var X=this;return(0,u.Z)(function*(){return yield D.ak(X._delegate,Q),X})()}updateEmail(Q){return D.ag(this._delegate,Q)}updatePassword(Q){return D.ah(this._delegate,Q)}updatePhoneNumber(Q){return D.u(this._delegate,Q)}updateProfile(Q){return D.af(this._delegate,Q)}verifyBeforeUpdateEmail(Q,X){return D.ac(this._delegate,Q,X)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ke.USER_MAP=new WeakMap;const ee=D.ax;let ge=(()=>{class Ce{constructor(X,Pe){if(this.app=X,Pe.isInitialized())return this._delegate=Pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ye}=X.options;ee(Ye,"invalid-api-key",{appName:X.name}),ee(Ye,"invalid-api-key",{appName:X.name});const vt=typeof window<"u"?at:void 0;this._delegate=Pe.initialize({options:{persistence:tt(Ye,X.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(D.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ke.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(X){this._delegate.languageCode=X}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(X){this._delegate.tenantId=X}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(X,Pe){D.G(this._delegate,X,Pe)}applyActionCode(X){return D.a2(this._delegate,X)}checkActionCode(X){return D.a3(this._delegate,X)}confirmPasswordReset(X,Pe){return D.a1(this._delegate,X,Pe)}createUserWithEmailAndPassword(X,Pe){var Ye=this;return(0,u.Z)(function*(){return xn(Ye._delegate,D.a5(Ye._delegate,X,Pe))})()}fetchProvidersForEmail(X){return this.fetchSignInMethodsForEmail(X)}fetchSignInMethodsForEmail(X){return D.aa(this._delegate,X)}isSignInWithEmailLink(X){return D.a8(this._delegate,X)}getRedirectResult(){var X=this;return(0,u.Z)(function*(){ee(Hn(),X._delegate,"operation-not-supported-in-this-environment");const Pe=yield D.j(X._delegate,at);return Pe?xn(X._delegate,Promise.resolve(Pe)):{credential:null,user:null}})()}addFrameworkForLogging(X){!function en(Ce,Q){(0,D.aE)(Ce)._logFramework(Q)}(this._delegate,X)}onAuthStateChanged(X,Pe,Ye){const{next:vt,error:Be,complete:it}=Ue(X,Pe,Ye);return this._delegate.onAuthStateChanged(vt,Be,it)}onIdTokenChanged(X,Pe,Ye){const{next:vt,error:Be,complete:it}=Ue(X,Pe,Ye);return this._delegate.onIdTokenChanged(vt,Be,it)}sendSignInLinkToEmail(X,Pe){return D.a7(this._delegate,X,Pe)}sendPasswordResetEmail(X,Pe){return D.a0(this._delegate,X,Pe||void 0)}setPersistence(X){var Pe=this;return(0,u.Z)(function*(){let Ye;switch(function Xr(Ce,Q){Nr(Object.values(Xt).includes(Q),Ce,"invalid-persistence-type"),(0,F.b$)()?Nr(Q!==Xt.SESSION,Ce,"unsupported-persistence-type"):(0,F.UG)()?Nr(Q===Xt.NONE,Ce,"unsupported-persistence-type"):Li()?Nr(Q===Xt.NONE||Q===Xt.LOCAL&&(0,F.hl)(),Ce,"unsupported-persistence-type"):Nr(Q===Xt.NONE||Ei(),Ce,"unsupported-persistence-type")}(Pe._delegate,X),X){case Xt.SESSION:Ye=D.a;break;case Xt.LOCAL:Ye=(yield D.ay(D.i)._isAvailable())?D.i:D.b;break;case Xt.NONE:Ye=D.L;break;default:return D.at("argument-error",{appName:Pe._delegate.name})}return Pe._delegate.setPersistence(Ye)})()}signInAndRetrieveDataWithCredential(X){return this.signInWithCredential(X)}signInAnonymously(){return xn(this._delegate,D.X(this._delegate))}signInWithCredential(X){return xn(this._delegate,D.Y(this._delegate,X))}signInWithCustomToken(X){return xn(this._delegate,D.$(this._delegate,X))}signInWithEmailAndPassword(X,Pe){return xn(this._delegate,D.a6(this._delegate,X,Pe))}signInWithEmailLink(X,Pe){return xn(this._delegate,D.a9(this._delegate,X,Pe))}signInWithPhoneNumber(X,Pe){return se(this._delegate,D.s(this._delegate,X,Pe))}signInWithPopup(X){var Pe=this;return(0,u.Z)(function*(){return ee(Hn(),Pe._delegate,"operation-not-supported-in-this-environment"),xn(Pe._delegate,D.c(Pe._delegate,X,at))})()}signInWithRedirect(X){var Pe=this;return(0,u.Z)(function*(){return ee(Hn(),Pe._delegate,"operation-not-supported-in-this-environment"),yield Sn(Pe._delegate),D.f(Pe._delegate,X,at)})()}updateCurrentUser(X){return this._delegate.updateCurrentUser(X)}verifyPasswordResetCode(X){return D.a4(this._delegate,X)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ce.Persistence=Xt,Ce})();function Ue(Ce,Q,X){let Pe=Ce;"function"!=typeof Ce&&({next:Pe,error:Q,complete:X}=Ce);const Ye=Pe;return{next:Be=>Ye(Be&&ke.getOrCreate(Be)),error:Q,complete:X}}function tt(Ce,Q){const X=function As(Ce,Q){const X=Gt();if(!X)return[];const Pe=D.az(lr,Ce,Q);switch(X.getItem(Pe)){case Xt.NONE:return[D.L];case Xt.LOCAL:return[D.i,D.a];case Xt.SESSION:return[D.a];default:return[]}}(Ce,Q);if(typeof self<"u"&&!X.includes(D.i)&&X.push(D.i),typeof window<"u")for(const Pe of[D.b,D.a])X.includes(Pe)||X.push(Pe);return X.includes(D.L)||X.push(D.L),X}class yt{constructor(){this.providerId="phone",this._delegate=new D.P(Ui(P.Z.auth()))}static credential(Q,X){return D.P.credential(Q,X)}verifyPhoneNumber(Q,X){return this._delegate.verifyPhoneNumber(Q,X)}unwrap(){return this._delegate}}yt.PHONE_SIGN_IN_METHOD=D.P.PHONE_SIGN_IN_METHOD,yt.PROVIDER_ID=D.P.PROVIDER_ID;const Nt=D.ax;class _n{constructor(Q,X,Pe=P.Z.app()){var Ye;Nt(null===(Ye=Pe.options)||void 0===Ye?void 0:Ye.apiKey,"invalid-api-key",{appName:Pe.name}),this._delegate=new D.R(Q,X,Pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function er(Ce){Ce.INTERNAL.registerComponent(new W.wA("auth-compat",Q=>{const X=Q.getProvider("app-compat").getImmediate(),Pe=Q.getProvider("auth");return new ge(X,Pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:D.A.EMAIL_SIGNIN,PASSWORD_RESET:D.A.PASSWORD_RESET,RECOVER_EMAIL:D.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:D.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:D.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:D.A.VERIFY_EMAIL}},EmailAuthProvider:D.M,FacebookAuthProvider:D.N,GithubAuthProvider:D.T,GoogleAuthProvider:D.Q,OAuthProvider:D.U,SAMLAuthProvider:D.V,PhoneAuthProvider:yt,PhoneMultiFactorGenerator:D.m,RecaptchaVerifier:_n,TwitterAuthProvider:D.W,Auth:ge,AuthCredential:D.H,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ce.registerVersion("@firebase/auth-compat","0.2.16")}(P.Z)},8306:(ze,G,M)=>{"use strict";M.d(G,{y:()=>Z});var u=M(930),P=M(727),D=M(8822),F=M(4671);var W=M(2416),H=M(576),ae=M(2806);let Z=(()=>{class be{constructor(Ze){Ze&&(this._subscribe=Ze)}lift(Ze){const he=new be;return he.source=this,he.operator=Ze,he}subscribe(Ze,he,fe){const Re=function Te(be){return be&&be instanceof u.Lv||function J(be){return be&&(0,H.m)(be.next)&&(0,H.m)(be.error)&&(0,H.m)(be.complete)}(be)&&(0,P.Nn)(be)}(Ze)?Ze:new u.Hp(Ze,he,fe);return(0,ae.x)(()=>{const{operator:Me,source:xe}=this;Re.add(Me?Me.call(Re,xe):xe?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(Ze){try{return this._subscribe(Ze)}catch(he){Ze.error(he)}}forEach(Ze,he){return new(he=$(he))((fe,Re)=>{const Me=new u.Hp({next:xe=>{try{Ze(xe)}catch(Ne){Re(Ne),Me.unsubscribe()}},error:Re,complete:fe});this.subscribe(Me)})}_subscribe(Ze){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Ze)}[D.L](){return this}pipe(...Ze){return function q(be){return 0===be.length?F.y:1===be.length?be[0]:function(Ze){return be.reduce((he,fe)=>fe(he),Ze)}}(Ze)(this)}toPromise(Ze){return new(Ze=$(Ze))((he,fe)=>{let Re;this.subscribe(Me=>Re=Me,Me=>fe(Me),()=>he(Re))})}}return be.create=Ie=>new be(Ie),be})();function $(be){var Ie;return null!==(Ie=be??W.v.Promise)&&void 0!==Ie?Ie:Promise}},7579:(ze,G,M)=>{"use strict";M.d(G,{x:()=>W});var u=M(8306),P=M(727);const F=(0,M(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var U=M(8737),q=M(2806);let W=(()=>{class ae extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new H(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new F}next($){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:Te,observers:be}=this;return J||Te?P.Lc:(this.currentObservers=null,be.push($),new P.w0(()=>{this.currentObservers=null,(0,U.P)(be,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:Te,isStopped:be}=this;J?$.error(Te):be&&$.complete()}asObservable(){const $=new u.y;return $.source=this,$}}return ae.create=(Z,$)=>new H(Z,$),ae})();class H extends W{constructor(Z,$){super(),this.destination=Z,this.source=$}next(Z){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,Z)}error(Z){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,Z)}complete(){var Z,$;null===($=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===$||$.call(Z)}_subscribe(Z){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(Z))&&void 0!==J?J:P.Lc}}},930:(ze,G,M)=>{"use strict";M.d(G,{Hp:()=>Ze,Lv:()=>J});var u=M(576),P=M(727),D=M(2416),F=M(7849),U=M(5032);const q=ae("C",void 0,void 0);function ae(xe,Ne,de){return{kind:xe,value:Ne,error:de}}var Z=M(3410),$=M(2806);class J extends P.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,P.Nn)(Ne)&&Ne.add(this)):this.destination=Me}static create(Ne,de,Oe){return new Ze(Ne,de,Oe)}next(Ne){this.isStopped?Re(function H(xe){return ae("N",xe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Re(function W(xe){return ae("E",void 0,xe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Re(q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Te=Function.prototype.bind;function be(xe,Ne){return Te.call(xe,Ne)}class Ie{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:de}=this;if(de.next)try{de.next(Ne)}catch(Oe){he(Oe)}}error(Ne){const{partialObserver:de}=this;if(de.error)try{de.error(Ne)}catch(Oe){he(Oe)}else he(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(de){he(de)}}}class Ze extends J{constructor(Ne,de,Oe){let ie;if(super(),(0,u.m)(Ne)||!Ne)ie={next:Ne??void 0,error:de??void 0,complete:Oe??void 0};else{let ue;this&&D.v.useDeprecatedNextContext?(ue=Object.create(Ne),ue.unsubscribe=()=>this.unsubscribe(),ie={next:Ne.next&&be(Ne.next,ue),error:Ne.error&&be(Ne.error,ue),complete:Ne.complete&&be(Ne.complete,ue)}):ie=Ne}this.destination=new Ie(ie)}}function he(xe){D.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(xe):(0,F.h)(xe)}function Re(xe,Ne){const{onStoppedNotification:de}=D.v;de&&Z.z.setTimeout(()=>de(xe,Ne))}const Me={closed:!0,next:U.Z,error:function fe(xe){throw xe},complete:U.Z}},727:(ze,G,M)=>{"use strict";M.d(G,{Lc:()=>q,w0:()=>U,Nn:()=>W});var u=M(576);const D=(0,M(3888).d)(ae=>function($){ae(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,Te)=>`${Te+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var F=M(8737);class U{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const be of $)be.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,u.m)(J))try{J()}catch(be){Z=be instanceof D?be.errors:[be]}const{_finalizers:Te}=this;if(Te){this._finalizers=null;for(const be of Te)try{H(be)}catch(Ie){Z=Z??[],Ie instanceof D?Z=[...Z,...Ie.errors]:Z.push(Ie)}}if(Z)throw new D(Z)}}add(Z){var $;if(Z&&Z!==this)if(this.closed)H(Z);else{if(Z instanceof U){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(Z)}}_hasParent(Z){const{_parentage:$}=this;return $===Z||Array.isArray($)&&$.includes(Z)}_addParent(Z){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(Z),$):$?[$,Z]:Z}_removeParent(Z){const{_parentage:$}=this;$===Z?this._parentage=null:Array.isArray($)&&(0,F.P)($,Z)}remove(Z){const{_finalizers:$}=this;$&&(0,F.P)($,Z),Z instanceof U&&Z._removeParent(this)}}U.EMPTY=(()=>{const ae=new U;return ae.closed=!0,ae})();const q=U.EMPTY;function W(ae){return ae instanceof U||ae&&"closed"in ae&&(0,u.m)(ae.remove)&&(0,u.m)(ae.add)&&(0,u.m)(ae.unsubscribe)}function H(ae){(0,u.m)(ae)?ae():ae.unsubscribe()}},2416:(ze,G,M)=>{"use strict";M.d(G,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ze,G,M)=>{"use strict";M.d(G,{E:()=>P});const P=new(M(8306).y)(U=>U.complete())},8996:(ze,G,M)=>{"use strict";M.d(G,{D:()=>Ne});var u=M(8421),P=M(5363),D=M(9468),q=M(8306),H=M(2202),ae=M(576),Z=M(9672);function J(de,Oe){if(!de)throw new Error("Iterable cannot be null");return new q.y(ie=>{(0,Z.f)(ie,Oe,()=>{const ue=de[Symbol.asyncIterator]();(0,Z.f)(ie,Oe,()=>{ue.next().then(me=>{me.done?ie.complete():ie.next(me.value)})},0,!0)})})}var Te=M(3670),be=M(8239),Ie=M(1144),Ze=M(6495),he=M(2206),fe=M(4532),Re=M(3260);function Ne(de,Oe){return Oe?function xe(de,Oe){if(null!=de){if((0,Te.c)(de))return function F(de,Oe){return(0,u.Xf)(de).pipe((0,D.R)(Oe),(0,P.Q)(Oe))}(de,Oe);if((0,Ie.z)(de))return function W(de,Oe){return new q.y(ie=>{let ue=0;return Oe.schedule(function(){ue===de.length?ie.complete():(ie.next(de[ue++]),ie.closed||this.schedule())})})}(de,Oe);if((0,be.t)(de))return function U(de,Oe){return(0,u.Xf)(de).pipe((0,D.R)(Oe),(0,P.Q)(Oe))}(de,Oe);if((0,he.D)(de))return J(de,Oe);if((0,Ze.T)(de))return function $(de,Oe){return new q.y(ie=>{let ue;return(0,Z.f)(ie,Oe,()=>{ue=de[H.h](),(0,Z.f)(ie,Oe,()=>{let me,K;try{({value:me,done:K}=ue.next())}catch(ne){return void ie.error(ne)}K?ie.complete():ie.next(me)},0,!0)}),()=>(0,ae.m)(ue?.return)&&ue.return()})}(de,Oe);if((0,Re.L)(de))return function Me(de,Oe){return J((0,Re.Q)(de),Oe)}(de,Oe)}throw(0,fe.z)(de)}(de,Oe):(0,u.Xf)(de)}},8421:(ze,G,M)=>{"use strict";M.d(G,{Xf:()=>Te});var u=M(655),P=M(1144),D=M(8239),F=M(8306),U=M(3670),q=M(2206),W=M(4532),H=M(6495),ae=M(3260),Z=M(576),$=M(7849),J=M(8822);function Te(xe){if(xe instanceof F.y)return xe;if(null!=xe){if((0,U.c)(xe))return function be(xe){return new F.y(Ne=>{const de=xe[J.L]();if((0,Z.m)(de.subscribe))return de.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,P.z)(xe))return function Ie(xe){return new F.y(Ne=>{for(let de=0;de<xe.length&&!Ne.closed;de++)Ne.next(xe[de]);Ne.complete()})}(xe);if((0,D.t)(xe))return function Ze(xe){return new F.y(Ne=>{xe.then(de=>{Ne.closed||(Ne.next(de),Ne.complete())},de=>Ne.error(de)).then(null,$.h)})}(xe);if((0,q.D)(xe))return fe(xe);if((0,H.T)(xe))return function he(xe){return new F.y(Ne=>{for(const de of xe)if(Ne.next(de),Ne.closed)return;Ne.complete()})}(xe);if((0,ae.L)(xe))return function Re(xe){return fe((0,ae.Q)(xe))}(xe)}throw(0,W.z)(xe)}function fe(xe){return new F.y(Ne=>{(function Me(xe,Ne){var de,Oe,ie,ue;return(0,u.mG)(this,void 0,void 0,function*(){try{for(de=(0,u.KL)(xe);!(Oe=yield de.next()).done;)if(Ne.next(Oe.value),Ne.closed)return}catch(me){ie={error:me}}finally{try{Oe&&!Oe.done&&(ue=de.return)&&(yield ue.call(de))}finally{if(ie)throw ie.error}}Ne.complete()})})(xe,Ne).catch(de=>Ne.error(de))})}},6451:(ze,G,M)=>{"use strict";M.d(G,{T:()=>q});var u=M(8189),P=M(8421),D=M(515),F=M(3269),U=M(8996);function q(...W){const H=(0,F.yG)(W),ae=(0,F._6)(W,1/0),Z=W;return Z.length?1===Z.length?(0,P.Xf)(Z[0]):(0,u.J)(ae)((0,U.D)(Z,H)):D.E}},5403:(ze,G,M)=>{"use strict";M.d(G,{x:()=>P});var u=M(930);function P(F,U,q,W,H){return new D(F,U,q,W,H)}class D extends u.Lv{constructor(U,q,W,H,ae,Z){super(U),this.onFinalize=ae,this.shouldUnsubscribe=Z,this._next=q?function($){try{q($)}catch(J){U.error(J)}}:super._next,this._error=H?function($){try{H($)}catch(J){U.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=W?function(){try{W()}catch($){U.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var U;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:q}=this;super.unsubscribe(),!q&&(null===(U=this.onFinalize)||void 0===U||U.call(this))}}}},4004:(ze,G,M)=>{"use strict";M.d(G,{U:()=>D});var u=M(4482),P=M(5403);function D(F,U){return(0,u.e)((q,W)=>{let H=0;q.subscribe((0,P.x)(W,ae=>{W.next(F.call(U,ae,H++))}))})}},8189:(ze,G,M)=>{"use strict";M.d(G,{J:()=>D});var u=M(5577),P=M(4671);function D(F=1/0){return(0,u.z)(P.y,F)}},5577:(ze,G,M)=>{"use strict";M.d(G,{z:()=>H});var u=M(4004),P=M(8421),D=M(4482),F=M(9672),U=M(5403),W=M(576);function H(ae,Z,$=1/0){return(0,W.m)(Z)?H((J,Te)=>(0,u.U)((be,Ie)=>Z(J,be,Te,Ie))((0,P.Xf)(ae(J,Te))),$):("number"==typeof Z&&($=Z),(0,D.e)((J,Te)=>function q(ae,Z,$,J,Te,be,Ie,Ze){const he=[];let fe=0,Re=0,Me=!1;const xe=()=>{Me&&!he.length&&!fe&&Z.complete()},Ne=Oe=>fe<J?de(Oe):he.push(Oe),de=Oe=>{be&&Z.next(Oe),fe++;let ie=!1;(0,P.Xf)($(Oe,Re++)).subscribe((0,U.x)(Z,ue=>{Te?.(ue),be?Ne(ue):Z.next(ue)},()=>{ie=!0},void 0,()=>{if(ie)try{for(fe--;he.length&&fe<J;){const ue=he.shift();Ie?(0,F.f)(Z,Ie,()=>de(ue)):de(ue)}xe()}catch(ue){Z.error(ue)}}))};return ae.subscribe((0,U.x)(Z,Ne,()=>{Me=!0,xe()})),()=>{Ze?.()}}(J,Te,ae,$)))}},5363:(ze,G,M)=>{"use strict";M.d(G,{Q:()=>F});var u=M(9672),P=M(4482),D=M(5403);function F(U,q=0){return(0,P.e)((W,H)=>{W.subscribe((0,D.x)(H,ae=>(0,u.f)(H,U,()=>H.next(ae),q),()=>(0,u.f)(H,U,()=>H.complete(),q),ae=>(0,u.f)(H,U,()=>H.error(ae),q)))})}},3099:(ze,G,M)=>{"use strict";M.d(G,{B:()=>q});var u=M(8996),P=M(5698),D=M(7579),F=M(930),U=M(4482);function q(H={}){const{connector:ae=(()=>new D.x),resetOnError:Z=!0,resetOnComplete:$=!0,resetOnRefCountZero:J=!0}=H;return Te=>{let be=null,Ie=null,Ze=null,he=0,fe=!1,Re=!1;const Me=()=>{Ie?.unsubscribe(),Ie=null},xe=()=>{Me(),be=Ze=null,fe=Re=!1},Ne=()=>{const de=be;xe(),de?.unsubscribe()};return(0,U.e)((de,Oe)=>{he++,!Re&&!fe&&Me();const ie=Ze=Ze??ae();Oe.add(()=>{he--,0===he&&!Re&&!fe&&(Ie=W(Ne,J))}),ie.subscribe(Oe),be||(be=new F.Hp({next:ue=>ie.next(ue),error:ue=>{Re=!0,Me(),Ie=W(xe,Z,ue),ie.error(ue)},complete:()=>{fe=!0,Me(),Ie=W(xe,$),ie.complete()}}),(0,u.D)(de).subscribe(be))})(Te)}}function W(H,ae,...Z){return!0===ae?(H(),null):!1===ae?null:ae(...Z).pipe((0,P.q)(1)).subscribe(()=>H())}},9468:(ze,G,M)=>{"use strict";M.d(G,{R:()=>P});var u=M(4482);function P(D,F=0){return(0,u.e)((U,q)=>{q.add(D.schedule(()=>U.subscribe(q),F))})}},5698:(ze,G,M)=>{"use strict";M.d(G,{q:()=>F});var u=M(515),P=M(4482),D=M(5403);function F(U){return U<=0?()=>u.E:(0,P.e)((q,W)=>{let H=0;q.subscribe((0,D.x)(W,ae=>{++H<=U&&(W.next(ae),U<=H&&W.complete())}))})}},8505:(ze,G,M)=>{"use strict";M.d(G,{b:()=>U});var u=M(576),P=M(4482),D=M(5403),F=M(4671);function U(q,W,H){const ae=(0,u.m)(q)||W||H?{next:q,error:W,complete:H}:q;return ae?(0,P.e)((Z,$)=>{var J;null===(J=ae.subscribe)||void 0===J||J.call(ae);let Te=!0;Z.subscribe((0,D.x)($,be=>{var Ie;null===(Ie=ae.next)||void 0===Ie||Ie.call(ae,be),$.next(be)},()=>{var be;Te=!1,null===(be=ae.complete)||void 0===be||be.call(ae),$.complete()},be=>{var Ie;Te=!1,null===(Ie=ae.error)||void 0===Ie||Ie.call(ae,be),$.error(be)},()=>{var be,Ie;Te&&(null===(be=ae.unsubscribe)||void 0===be||be.call(ae)),null===(Ie=ae.finalize)||void 0===Ie||Ie.call(ae)}))}):F.y}},4408:(ze,G,M)=>{"use strict";M.d(G,{o:()=>U});var u=M(727);class P extends u.w0{constructor(W,H){super()}schedule(W,H=0){return this}}const D={setInterval(q,W,...H){const{delegate:ae}=D;return ae?.setInterval?ae.setInterval(q,W,...H):setInterval(q,W,...H)},clearInterval(q){const{delegate:W}=D;return(W?.clearInterval||clearInterval)(q)},delegate:void 0};var F=M(8737);class U extends P{constructor(W,H){super(W,H),this.scheduler=W,this.work=H,this.pending=!1}schedule(W,H=0){if(this.closed)return this;this.state=W;const ae=this.id,Z=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(Z,ae,H)),this.pending=!0,this.delay=H,this.id=this.id||this.requestAsyncId(Z,this.id,H),this}requestAsyncId(W,H,ae=0){return D.setInterval(W.flush.bind(W,this),ae)}recycleAsyncId(W,H,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return H;D.clearInterval(H)}execute(W,H){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(W,H);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(W,H){let Z,ae=!1;try{this.work(W)}catch($){ae=!0,Z=$||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:W,scheduler:H}=this,{actions:ae}=H;this.work=this.state=this.scheduler=null,this.pending=!1,(0,F.P)(ae,this),null!=W&&(this.id=this.recycleAsyncId(H,W,null)),this.delay=null,super.unsubscribe()}}}},7565:(ze,G,M)=>{"use strict";M.d(G,{v:()=>D});var u=M(6063);class P{constructor(U,q=P.now){this.schedulerActionCtor=U,this.now=q}schedule(U,q=0,W){return new this.schedulerActionCtor(this,U).schedule(W,q)}}P.now=u.l.now;class D extends P{constructor(U,q=P.now){super(U,q),this.actions=[],this._active=!1,this._scheduled=void 0}flush(U){const{actions:q}=this;if(this._active)return void q.push(U);let W;this._active=!0;do{if(W=U.execute(U.state,U.delay))break}while(U=q.shift());if(this._active=!1,W){for(;U=q.shift();)U.unsubscribe();throw W}}}},4986:(ze,G,M)=>{"use strict";M.d(G,{P:()=>F,z:()=>D});var u=M(4408);const D=new(M(7565).v)(u.o),F=D},6063:(ze,G,M)=>{"use strict";M.d(G,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ze,G,M)=>{"use strict";M.d(G,{z:()=>u});const u={setTimeout(P,D,...F){const{delegate:U}=u;return U?.setTimeout?U.setTimeout(P,D,...F):setTimeout(P,D,...F)},clearTimeout(P){const{delegate:D}=u;return(D?.clearTimeout||clearTimeout)(P)},delegate:void 0}},2202:(ze,G,M)=>{"use strict";M.d(G,{h:()=>P});const P=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ze,G,M)=>{"use strict";M.d(G,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ze,G,M)=>{"use strict";M.d(G,{_6:()=>q,jO:()=>F,yG:()=>U});var u=M(576),P=M(3532);function D(W){return W[W.length-1]}function F(W){return(0,u.m)(D(W))?W.pop():void 0}function U(W){return(0,P.K)(D(W))?W.pop():void 0}function q(W,H){return"number"==typeof D(W)?W.pop():H}},8737:(ze,G,M)=>{"use strict";function u(P,D){if(P){const F=P.indexOf(D);0<=F&&P.splice(F,1)}}M.d(G,{P:()=>u})},3888:(ze,G,M)=>{"use strict";function u(P){const F=P(U=>{Error.call(U),U.stack=(new Error).stack});return F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F}M.d(G,{d:()=>u})},2806:(ze,G,M)=>{"use strict";M.d(G,{O:()=>F,x:()=>D});var u=M(2416);let P=null;function D(U){if(u.v.useDeprecatedSynchronousErrorHandling){const q=!P;if(q&&(P={errorThrown:!1,error:null}),U(),q){const{errorThrown:W,error:H}=P;if(P=null,W)throw H}}else U()}function F(U){u.v.useDeprecatedSynchronousErrorHandling&&P&&(P.errorThrown=!0,P.error=U)}},9672:(ze,G,M)=>{"use strict";function u(P,D,F,U=0,q=!1){const W=D.schedule(function(){F(),q?P.add(this.schedule(null,U)):this.unsubscribe()},U);if(P.add(W),!q)return W}M.d(G,{f:()=>u})},4671:(ze,G,M)=>{"use strict";function u(P){return P}M.d(G,{y:()=>u})},1144:(ze,G,M)=>{"use strict";M.d(G,{z:()=>u});const u=P=>P&&"number"==typeof P.length&&"function"!=typeof P},2206:(ze,G,M)=>{"use strict";M.d(G,{D:()=>P});var u=M(576);function P(D){return Symbol.asyncIterator&&(0,u.m)(D?.[Symbol.asyncIterator])}},576:(ze,G,M)=>{"use strict";function u(P){return"function"==typeof P}M.d(G,{m:()=>u})},3670:(ze,G,M)=>{"use strict";M.d(G,{c:()=>D});var u=M(8822),P=M(576);function D(F){return(0,P.m)(F[u.L])}},6495:(ze,G,M)=>{"use strict";M.d(G,{T:()=>D});var u=M(2202),P=M(576);function D(F){return(0,P.m)(F?.[u.h])}},8239:(ze,G,M)=>{"use strict";M.d(G,{t:()=>P});var u=M(576);function P(D){return(0,u.m)(D?.then)}},3260:(ze,G,M)=>{"use strict";M.d(G,{L:()=>F,Q:()=>D});var u=M(655),P=M(576);function D(U){return(0,u.FC)(this,arguments,function*(){const W=U.getReader();try{for(;;){const{value:H,done:ae}=yield(0,u.qq)(W.read());if(ae)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(H)}}finally{W.releaseLock()}})}function F(U){return(0,P.m)(U?.getReader)}},3532:(ze,G,M)=>{"use strict";M.d(G,{K:()=>P});var u=M(576);function P(D){return D&&(0,u.m)(D.schedule)}},4482:(ze,G,M)=>{"use strict";M.d(G,{A:()=>P,e:()=>D});var u=M(576);function P(F){return(0,u.m)(F?.lift)}function D(F){return U=>{if(P(U))return U.lift(function(q){try{return F(q,this)}catch(W){this.error(W)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ze,G,M)=>{"use strict";function u(){}M.d(G,{Z:()=>u})},7849:(ze,G,M)=>{"use strict";M.d(G,{h:()=>D});var u=M(2416),P=M(3410);function D(F){P.z.setTimeout(()=>{const{onUnhandledError:U}=u.v;if(!U)throw F;U(F)})}},4532:(ze,G,M)=>{"use strict";function u(P){return new TypeError(`You provided ${null!==P&&"object"==typeof P?"an invalid object":`'${P}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(G,{z:()=>u})},655:(ze,G,M)=>{"use strict";function F(K,ne){var le={};for(var pe in K)Object.prototype.hasOwnProperty.call(K,pe)&&ne.indexOf(pe)<0&&(le[pe]=K[pe]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var we=0;for(pe=Object.getOwnPropertySymbols(K);we<pe.length;we++)ne.indexOf(pe[we])<0&&Object.prototype.propertyIsEnumerable.call(K,pe[we])&&(le[pe[we]]=K[pe[we]])}return le}function H(K,ne,le,pe){return new(le||(le=Promise))(function(Ge,mt){function $t(en){try{Qe(pe.next(en))}catch(Rn){mt(Rn)}}function Lt(en){try{Qe(pe.throw(en))}catch(Rn){mt(Rn)}}function Qe(en){en.done?Ge(en.value):function we(Ge){return Ge instanceof le?Ge:new le(function(mt){mt(Ge)})}(en.value).then($t,Lt)}Qe((pe=pe.apply(K,ne||[])).next())})}function he(K){return this instanceof he?(this.v=K,this):new he(K)}function fe(K,ne,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,pe=le.apply(K,ne||[]),Ge=[];return we={},mt("next"),mt("throw"),mt("return"),we[Symbol.asyncIterator]=function(){return this},we;function mt(on){pe[on]&&(we[on]=function(Qt){return new Promise(function(Ot,Kt){Ge.push([on,Qt,Ot,Kt])>1||$t(on,Qt)})})}function $t(on,Qt){try{!function Lt(on){on.value instanceof he?Promise.resolve(on.value.v).then(Qe,en):Rn(Ge[0][2],on)}(pe[on](Qt))}catch(Ot){Rn(Ge[0][3],Ot)}}function Qe(on){$t("next",on)}function en(on){$t("throw",on)}function Rn(on,Qt){on(Qt),Ge.shift(),Ge.length&&$t(Ge[0][0],Ge[0][1])}}function Me(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ne=K[Symbol.asyncIterator];return ne?ne.call(K):(K=function J(K){var ne="function"==typeof Symbol&&Symbol.iterator,le=ne&&K[ne],pe=0;if(le)return le.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&pe>=K.length&&(K=void 0),{value:K&&K[pe++],done:!K}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),le={},pe("next"),pe("throw"),pe("return"),le[Symbol.asyncIterator]=function(){return this},le);function pe(Ge){le[Ge]=K[Ge]&&function(mt){return new Promise(function($t,Lt){!function we(Ge,mt,$t,Lt){Promise.resolve(Lt).then(function(Qe){Ge({value:Qe,done:$t})},mt)}($t,Lt,(mt=K[Ge](mt)).done,mt.value)})}}}M.d(G,{FC:()=>fe,KL:()=>Me,_T:()=>F,mG:()=>H,qq:()=>he})},4650:(ze,G,M)=>{"use strict";M.d(G,{$8M:()=>nc,$Z:()=>mv,AFp:()=>nT,AaK:()=>H,CHM:()=>Fo,CRH:()=>Hp,CZH:()=>Wp,CqO:()=>OE,D6c:()=>Ow,DdM:()=>s_,EJc:()=>oT,EiD:()=>tC,EpF:()=>RE,F4k:()=>NE,FYo:()=>j0,FiY:()=>ys,G48:()=>yT,Gf:()=>BI,GfV:()=>DI,Gpc:()=>$,JOm:()=>ws,JVY:()=>Jb,KtG:()=>Lo,L6k:()=>w,LAX:()=>_,LFG:()=>wt,LSH:()=>Jg,Lbi:()=>Kp,MAs:()=>kr,MMx:()=>Lp,NdJ:()=>t0,OlP:()=>Mn,Oqu:()=>Wm,PXZ:()=>kl,Q6J:()=>Mc,QGY:()=>e0,QP$:()=>Iu,Qsj:()=>n_,R0b:()=>Ri,RDi:()=>$l,Rgc:()=>jp,SBq:()=>Op,Sil:()=>I1,Suo:()=>jI,TTD:()=>eo,TgZ:()=>Pt,Tol:()=>a0,W1O:()=>xl,X6Q:()=>_T,XFs:()=>gt,Xpm:()=>ee,Y36:()=>ul,YKP:()=>bI,YNc:()=>kE,Yjl:()=>Ce,Yz7:()=>Qt,ZZ4:()=>ig,_Bn:()=>V0,_UZ:()=>rt,_Vd:()=>Pa,_c5:()=>Nw,_uU:()=>yh,aQg:()=>H_,c2e:()=>M_,cJS:()=>Kt,cg1:()=>bl,dDg:()=>T1,deG:()=>jg,dqk:()=>Je,eBb:()=>g,eFA:()=>Jc,ekj:()=>Pi,eoX:()=>R_,g9A:()=>iT,h0i:()=>Co,hGG:()=>L1,hM9:()=>n1,hij:()=>na,iGM:()=>VI,ifc:()=>Gt,ip1:()=>S_,kEZ:()=>PI,kL8:()=>_0,lG2:()=>er,lqb:()=>Wd,lri:()=>hT,mCW:()=>Pn,n5z:()=>ec,oAB:()=>Nt,oxw:()=>Bt,pB0:()=>C,q3G:()=>Pr,q4F:()=>AI,qLn:()=>Of,qOj:()=>lp,qZA:()=>jm,qzn:()=>dc,rWj:()=>k_,s9C:()=>kt,sBO:()=>P1,sIi:()=>lh,s_b:()=>qp,soG:()=>Lh,tBr:()=>po,tb:()=>x_,tp0:()=>Wi,uIk:()=>Bm,vHH:()=>Ie,vpe:()=>ki,wAp:()=>At,xp6:()=>PC,yhl:()=>Vd,z2F:()=>jh,z3N:()=>Ki,zSh:()=>lm,zs3:()=>cu});var u=M(7579),P=M(727),D=M(8306),F=M(6451),U=M(3099);function q(s){for(let o in s)if(s[o]===q)return o;throw Error("Could not find renamed property on target object.")}function W(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function H(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(H).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ae(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Z=q({__forward_ref__:q});function $(s){return s.__forward_ref__=$,s.toString=function(){return H(this())},s}function J(s){return Te(s)?s():s}function Te(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===$}class Ie extends Error{constructor(o,l){super(function Ze(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function he(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new Ie(-201,!1)}function Lt(s,o){null==s&&function Qe(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Jt(s){return Zn(s,Ei)||Zn(s,Hn)}function Zn(s,o){return s.hasOwnProperty(o)?s[o]:null}function ss(s){return s&&(s.hasOwnProperty(Li)||s.hasOwnProperty(os))?s[Li]:null}const Ei=q({\u0275prov:q}),Li=q({\u0275inj:q}),Hn=q({ngInjectableDef:q}),os=q({ngInjectorDef:q});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Jr;function Xt(s){const o=Jr;return Jr=s,o}function Nr(s,o,l){const d=Jt(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&gt.Optional?null:void 0!==o?o:void Ne(H(s))}function Xr(s){return{toString:s}.toString()}var Sn=(()=>((Sn=Sn||{})[Sn.OnPush=0]="OnPush",Sn[Sn.Default=1]="Default",Sn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const Je=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),dr={},Rt=[],ei=q({\u0275cmp:q}),Nn=q({\u0275dir:q}),xn=q({\u0275pipe:q}),se=q({\u0275mod:q}),te=q({\u0275fac:q}),oe=q({__NG_ELEMENT_ID__:q});let ke=0;function ee(s){return Xr(()=>{const l=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Sn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Rt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c"+ke++,styles:s.styles||Rt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,y=s.features;return h.inputs=St(s.inputs,d),h.outputs=St(s.outputs),y&&y.forEach(b=>b(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ue).filter(tt):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Pe).filter(tt):null,h})}function Ue(s){return Q(s)||X(s)}function tt(s){return null!==s}const yt={};function Nt(s){return Xr(()=>{const o={type:s.type,bootstrap:s.bootstrap||Rt,declarations:s.declarations||Rt,imports:s.imports||Rt,exports:s.exports||Rt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(yt[s.id]=s.type),o})}function St(s,o){if(null==s)return dr;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=d,o&&(o[h]=p)}return l}const er=ee;function Ce(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Q(s){return s[ei]||null}function X(s){return s[Nn]||null}function Pe(s){return s[xn]||null}function Ye(s,o){const l=s[se]||null;if(!l&&!0===o)throw new Error(`Type ${H(s)} does not have '\u0275mod' property.`);return l}function ti(s){return Array.isArray(s)&&"object"==typeof s[1]}function Or(s){return Array.isArray(s)&&!0===s[1]}function Ou(s){return 0!=(8&s.flags)}function xo(s){return 2==(2&s.flags)}function jl(s){return 1==(1&s.flags)}function Ii(s){return null!==s.template}function ql(s){return 0!=(256&s[2])}function Bi(s,o){return s.hasOwnProperty(te)?s[te]:null}class ls{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function eo(){return Po}function Po(s){return s.type.prototype.ngOnChanges&&(s.setInput=Lu),mf}function mf(){const s=fd(this),o=s?.current;if(o){const l=s.previous;if(l===dr)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Lu(s,o,l,d){const h=fd(s)||function qa(s,o){return s[Uu]=o}(s,{previous:dr,current:null}),p=h.current||(h.current={}),y=h.previous,b=this.declaredInputs[l],E=y[b];p[b]=new ls(E&&E.currentValue,o,y===dr),s[d]=o}eo.ngInherit=!0;const Uu="__ngSimpleChanges__";function fd(s){return s[Uu]||null}let ua;function $l(s){ua=s}function gn(s){return!!s.listen}const la={createRenderer:(s,o)=>function ju(){return void 0!==ua?ua:typeof document<"u"?document:void 0}()};function On(s){for(;Array.isArray(s);)s=s[0];return s}function ji(s,o){return On(o[s])}function ni(s,o){return On(o[s.index])}function Ro(s,o){return s.data[o]}function ln(s,o){const l=o[s];return ti(l)?l:l[0]}function Gl(s){return 4==(4&s[2])}function No(s){return 64==(64&s[2])}function $r(s,o){return null==o?null:s[o]}function ha(s){s[18]=0}function to(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const xt={lFrame:jo(null),bindingsEnabled:!0};function Oo(){return xt.bindingsEnabled}function je(){return xt.lFrame.lView}function qt(){return xt.lFrame.tView}function Fo(s){return xt.lFrame.contextLView=s,s[8]}function Lo(s){return xt.lFrame.contextLView=null,s}function pr(){let s=no();for(;null!==s&&64===s.type;)s=s.parent;return s}function no(){return xt.lFrame.currentTNode}function fi(s,o){const l=xt.lFrame;l.currentTNode=s,l.isParent=o}function Zu(){return xt.lFrame.isParent}function Sr(){const s=xt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function fs(){return xt.lFrame.bindingIndex++}function Ps(s){const o=xt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function zu(s,o){const l=xt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Bo(o)}function Bo(s){xt.lFrame.currentDirectiveIndex=s}function ma(){return xt.lFrame.currentQueryIndex}function Wu(s){xt.lFrame.currentQueryIndex=s}function bf(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function _a(s,o,l){if(l&gt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&gt.Host||(h=bf(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const d=xt.lFrame=Ku();return d.currentTNode=o,d.lView=s,!0}function ro(s){const o=Ku(),l=s[1];xt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Ku(){const s=xt.lFrame,o=null===s?null:s.child;return null===o?jo(s):o}function jo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function vd(){const s=xt.lFrame;return xt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const wd=vd;function Yu(){const s=vd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function xr(){return xt.lFrame.selectedIndex}function qo(s){xt.lFrame.selectedIndex=s}function rr(){const s=xt.lFrame;return Ro(s.tView,s.selectedIndex)}function Zo(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:b,ngAfterViewInit:E,ngAfterViewChecked:x,ngOnDestroy:N}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),E&&(s.viewHooks||(s.viewHooks=[])).push(-l,E),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function ks(s,o,l){gr(s,o,3,l)}function Ga(s,o,l,d){(3&s[2])===l&&gr(s,o,l,d)}function Ql(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function gr(s,o,l,d){const p=d??-1,y=o.length-1;let b=0;for(let E=void 0!==d?65535&s[18]:0;E<y;E++)if("number"==typeof o[E+1]){if(b=o[E],null!=d&&b>=d)break}else o[E]<0&&(s[18]+=65536),(b<p||-1==p)&&(Cf(s,l,o,E),s[18]=(4294901760&s[18])+E+2),E++}function Cf(s,o,l,d){const h=l[d]<0,p=l[d+1],b=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class va{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Fr(s,o,l){const d=gn(s);let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const y=l[h++],b=l[h++],E=l[h++];d?s.setAttribute(o,b,E,y):o.setAttributeNS(y,b,E)}else{const y=p,b=l[++h];Wa(y)?d&&s.setProperty(o,y,b):d?s.setAttribute(o,y,b):o.setAttribute(y,b),h++}}return h}function Td(s){return 3===s||4===s||6===s}function Wa(s){return 64===s.charCodeAt(0)}function Ka(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||Dd(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function Dd(s,o,l,d,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){y=-1;break}if(b>o){y=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===l){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,l),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}function Fn(s){return-1!==s}function Mr(s){return 32767&s}function tn(s,o){let l=function wn(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let ct=!0;function zn(s){const o=ct;return ct=s,o}let ir=0;const yn={};function dt(s,o){const l=wa(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Rs(d.data,s),Rs(o,null),Rs(d.blueprint,null));const h=pi(s,o),p=s.injectorIndex;if(Fn(h)){const y=Mr(h),b=tn(h,o),E=b[1].data;for(let x=0;x<8;x++)o[p+x]=b[y+x]|E[y+x]}return o[p+8]=h,p}function Rs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function wa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function pi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){if(d=tc(h),null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function ao(s,o,l){!function bn(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(oe)&&(d=l[oe]),null==d&&(d=l[oe]=ir++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Zi(s,o,l){if(l&gt.Optional)return s;Ne()}function mr(s,o,l,d){if(l&gt.Optional&&void 0===d&&(d=null),0==(l&(gt.Self|gt.Host))){const h=s[9],p=Xt(void 0);try{return h?h.get(o,d,l&gt.Optional):Nr(o,d,l&gt.Optional)}finally{Xt(p)}}return Zi(d,0,l)}function Lr(s,o,l,d=gt.Default,h){if(null!==s){if(1024&o[2]){const y=function Ad(s,o,l,d,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const b=Ns(p,y,l,d|gt.Self,yn);if(b!==yn)return b;let E=p.parent;if(!E){const x=y[21];if(x){const N=x.get(l,yn,d);if(N!==yn)return N}E=tc(y),y=y[15]}p=E}return h}(s,o,l,d,yn);if(y!==yn)return y}const p=Ns(s,o,l,d,yn);if(p!==yn)return p}return mr(o,l,d,h)}function Ns(s,o,l,d,h){const p=function Fs(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(oe)?s[oe]:void 0;return"number"==typeof o?o>=0?255&o:Yt:o}(l);if("function"==typeof p){if(!_a(o,s,d))return d&gt.Host?Zi(h,0,d):mr(o,l,d,h);try{const y=p(d);if(null!=y||d&gt.Optional)return y;Ne()}finally{wd()}}else if("number"==typeof p){let y=null,b=wa(s,o),E=-1,x=d&gt.Host?o[16][6]:null;for((-1===b||d&gt.SkipSelf)&&(E=-1===b?pi(s,o):o[b+8],-1!==E&&Qa(d,!1)?(y=o[1],b=Mr(E),o=tn(E,o)):b=-1);-1!==b;){const N=o[1];if(gi(p,b,N.data)){const B=Qu(b,o,l,y,d,x);if(B!==yn)return B}E=o[b+8],-1!==E&&Qa(d,o[1].data[b+8]===x)&&gi(p,b,o)?(y=N,b=Mr(E),o=tn(E,o)):b=-1}}return h}function Qu(s,o,l,d,h,p){const y=o[1],b=y.data[s+8],N=Xl(b,y,l,null==d?xo(b)&&ct:d!=y&&0!=(3&b.type),h&gt.Host&&p===b);return null!==N?Os(o,y,N,b):yn}function Xl(s,o,l,d,h){const p=s.providerIndexes,y=o.data,b=1048575&p,E=s.directiveStart,N=p>>20,re=h?b+N:s.directiveEnd;for(let ye=d?b:b+N;ye<re;ye++){const Fe=y[ye];if(ye<E&&l===Fe||ye>=E&&Fe.type===l)return ye}if(h){const ye=y[E];if(ye&&Ii(ye)&&ye.type===l)return E}return null}function Os(s,o,l,d){let h=s[l];const p=o.data;if(function Ed(s){return s instanceof va}(h)){const y=h;y.resolving&&function Re(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${l}`)}(function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():he(s)}(p[l]));const b=zn(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?Xt(y.injectImpl):null;_a(s,d,gt.Default);try{h=s[l]=y.factory(void 0,p,s,d),o.firstCreatePass&&l>=d.directiveStart&&function Cd(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const y=Po(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==E&&Xt(E),zn(b),y.resolving=!1,wd()}}return h}function gi(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Qa(s,o){return!(s&gt.Self||s&gt.Host&&o)}class uo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Lr(this._tNode,this._lView,o,d,l)}}function Yt(){return new uo(pr(),je())}function ec(s){return Xr(()=>{const o=s.prototype.constructor,l=o[te]||Ls(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[te]||Ls(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Ls(s){return Te(s)?()=>{const o=Ls(J(s));return o&&o()}:Bi(s)}function tc(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function nc(s){return function Jl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const p=l[h];if(Td(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(pr(),s)}const Ju="__parameters__";function Xu(s,o,l){return Xr(()=>{const d=function $o(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return b.annotation=y,b;function b(E,x,N){const B=E.hasOwnProperty(Ju)?E[Ju]:Object.defineProperty(E,Ju,{value:[]})[Ju];for(;B.length<=N;)B.push(null);return(B[N]=B[N]||[]).push(y),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Mn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Qt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const jg=new Mn("AnalyzeForEntryComponents");function or(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),or(d,o)):o!==s&&o.push(d)}return o}function Hi(s,o){s.forEach(l=>Array.isArray(l)?Hi(l,o):o(l))}function ms(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function lo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Vr(s,o,l){let d=$i(s,o);return d>=0?s[1|d]=l:(d=~d,function Md(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function ho(s,o){const l=$i(s,o);if(l>=0)return s[1|l]}function $i(s,o){return function ba(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const p=d+(h-d>>1),y=s[p<<l];if(o===y)return p<<l;y>o?h=p:d=p+1}return~(h<<l)}(s,o,1)}const T={},A="__NG_DI_FLAG__",R="ngTempTokenPath",ce=/\n/gm,Ve="__source";let nt;function Ct(s){const o=nt;return nt=s,o}function Zt(s,o=gt.Default){if(void 0===nt)throw new Ie(-203,"");return null===nt?Nr(s,void 0,o):nt.get(s,o&gt.Optional?null:void 0,o)}function wt(s,o=gt.Default){return(function An(){return Jr}()||Zt)(J(s),o)}function _r(s){const o=[];for(let l=0;l<s.length;l++){const d=J(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Ie(900,"");let h,p=gt.Default;for(let y=0;y<d.length;y++){const b=d[y],E=Vs(b);"number"==typeof E?-1===E?h=b.token:p|=E:h=b}o.push(wt(h,p))}else o.push(wt(d))}return o}function _s(s,o){return s[A]=o,s.prototype[A]=o,s}function Vs(s){return s[A]}const po=_s(Xu("Inject",s=>({token:s})),-1),ys=_s(Xu("Optional"),8),Wi=_s(Xu("SkipSelf"),4);let Nd;function Ca(s){return function Od(){if(void 0===Nd&&(Nd=null,Je.trustedTypes))try{Nd=Je.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Nd}()?.createHTML(s)||s}class nu{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class My extends nu{getTypeName(){return"HTML"}}class Ld extends nu{getTypeName(){return"Style"}}class Py extends nu{getTypeName(){return"Script"}}class xf extends nu{getTypeName(){return"URL"}}class Ud extends nu{getTypeName(){return"ResourceURL"}}function Ki(s){return s instanceof nu?s.changingThisBreaksApplicationSecurity:s}function dc(s,o){const l=Vd(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function Vd(s){return s instanceof nu&&s.getTypeName()||null}function Jb(s){return new My(s)}function w(s){return new Ld(s)}function g(s){return new Py(s)}function _(s){return new xf(s)}function C(s){return new Ud(s)}class V{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(Ca(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class _e{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Ca(o),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Ca(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const ot=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pn(s){return(s=String(s)).match(ot)||s.match(zt)?s:"unsafe:"+s}function zr(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function go(...s){const o={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(o[d]=!0);return o}const hc=zr("area,br,col,hr,img,wbr"),sl=zr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fc=zr("rp,rt"),Ea=go(hc,go(sl,zr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),go(fc,zr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),go(fc,sl)),pc=zr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ia=zr("srcset"),kf=go(pc,Ia,zr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),eC=zr("script,style,template");class sA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Ea.hasOwnProperty(l))return this.sanitizedSomething=!0,!eC.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=o.attributes;for(let h=0;h<d.length;h++){const p=d.item(h),y=p.name,b=y.toLowerCase();if(!kf.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let E=p.value;pc[b]&&(E=Pn(E)),Ia[b]&&(s=E,E=(s=String(s)).split(",").map(o=>Pn(o.trim())).join(", ")),this.buf.push(" ",y,'="',Qg(E),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Ea.hasOwnProperty(l)&&!hc.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Qg(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const oA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yr=/([^\#-~ |!])/g;function Qg(s){return s.replace(/&/g,"&amp;").replace(oA,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(yr,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qd;function tC(s,o){let l=null;try{qd=qd||function k(s){const o=new _e(s);return function qe(){try{return!!(new window.DOMParser).parseFromString(Ca(""),"text/html")}catch{return!1}}()?new V(o):o}(s);let d=o?String(o):"";l=qd.getInertBodyElement(d);let h=5,p=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=p,p=l.innerHTML,l=qd.getInertBodyElement(d)}while(d!==p);return Ca((new sA).sanitizeChildren(ky(l)||l))}finally{if(l){const d=ky(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function ky(s){return"content"in s&&function aA(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Pr=(()=>((Pr=Pr||{})[Pr.NONE=0]="NONE",Pr[Pr.HTML=1]="HTML",Pr[Pr.STYLE=2]="STYLE",Pr[Pr.SCRIPT=3]="SCRIPT",Pr[Pr.URL=4]="URL",Pr[Pr.RESOURCE_URL=5]="RESOURCE_URL",Pr))();function Jg(s){const o=function Zd(){const s=je();return s&&s[12]}();return o?o.sanitize(Pr.URL,s)||"":dc(s,"URL")?Ki(s):Pn(he(s))}function ri(s){return s.ngOriginalError}class Of{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&ri(o);for(;l&&ri(l);)l=ri(l);return l||null}}const Ff=new Map;let ru=0;const Oy="__ngContext__";function Ai(s,o){ti(o)?(s[Oy]=o[20],function ol(s){Ff.set(s[20],s)}(o)):s[Oy]=o}function Lf(s){const o=s[Oy];return"number"==typeof o?function aC(s){return Ff.get(s)||null}(o):o||null}function Fy(s){const o=Lf(s);return o?ti(o)?o:o.lView:null}const EA=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Je))();function iu(s){return s instanceof Function?s():s}var ws=(()=>((ws=ws||{})[ws.Important=1]="Important",ws[ws.DashCase=2]="DashCase",ws))();function qy(s,o){return undefined(s,o)}function mc(s){const o=s[3];return Or(o)?o[3]:o}function $y(s){return Ko(s[13])}function Gy(s){return Ko(s[4])}function Ko(s){for(;null!==s&&!Or(s);)s=s[4];return s}function ou(s,o,l,d,h){if(null!=d){let p,y=!1;Or(d)?p=d:ti(d)&&(y=!0,d=d[0]);const b=On(d);0===s&&null!==l?null==h?yC(o,l,b):yc(o,l,b,h||null,!0):1===s&&null!==l?yc(o,l,b,h||null,!0):2===s?function IC(s,o,l){const d=au(s,o);d&&function Qy(s,o,l,d){gn(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,b,y):3===s&&o.destroyNode(b),null!=p&&function PA(s,o,l,d,h){const p=l[7];p!==On(l)&&ou(o,s,d,p,h);for(let b=10;b<l.length;b++){const E=l[b];zd(E[1],E,s,o,d,p)}}(o,s,p,l,h)}}function _c(s,o,l){if(gn(s))return s.createElement(o,l);{const d=null!==l?function Ug(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function mC(s,o){const l=s[9],d=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,to(h,-1)),l.splice(d,1)}function nm(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&mC(h,d),o>0&&(s[l-1][4]=d[4]);const p=lo(s,10+o);!function pC(s,o){zd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const y=p[19];null!==y&&y.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Wy(s,o){if(!(128&o[2])){const l=o[11];gn(l)&&l.destroyNode&&zd(s,o,l,3,null,null),function DA(s){let o=s[13];if(!o)return Gd(s[1],s);for(;o;){let l=null;if(ti(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)ti(o)&&Gd(o[1],o),o=o[3];null===o&&(o=s),ti(o)&&Gd(o[1],o),l=o&&o[4]}o=l}}(o)}}function Gd(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function xA(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof va)){const p=l[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const b=h[p[y]],E=p[y+1];try{E.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Ky(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const y=l[p+1],b="function"==typeof y?y(o):On(o[y]),E=d[h=l[p+2]],x=l[p+3];"boolean"==typeof x?b.removeEventListener(l[p],E,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),p+=2}else{const y=d[h=l[p+1]];l[p].call(y)}if(null!==d){for(let p=h+1;p<d.length;p++)d[p]();o[7]=null}}(s,o),1===o[1].type&&gn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&Or(o[3])){l!==o[3]&&mC(l,o);const d=o[19];null!==d&&d.detachView(s)}!function em(s){Ff.delete(s[20])}(o)}}function _C(s,o,l){return function Yy(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Gt.None||h===Gt.Emulated)return null}return ni(d,l)}(s,o.parent,l)}function yc(s,o,l,d,h){gn(s)?s.insertBefore(o,l,d,h):(vC(o)?o.content:o).insertBefore(l,d,h)}function yC(s,o,l){gn(s)?s.appendChild(o,l):(vC(o)?o.content:o).appendChild(l)}function Si(s,o,l,d,h){null!==d?yc(s,o,l,d,h):yC(s,o,l)}function vC(s){return"TEMPLATE"===s.tagName&&void 0!==s.content}function au(s,o){return gn(s)?s.parentNode(o):o.parentNode}let mo=function CC(s,o,l){return 40&s.type?ni(s,l):null};function rm(s,o,l,d){const h=_C(s,d,o),p=o[11],b=function bC(s,o,l){return mo(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)Si(p,h,l[E],b,!1);else Si(p,h,l,b,!1)}function im(s,o){if(null!==o){const l=o.type;if(3&l)return ni(o,s);if(4&l)return uu(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return im(s,d);{const h=s[o.index];return Or(h)?uu(-1,h):On(h)}}if(32&l)return qy(o,s)()||On(s[o.index]);{const d=Xy(s,o);return null!==d?Array.isArray(d)?d[0]:im(mc(s[16]),d):im(s,o.next)}}return null}function Xy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function uu(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return im(d,h)}return o[7]}function ev(s,o,l,d,h,p,y){for(;null!=l;){const b=d[l.index],E=l.type;if(y&&0===o&&(b&&Ai(On(b),d),l.flags|=4),64!=(64&l.flags))if(8&E)ev(s,o,l.child,d,h,p,!1),ou(o,s,h,b,p);else if(32&E){const x=qy(l,d);let N;for(;N=x();)ou(o,s,h,N,p);ou(o,s,h,b,p)}else 16&E?TC(s,o,d,l,h,p):ou(o,s,h,b,p);l=y?l.projectionNext:l.next}}function zd(s,o,l,d,h,p){ev(l,d,s.firstChild,o,h,p,!1)}function TC(s,o,l,d,h,p){const y=l[16],E=y[6].projection[d.projection];if(Array.isArray(E))for(let x=0;x<E.length;x++)ou(o,s,h,E[x],p);else ev(s,o,E,y[3],h,p,!0)}function sm(s,o,l){gn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function om(s,o,l){gn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function AC(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}l=h+1}}const SC="ng-template";function kA(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==AC(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function tv(s){return 4===s.type&&s.value!==SC}function RA(s,o,l){return o===(4!==s.type||l?s.value:SC)}function NA(s,o,l){let d=4;const h=s.attrs||[],p=function rv(s){for(let o=0;o<s.length;o++)if(Td(s[o]))return o;return s.length}(h);let y=!1;for(let b=0;b<o.length;b++){const E=o[b];if("number"!=typeof E){if(!y)if(4&d){if(d=2|1&d,""!==E&&!RA(s,E,l)||""===E&&1===o.length){if(_o(d))return!1;y=!0}}else{const x=8&d?E:o[++b];if(8&d&&null!==s.attrs){if(!kA(s.attrs,x,l)){if(_o(d))return!1;y=!0}continue}const B=OA(8&d?"class":E,h,tv(s),l);if(-1===B){if(_o(d))return!1;y=!0;continue}if(""!==x){let re;re=B>p?"":h[B+1].toLowerCase();const ye=8&d?re:null;if(ye&&-1!==AC(ye,x,0)||2&d&&x!==re){if(_o(d))return!1;y=!0}}}}else{if(!y&&!_o(d)&&!_o(E))return!1;if(y&&_o(E))continue;y=!1,d=E|1&d}}return _o(d)||y}function _o(s){return 0==(1&s)}function OA(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function xC(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function nv(s,o,l=!1){for(let d=0;d<o.length;d++)if(NA(s,o[d],l))return!0;return!1}function iv(s,o){return s?":not("+o.trim()+")":o}function mP(s){let o=s[0],l=1,d=2,h="",p=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&d){const b=s[++l];h+="["+y+(b.length>0?'="'+b+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!_o(y)&&(o+=iv(p,h),h=""),d=y,p=p||!_o(d);l++}return""!==h&&(o+=iv(p,h)),o}const Ut={};function PC(s){kC(qt(),je(),xr()+s,!1)}function kC(s,o,l,d){if(!d)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ks(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Ga(o,p,0,l)}qo(l)}const BA=new Mn("ENVIRONMENT_INITIALIZER"),LC=new Mn("INJECTOR_DEF_TYPES");function jA(...s){return{\u0275providers:Vf(0,s)}}function Vf(s,...o){const l=[],d=new Set;let h;return Hi(o,p=>{const y=p;am(y,l,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&sv(h,l),l}function sv(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];Hi(h,p=>{o.push(p)})}}function am(s,o,l,d){if(!(s=J(s)))return!1;let h=null,p=ss(s);const y=!p&&Q(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const E=s.ngModule;if(p=ss(E),!p)return!1;h=E}const b=d.has(h);if(y){if(b)return!1;if(d.add(h),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const x of E)am(x,o,l,d)}}else{if(!p)return!1;{if(null!=p.imports&&!b){let x;d.add(h);try{Hi(p.imports,N=>{am(N,o,l,d)&&(x||(x=[]),x.push(N))})}finally{}void 0!==x&&sv(x,o)}if(!b){const x=Bi(h)||(()=>new h);o.push({provide:h,useFactory:x,deps:Rt},{provide:LC,useValue:h,multi:!0},{provide:BA,useValue:()=>wt(h),multi:!0})}const E=p.providers;null==E||b||Hi(E,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const UC=q({provide:String,useValue:q});function um(s){return null!==s&&"object"==typeof s&&UC in s}function vc(s){return"function"==typeof s}const ov=new Mn("INJECTOR",-1);class jC{get(o,l=T){if(l===T){const d=new Error(`NullInjectorError: No provider for ${H(o)}!`);throw d.name="NullInjectorError",d}return l}}const lm=new Mn("Set Injector scope."),wc={},ZA={};let av;function uv(){return void 0===av&&(av=new jC),av}class Wd{}class qC extends Wd{constructor(o,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lu(o,y=>this.processProvider(y)),this.records.set(ov,Yd(void 0,this)),h.has("environment")&&this.records.set(Wd,Yd(void 0,this));const p=this.records.get(lm);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(LC.multi,Rt,gt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}get(o,l=T,d=gt.Default){this.assertNotDestroyed();const h=Ct(this),p=Xt(void 0);try{if(!(d&gt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const E=function lv(s){return"function"==typeof s||"object"==typeof s&&s instanceof Mn}(o)&&Jt(o);b=E&&this.injectableDefInScope(E)?Yd(ZC(o),wc):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(d&gt.Self?uv():this.parent).get(o,l=d&gt.Optional&&l===T?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[R]=y[R]||[]).unshift(H(o)),h)throw y;return function fo(s,o,l,d){const h=s[R];throw o[Ve]&&h.unshift(o[Ve]),s.message=function rl(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=H(o);if(Array.isArray(o))h=o.map(H).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let b=o[y];p.push(y+":"+("string"==typeof b?JSON.stringify(b):H(b)))}h=`{${p.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(ce,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[R]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Xt(p),Ct(h)}}resolveInjectorInitializers(){const o=Ct(this),l=Xt(void 0);try{const d=this.get(BA.multi,Rt,gt.Self);for(const h of d)h()}finally{Ct(o),Xt(l)}}toString(){const o=[],l=this.records;for(const d of l.keys())o.push(H(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let l=vc(o=J(o))?o:J(o&&o.provide);const d=function $A(s){return um(s)?Yd(void 0,s.useValue):Yd(Kd(s),wc)}(o);if(vc(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=Yd(void 0,wc,!0),h.factory=()=>_r(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,d)}hydrate(o,l){return l.value===wc&&(l.value=ZA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function cm(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=J(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function ZC(s){const o=Jt(s),l=null!==o?o.factory:Bi(s);if(null!==l)return l;if(s instanceof Mn)throw new Ie(204,!1);if(s instanceof Function)return function HA(s){const o=s.length;if(o>0)throw function co(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?"),new Ie(204,!1);const l=function Vn(s){const o=s&&(s[Ei]||s[Hn]);if(o){const l=function vn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ie(204,!1)}function Kd(s,o,l){let d;if(vc(s)){const h=J(s);return Bi(h)||ZC(h)}if(um(s))d=()=>J(s.useValue);else if(function BC(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(..._r(s.deps||[]));else if(function VC(s){return!(!s||!s.useExisting)}(s))d=()=>wt(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function Bf(s){return!!s.deps}(s))return Bi(h)||ZC(h);d=()=>new h(..._r(s.deps))}return d}function Yd(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function GA(s){return!!s.\u0275providers}function lu(s,o){for(const l of s)Array.isArray(l)?lu(l,o):GA(l)?lu(l.\u0275providers,o):o(l)}function cv(s,o=null,l=null,d){const h=HC(s,o,l,d);return h.resolveInjectorInitializers(),h}function HC(s,o=null,l=null,d,h=new Set){const p=[l||Rt,jA(s)];return d=d||("object"==typeof s?void 0:H(s)),new qC(p,o||uv(),d||null,h)}let cu=(()=>{class s{static create(l,d){if(Array.isArray(l))return cv({name:""},d,l,"");{const h=l.name??"";return cv({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=T,s.NULL=new jC,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>wt(ov)}),s.__NG_ELEMENT_ID__=-1,s})();function ul(s,o=gt.Default){const l=je();return null===l?wt(s,o):Lr(pr(),l,J(s),o)}function mv(){throw new Error("invalid")}function Jd(s,o){return s<<17|o<<2}function yo(s){return s>>17&32767}function si(s){return 2|s}function qs(s){return(131068&s)>>2}function yv(s,o){return-131069&s|o<<2}function vv(s){return 1|s}function hE(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],p=l[d+1];if(-1!==p){const y=s.data[p];Wu(h),y.contentQueries(2,o[p],p)}}}function Qf(s,o,l,d,h,p,y,b,E,x,N){const B=o.blueprint.slice();return B[0]=h,B[2]=76|d,(null!==N||s&&1024&s[2])&&(B[2]|=1024),ha(B),B[3]=B[15]=s,B[8]=l,B[10]=y||s&&s[10],B[11]=b||s&&s[11],B[12]=E||s&&s[12]||null,B[9]=x||s&&s[9]||null,B[6]=p,B[20]=function oC(){return ru++}(),B[21]=N,B[16]=2==o.type?s[16]:B,B}function vo(s,o,l,d,h){let p=s.data[o];if(null===p)p=function mm(s,o,l,d,h){const p=no(),y=Zu(),E=s.data[o]=function Pv(s,o,l,d,h,p){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=E),null!==p&&(y?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}(s,o,l,d,h),function $a(){return xt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=d,p.attrs=h;const y=function Uo(){const s=xt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return fi(p,!0),p}function pu(s,o,l,d){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function sh(s,o,l){ro(o);try{const d=s.viewQuery;null!==d&&Lv(1,d,l);const h=s.template;null!==h&&xi(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hE(s,o),s.staticViewQueries&&Lv(2,s.viewQuery,l);const p=s.components;null!==p&&function uS(s,o){for(let l=0;l<o.length;l++)Dm(s,o[l])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Yu()}}function Da(s,o,l,d){const h=o[2];if(128!=(128&h)){ro(o);try{ha(o),function $u(s){return xt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&xi(s,o,l,2,d);const y=3==(3&h);if(y){const x=s.preOrderCheckHooks;null!==x&&ks(o,x,null)}else{const x=s.preOrderHooks;null!==x&&Ga(o,x,0,null),Ql(o,0)}if(function Tm(s){for(let o=$y(s);null!==o;o=Gy(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],p=h[3];0==(512&h[2])&&to(p,1),h[2]|=512}}}(o),function Im(s){for(let o=$y(s);null!==o;o=Gy(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];No(d)&&Da(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&hE(s,o),y){const x=s.contentCheckHooks;null!==x&&ks(o,x)}else{const x=s.contentHooks;null!==x&&Ga(o,x,1),Ql(o,1)}!function aS(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)qo(~h);else{const p=h,y=l[++d],b=l[++d];zu(y,p),b(2,o[p])}}}finally{qo(-1)}}(s,o);const b=s.components;null!==b&&function ih(s,o){for(let l=0;l<o.length;l++)vE(s,o[l])}(o,b);const E=s.viewQuery;if(null!==E&&Lv(2,E,d),y){const x=s.viewCheckHooks;null!==x&&ks(o,x)}else{const x=s.viewHooks;null!==x&&Ga(o,x,2),Ql(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,to(o[3],-1))}finally{Yu()}}}function fE(s,o,l,d){const h=o[10],y=Gl(o);try{!y&&h.begin&&h.begin(),y&&sh(s,o,d),Da(s,o,l,d)}finally{!y&&h.end&&h.end()}}function xi(s,o,l,d,h){const p=xr(),y=2&d;try{qo(-1),y&&o.length>22&&kC(s,o,22,!1),l(d,h)}finally{qo(p)}}function Cc(s,o,l){!Oo()||(function ep(s,o,l,d){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||dt(l,o),Ai(d,o);const y=l.initialInputs;for(let b=h;b<p;b++){const E=s.data[b],x=Ii(E);x&&Ov(o,l,E);const N=Os(o,s,b,l);Ai(N,o),null!==y&&dS(0,b-h,N,E,0,y),x&&(ln(l.index,o)[8]=N)}}(s,o,l,ni(l,o)),128==(128&l.flags)&&function yE(s,o,l){const d=l.directiveStart,h=l.directiveEnd,p=l.index,y=function wf(){return xt.lFrame.currentDirectiveIndex}();try{qo(p);for(let b=d;b<h;b++){const E=s.data[b],x=o[b];Bo(b),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&tp(E,x)}}finally{qo(-1),Bo(y)}}(s,o,l))}function oh(s,o,l=ni){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],b=-1===y?l(o,s):s[y];s[h++]=b}}}function xv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ah(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ah(s,o,l,d,h,p,y,b,E,x){const N=22+d,B=N+h,re=function pE(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Ut);return l}(N,B),ye="function"==typeof x?x():x;return re[1]={type:s,blueprint:re,template:l,queries:null,viewQuery:b,declTNode:o,data:re.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:ye,incompleteFirstPass:!1}}function vm(s,o,l,d){const h=Uv(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&Vv(s).push(d,h.length-1))}function Jf(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function Zs(s,o,l,d,h,p,y,b){const E=ni(o,l);let N,x=o.inputs;!b&&null!=x&&(N=x[d])?(bE(s,l,N,d,h),xo(o)&&function kv(s,o){const l=ln(o,s);16&l[2]||(l[2]|=32)}(l,o.index)):3&o.type&&(d=function gE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,gn(p)?p.setProperty(E,d,h):Wa(d)||(E.setProperty?E.setProperty(d,h):E[d]=h))}function bm(s,o,l,d){let h=!1;if(Oo()){const p=function np(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let p=0;p<d.length;p++){const y=d[p];nv(l,y.selectors,!1)&&(h||(h=[]),ao(dt(l,o),s,y.type),Ii(y)?(cl(s,l),h.unshift(y)):h.push(y))}return h}(s,o,l),y=null===d?null:{"":-1};if(null!==p){h=!0,Cm(l,s.data.length,p.length);for(let N=0;N<p.length;N++){const B=p[N];B.providersResolver&&B.providersResolver(B)}let b=!1,E=!1,x=pu(s,o,p.length,null);for(let N=0;N<p.length;N++){const B=p[N];l.mergedAttrs=Ka(l.mergedAttrs,B.hostAttrs),Ec(s,l,o,x,B),cS(x,B,y),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const re=B.type.prototype;!b&&(re.ngOnChanges||re.ngOnInit||re.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!E&&(re.ngOnChanges||re.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),E=!0),x++}!function Xf(s,o){const d=o.directiveEnd,h=s.data,p=o.attrs,y=[];let b=null,E=null;for(let x=o.directiveStart;x<d;x++){const N=h[x],B=N.inputs,re=null===p||tv(o)?null:Ic(B,p);y.push(re),b=Jf(B,x,b),E=Jf(N.outputs,x,E)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=b,o.outputs=E}(s,l)}y&&function Nv(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Ie(-301,!1);d.push(o[h],p)}}}(l,d,y)}return l.mergedAttrs=Ka(l.mergedAttrs,l.attrs),h}function Rv(s,o,l,d,h,p){const y=p.hostBindings;if(y){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const E=~o.index;(function lS(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=E&&b.push(E),b.push(d,h,y)}}function tp(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function cl(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function cS(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;Ii(o)&&(l[""]=s)}}function Cm(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Ec(s,o,l,d,h){s.data[d]=h;const p=h.factory||(h.factory=Bi(h.type)),y=new va(p,Ii(h),ul);s.blueprint[d]=y,l[d]=y,Rv(s,o,0,d,pu(s,l,h.hostVars,Ut),h)}function Ov(s,o,l){const d=ni(o,s),h=xv(l),p=s[10],y=Am(s,Qf(s,h,null,l.onPush?32:16,d,o,p,p.createRenderer(d,l),null,null,null));s[o.index]=y}function Mi(s,o,l,d,h,p){const y=ni(s,o);!function Em(s,o,l,d,h,p,y){if(null==p)gn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==y?he(p):y(p,d||"",h);gn(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}(o[11],y,p,s.value,l,d,h)}function dS(s,o,l,d,h,p){const y=p[o];if(null!==y){const b=d.setInput;for(let E=0;E<y.length;){const x=y[E++],N=y[E++],B=y[E++];null!==b?d.setInput(l,B,x,N):l[N]=B}}}function Ic(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function rp(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function vE(s,o){const l=ln(o,s);if(No(l)){const d=l[1];48&l[2]?Da(d,l,d.template,l[8]):l[5]>0&&Bn(l)}}function Bn(s){for(let d=$y(s);null!==d;d=Gy(d))for(let h=10;h<d.length;h++){const p=d[h];if(512&p[2]){const y=p[1];Da(y,p,y.template,p[8])}else p[5]>0&&Bn(p)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=ln(l[d],s);No(h)&&h[5]>0&&Bn(h)}}function Dm(s,o){const l=ln(o,s),d=l[1];(function hS(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),sh(d,l,l[8])}function Am(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Tc(s){for(;s;){s[2]|=32;const o=mc(s);if(ql(s)&&!o)return s;s=o}return null}function wE(s){!function Fv(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=Fy(l);if(null!==d){const h=d[1];fE(h,d,h.template,l)}}}(s[8])}function Lv(s,o,l){Wu(0),o(s,l)}const hl=(()=>Promise.resolve(null))();function Uv(s){return s[7]||(s[7]=[])}function Vv(s){return s.cleanup||(s.cleanup=[])}function Dc(s,o){const l=s[9],d=l?l.get(Of,null):null;d&&d.handleError(o)}function bE(s,o,l,d,h){for(let p=0;p<l.length;){const y=l[p++],b=l[p++],E=o[y],x=s.data[y];null!==x.setInput?x.setInput(E,h,d,b):E[b]=h}}function gu(s,o,l){const d=ji(o,s);!function fC(s,o,l){gn(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function sp(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const b=o[y];"number"==typeof b?p=b:1==p?h=ae(h,b):2==p&&(d=ae(d,b+": "+o[++y]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function mu(){const s=pr();Zo(je()[1],s)}function lp(s){let o=function AE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(Ii(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,"");h=o.\u0275dir}if(h){if(l){d.push(h);const y=s;y.inputs=Om(s.inputs),y.declaredInputs=Om(s.declaredInputs),y.outputs=Om(s.outputs);const b=h.hostBindings;b&&SE(s,b);const E=h.viewQuery,x=h.contentQueries;if(E&&Gv(s,E),x&&Fm(s,x),W(s.inputs,h.inputs),W(s.declaredInputs,h.declaredInputs),W(s.outputs,h.outputs),Ii(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const b=p[y];b&&b.ngInherit&&b(s),b===lp&&(l=!1)}}o=Object.getPrototypeOf(o)}!function cp(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Ka(h.hostAttrs,l=Ka(l,h.hostAttrs))}}(d)}function Om(s){return s===dr?{}:s===Rt?[]:s}function Gv(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function Fm(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,p)=>{o(d,h,p),l(d,h,p)}:o}function SE(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let dp=null;function Jo(){if(!dp){const s=Je.Symbol;if(s&&s.iterator)dp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(dp=d)}}}return dp}function lh(s){return!!Um(s)&&(Array.isArray(s)||!(s instanceof Map)&&Jo()in s)}function Um(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Xo(s,o,l){return s[o]=l}function vr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function hp(s,o,l,d,h){const p=function fl(s,o,l,d){const h=vr(s,o,l);return vr(s,o+1,d)||h}(s,o,l,d);return vr(s,o+2,h)||p}function Bm(s,o,l,d){const h=je();return vr(h,fs(),o)&&(qt(),Mi(rr(),h,s,o,l,d)),Bm}function oi(s,o,l,d){return vr(s,fs(),l)?o+he(l)+d:Ut}function kE(s,o,l,d,h,p,y,b){const E=je(),x=qt(),N=s+22,B=x.firstCreatePass?function Jv(s,o,l,d,h,p,y,b,E){const x=o.consts,N=vo(o,s,4,y||null,$r(x,b));bm(o,l,N,$r(x,E)),Zo(o,N);const B=N.tViews=ah(2,N,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,N),B.queries=o.queries.embeddedTView(N)),N}(N,x,E,o,l,d,h,p,y):x.data[N];fi(B,!1);const re=E[11].createComment("");rm(x,E,re,B),Ai(re,E),Am(E,E[N]=rp(re,E,re,B)),jl(B)&&Cc(x,E,B),null!=y&&oh(E,B,b)}function kr(s){return function ds(s,o){return s[o]}(function yf(){return xt.lFrame.contextLView}(),22+s)}function Mc(s,o,l){const d=je();return vr(d,fs(),o)&&Zs(qt(),rr(),d,s,o,d[11],l,!1),Mc}function pp(s,o,l,d,h){const y=h?"class":"style";bE(s,l,o.inputs[y],y,d)}function Pt(s,o,l,d){const h=je(),p=qt(),y=22+s,b=h[11],E=h[y]=_c(b,o,function Yl(){return xt.lFrame.currentNamespace}()),x=p.firstCreatePass?function ht(s,o,l,d,h,p,y){const b=o.consts,x=vo(o,s,2,h,$r(b,p));return bm(o,l,x,$r(b,y)),null!==x.attrs&&sp(x,x.attrs,!1),null!==x.mergedAttrs&&sp(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(y,p,h,0,o,l,d):p.data[y];fi(x,!0);const N=x.mergedAttrs;null!==N&&Fr(b,E,N);const B=x.classes;null!==B&&om(b,E,B);const re=x.styles;return null!==re&&sm(b,E,re),64!=(64&x.flags)&&rm(p,h,E,x),0===function pa(){return xt.lFrame.elementDepthCount}()&&Ai(E,h),function ga(){xt.lFrame.elementDepthCount++}(),jl(x)&&(Cc(p,h,x),function Sv(s,o,l){if(Ou(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,l[p],p)}}}(p,x,h)),null!==d&&oh(h,x),Pt}function jm(){let s=pr();Zu()?function Hu(){xt.lFrame.isParent=!1}():(s=s.parent,fi(s,!1));const o=s;!function md(){xt.lFrame.elementDepthCount--}();const l=qt();return l.firstCreatePass&&(Zo(l,s),Ou(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Vg(s){return 0!=(16&s.flags)}(o)&&pp(l,o,je(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bg(s){return 0!=(32&s.flags)}(o)&&pp(l,o,je(),o.stylesWithoutHost,!1),jm}function rt(s,o,l,d){return Pt(s,o,l,d),jm(),rt}function RE(){return je()}function e0(s){return!!s&&"function"==typeof s.then}function NE(s){return!!s&&"function"==typeof s.subscribe}const OE=NE;function t0(s,o,l,d){const h=je(),p=qt(),y=pr();return function IS(s,o,l,d,h,p,y,b){const E=jl(d),N=s.firstCreatePass&&Vv(s),B=o[8],re=Uv(o);let ye=!0;if(3&d.type||b){const et=ni(d,o),lt=b?b(et):et,Mt=re.length,$e=b?bt=>b(On(bt[d.index])):d.index;if(gn(l)){let bt=null;if(!b&&E&&(bt=function ES(s,o,l,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===l&&h[p+1]===d){const b=o[7],E=h[p+2];return b.length>E?b[E]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,d.index)),null!==bt)(bt.__ngLastListenerFn__||bt).__ngNextListenerFn__=p,bt.__ngLastListenerFn__=p,ye=!1;else{p=qm(d,o,B,p,!1);const hn=l.listen(lt,h,p);re.push(p,hn),N&&N.push(h,$e,Mt,Mt+1)}}else p=qm(d,o,B,p,!0),lt.addEventListener(h,p,y),re.push(p),N&&N.push(h,$e,Mt,y)}else p=qm(d,o,B,p,!1);const Fe=d.outputs;let We;if(ye&&null!==Fe&&(We=Fe[h])){const et=We.length;if(et)for(let lt=0;lt<et;lt+=2){const qn=o[We[lt]][We[lt+1]].subscribe(p),ed=re.length;re.push(p,qn),N&&N.push(h,d.index,ed,-(ed+1))}}}(p,h,h[11],y,s,o,!!l,d),t0}function FE(s,o,l,d){try{return!1!==l(d)}catch(h){return Dc(s,h),!1}}function qm(s,o,l,d,h){return function p(y){if(y===Function)return d;Tc(2&s.flags?ln(s.index,o):o);let E=FE(o,0,d,y),x=p.__ngNextListenerFn__;for(;x;)E=FE(o,0,x,y)&&E,x=x.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function Bt(s=1){return function Wl(s){return(xt.lFrame.contextLView=function bd(s,o){for(;s>0;)o=o[15],s--;return o}(s,xt.lFrame.contextLView))[8]}(s)}function kt(s,o,l){return Pc(s,"",o,"",l),kt}function Pc(s,o,l,d,h){const p=je(),y=oi(p,o,l,d);return y!==Ut&&Zs(qt(),rr(),p,s,y,p[11],h,!1),Pc}function bs(s,o,l,d,h){const p=s[l+1],y=null===o;let b=d?yo(p):qs(p),E=!1;for(;0!==b&&(!1===E||y);){const N=s[b+1];r0(s[b],o)&&(E=!0,s[b+1]=d?vv(N):si(N)),b=d?yo(N):qs(N)}E&&(s[l+1]=d?si(p):vv(p))}function r0(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$i(s,o)>=0}const qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function s0(s){return s.substring(qr.key,qr.keyEnd)}function Ee(s,o){const l=qr.textEnd;return l===o?-1:(o=qr.keyEnd=function _l(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,qr.key=o,l),Aa(s,o,l))}function Aa(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function Pi(s,o){return function Cs(s,o,l,d){const h=je(),p=qt(),y=Ps(2);p.firstUpdatePass&&u0(p,s,y,d),o!==Ut&&vr(h,y,o)&&d0(p,p.data[xr()],h,h[11],s,h[y+1]=function vu(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=H(Ki(s)))),s}(o,l),d,y)}(s,o,null,!0),Pi}function a0(s){!function Un(s,o,l,d){const h=qt(),p=Ps(2);h.firstUpdatePass&&u0(h,null,p,d);const y=je();if(l!==Ut&&vr(y,p,l)){const b=h.data[xr()];if(_h(b,d)&&!kn(h,p)){let E=d?b.classesWithoutHost:b.stylesWithoutHost;null!==E&&(l=ae(E,l||"")),pp(h,b,y,l,d)}else!function c0(s,o,l,d,h,p,y,b){h===Ut&&(h=Rt);let E=0,x=0,N=0<h.length?h[0]:null,B=0<p.length?p[0]:null;for(;null!==N||null!==B;){const re=E<h.length?h[E+1]:void 0,ye=x<p.length?p[x+1]:void 0;let We,Fe=null;N===B?(E+=2,x+=2,re!==ye&&(Fe=B,We=ye)):null===B||null!==N&&N<B?(E+=2,Fe=N):(x+=2,Fe=B,We=ye),null!==Fe&&d0(s,o,l,d,Fe,We,y,b),N=E<h.length?h[E]:null,B=x<p.length?p[x]:null}}(h,b,y,y[11],y[p+1],y[p+1]=function br(s,o,l){if(null==l||""===l)return Rt;const d=[],h=Ki(l);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(d,p,h[p]);else"string"==typeof h&&o(d,h);return d}(s,o,l),d,p)}}(Vr,Cn,s,!0)}function Cn(s,o){for(let l=function o0(s){return function jE(s){qr.key=0,qr.keyEnd=0,qr.value=0,qr.valueEnd=0,qr.textEnd=s.length}(s),Ee(s,Aa(s,0,qr.textEnd))}(o);l>=0;l=Ee(o,l))Vr(s,s0(o),!0)}function kn(s,o){return o>=s.expandoStartIndex}function u0(s,o,l,d){const h=s.data;if(null===h[l+1]){const p=h[xr()],y=kn(s,l);_h(p,d)&&null===o&&!y&&(o=!1),o=function gh(s,o,l,d){const h=function zl(s){const o=xt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=bo(l=l0(null,s,o,l,d),o.attrs,d),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=l0(h,s,o,l,d),null===p){let E=function $s(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==qs(d))return s[yo(d)]}(s,o,d);void 0!==E&&Array.isArray(E)&&(E=l0(null,s,o,E[1],d),E=bo(E,o.attrs,d),function DS(s,o,l,d){s[yo(l?o.classBindings:o.styleBindings)]=d}(s,o,d,E))}else p=function Yr(s,o,l){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=bo(d,s[p].hostAttrs,l);return bo(d,o.attrs,l)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,d),function VE(s,o,l,d,h,p){let y=p?o.classBindings:o.styleBindings,b=yo(y),E=qs(y);s[d]=l;let N,x=!1;if(Array.isArray(l)){const B=l;N=B[1],(null===N||$i(B,N)>0)&&(x=!0)}else N=l;if(h)if(0!==E){const re=yo(s[b+1]);s[d+1]=Jd(re,b),0!==re&&(s[re+1]=yv(s[re+1],d)),s[b+1]=function rS(s,o){return 131071&s|o<<17}(s[b+1],d)}else s[d+1]=Jd(b,0),0!==b&&(s[b+1]=yv(s[b+1],d)),b=d;else s[d+1]=Jd(E,0),0===b?b=d:s[E+1]=yv(s[E+1],d),E=d;x&&(s[d+1]=si(s[d+1])),bs(s,N,d,!0),bs(s,N,d,!1),function BE(s,o,l,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&$i(p,o)>=0&&(l[d+1]=vv(l[d+1]))}(o,N,s,d,p),y=Jd(b,E),p?o.classBindings=y:o.styleBindings=y}(h,p,o,l,y,d)}}function l0(s,o,l,d,h){let p=null;const y=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<y&&(p=o[b],d=bo(d,p.hostAttrs,h),p!==s);)b++;return null!==s&&(l.directiveStylingLast=b),d}function bo(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Vr(s,y,!!l||o[++p]))}return void 0===s?null:s}function d0(s,o,l,d,h,p,y,b){if(!(3&o.type))return;const E=s.data,x=E[b+1];zm(function Xd(s){return 1==(1&s)}(x)?mh(E,o,l,h,qs(x),y):void 0)||(zm(p)||function rE(s){return 2==(2&s)}(x)&&(p=mh(E,null,l,h,b,y)),function DC(s,o,l,d,h){const p=gn(s);if(o)h?p?s.addClass(l,d):l.classList.add(d):p?s.removeClass(l,d):l.classList.remove(d);else{let y=-1===d.indexOf("-")?void 0:ws.DashCase;if(null==h)p?s.removeStyle(l,d,y):l.style.removeProperty(d);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),y|=ws.Important),p?s.setStyle(l,d,h,y):l.style.setProperty(d,h,b?"important":"")}}}(d,y,ji(xr(),l),h,p))}function mh(s,o,l,d,h,p){const y=null===o;let b;for(;h>0;){const E=s[h],x=Array.isArray(E),N=x?E[1]:E,B=null===N;let re=l[h+1];re===Ut&&(re=B?Rt:void 0);let ye=B?ho(re,d):N===d?re:void 0;if(x&&!zm(ye)&&(ye=ho(E,d)),zm(ye)&&(b=ye,y))return b;const Fe=s[h+1];h=y?yo(Fe):qs(Fe)}if(null!==o){let E=p?o.residualClasses:o.residualStyles;null!=E&&(b=ho(E,d))}return b}function zm(s){return void 0!==s}function _h(s,o){return 0!=(s.flags&(o?16:32))}function yh(s,o=""){const l=je(),d=qt(),h=s+22,p=d.firstCreatePass?vo(d,h,1,o,null):d.data[h],y=l[h]=function zy(s,o){return gn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);rm(d,l,y,p),fi(p,!1)}function Wm(s){return na("",s,""),Wm}function na(s,o,l){const d=je(),h=oi(d,s,o,l);return h!==Ut&&gu(d,xr(),h),na}const Fc=void 0;var PS=["en",[["a","p"],["AM","PM"],Fc],[["AM","PM"],Fc,Fc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fc,"{1} 'at' {0}",Fc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MS(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let bh={};function bl(s){const o=function Ch(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=y0(o);if(l)return l;const d=o.split("-")[0];if(l=y0(d),l)return l;if("en"===d)return PS;throw new Error(`Missing locale data for the locale "${s}".`)}function _0(s){return bl(s)[At.PluralCase]}function y0(s){return s in bh||(bh[s]=Je.ng&&Je.ng.common&&Je.ng.common.locales&&Je.ng.common.locales[s]),bh[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const El="en-US";let b0=El;function e_(s,o,l,d,h){if(s=J(s),Array.isArray(s))for(let p=0;p<s.length;p++)e_(s[p],o,l,d,h);else{const p=qt(),y=je();let b=vc(s)?s:J(s.provide),E=Kd(s);const x=pr(),N=1048575&x.providerIndexes,B=x.directiveStart,re=x.providerIndexes>>20;if(vc(s)||!s.multi){const ye=new va(E,h,ul),Fe=Vc(b,o,h?N:N+re,B);-1===Fe?(ao(dt(x,y),p,b),L0(p,s,o.length),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(ye),y.push(ye)):(l[Fe]=ye,y[Fe]=ye)}else{const ye=Vc(b,o,N+re,B),Fe=Vc(b,o,N,N+re),We=ye>=0&&l[ye],et=Fe>=0&&l[Fe];if(h&&!et||!h&&!We){ao(dt(x,y),p,b);const lt=function wI(s,o,l,d,h){const p=new va(s,l,ul);return p.multi=[],p.index=o,p.componentProviders=0,vI(p,h,d&&!l),p}(h?GS:U0,l.length,h,d,E);!h&&et&&(l[Fe].providerFactory=lt),L0(p,s,o.length,0),o.push(b),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(lt),y.push(lt)}else L0(p,s,ye>-1?ye:Fe,vI(l[h?Fe:ye],E,!h&&d));!h&&d&&et&&l[Fe].componentProviders++}}}function L0(s,o,l,d){const h=vc(o),p=function qA(s){return!!s.useClass}(o);if(h||p){const E=(p?J(o.useClass):o).prototype.ngOnDestroy;if(E){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=x.indexOf(l);-1===N?x.push(l,[d,E]):x[N+1].push(d,E)}else x.push(l,E)}}}function vI(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Vc(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function U0(s,o,l,d){return t_(this.multi,[])}function GS(s,o,l,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,b=Os(l,l[1],this.providerFactory.index,d);p=b.slice(0,y),t_(h,p);for(let E=y;E<b.length;E++)p.push(b[E])}else p=[],t_(h,p);return p}function t_(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function V0(s,o=[]){return l=>{l.providersResolver=(d,h)=>function yI(s,o,l){const d=qt();if(d.firstCreatePass){const h=Ii(s);e_(l,d.data,d.blueprint,h,!0),e_(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class WS{resolveComponentFactory(o){throw function zS(s){const o=Error(`No component factory found for ${H(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Pa=(()=>{class s{}return s.NULL=new WS,s})();class Co{}class bI{}class CI{}function EI(){return Zr(pr(),je())}function Zr(s,o){return new Op(ni(s,o))}let Op=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=EI,s})();function II(s){return s instanceof Op?s.nativeElement:s}class j0{}let n_=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function YS(){const s=je(),l=ln(pr().index,s);return function TI(s){return s[11]}(ti(l)?l:s)}(),s})(),QS=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class DI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const AI=new DI("14.0.2"),q0={};function r_(s,o,l,d,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&d.push(On(p)),Or(p))for(let b=10;b<p.length;b++){const E=p[b],x=E[1].firstChild;null!==x&&r_(E[1],E,x,d)}const y=l.type;if(8&y)r_(s,o,l.child,d);else if(32&y){const b=qy(l,o);let E;for(;E=b();)d.push(E)}else if(16&y){const b=Xy(o,l);if(Array.isArray(b))d.push(...b);else{const E=mc(o[16]);r_(E[1],E,b,d,!0)}}l=h?l.projectionNext:l.next}return d}class Fp{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return r_(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Or(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(nm(o,d),lo(l,d))}this._attachedToViewContainer=!1}Wy(this._lView[1],this._lView)}onDestroy(o){vm(this._lView[1],this._lView,null,o)}markForCheck(){Tc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Sm(s,o,l){const d=o[10];d.begin&&d.begin();try{Da(s,o,s.template,l)}catch(h){throw Dc(o,h),h}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gC(s,o){zd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,"");this._appRef=o}}class JS extends Fp{constructor(o){super(o),this._view=o}detectChanges(){wE(this._view)}checkNoChanges(){}get context(){return null}}class Z0 extends Pa{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Q(o);return new H0(l,this.ngModule)}}function SI(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class e1{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,d){const h=this.injector.get(o,q0,d);return h!==q0||l===q0?h:this.parentInjector.get(o,l,d)}}class H0 extends CI{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function _P(s){return s.map(mP).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return SI(this.componentDef.inputs)}get outputs(){return SI(this.componentDef.outputs)}create(o,l,d,h){let p=(h=h||this.ngModule)instanceof Wd?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new e1(o,p):o,b=y.get(j0,la),E=y.get(QS,null),x=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=d?function ym(s,o,l){if(gn(s))return s.selectRootElement(o,l===Gt.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(x,d,this.componentDef.encapsulation):_c(b.createRenderer(null,this.componentDef),N,function XS(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),re=this.componentDef.onPush?288:272,ye=function $v(s,o){return{components:[],scheduler:s||EA,clean:hl,playerHandler:o||null,flags:0}}(),Fe=ah(0,null,null,1,0,null,null,null,null,null),We=Qf(null,Fe,ye,re,null,null,b,x,E,y,null);let et,lt;ro(We);try{const Mt=function Hv(s,o,l,d,h,p){const y=l[1];l[22]=s;const E=vo(y,22,2,"#host",null),x=E.mergedAttrs=o.hostAttrs;null!==x&&(sp(E,x,!0),null!==s&&(Fr(h,s,x),null!==E.classes&&om(h,s,E.classes),null!==E.styles&&sm(h,s,E.styles)));const N=d.createRenderer(s,o),B=Qf(l,xv(o),null,o.onPush?32:16,l[22],E,d,N,p||null,null,null);return y.firstCreatePass&&(ao(dt(E,l),y,o.type),cl(y,E),Cm(E,l.length,1)),Am(l,B),l[22]=B}(B,this.componentDef,We,b,x);if(B)if(d)Fr(x,B,["ng-version",AI.full]);else{const{attrs:$e,classes:bt}=function yP(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&l.push(p);else{if(!_o(h))break;h=p}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);$e&&Fr(x,B,$e),bt&&bt.length>0&&om(x,B,bt.join(" "))}if(lt=Ro(Fe,22),void 0!==l){const $e=lt.projection=[];for(let bt=0;bt<this.ngContentSelectors.length;bt++){const hn=l[bt];$e.push(null!=hn?Array.from(hn):null)}}et=function up(s,o,l,d,h){const p=l[1],y=function _E(s,o,l){const d=pr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Ec(s,d,o,pu(s,o,1,null),l));const h=Os(o,s,d.directiveStart,d);Ai(h,o);const p=ni(d,o);return p&&Ai(p,o),h}(p,l,o);if(d.components.push(y),s[8]=y,null!==h)for(const E of h)E(y,o);if(o.contentQueries){const E=pr();o.contentQueries(1,y,E.directiveStart)}const b=pr();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(qo(b.index),Rv(l[1],b,0,b.directiveStart,b.directiveEnd,o),tp(o,y)),y}(Mt,this.componentDef,We,ye,[mu]),sh(Fe,We,null)}finally{Yu()}return new xI(this.componentType,et,Zr(lt,We),We,lt)}}class xI extends class KS{}{constructor(o,l,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new JS(h),this.componentType=o}get injector(){return new uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function n1(s,o){return new $0(s,o??null)}class $0 extends Co{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Z0(this);const d=Ye(o);this._bootstrapComponents=iu(d.bootstrap),this._r3Injector=HC(o,l,[{provide:Co,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver}],H(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(o)}get(o,l=cu.THROW_IF_NOT_FOUND,d=gt.Default){return o===cu||o===Co||o===ov?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class i_ extends bI{constructor(o){super(),this.moduleType=o}create(o){return new $0(this.moduleType,o)}}class r1 extends Co{constructor(o,l,d){super(),this.componentFactoryResolver=new Z0(this),this.instance=null;const h=new qC([...o,{provide:Co,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver}],l||uv(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Lp(s,o=null,l=null){return new r1(s,o,l).injector}function s_(s,o,l){const d=Sr()+s,h=je();return h[d]===Ut?Xo(h,d,l?o.call(l):o()):function ch(s,o){return s[o]}(h,d)}function PI(s,o,l,d,h,p){return function W0(s,o,l,d,h,p,y,b){const E=o+l;return hp(s,E,h,p,y)?Xo(s,E+3,b?d.call(b,h,p,y):d(h,p,y)):function Ph(s,o){const l=s[o];return l===Ut?void 0:l}(s,E+3)}(je(),Sr(),s,o,l,d,h,p)}function Hc(s){return o=>{setTimeout(s,void 0,o)}}const ki=class o1 extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){let h=o,p=l||(()=>null),y=d;if(o&&"object"==typeof o){const E=o;h=E.next?.bind(E),p=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(p=Hc(p),h&&(h=Hc(h)),y&&(y=Hc(y)));const b=super.subscribe({next:h,error:p,complete:y});return o instanceof P.w0&&o.add(b),b}};function $c(){return this._results[Jo()]()}class l_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Jo(),d=l_.prototype;d[l]||(d[l]=$c)}get changes(){return this._changes||(this._changes=new ki)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=or(o);(this._changesDetected=!function el(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jp=(()=>{class s{}return s.__NG_ELEMENT_ID__=c_,s})();const a1=jp,Q0=class extends a1{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o,l){const d=this._declarationTContainer.tViews,h=Qf(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),sh(d,h,o),new Fp(h)}};function c_(){return d_(pr(),je())}function d_(s,o){return 4&s.type?new Q0(o,s,Zr(s,o)):null}let qp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zp,s})();function Zp(){return Xi(pr(),je())}const h_=qp,kh=class extends h_{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return Zr(this._hostTNode,this._hostLView)}get injector(){return new uo(this._hostTNode,this._hostLView)}get parentInjector(){const o=pi(this._hostTNode,this._hostLView);if(Fn(o)){const l=tn(o,this._hostLView),d=Mr(o);return new uo(l[1].data[d+8],l)}return new uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=J0(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const y=o.createEmbeddedView(l||{},p);return this.insert(y,h),y}createComponent(o,l,d,h,p){const y=o&&!function Tn(s){return"function"==typeof s}(o);let b;if(y)b=l;else{const B=l||{};b=B.index,d=B.injector,h=B.projectableNodes,p=B.environmentInjector||B.ngModuleRef}const E=y?o:new H0(Q(o)),x=d||this.parentInjector;if(!p&&null==E.ngModule){const re=(y?x:this.parentInjector).get(Wd,null);re&&(p=re)}const N=E.create(x,h,void 0,p);return this.insert(N.hostView,b),N}insert(o,l){const d=o._lView,h=d[1];if(function gd(s){return Or(s[3])}(d)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const B=d[3],re=new kh(B,B[6],B[3]);re.detach(re.indexOf(o))}}const p=this._adjustIndex(l),y=this._lContainer;!function AA(s,o,l,d){const h=10+d,p=l.length;d>0&&(l[h-1][4]=o),d<p-10?(o[4]=l[h],ms(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const y=o[17];null!==y&&l!==y&&function SA(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(y,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=64}(h,d,y,p);const b=uu(p,y),E=d[11],x=au(E,y[7]);return null!==x&&function TA(s,o,l,d,h,p){d[0]=h,d[6]=o,zd(s,d,l,1,h,p)}(h,y[6],E,d,x,b),o.attachToViewContainerRef(),ms(f_(y),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=J0(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=nm(this._lContainer,l);d&&(lo(f_(this._lContainer),l),Wy(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=nm(this._lContainer,l);return d&&null!=lo(f_(this._lContainer),l)?new Fp(d):null}_adjustIndex(o,l=0){return o??this.length+l}};function J0(s){return s[8]}function f_(s){return s[8]||(s[8]=[])}function Xi(s,o){let l;const d=o[s.index];if(Or(d))l=d;else{let h;if(8&s.type)h=On(d);else{const p=o[11];h=p.createComment("");const y=ni(s,o);yc(p,au(p,y),h,function wC(s,o){return gn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=l=rp(d,o,h,s),Am(o,l)}return new kh(l,s,o)}class g_{constructor(o){this.queryList=o,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class ka{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<d;p++){const y=l.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new ka(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==rw(o,l).matches&&this.queries[l].setDirty()}}class Gc{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class m_{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==l?l.push(p):l=[p])}return null!==l?new m_(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Eu{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Eu(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,l,u1(l,p)),this.matchTNodeWithReadOption(o,l,Xl(l,o,p,!1,!1))}else d===jp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Xl(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Op||h===qp||h===jp&&4&l.type)this.addMatch(l.index,-2);else{const p=Xl(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function u1(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function UI(s,o,l,d){return-1===l?function Rh(s,o){return 11&s.type?Zr(s,o):4&s.type?d_(s,o):null}(o,s):-2===l?function Sl(s,o,l){return l===Op?Zr(o,s):l===jp?d_(o,s):l===qp?Xi(o,s):void 0}(s,o,d):Os(s,s[1],l,o)}function ew(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const p=s.data,y=l.matches,b=[];for(let E=0;E<y.length;E+=2){const x=y[E];b.push(x<0?null:UI(o,p[x],y[E+1],l.metadata.read))}h.matches=b}return h.matches}function tw(s,o,l,d){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const y=ew(s,o,h,l);for(let b=0;b<p.length;b+=2){const E=p[b];if(E>0)d.push(y[b/2]);else{const x=p[b+1],N=o[-E];for(let B=10;B<N.length;B++){const re=N[B];re[17]===re[3]&&tw(re[1],re,x,d)}if(null!==N[9]){const B=N[9];for(let re=0;re<B.length;re++){const ye=B[re];tw(ye[1],ye,x,d)}}}}}return d}function VI(s){const o=je(),l=qt(),d=ma();Wu(d+1);const h=rw(l,d);if(s.dirty&&Gl(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?tw(l,o,d,[]):ew(l,o,h,d);s.reset(p,II),s.notifyOnChanges()}return!0}return!1}function BI(s,o,l){const d=qt();d.firstCreatePass&&(nw(d,new Gc(s,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),ZI(d,je(),o)}function jI(s,o,l,d){const h=qt();if(h.firstCreatePass){const p=pr();nw(h,new Gc(o,l,d),p.index),function l1(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}ZI(h,je(),l)}function Hp(){return function qI(s,o){return s[19].queries[o].queryList}(je(),ma())}function ZI(s,o,l){const d=new l_(4==(4&l));vm(s,o,d,d.destroy),null===o[19]&&(o[19]=new ka),o[19].queries.push(new g_(d))}function nw(s,o,l){null===s.queries&&(s.queries=new m_),s.queries.track(new Eu(o,l))}function rw(s,o){return s.queries.getByIndex(o)}function xl(s,o){return d_(s,o)}function Iu(s){const o=Q(s)||X(s)||Pe(s);return null!==o&&o.standalone}function Kc(...s){}const S_=new Mn("Application Initializer");let Wp=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Kc,this.reject=Kc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(e0(p))l.push(p);else if(OE(p)){const y=new Promise((b,E)=>{p.subscribe({complete:b,error:E})});l.push(y)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(wt(S_,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const nT=new Mn("AppId",{providedIn:"root",factory:function rT(){return`${hw()}${hw()}${hw()}`}});function hw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iT=new Mn("Platform Initializer"),Kp=new Mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),x_=new Mn("appBootstrapListener");let M_=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Lh=new Mn("LocaleId",{providedIn:"root",factory:()=>function Gr(s,o=gt.Default){return wt(s,o)}(Lh,gt.Optional|gt.SkipSelf)||function Qp(){return typeof $localize<"u"&&$localize.locale||El}()}),oT=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class lT{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let I1=(()=>{class s{compileModuleSync(l){return new i_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),p=iu(Ye(l).declarations).reduce((y,b)=>{const E=Q(b);return E&&y.push(new H0(E)),y},[]);return new lT(d,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const pw=(()=>Promise.resolve(0))();function gw(s){typeof Zone>"u"?pw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ri{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ki(!1),this.onMicrotaskEmpty=new ki(!1),this.onStable=new ki(!1),this.onError=new ki(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function mw(){let s=Je.requestAnimationFrame,o=Je.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function yw(s){const o=()=>{!function Uh(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Je,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,vw(s),s.isCheckStableRunning=!0,P_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),vw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,p,y,b)=>{try{return cT(s),l.invokeTask(h,p,y,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),ww(s)}},onInvoke:(l,d,h,p,y,b,E)=>{try{return cT(s),l.invoke(h,p,y,b,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),ww(s)}},onHasTask:(l,d,h,p)=>{l.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,vw(s),P_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,d,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ri.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ri.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,_w,Kc,Kc);try{return p.runTask(y,l,d)}finally{p.cancelTask(y)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const _w={};function P_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function vw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function cT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ww(s){s._nesting--,P_(s)}class dT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ki,this.onMicrotaskEmpty=new ki,this.onStable=new ki,this.onError=new ki}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}const hT=new Mn(""),k_=new Mn("");let Jp,T1=(()=>{class s{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Jp||(function D1(s){Jp=s}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ri.assertNotInAngularZone(),gw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gw(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(wt(Ri),wt(R_),wt(k_))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),R_=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Jp?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Pl=null;const N_=new Mn("AllowMultipleToken"),bw=new Mn("PlatformOnDestroy");class kl{constructor(o,l){this.name=o,this.token=l}}function Jc(s,o,l=[]){const d=`Platform: ${o}`,h=new Mn(d);return(p=[])=>{let y=Xp();if(!y||y.injector.get(N_,!1)){const b=[...l,...p,{provide:h,useValue:!0}];s?s(b):function Ew(s){if(Pl&&!Pl.get(N_,!1))throw new Ie(400,"");Pl=s;const o=s.get(O_);(function Qc(s){const o=s.get(iT,null);o&&o.forEach(l=>l())})(s)}(function pT(s=[],o){return cu.create({name:o,providers:[{provide:lm,useValue:"platform"},{provide:bw,useValue:()=>Pl=null},...s]})}(b,d))}return function S1(s){const o=Xp();if(!o)throw new Ie(401,"");return o}()}}function Xp(){return Pl?.get(O_)??null}let O_=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function x1(s,o){let l;return l="noop"===s?new dT:("zone.js"===s?void 0:s)||new Ri(o),l}(d?.ngZone,function F_(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:Ri,useValue:h}];return h.run(()=>{const y=cu.create({providers:p,parent:this.injector,name:l.moduleType.name}),b=l.create(y),E=b.injector.get(Of,null);if(!E)throw new Ie(402,"");return h.runOutsideAngular(()=>{const x=h.onError.subscribe({next:N=>{E.handleError(N)}});b.onDestroy(()=>{U_(this._modules,b),x.unsubscribe()})}),function mT(s,o,l){try{const d=l();return e0(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(E,h,()=>{const x=b.injector.get(Wp);return x.runInitializers(),x.donePromise.then(()=>(function Jm(s){Lt(s,"Expected localeId to be defined"),"string"==typeof s&&(b0=s.toLowerCase().replace(/_/g,"-"))}(b.injector.get(Lh,El)||El),this._moduleDoBootstrap(b),b))})})}bootstrapModule(l,d=[]){const h=L_({},d);return function Cw(s,o,l){const d=new i_(l);return Promise.resolve(d)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const d=l.injector.get(jh);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ie(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d()),this._injector.get(bw,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(wt(cu))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function L_(s,o){return Array.isArray(o)?o.reduce(L_,s):{...s,...o}}let jh=(()=>{class s{constructor(l,d,h,p){this._zone=l,this._injector=d,this._exceptionHandler=h,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new D.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),b=new D.y(E=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ri.assertNotInAngularZone(),gw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Ri.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{x.unsubscribe(),N.unsubscribe()}});this.isStable=(0,F.T)(y,b.pipe((0,U.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof CI;if(!this._initStatus.done)throw!h&&Iu(l),new Ie(405,false);let p;p=h?l:this._injector.get(Pa).resolveComponentFactory(l),this.componentTypes.push(p.componentType);const y=function Vh(s){return s.isBoundToModule}(p)?void 0:this._injector.get(Co),E=p.create(cu.NULL,[],d||p.selector,y),x=E.location.nativeElement,N=E.injector.get(hT,null);return N?.registerApplication(x),E.onDestroy(()=>{this.detachView(E.hostView),U_(this.components,E),N?.unregisterApplication(x)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ie(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;U_(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(x_,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>U_(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ie(406,false);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(wt(Ri),wt(cu),wt(Of),wt(Wp))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function U_(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Tw=!0,Dw=!1;function _T(){return Dw=!0,Tw}function yT(){if(Dw)throw new Error("Cannot enable prod mode after platform setup.");Tw=!1}let P1=(()=>{class s{}return s.__NG_ELEMENT_ID__=Aw,s})();function Aw(s){return function Sw(s,o,l){if(xo(s)&&!l){const d=ln(s.index,o);return new Fp(d,d)}return 47&s.type?new Fp(o[16],o):null}(pr(),je(),16==(16&s))}class j_{constructor(){}supports(o){return lh(o)}create(o){return new Mw(o)}}const Tu=(s,o)=>o;class Mw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Tu}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,p=null;for(;l||d;){const y=!d||l&&l.currentIndex<AT(d,h,p)?l:d,b=AT(y,h,p),E=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{p||(p=[]);const x=b-h,N=E-h;if(x!=N){for(let re=0;re<x;re++){const ye=re<p.length?p[re]:p[re]=0,Fe=ye+re;N<=Fe&&Fe<x&&(p[re]=ye+1)}p[y.previousIndex]=N-x}}b!==E&&o(y,b,E)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!lh(o))throw new Ie(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],y=this._trackByFn(b,p),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,p,y,b)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,y,b),d=!0),l=l._next}else h=0,function Kv(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Jo()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,b=>{y=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,b,y,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,y,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new O1(l,d),p,h),o}_verifyReinsertion(o,l,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new DT),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class O1{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class DT{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new Pw,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AT(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class q_{constructor(){}supports(o){return o instanceof Map||Um(o)}create(){return new F1}}class F1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Um(o)))throw new Ie(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new kw(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class kw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ST(){return new ig([new j_])}let ig=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||ST()),deps:[[s,new Wi,new ys]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Ie(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:ST}),s})();function Z_(){return new H_([new q_])}let H_=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||Z_()),deps:[[s,new Wi,new ys]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(d)return d;throw new Ie(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Z_}),s})();const Nw=Jc(null,"core",[]);let L1=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(wt(jh))},s.\u0275mod=Nt({type:s}),s.\u0275inj=Kt({}),s})();function Ow(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ze,G,M)=>{"use strict";M.d(G,{Z:()=>Ie});var u=M(2090),P=M(4859),D=M(9681),F=M(1877);class U{constructor(he,fe){this._delegate=he,this.firebase=fe,(0,D._addComponent)(he,new P.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,D.deleteApp)(this._delegate)))}_getService(he,fe=D._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Me=this._delegate.container.getProvider(he);return!Me.isInitialized()&&"EXPLICIT"===(null===(Re=Me.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Me.initialize(),Me.getImmediate({identifier:fe})}_removeServiceInstance(he,fe=D._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(fe)}_addComponent(he){(0,D._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,D._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const W=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ae(){const Ze=function H(Ze){const he={},fe={__esModule:!0,initializeApp:function xe(ie,ue={}){const me=D.initializeApp(ie,ue);if((0,u.r3)(he,me.name))return he[me.name];const K=new Ze(me,fe);return he[me.name]=K,K},app:Me,registerVersion:D.registerVersion,setLogLevel:D.setLogLevel,onLog:D.onLog,apps:null,SDK_VERSION:D.SDK_VERSION,INTERNAL:{registerComponent:function de(ie){const ue=ie.name,me=ue.replace("-compat","");if(D._registerComponent(ie)&&"PUBLIC"===ie.type){const K=(ne=Me())=>{if("function"!=typeof ne[me])throw W.create("invalid-app-argument",{appName:ue});return ne[me]()};void 0!==ie.serviceProps&&(0,u.ZB)(K,ie.serviceProps),fe[me]=K,Ze.prototype[me]=function(...ne){return this._getService.bind(this,ue).apply(this,ie.multipleInstances?ne:[])}}return"PUBLIC"===ie.type?fe[me]:null},removeApp:function Re(ie){delete he[ie]},useAsService:function Oe(ie,ue){return"serverAuth"===ue?null:ue},modularAPIs:D}};function Me(ie){if(!(0,u.r3)(he,ie=ie||D._DEFAULT_ENTRY_NAME))throw W.create("no-app",{appName:ie});return he[ie]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function Ne(){return Object.keys(he).map(ie=>he[ie])}}),Me.App=Ze,fe}(U);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function he(fe){(0,u.ZB)(Ze,fe)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ze}(),$=new F.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ze=self.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=Z;!function be(Ze){(0,D.registerVersion)("@firebase/app-compat","0.1.27",Ze)}()},9681:(ze,G,M)=>{"use strict";M.r(G),M.d(G,{FirebaseError:()=>F.ZR,SDK_VERSION:()=>Ei,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>on,_addOrOverwriteComponent:()=>Qt,_apps:()=>en,_clearComponents:()=>Zn,_components:()=>Rn,_getProvider:()=>Kt,_registerComponent:()=>Ot,_removeServiceInstance:()=>Jt,deleteApp:()=>gt,getApp:()=>Hn,getApps:()=>os,initializeApp:()=>Li,onLog:()=>Xt,registerVersion:()=>An,setLogLevel:()=>Nr});var u=M(5861),P=M(4859),D=M(1877),F=M(2090),U=M(8766);class q{constructor(ge){this.container=ge}getPlatformInfoString(){return this.container.getProviders().map(Ue=>{if(function W(ee){return"VERSION"===ee.getComponent()?.type}(Ue)){const tt=Ue.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(Ue=>Ue).join(" ")}}const H="@firebase/app",Z=new D.Yd("@firebase/app"),Lt="[DEFAULT]",Qe={[H]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,Rn=new Map;function on(ee,ge){try{ee.container.addComponent(ge)}catch(Ue){Z.debug(`Component ${ge.name} failed to register with FirebaseApp ${ee.name}`,Ue)}}function Qt(ee,ge){ee.container.addOrOverwriteComponent(ge)}function Ot(ee){const ge=ee.name;if(Rn.has(ge))return Z.debug(`There were multiple attempts to register component ${ge}.`),!1;Rn.set(ge,ee);for(const Ue of en.values())on(Ue,ee);return!0}function Kt(ee,ge){const Ue=ee.container.getProvider("heartbeat").getImmediate({optional:!0});return Ue&&Ue.triggerHeartbeat(),ee.container.getProvider(ge)}function Jt(ee,ge,Ue=Lt){Kt(ee,ge).clearInstance(Ue)}function Zn(){Rn.clear()}const vn=new F.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ss{constructor(ge,Ue,tt){this._isDeleted=!1,this._options=Object.assign({},ge),this._config=Object.assign({},Ue),this._name=Ue.name,this._automaticDataCollectionEnabled=Ue.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new P.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this.checkDestroyed(),this._automaticDataCollectionEnabled=ge}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ge){this._isDeleted=ge}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}const Ei="9.8.3";function Li(ee,ge={}){"object"!=typeof ge&&(ge={name:ge});const Ue=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},ge),tt=Ue.name;if("string"!=typeof tt||!tt)throw vn.create("bad-app-name",{appName:String(tt)});const yt=en.get(tt);if(yt){if((0,F.vZ)(ee,yt.options)&&(0,F.vZ)(Ue,yt.config))return yt;throw vn.create("duplicate-app",{appName:tt})}const Nt=new P.H0(tt);for(const St of Rn.values())Nt.addComponent(St);const _n=new ss(ee,Ue,Nt);return en.set(tt,_n),_n}function Hn(ee=Lt){const ge=en.get(ee);if(!ge)throw vn.create("no-app",{appName:ee});return ge}function os(){return Array.from(en.values())}function gt(ee){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,u.Z)(function*(ee){const ge=ee.name;en.has(ge)&&(en.delete(ge),yield Promise.all(ee.container.getProviders().map(Ue=>Ue.delete())),ee.isDeleted=!0)})).apply(this,arguments)}function An(ee,ge,Ue){var tt;let yt=null!==(tt=Qe[ee])&&void 0!==tt?tt:ee;Ue&&(yt+=`-${Ue}`);const Nt=yt.match(/\s|\//),_n=ge.match(/\s|\//);if(Nt||_n){const St=[`Unable to register library "${yt}" with version "${ge}":`];return Nt&&St.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),Nt&&_n&&St.push("and"),_n&&St.push(`version name "${ge}" contains illegal characters (whitespace or "/")`),void Z.warn(St.join(" "))}Ot(new P.wA(`${yt}-version`,()=>({library:yt,version:ge}),"VERSION"))}function Xt(ee,ge){if(null!==ee&&"function"!=typeof ee)throw vn.create("invalid-log-argument");(0,D.Am)(ee,ge)}function Nr(ee){(0,D.Ub)(ee)}const Sn="firebase-heartbeat-store";let cr=null;function As(){return cr||(cr=(0,U.X3)("firebase-heartbeat-database",1,{upgrade:(ee,ge)=>{0===ge&&ee.createObjectStore(Sn)}}).catch(ee=>{throw vn.create("storage-open",{originalErrorMessage:ee.message})})),cr}function Je(){return(Je=(0,u.Z)(function*(ee){var ge;try{return(yield As()).transaction(Sn).objectStore(Sn).get(dr(ee))}catch(Ue){throw vn.create("storage-get",{originalErrorMessage:null===(ge=Ue)||void 0===ge?void 0:ge.message})}})).apply(this,arguments)}function at(ee,ge){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(ee,ge){var Ue;try{const yt=(yield As()).transaction(Sn,"readwrite");return yield yt.objectStore(Sn).put(ge,dr(ee)),yt.done}catch(tt){throw vn.create("storage-set",{originalErrorMessage:null===(Ue=tt)||void 0===Ue?void 0:Ue.message})}})).apply(this,arguments)}function dr(ee){return`${ee.name}!${ee.options.appId}`}class Nn{constructor(ge){this.container=ge,this._heartbeatsCache=null;const Ue=this.container.getProvider("app").getImmediate();this._storage=new te(Ue),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var ge=this;return(0,u.Z)(function*(){const tt=ge.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=xn();if(null===ge._heartbeatsCache&&(ge._heartbeatsCache=yield ge._heartbeatsCachePromise),ge._heartbeatsCache.lastSentHeartbeatDate!==yt&&!ge._heartbeatsCache.heartbeats.some(Nt=>Nt.date===yt))return ge._heartbeatsCache.heartbeats.push({date:yt,agent:tt}),ge._heartbeatsCache.heartbeats=ge._heartbeatsCache.heartbeats.filter(Nt=>{const _n=new Date(Nt.date).valueOf();return Date.now()-_n<=2592e6}),ge._storage.overwrite(ge._heartbeatsCache)})()}getHeartbeatsHeader(){var ge=this;return(0,u.Z)(function*(){if(null===ge._heartbeatsCache&&(yield ge._heartbeatsCachePromise),null===ge._heartbeatsCache||0===ge._heartbeatsCache.heartbeats.length)return"";const Ue=xn(),{heartbeatsToSend:tt,unsentEntries:yt}=function se(ee,ge=1024){const Ue=[];let tt=ee.slice();for(const yt of ee){const Nt=Ue.find(_n=>_n.agent===yt.agent);if(Nt){if(Nt.dates.push(yt.date),oe(Ue)>ge){Nt.dates.pop();break}}else if(Ue.push({agent:yt.agent,dates:[yt.date]}),oe(Ue)>ge){Ue.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:Ue,unsentEntries:tt}}(ge._heartbeatsCache.heartbeats),Nt=(0,F.L)(JSON.stringify({version:2,heartbeats:tt}));return ge._heartbeatsCache.lastSentHeartbeatDate=Ue,yt.length>0?(ge._heartbeatsCache.heartbeats=yt,yield ge._storage.overwrite(ge._heartbeatsCache)):(ge._heartbeatsCache.heartbeats=[],ge._storage.overwrite(ge._heartbeatsCache)),Nt})()}}function xn(){return(new Date).toISOString().substring(0,10)}class te{constructor(ge){this.app=ge,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,F.hl)()&&(0,F.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ge=this;return(0,u.Z)(function*(){return(yield ge._canUseIndexedDBPromise)&&(yield function Gt(ee){return Je.apply(this,arguments)}(ge.app))||{heartbeats:[]}})()}overwrite(ge){var Ue=this;return(0,u.Z)(function*(){var tt;if(yield Ue._canUseIndexedDBPromise){const Nt=yield Ue.read();return at(Ue.app,{lastSentHeartbeatDate:null!==(tt=ge.lastSentHeartbeatDate)&&void 0!==tt?tt:Nt.lastSentHeartbeatDate,heartbeats:ge.heartbeats})}})()}add(ge){var Ue=this;return(0,u.Z)(function*(){var tt;if(yield Ue._canUseIndexedDBPromise){const Nt=yield Ue.read();return at(Ue.app,{lastSentHeartbeatDate:null!==(tt=ge.lastSentHeartbeatDate)&&void 0!==tt?tt:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...ge.heartbeats]})}})()}}function oe(ee){return(0,F.L)(JSON.stringify({version:2,heartbeats:ee})).length}!function ke(ee){Ot(new P.wA("platform-logger",ge=>new q(ge),"PRIVATE")),Ot(new P.wA("heartbeat",ge=>new Nn(ge),"PRIVATE")),An(H,"0.7.26",ee),An(H,"0.7.26","esm2017"),An("fire-js","")}("")},4859:(ze,G,M)=>{"use strict";M.d(G,{H0:()=>H,wA:()=>D,zt:()=>U});var u=M(5861),P=M(2090);class D{constructor(Z,$,J){this.name=Z,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const F="[DEFAULT]";class U{constructor(Z,$){this.name=Z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const $=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has($)){const J=new P.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const Te=this.getOrInitializeService({instanceIdentifier:$});Te&&J.resolve(Te)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(Z){var $;const J=this.normalizeInstanceIdentifier(Z?.identifier),Te=null!==($=Z?.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Te)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(be){if(Te)return null;throw be}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function W(ae){return"EAGER"===ae.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:F})}catch{}for(const[$,J]of this.instancesDeferred.entries()){const Te=this.normalizeInstanceIdentifier($);try{const be=this.getOrInitializeService({instanceIdentifier:Te});J.resolve(be)}catch{}}}}clearInstance(Z=F){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,u.Z)(function*(){const $=Array.from(Z.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=F){return this.instances.has(Z)}getOptions(Z=F){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:$={}}=Z,J=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Te=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[be,Ie]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(be)&&Ie.resolve(Te);return Te}onInit(Z,$){var J;const Te=this.normalizeInstanceIdentifier($),be=null!==(J=this.onInitCallbacks.get(Te))&&void 0!==J?J:new Set;be.add(Z),this.onInitCallbacks.set(Te,be);const Ie=this.instances.get(Te);return Ie&&Z(Ie,Te),()=>{be.delete(Z)}}invokeOnInitCallbacks(Z,$){const J=this.onInitCallbacks.get($);if(J)for(const Te of J)try{Te(Z,$)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:$={}}){let J=this.instances.get(Z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=Z,ae===F?void 0:ae),options:$}),this.instances.set(Z,J),this.instancesOptions.set(Z,$),this.invokeOnInitCallbacks(J,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,J)}catch{}var ae;return J||null}normalizeInstanceIdentifier(Z=F){return this.component?this.component.multipleInstances?Z:F:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const $=this.getProvider(Z.name);if($.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);$.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const $=new U(Z,this);return this.providers.set(Z,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ze,G,M)=>{"use strict";M.d(G,{Am:()=>ae,Ub:()=>H,Yd:()=>W,in:()=>P});const u=[];var P=(()=>{return(Z=P||(P={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",P;var Z})();const D={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},F=P.INFO,U={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},q=(Z,$,...J)=>{if($<Z.logLevel)return;const Te=(new Date).toISOString(),be=U[$];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[be](`[${Te}]  ${Z.name}:`,...J)};class W{constructor($){this.name=$,this._logLevel=F,this._logHandler=q,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in P))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?D[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...$),this._logHandler(this,P.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...$),this._logHandler(this,P.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,P.INFO,...$),this._logHandler(this,P.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,P.WARN,...$),this._logHandler(this,P.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...$),this._logHandler(this,P.ERROR,...$)}}function H(Z){u.forEach($=>{$.setLogLevel(Z)})}function ae(Z,$){for(const J of u){let Te=null;$&&$.level&&(Te=D[$.level]),J.userLogHandler=null===Z?null:(be,Ie,...Ze)=>{const he=Ze.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");Ie>=(Te??be.logLevel)&&Z({level:P[Ie].toLowerCase(),message:he,args:Ze,type:be.name})}}}},8766:(ze,G,M)=>{"use strict";M.d(G,{Lj:()=>xe,X3:()=>Me});var u=M(5861);let D,F;const W=new WeakMap,H=new WeakMap,ae=new WeakMap,Z=new WeakMap,$=new WeakMap;let be={get(ue,me,K){if(ue instanceof IDBTransaction){if("done"===me)return H.get(ue);if("objectStoreNames"===me)return ue.objectStoreNames||ae.get(ue);if("store"===me)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return fe(ue[me])},set:(ue,me,K)=>(ue[me]=K,!0),has:(ue,me)=>ue instanceof IDBTransaction&&("done"===me||"store"===me)||me in ue};function he(ue){return"function"==typeof ue?function Ze(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...me){return ue.apply(Re(this),me),fe(W.get(this))}:function(...me){return fe(ue.apply(Re(this),me))}:function(me,...K){const ne=ue.call(Re(this),me,...K);return ae.set(ne,me.sort?me.sort():[me]),fe(ne)}}(ue):(ue instanceof IDBTransaction&&function Te(ue){if(H.has(ue))return;const me=new Promise((K,ne)=>{const le=()=>{ue.removeEventListener("complete",pe),ue.removeEventListener("error",we),ue.removeEventListener("abort",we)},pe=()=>{K(),le()},we=()=>{ne(ue.error||new DOMException("AbortError","AbortError")),le()};ue.addEventListener("complete",pe),ue.addEventListener("error",we),ue.addEventListener("abort",we)});H.set(ue,me)}(ue),((ue,me)=>me.some(K=>ue instanceof K))(ue,function U(){return D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,be):ue)}function fe(ue){if(ue instanceof IDBRequest)return function J(ue){const me=new Promise((K,ne)=>{const le=()=>{ue.removeEventListener("success",pe),ue.removeEventListener("error",we)},pe=()=>{K(fe(ue.result)),le()},we=()=>{ne(ue.error),le()};ue.addEventListener("success",pe),ue.addEventListener("error",we)});return me.then(K=>{K instanceof IDBCursor&&W.set(K,ue)}).catch(()=>{}),$.set(me,ue),me}(ue);if(Z.has(ue))return Z.get(ue);const me=he(ue);return me!==ue&&(Z.set(ue,me),$.set(me,ue)),me}const Re=ue=>$.get(ue);function Me(ue,me,{blocked:K,upgrade:ne,blocking:le,terminated:pe}={}){const we=indexedDB.open(ue,me),Ge=fe(we);return ne&&we.addEventListener("upgradeneeded",mt=>{ne(fe(we.result),mt.oldVersion,mt.newVersion,fe(we.transaction))}),K&&we.addEventListener("blocked",()=>K()),Ge.then(mt=>{pe&&mt.addEventListener("close",()=>pe()),le&&mt.addEventListener("versionchange",()=>le())}).catch(()=>{}),Ge}function xe(ue,{blocked:me}={}){const K=indexedDB.deleteDatabase(ue);return me&&K.addEventListener("blocked",()=>me()),fe(K).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],Oe=new Map;function ie(ue,me){if(!(ue instanceof IDBDatabase)||me in ue||"string"!=typeof me)return;if(Oe.get(me))return Oe.get(me);const K=me.replace(/FromIndex$/,""),ne=me!==K,le=de.includes(K);if(!(K in(ne?IDBIndex:IDBObjectStore).prototype)||!le&&!Ne.includes(K))return;const pe=function(){var we=(0,u.Z)(function*(Ge,...mt){const $t=this.transaction(Ge,le?"readwrite":"readonly");let Lt=$t.store;return ne&&(Lt=Lt.index(mt.shift())),(yield Promise.all([Lt[K](...mt),le&&$t.done]))[0]});return function(mt){return we.apply(this,arguments)}}();return Oe.set(me,pe),pe}!function Ie(ue){be=ue(be)}(ue=>({...ue,get:(me,K,ne)=>ie(me,K)||ue.get(me,K,ne),has:(me,K)=>!!ie(me,K)||ue.has(me,K)}))},5861:(ze,G,M)=>{"use strict";function u(D,F,U,q,W,H,ae){try{var Z=D[H](ae),$=Z.value}catch(J){return void U(J)}Z.done?F($):Promise.resolve($).then(q,W)}function P(D){return function(){var F=this,U=arguments;return new Promise(function(q,W){var H=D.apply(F,U);function ae($){u(H,q,W,ae,Z,"next",$)}function Z($){u(H,q,W,ae,Z,"throw",$)}ae(void 0)})}}M.d(G,{Z:()=>P})}},ze=>{ze(ze.s=1398)}]);